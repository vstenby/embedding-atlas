(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const d9=!1;var Lg=Array.isArray,idt=Array.prototype.indexOf,O5=Array.from,Jy=Object.defineProperty,_u=Object.getOwnPropertyDescriptor,p9=Object.getOwnPropertyDescriptors,odt=Object.prototype,sdt=Array.prototype,D5=Object.getPrototypeOf,c7=Object.isExtensible;function r0(e){return typeof e=="function"}const vn=()=>{};function adt(e){return e()}function Zy(e){for(var t=0;t<e.length;t++)e[t]()}function ldt(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function qT(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const zs=2,L5=4,oS=8,Fg=16,Lu=32,Zd=64,F5=128,Ra=256,Ow=512,Vi=1024,La=2048,Fu=4096,ll=8192,Qd=16384,sS=32768,tp=65536,u7=1<<17,cdt=1<<18,aS=1<<19,B5=1<<20,jT=1<<21,P5=1<<22,od=1<<23,oc=Symbol("$state"),z5=Symbol("legacy props"),udt=Symbol(""),U5=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},q5=3,Z0=8;function fdt(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function s1(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hdt(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ddt(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function pdt(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gdt(e){throw new Error("https://svelte.dev/e/effect_orphan")}function mdt(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ydt(){throw new Error("https://svelte.dev/e/hydration_failed")}function vdt(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function bdt(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function _dt(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wdt(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xdt(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Sdt(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const lS=1,cS=2,g9=4,Adt=8,Edt=16,kdt=1,Tdt=2,Mdt=4,Idt=8,Rdt=16,Cdt=1,Ndt=2,$dt=4,m9=1,Odt=2,y9="[",j5="[!",V5="]",sd={},wi=Symbol(),Ddt="http://www.w3.org/1999/xhtml",Ldt="@attach";function a1(e){console.warn("https://svelte.dev/e/hydration_mismatch")}function Fdt(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Bdt(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ze=!1;function ol(e){ze=e}let an;function Bo(e){if(e===null)throw a1(),sd;return an=e}function Mu(){return Bo(Al(an))}function et(e){if(ze){if(Al(an)!==null)throw a1(),sd;an=e}}function Td(e=1){if(ze){for(var t=e,n=an;t--;)n=Al(n);an=n}}function Dw(){for(var e=0,t=an;;){if(t.nodeType===Z0){var n=t.data;if(n===V5){if(e===0)return t;e-=1}else(n===y9||n===j5)&&(e+=1)}var r=Al(t);t.remove(),t=r}}function v9(e){if(!e||e.nodeType!==Z0)throw a1(),sd;return e.data}function b9(e){return e===this.v}function uS(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Pdt(e,t){return e!==t}function _9(e){return!uS(e,this.v)}let Bg=!1,zdt=!1;function Udt(){Bg=!0}let Fn=null;function Q0(e){Fn=e}function f7(e){return w9().get(e)}function h7(e,t){return w9().set(e,t),t}function Re(e,t=!1,n){Fn={p:Fn,c:null,e:null,s:e,x:null,l:Bg&&!t?{s:null,u:null,$:[]}:null}}function Ce(e){var t=Fn,n=t.e;if(n!==null){t.e=null;for(var r of n)P9(r)}return e!==void 0&&(t.x=e),Fn=t.p,e??{}}function ep(){return!Bg||Fn!==null&&Fn.l===null}function w9(e){return Fn===null&&s1(),Fn.c??=new Map(qdt(Fn)||void 0)}function qdt(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}const jdt=new WeakMap;function x9(e){var t=He;if(t===null)return hn.f|=od,e;if((t.f&sS)===0){if((t.f&F5)===0)throw!t.parent&&e instanceof Error&&S9(e),e;t.b.error(e)}else Qy(e,t)}function Qy(e,t){for(;t!==null;){if((t.f&F5)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&S9(e),e}function S9(e){const t=jdt.get(e);t&&(Jy(e,"message",{value:t.message}),Jy(e,"stack",{value:t.stack}))}const Vdt=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let tv=[],ev=[];function A9(){var e=tv;tv=[],Zy(e)}function E9(){var e=ev;ev=[],Zy(e)}function np(e){tv.length===0&&queueMicrotask(A9),tv.push(e)}function Wdt(e){ev.length===0&&Vdt(E9),ev.push(e)}function Ydt(){tv.length>0&&A9(),ev.length>0&&E9()}function Hdt(e){let t=0,n=Rd(0),r;return()=>{opt()&&(x(n),rp(()=>(t===0&&(r=bs(()=>e(()=>Ny(n)))),t+=1,()=>{np(()=>{t-=1,t===0&&(r?.(),r=void 0,Ny(n))})})))}}var Gdt=tp|aS|F5;function Xdt(e,t,n){new Kdt(e,t,n)}class Kdt{pending=!1;parent;#t;#e;#n;#r;#c;#i=null;#o=null;#a=null;#s=null;#l=0;#f=!1;#u=null;#p=()=>{this.#u&&eg(this.#u,this.#l)};#h=Hdt(()=>(this.#u=Rd(this.#l),()=>{this.#u=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#r=r,this.#e=an,this.parent=He.b,this.pending=!!this.#n.pending,this.#c=lh(()=>{He.b=this,ze&&Mu();const i=this.#n.pending;if(ze&&i)this.#o=ji(()=>i(this.#t)),nv.enqueue(()=>{this.#i=this.#d(()=>(nv.ensure(),ji(()=>this.#r(this.#t)))),this.#l>0?this.#g():($f(this.#o,()=>{this.#o=null}),this.pending=!1)});else{try{this.#i=ji(()=>r(this.#t))}catch(o){this.error(o)}this.#l>0?this.#g():this.pending=!1}},Gdt),ze&&(this.#t=an)}has_pending_snippet(){return!!this.#n.pending}#d(t){var n=He,r=hn,i=Fn;hc(this.#c),as(this.#c),Q0(this.#c.ctx);try{return t()}catch(o){return x9(o),null}finally{hc(n),as(r),Q0(i)}}#g(){const t=this.#n.pending;this.#i!==null&&(this.#s=document.createDocumentFragment(),Jdt(this.#i,this.#s)),this.#o===null&&(this.#o=ji(()=>t(this.#t)))}#m(t){this.#l+=t,this.#l===0&&(this.pending=!1,this.#o&&$f(this.#o,()=>{this.#o=null}),this.#s&&(this.#t.before(this.#s),this.#s=null))}update_pending_count(t){this.has_pending_snippet()?this.#m(t):this.parent&&this.parent.#m(t),VT.add(this.#p)}get_effect_pending(){return this.#h(),x(this.#u)}error(t){var n=this.#n.onerror;let r=this.#n.failed;this.#i&&(co(this.#i),this.#i=null),this.#o&&(co(this.#o),this.#o=null),this.#a&&(co(this.#a),this.#a=null),ze&&(Bo(this.#e),Td(),Bo(Dw()));var i=!1,o=!1;const s=()=>{if(i){Bdt();return}i=!0,o&&Sdt(),this.#l=0,this.#a!==null&&$f(this.#a,()=>{this.#a=null}),this.pending=!0,this.#i=this.#d(()=>(this.#f=!1,ji(()=>this.#r(this.#t)))),this.#l>0?this.#g():this.pending=!1};if(this.#f||!n&&!r)throw t;var a=hn;try{as(null),o=!0,n?.(t,s),o=!1}catch(l){Qy(l,this.#c&&this.#c.parent)}finally{as(a)}r&&np(()=>{this.#a=this.#d(()=>{this.#f=!0;try{return ji(()=>{r(this.#t,()=>t,()=>s)})}catch(l){return Qy(l,this.#c.parent),null}finally{this.#f=!1}})})}}function Jdt(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:Al(n);t.append(n),n=i}}function Zdt(){for(var e=He.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&fdt(),e}function l1(e){var t=zs|La,n=hn!==null&&(hn.f&zs)!==0?hn:null;return He===null||n!==null&&(n.f&Ra)!==0?t|=Ra:He.f|=aS,{ctx:Fn,deps:null,effects:null,equals:b9,f:t,fn:e,reactions:null,rv:0,v:wi,wv:0,parent:n??He,ac:null}}function Qdt(e,t){let n=He;n===null&&hdt();var r=n.b,i=void 0,o=Rd(wi),s=null,a=!hn;return cpt(()=>{try{var l=e()}catch(p){l=Promise.reject(p)}var c=()=>l;i=s?.then(c,c)??Promise.resolve(l),s=i;var u=Zn,f=r.pending;a&&(r.update_pending_count(1),f||u.increment());const h=(p,g=void 0)=>{s=null,f||u.activate(),g?g!==U5&&(o.f|=od,eg(o,g)):((o.f&od)!==0&&(o.f^=od),eg(o,p)),a&&(r.update_pending_count(-1),f||u.decrement()),I9()};if(i.then(h,p=>h(null,p||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(l=>{function c(u){function f(){u===i?l(o):c(i)}u.then(f,f)}c(i)})}function dt(e){const t=l1(e);return Y9(t),t}function W5(e){const t=l1(e);return t.equals=_9,t}function k9(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)co(t[n])}}function tpt(e){for(var t=e.parent;t!==null;){if((t.f&zs)===0)return t;t=t.parent}return null}function Y5(e){var t,n=He;hc(tpt(e));try{k9(e),t=K9(e)}finally{hc(n)}return t}function T9(e){var t=Y5(e);if(e.equals(t)||(e.v=t,e.wv=G9()),!ip)if(tg!==null)tg.set(e,e.v);else{var n=(Sf||(e.f&Ra)!==0)&&e.deps!==null?Fu:Vi;Po(e,n)}}function M9(e,t,n){const r=ep()?l1:W5;if(t.length===0){n(e.map(r));return}var i=Zn,o=He,s=ept(),a=Zdt();Promise.all(t.map(l=>Qdt(l))).then(l=>{i?.activate(),s();try{n([...e.map(r),...l])}catch(c){(o.f&Qd)===0&&Qy(c,o)}i?.deactivate(),I9()}).catch(l=>{a.error(l)})}function ept(){var e=He,t=hn,n=Fn;return function(){hc(e),as(t),Q0(n)}}function I9(){hc(null),as(null),Q0(null)}const Om=new Set;let Zn=null,Z_=null,tg=null,VT=new Set,Lw=[];function R9(){const e=Lw.shift();Lw.length>0&&queueMicrotask(R9),e()}let Md=[],fS=null,WT=!1,Q_=!1,nv=class YT{current=new Map;#t=new Map;#e=new Set;#n=0;#r=null;#c=!1;#i=[];#o=[];#a=[];#s=[];#l=[];#f=[];#u=[];skipped_effects=new Set;process(t){Md=[],Z_=null;var n=null;if(Om.size>1){n=new Map,tg=new Map;for(const[o,s]of this.current)n.set(o,{v:o.v,wv:o.wv}),o.v=s;for(const o of Om)if(o!==this)for(const[s,a]of o.#t)n.has(s)||(n.set(s,{v:s.v,wv:s.wv}),s.v=a)}for(const o of t)this.#p(o);if(this.#i.length===0&&this.#n===0){this.#d();var r=this.#a,i=this.#s;this.#a=[],this.#s=[],this.#l=[],Z_=Zn,Zn=null,d7(r),d7(i),Zn===null?Zn=this:Om.delete(this),this.#r?.resolve()}else this.#h(this.#a),this.#h(this.#s),this.#h(this.#l);if(n){for(const[o,{v:s,wv:a}]of n)o.wv<=a&&(o.v=s);tg=null}for(const o of this.#i)M0(o);for(const o of this.#o)M0(o);this.#i=[],this.#o=[]}#p(t){t.f^=Vi;for(var n=t.first;n!==null;){var r=n.f,i=(r&(Lu|Zd))!==0,o=i&&(r&Vi)!==0,s=o||(r&ll)!==0||this.skipped_effects.has(n);if(!s&&n.fn!==null){if(i)n.f^=Vi;else if((r&Vi)===0)if((r&L5)!==0)this.#s.push(n);else if((r&P5)!==0){var a=n.b?.pending?this.#o:this.#i;a.push(n)}else c1(n)&&((n.f&Fg)!==0&&this.#l.push(n),M0(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#h(t){for(const n of t)((n.f&La)!==0?this.#f:this.#u).push(n),Po(n,Vi);t.length=0}capture(t,n){this.#t.has(t)||this.#t.set(t,n),this.current.set(t,t.v)}activate(){Zn=this}deactivate(){Zn=null,Z_=null;for(const t of VT)if(VT.delete(t),t(),Zn!==null)break}neuter(){this.#c=!0}flush(){Md.length>0?N9():this.#d(),Zn===this&&(this.#n===0&&Om.delete(this),this.deactivate())}#d(){if(!this.#c)for(const t of this.#e)t();this.#e.clear()}increment(){this.#n+=1}decrement(){if(this.#n-=1,this.#n===0){for(const t of this.#f)Po(t,La),Id(t);for(const t of this.#u)Po(t,Fu),Id(t);this.#a=[],this.#s=[],this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#r??=ldt()).promise}static ensure(){if(Zn===null){const t=Zn=new YT;Om.add(Zn),Q_||YT.enqueue(()=>{Zn===t&&t.flush()})}return Zn}static enqueue(t){Lw.length===0&&queueMicrotask(R9),Lw.unshift(t)}};function C9(e){var t=Q_;Q_=!0;try{for(var n;;){if(Ydt(),Md.length===0&&(Zn?.flush(),Md.length===0))return fS=null,n;N9()}}finally{Q_=t}}function N9(){var e=T0;WT=!0;try{var t=0;for(g7(!0);Md.length>0;){var n=nv.ensure();if(t++>1e3){var r,i;npt()}n.process(Md),ad.clear()}}finally{WT=!1,g7(e),fS=null}}function npt(){try{mdt()}catch(e){Qy(e,fS)}}function d7(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Qd|ll))===0&&c1(r)){var i=Zn?Zn.current.size:0;if(M0(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?j9(r):r.fn=null),Zn!==null&&Zn.current.size>i&&(r.f&B5)!==0)break}}for(;n<t;)Id(e[n++])}}function Id(e){for(var t=fS=e;t.parent!==null;){t=t.parent;var n=t.f;if(WT&&t===He&&(n&Fg)!==0)return;if((n&(Zd|Lu))!==0){if((n&Vi)===0)return;t.f^=Vi}}Md.push(t)}const ad=new Map;function Rd(e,t){var n={f:0,v:e,reactions:null,equals:b9,rv:0,wv:0};return n}function wt(e,t){const n=Rd(e);return Y9(n),n}function k0(e,t=!1,n=!0){const r=Rd(e);return t||(r.equals=_9),Bg&&n&&Fn!==null&&Fn.l!==null&&(Fn.l.s??=[]).push(r),r}function H(e,t,n=!1){hn!==null&&(!nl||(hn.f&u7)!==0)&&ep()&&(hn.f&(zs|Fg|P5|u7))!==0&&!wu?.includes(e)&&xdt();let r=n?Aa(t):t;return eg(e,r)}function eg(e,t){if(!e.equals(t)){var n=e.v;ip?ad.set(e,t):ad.set(e,n),e.v=t;var r=nv.ensure();r.capture(e,n),(e.f&zs)!==0&&((e.f&La)!==0&&Y5(e),Po(e,(e.f&Ra)===0?Vi:Fu)),e.wv=G9(),$9(e,La),ep()&&He!==null&&(He.f&Vi)!==0&&(He.f&(Lu|Zd))===0&&(la===null?fpt([e]):la.push(e))}return t}function Ny(e){H(e,e.v+1)}function $9(e,t){var n=e.reactions;if(n!==null)for(var r=ep(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===He)){var l=(a&La)===0;l&&Po(s,t),(a&zs)!==0?$9(s,Fu):l&&Id(s)}}}function Aa(e){if(typeof e!="object"||e===null||oc in e)return e;const t=D5(e);if(t!==odt&&t!==sdt)return e;var n=new Map,r=Lg(e),i=wt(0),o=ld,s=a=>{if(ld===o)return a();var l=hn,c=ld;as(null),y7(o);var u=a();return as(l),y7(c),u};return r&&n.set("length",wt(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&_dt();var u=n.get(l);return u===void 0?u=s(()=>{var f=wt(c.value);return n.set(l,f),f}):H(u,c.value,!0),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0){if(l in a){const u=s(()=>wt(wi));n.set(l,u),Ny(i)}}else H(c,wi),Ny(i);return!0},get(a,l,c){if(l===oc)return e;var u=n.get(l),f=l in a;if(u===void 0&&(!f||_u(a,l)?.writable)&&(u=s(()=>{var p=Aa(f?a[l]:wi),g=wt(p);return g}),n.set(l,u)),u!==void 0){var h=x(u);return h===wi?void 0:h}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=x(u))}else if(c===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==wi)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(a,l){if(l===oc)return!0;var c=n.get(l),u=c!==void 0&&c.v!==wi||Reflect.has(a,l);if(c!==void 0||He!==null&&(!u||_u(a,l)?.writable)){c===void 0&&(c=s(()=>{var h=u?Aa(a[l]):wi,p=wt(h);return p}),n.set(l,c));var f=x(c);if(f===wi)return!1}return u},set(a,l,c,u){var f=n.get(l),h=l in a;if(r&&l==="length")for(var p=c;p<f.v;p+=1){var g=n.get(p+"");g!==void 0?H(g,wi):p in a&&(g=s(()=>wt(wi)),n.set(p+"",g))}if(f===void 0)(!h||_u(a,l)?.writable)&&(f=s(()=>wt(void 0)),H(f,Aa(c)),n.set(l,f));else{h=f.v!==wi;var y=s(()=>Aa(c));H(f,y)}var v=Reflect.getOwnPropertyDescriptor(a,l);if(v?.set&&v.set.call(u,c),!h){if(r&&typeof l=="string"){var b=n.get("length"),_=Number(l);Number.isInteger(_)&&_>=b.v&&H(b,_+1)}Ny(i)}return!0},ownKeys(a){x(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==wi});for(var[c,u]of n)u.v!==wi&&!(c in a)&&l.push(c);return l},setPrototypeOf(){wdt()}})}function p7(e){try{if(e!==null&&typeof e=="object"&&oc in e)return e[oc]}catch{}return e}function rpt(e,t){return Object.is(p7(e),p7(t))}var HT,O9,D9,L9;function GT(){if(HT===void 0){HT=window,O9=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;D9=_u(t,"firstChild").get,L9=_u(t,"nextSibling").get,c7(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),c7(n)&&(n.__t=void 0)}}function Fa(e=""){return document.createTextNode(e)}function ro(e){return D9.call(e)}function Al(e){return L9.call(e)}function ot(e,t){if(!ze)return ro(e);var n=ro(an);if(n===null)n=an.appendChild(Fa());else if(t&&n.nodeType!==q5){var r=Fa();return n?.before(r),Bo(r),r}return Bo(n),n}function Ht(e,t){if(!ze){var n=ro(e);return n instanceof Comment&&n.data===""?Al(n):n}return an}function mt(e,t=1,n=!1){let r=ze?an:e;for(var i;t--;)i=r,r=Al(r);if(!ze)return r;if(n&&r?.nodeType!==q5){var o=Fa();return r===null?i?.after(o):r.before(o),Bo(o),o}return Bo(r),r}function F9(e){e.textContent=""}function hS(){return!1}function B9(e){He===null&&hn===null&&gdt(),hn!==null&&(hn.f&Ra)!==0&&He===null&&pdt(),ip&&ddt()}function ipt(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function kc(e,t,n,r=!0){var i=He;i!==null&&(i.f&ll)!==0&&(e|=ll);var o={ctx:Fn,deps:null,nodes_start:null,nodes_end:null,f:e|La,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{M0(o),o.f|=sS}catch(l){throw co(o),l}else t!==null&&Id(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&aS)===0;if(!s&&r&&(i!==null&&ipt(o,i),hn!==null&&(hn.f&zs)!==0&&(e&Zd)===0)){var a=hn;(a.effects??=[]).push(o)}return o}function opt(){return hn!==null&&!nl}function dS(e){const t=kc(oS,null,!1);return Po(t,Vi),t.teardown=e,t}function Gi(e){B9();var t=He.f,n=!hn&&(t&Lu)!==0&&(t&sS)===0;if(n){var r=Fn;(r.e??=[]).push(e)}else return P9(e)}function P9(e){return kc(L5|B5,e,!1)}function fe(e){return B9(),kc(oS|B5,e,!0)}function spt(e){nv.ensure();const t=kc(Zd,e,!0);return(n={})=>new Promise(r=>{n.outro?$f(t,()=>{co(t),r(void 0)}):(co(t),r(void 0))})}function Pg(e){return kc(L5,e,!1)}function apt(e,t){var n=Fn,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=rp(()=>{e(),!r.ran&&(r.ran=!0,bs(t))})}function lpt(){var e=Fn;rp(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Vi)!==0&&Po(n,Fu),c1(n)&&M0(n),t.ran=!1}})}function cpt(e){return kc(P5|aS,e,!0)}function rp(e,t=0){return kc(oS|t,e,!0)}function Pt(e,t=[],n=[]){M9(t,n,r=>{kc(oS,()=>e(...r.map(x)),!0)})}function lh(e,t=0){var n=kc(Fg|t,e,!0);return n}function ji(e,t=!0){return kc(Lu,e,!0,t)}function z9(e){var t=e.teardown;if(t!==null){const n=ip,r=hn;m7(!0),as(null);try{t.call(null)}finally{m7(n),as(r)}}}function U9(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(U5);var r=n.next;(n.f&Zd)!==0?n.parent=null:co(n,t),n=r}}function upt(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Lu)===0&&co(t),t=n}}function co(e,t=!0){var n=!1;(t||(e.f&cdt)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(q9(e.nodes_start,e.nodes_end),n=!0),U9(e,t&&!n),Fw(e,0),Po(e,Qd);var r=e.transitions;if(r!==null)for(const o of r)o.stop();z9(e);var i=e.parent;i!==null&&i.first!==null&&j9(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function q9(e,t){for(;e!==null;){var n=e===t?null:Al(e);e.remove(),e=n}}function j9(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function $f(e,t){var n=[];H5(e,n,!0),V9(n,()=>{co(e),t&&t()})}function V9(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function H5(e,t,n){if((e.f&ll)===0){if(e.f^=ll,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&tp)!==0||(r.f&Lu)!==0;H5(r,t,o?n:!1),r=i}}}function G5(e){W9(e,!0)}function W9(e,t){if((e.f&ll)!==0){e.f^=ll,(e.f&Vi)===0&&(Po(e,La),Id(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&tp)!==0||(n.f&Lu)!==0;W9(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let T0=!1;function g7(e){T0=e}let ip=!1;function m7(e){ip=e}let hn=null,nl=!1;function as(e){hn=e}let He=null;function hc(e){He=e}let wu=null;function Y9(e){hn!==null&&(wu===null?wu=[e]:wu.push(e))}let So=null,Ms=0,la=null;function fpt(e){la=e}let H9=1,rv=0,ld=rv;function y7(e){ld=e}let Sf=!1;function G9(){return++H9}function c1(e){var t=e.f;if((t&La)!==0)return!0;if((t&Fu)!==0){var n=e.deps,r=(t&Ra)!==0;if(n!==null){var i,o,s=(t&Ow)!==0,a=r&&He!==null&&!Sf,l=n.length;if((s||a)&&(He===null||(He.f&Qd)===0)){var c=e,u=c.parent;for(i=0;i<l;i++)o=n[i],(s||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);s&&(c.f^=Ow),a&&u!==null&&(u.f&Ra)===0&&(c.f^=Ra)}for(i=0;i<l;i++)if(o=n[i],c1(o)&&T9(o),o.wv>e.wv)return!0}(!r||He!==null&&!Sf)&&Po(e,Vi)}return!1}function X9(e,t,n=!0){var r=e.reactions;if(r!==null&&!wu?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];(o.f&zs)!==0?X9(o,t,!1):t===o&&(n?Po(o,La):(o.f&Vi)!==0&&Po(o,Fu),Id(o))}}function K9(e){var t=So,n=Ms,r=la,i=hn,o=Sf,s=wu,a=Fn,l=nl,c=ld,u=e.f;So=null,Ms=0,la=null,Sf=(u&Ra)!==0&&(nl||!T0||hn===null),hn=(u&(Lu|Zd))===0?e:null,wu=null,Q0(e.ctx),nl=!1,ld=++rv,e.ac!==null&&(e.ac.abort(U5),e.ac=null);try{e.f|=jT;var f=(0,e.fn)(),h=e.deps;if(So!==null){var p;if(Fw(e,Ms),h!==null&&Ms>0)for(h.length=Ms+So.length,p=0;p<So.length;p++)h[Ms+p]=So[p];else e.deps=h=So;if(!Sf||(u&zs)!==0&&e.reactions!==null)for(p=Ms;p<h.length;p++)(h[p].reactions??=[]).push(e)}else h!==null&&Ms<h.length&&(Fw(e,Ms),h.length=Ms);if(ep()&&la!==null&&!nl&&h!==null&&(e.f&(zs|Fu|La))===0)for(p=0;p<la.length;p++)X9(la[p],e);return i!==null&&i!==e&&(rv++,la!==null&&(r===null?r=la:r.push(...la))),(e.f&od)!==0&&(e.f^=od),f}catch(g){return x9(g)}finally{e.f^=jT,So=t,Ms=n,la=r,hn=i,Sf=o,wu=s,Q0(a),nl=l,ld=c}}function hpt(e,t){let n=t.reactions;if(n!==null){var r=idt.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&zs)!==0&&(So===null||!So.includes(t))&&(Po(t,Fu),(t.f&(Ra|Ow))===0&&(t.f^=Ow),k9(t),Fw(t,0))}function Fw(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)hpt(e,n[r])}function M0(e){var t=e.f;if((t&Qd)===0){Po(e,Vi);var n=He,r=T0;He=e,T0=!0;try{(t&Fg)!==0?upt(e):U9(e),z9(e);var i=K9(e);e.teardown=typeof i=="function"?i:null,e.wv=H9;var o;d9&&zdt&&(e.f&La)!==0&&e.deps}finally{T0=r,He=n}}}async function dpt(){await Promise.resolve(),C9()}function x(e){var t=e.f,n=(t&zs)!==0;if(hn!==null&&!nl){var r=He!==null&&(He.f&Qd)!==0;if(!r&&!wu?.includes(e)){var i=hn.deps;if((hn.f&jT)!==0)e.rv<rv&&(e.rv=rv,So===null&&i!==null&&i[Ms]===e?Ms++:So===null?So=[e]:(!Sf||!So.includes(e))&&So.push(e));else{(hn.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[hn]:o.includes(hn)||o.push(hn)}}}else if(n&&e.deps===null&&e.effects===null){var s=e,a=s.parent;a!==null&&(a.f&Ra)===0&&(s.f^=Ra)}if(ip){if(ad.has(e))return ad.get(e);if(n){s=e;var l=s.v;return((s.f&Vi)===0&&s.reactions!==null||J9(s))&&(l=Y5(s)),ad.set(s,l),l}}else if(n){if(s=e,tg?.has(s))return tg.get(s);c1(s)&&T9(s)}if((e.f&od)!==0)throw e.v;return e.v}function J9(e){if(e.v===wi)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ad.has(t)||(t.f&zs)!==0&&J9(t))return!0;return!1}function bs(e){var t=nl;try{return nl=!0,e()}finally{nl=t}}const ppt=-7169;function Po(e,t){e.f=e.f&ppt|t}function X5(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(oc in e)XT(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&oc in n&&XT(n)}}}function XT(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{XT(e[r],t)}catch{}const n=D5(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=p9(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function gpt(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const mpt=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ypt(e){return mpt.includes(e)}const vpt={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function bpt(e){return e=e.toLowerCase(),vpt[e]??e}const _pt=["touchstart","touchmove"];function wpt(e){return _pt.includes(e)}function xpt(e,t){if(t){const n=document.body;e.autofocus=!0,np(()=>{document.activeElement===n&&e.focus()})}}let v7=!1;function Z9(){v7||(v7=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function pS(e){var t=hn,n=He;as(null),hc(null);try{return e()}finally{as(t),hc(n)}}function Spt(e,t,n,r=n){e.addEventListener(t,()=>pS(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Z9()}const Q9=new Set,KT=new Set;function tP(e,t,n,r={}){function i(o){if(r.capture||ay.call(t,o),!o.cancelBubble)return pS(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?np(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function I0(e,t,n,r,i){var o={capture:r,passive:i},s=tP(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&dS(()=>{t.removeEventListener(e,s,o)})}function Br(e){for(var t=0;t<e.length;t++)Q9.add(e[t]);for(var n of KT)n(e)}let b7=null;function ay(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;b7=e;var s=0,a=b7===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){Jy(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=hn,f=He;as(null),hc(null);try{for(var h,p=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var y=o["__"+r];if(y!=null&&(!o.disabled||e.target===o))if(Lg(y)){var[v,...b]=y;v.apply(o,[e,...b])}else y.call(o,e)}catch(_){h?p.push(_):h=_}if(e.cancelBubble||g===t||g===null)break;o=g}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{e.__root=t,delete e.currentTarget,as(u),hc(f)}}}function K5(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ps(e,t){var n=He;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Et(e,t){var n=(t&m9)!==0,r=(t&Odt)!==0,i,o=!e.startsWith("<!>");return()=>{if(ze)return Ps(an,null),an;i===void 0&&(i=K5(o?e:"<!>"+e),n||(i=ro(i)));var s=r||O9?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=ro(s),l=s.lastChild;Ps(a,l)}else Ps(s,s);return s}}function Apt(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&m9)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(ze)return Ps(an,null),an;if(!s){var a=K5(o),l=ro(a);if(i)for(s=document.createDocumentFragment();ro(l);)s.appendChild(ro(l));else s=ro(l)}var c=s.cloneNode(!0);if(i){var u=ro(c),f=c.lastChild;Ps(u,f)}else Ps(c,c);return c}}function Ze(e,t){return Apt(e,t,"svg")}function To(e=""){if(!ze){var t=Fa(e+"");return Ps(t,t),t}var n=an;return n.nodeType!==q5&&(n.before(n=Fa()),Bo(n)),Ps(n,n),n}function Mn(){if(ze)return Ps(an,null),an;var e=document.createDocumentFragment(),t=document.createComment(""),n=Fa();return e.append(t,n),Ps(t,n),e}function rt(e,t){if(ze){He.nodes_end=an,Mu();return}e!==null&&e.before(t)}let JT=!0;function ce(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function J5(e,t){return eP(e,t)}function Ept(e,t){GT(),t.intro=t.intro??!1;const n=t.target,r=ze,i=an;try{for(var o=ro(n);o&&(o.nodeType!==Z0||o.data!==y9);)o=Al(o);if(!o)throw sd;ol(!0),Bo(o),Mu();const s=eP(e,{...t,anchor:o});if(an===null||an.nodeType!==Z0||an.data!==V5)throw a1(),sd;return ol(!1),s}catch(s){if(s===sd)return t.recover===!1&&ydt(),GT(),F9(n),ol(!1),J5(e,t);throw s}finally{ol(r),Bo(i)}}const zp=new Map;function eP(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){GT();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var p=f[h];if(!a.has(p)){a.add(p);var g=wpt(p);t.addEventListener(p,ay,{passive:g});var y=zp.get(p);y===void 0?(document.addEventListener(p,ay,{passive:g}),zp.set(p,1)):zp.set(p,y+1)}}};l(O5(Q9)),KT.add(l);var c=void 0,u=spt(()=>{var f=n??t.appendChild(Fa());return ji(()=>{if(o){Re({});var h=Fn;h.c=o}i&&(r.$$events=i),ze&&Ps(f,null),JT=s,c=e(f,r)||{},JT=!0,ze&&(He.nodes_end=an),o&&Ce()}),()=>{for(var h of a){t.removeEventListener(h,ay);var p=zp.get(h);--p===0?(document.removeEventListener(h,ay),zp.delete(h)):zp.set(h,p)}KT.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return ZT.set(c,u),c}let ZT=new WeakMap;function kpt(e,t){const n=ZT.get(e);return n?(ZT.delete(e),n(t)):Promise.resolve()}function Ft(e,t,n=!1){ze&&Mu();var r=e,i=null,o=null,s=wi,a=n?tp:0,l=!1;const c=(p,g=!0)=>{l=!0,h(g,p)};var u=null;function f(){u!==null&&(u.lastChild.remove(),r.before(u),u=null);var p=s?i:o,g=s?o:i;p&&G5(p),g&&$f(g,()=>{s?o=null:i=null})}const h=(p,g)=>{if(s===(s=p))return;let y=!1;if(ze){const k=v9(r)===j5;!!s===k&&(r=Dw(),Bo(r),ol(!1),y=!0)}var v=hS(),b=r;if(v&&(u=document.createDocumentFragment(),u.append(b=Fa())),s?i??=g&&ji(()=>g(b)):o??=g&&ji(()=>g(b)),v){var _=Zn,w=s?i:o,S=s?o:i;w&&_.skipped_effects.delete(w),S&&_.skipped_effects.add(S),_.add_callback(f)}else f();y&&ol(!0)};lh(()=>{l=!1,t(c),l||h(null,null)},a),ze&&(r=an)}function gS(e,t,n){ze&&Mu();var r=e,i=wi,o,s,a=null,l=ep()?Pdt:uS;function c(){o&&$f(o),a!==null&&(a.lastChild.remove(),r.before(a),a=null),o=s}lh(()=>{if(l(i,i=t())){var u=r,f=hS();f&&(a=document.createDocumentFragment(),a.append(u=Fa())),s=ji(()=>n(u)),f?Zn.add_callback(c):c()}}),ze&&(r=an)}let tw=null;function Un(e,t){return t}function Tpt(e,t,n){for(var r=e.items,i=[],o=t.length,s=0;s<o;s++)H5(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;F9(l),l.append(n),r.clear(),Pl(e,t[0].prev,t[o-1].next)}V9(i,()=>{for(var c=0;c<o;c++){var u=t[c];a||(r.delete(u.k),Pl(e,u.prev,u.next)),co(u.e,!a)}})}function En(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&g9)!==0;if(l){var c=e;s=ze?Bo(ro(c)):c.appendChild(Fa())}ze&&Mu();var u=null,f=!1,h=new Map,p=W5(()=>{var b=n();return Lg(b)?b:b==null?[]:O5(b)}),g,y;function v(){Mpt(y,g,a,h,s,i,t,r,n),o!==null&&(g.length===0?u?G5(u):u=ji(()=>o(s)):u!==null&&$f(u,()=>{u=null}))}lh(()=>{y??=He,g=x(p);var b=g.length;if(f&&b===0)return;f=b===0;let _=!1;if(ze){var w=v9(s)===j5;w!==(b===0)&&(s=Dw(),Bo(s),ol(!1),_=!0)}if(ze){for(var S=null,k,E=0;E<b;E++){if(an.nodeType===Z0&&an.data===V5){s=an,_=!0,ol(!1);break}var T=g[E],M=r(T,E);k=QT(an,a,S,null,T,M,E,i,t,n),a.items.set(M,k),S=k}b>0&&Bo(Dw())}if(ze)b===0&&o&&(u=ji(()=>o(s)));else if(hS()){var I=new Set,$=Zn;for(E=0;E<b;E+=1){T=g[E],M=r(T,E);var C=a.items.get(M)??h.get(M);C?(t&(lS|cS))!==0&&nP(C,T,E,t):(k=QT(null,a,null,null,T,M,E,i,t,n,!0),h.set(M,k)),I.add(M)}for(const[L,F]of a.items)I.has(L)||$.skipped_effects.add(F.e);$.add_callback(v)}else v();_&&ol(!0),x(p)}),ze&&(s=an)}function Mpt(e,t,n,r,i,o,s,a,l){var c=(s&Adt)!==0,u=(s&(lS|cS))!==0,f=t.length,h=n.items,p=n.first,g=p,y,v=null,b,_=[],w=[],S,k,E,T;if(c)for(T=0;T<f;T+=1)S=t[T],k=a(S,T),E=h.get(k),E!==void 0&&(E.a?.measure(),(b??=new Set).add(E));for(T=0;T<f;T+=1){if(S=t[T],k=a(S,T),E=h.get(k),E===void 0){var M=r.get(k);if(M!==void 0){r.delete(k),h.set(k,M);var I=v?v.next:g;Pl(n,v,M),Pl(n,M,I),DE(M,I,i),v=M}else{var $=g?g.e.nodes_start:i;v=QT($,n,v,v===null?n.first:v.next,S,k,T,o,s,l)}h.set(k,v),_=[],w=[],g=v.next;continue}if(u&&nP(E,S,T,s),(E.e.f&ll)!==0&&(G5(E.e),c&&(E.a?.unfix(),(b??=new Set).delete(E))),E!==g){if(y!==void 0&&y.has(E)){if(_.length<w.length){var C=w[0],L;v=C.prev;var F=_[0],N=_[_.length-1];for(L=0;L<_.length;L+=1)DE(_[L],C,i);for(L=0;L<w.length;L+=1)y.delete(w[L]);Pl(n,F.prev,N.next),Pl(n,v,F),Pl(n,N,C),g=C,v=N,T-=1,_=[],w=[]}else y.delete(E),DE(E,g,i),Pl(n,E.prev,E.next),Pl(n,E,v===null?n.first:v.next),Pl(n,v,E),v=E;continue}for(_=[],w=[];g!==null&&g.k!==k;)(g.e.f&ll)===0&&(y??=new Set).add(g),w.push(g),g=g.next;if(g===null)continue;E=g}_.push(E),v=E,g=E.next}if(g!==null||y!==void 0){for(var O=y===void 0?[]:O5(y);g!==null;)(g.e.f&ll)===0&&O.push(g),g=g.next;var D=O.length;if(D>0){var B=(s&g9)!==0&&f===0?i:null;if(c){for(T=0;T<D;T+=1)O[T].a?.measure();for(T=0;T<D;T+=1)O[T].a?.fix()}Tpt(n,O,B)}}c&&np(()=>{if(b!==void 0)for(E of b)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=v&&v.e;for(var j of r.values())co(j.e);r.clear()}function nP(e,t,n,r){(r&lS)!==0&&eg(e.v,t),(r&cS)!==0?eg(e.i,n):e.i=n}function QT(e,t,n,r,i,o,s,a,l,c,u){var f=tw,h=(l&lS)!==0,p=(l&Edt)===0,g=h?p?k0(i,!1,!1):Rd(i):i,y=(l&cS)===0?s:Rd(s),v={i:y,v:g,k:o,a:null,e:null,prev:n,next:r};tw=v;try{if(e===null){var b=document.createDocumentFragment();b.append(e=Fa())}return v.e=ji(()=>a(e,g,y,c),ze),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?u||(t.first=v):(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{tw=f}}function DE(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var s=Al(o);i.before(o),o=s}}function Pl(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ipt(e,t,n=!1,r=!1,i=!1){var o=e,s="";Pt(()=>{var a=He;if(s===(s=t()??"")){ze&&Mu();return}if(a.nodes_start!==null&&(q9(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),s!==""){if(ze){an.data;for(var l=Mu(),c=l;l!==null&&(l.nodeType!==Z0||l.data!=="");)c=l,l=Al(l);if(l===null)throw a1(),sd;Ps(an,c),o=Bo(l);return}var u=s+"";n?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var f=K5(u);if((n||r)&&(f=ro(f)),Ps(ro(f),f.lastChild),n||r)for(;ro(f);)o.before(ro(f));else o.before(f)}})}function iv(e,t,...n){var r=e,i=vn,o;lh(()=>{i!==(i=t())&&(o&&(co(o),o=null),o=ji(()=>i(r,...n)))},tp),ze&&(r=an)}function ov(e,t,n){ze&&Mu();var r=e,i,o,s=null,a=null;function l(){o&&($f(o),o=null),s&&(s.lastChild.remove(),r.before(s),s=null),o=a,a=null}lh(()=>{if(i!==(i=t())){var c=hS();if(i){var u=r;c&&(s=document.createDocumentFragment(),s.append(u=Fa())),a=ji(()=>n(u,i))}c?Zn.add_callback(l):l()}},tp),ze&&(r=an)}function rP(e,t,n){Pg(()=>{var r=bs(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};rp(()=>{var s=n();X5(s),i&&uS(o,s)&&(o=s,r.update(s))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function Rpt(e,t){var n=void 0,r;lh(()=>{n!==(n=t())&&(r&&(co(r),r=null),n&&(r=ji(()=>{Pg(()=>n(e))})))})}function iP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=iP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Cpt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=iP(e))&&(r&&(r+=" "),r+=t);return r}function Npt(e){return typeof e=="object"?Cpt(e):e??""}const _7=[...` 	
\r\f \v\uFEFF`];function $pt(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||_7.includes(r[s-1]))&&(a===r.length||_7.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function w7(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function LE(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Opt(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(LE)),i&&l.push(...Object.keys(i).map(LE));var c=0,u=-1;const y=e.length;for(var f=0;f<y;f++){var h=e[f];if(a?h==="/"&&e[f-1]==="*"&&(a=!1):o?o===h&&(o=!1):h==="/"&&e[f+1]==="*"?a=!0:h==='"'||h==="'"?o=h:h==="("?s++:h===")"&&s--,!a&&o===!1&&s===0){if(h===":"&&u===-1)u=f;else if(h===";"||f===y-1){if(u!==-1){var p=LE(e.substring(c,u).trim());if(!l.includes(p)){h!==";"&&f++;var g=e.substring(c,f).trim();n+=" "+g+";"}}c=f+1,u=-1}}}}return r&&(n+=w7(r)),i&&(n+=w7(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function ar(e,t,n,r,i,o){var s=e.__className;if(ze||s!==n||s===void 0){var a=$pt(n,r,o);(!ze||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}else if(o&&i!==o)for(var l in o){var c=!!o[l];(i==null||c!==!!i[l])&&e.classList.toggle(l,c)}return o}function FE(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Me(e,t,n,r){var i=e.__style;if(ze||i!==t){var o=Opt(t,r);(!ze||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(FE(e,n?.[0],r[0]),FE(e,n?.[1],r[1],"important")):FE(e,n,r));return r}function ng(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Lg(t))return Fdt();for(var r of e.options)r.selected=t.includes(x7(r));return}for(r of e.options){var i=x7(r);if(rpt(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Bw(e){var t=new MutationObserver(()=>{ng(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dS(()=>{t.disconnect()})}function x7(e){return"__value"in e?e.__value:e.value}const Dm=Symbol("class"),Lm=Symbol("style"),oP=Symbol("is custom element"),sP=Symbol("is html");function aP(e){if(ze){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;ut(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;ut(e,"checked",null),e.checked=i}}};e.__on_r=n,Wdt(n),Z9()}}function Dpt(e,t){var n=Z5(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Lpt(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ut(e,t,n,r){var i=Z5(e);ze&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[udt]=n),n==null?e.removeAttribute(t):typeof n!="string"&&lP(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Fpt(e,t,n,r,i=!1){var o=Z5(e),s=o[oP],a=!o[sP];let l=ze&&s;l&&ol(!1);var c=t||{},u=e.tagName==="OPTION";for(var f in t)f in n||(n[f]=null);n.class?n.class=Npt(n.class):n[Dm]&&(n.class=null),n[Lm]&&(n.style??=null);var h=lP(e);for(const w in n){let S=n[w];if(u&&w==="value"&&S==null){e.value=e.__value="",c[w]=S;continue}if(w==="class"){var p=e.namespaceURI==="http://www.w3.org/1999/xhtml";ar(e,p,S,r,t?.[Dm],n[Dm]),c[w]=S,c[Dm]=n[Dm];continue}if(w==="style"){Me(e,S,t?.[Lm],n[Lm]),c[w]=S,c[Lm]=n[Lm];continue}var g=c[w];if(!(S===g&&!(S===void 0&&e.hasAttribute(w)))){c[w]=S;var y=w[0]+w[1];if(y!=="$$")if(y==="on"){const k={},E="$$"+w;let T=w.slice(2);var v=ypt(T);if(gpt(T)&&(T=T.slice(0,-7),k.capture=!0),!v&&g){if(S!=null)continue;e.removeEventListener(T,c[E],k),c[E]=null}if(S!=null)if(v)e[`__${T}`]=S,Br([T]);else{let M=function(I){c[w].call(this,I)};c[E]=tP(T,e,M,k)}else v&&(e[`__${T}`]=void 0)}else if(w==="style")ut(e,w,S);else if(w==="autofocus")xpt(e,!!S);else if(!s&&(w==="__value"||w==="value"&&S!=null))e.value=e.__value=S;else if(w==="selected"&&u)Lpt(e,S);else{var b=w;a||(b=bpt(b));var _=b==="defaultValue"||b==="defaultChecked";if(S==null&&!s&&!_)if(o[w]=null,b==="value"||b==="checked"){let k=e;const E=t===void 0;if(b==="value"){let T=k.defaultValue;k.removeAttribute(b),k.defaultValue=T,k.value=k.__value=E?T:null}else{let T=k.defaultChecked;k.removeAttribute(b),k.defaultChecked=T,k.checked=E?T:!1}}else e.removeAttribute(w);else _||h.includes(b)&&(s||typeof S!="string")?(e[b]=S,b in o&&(o[b]=wi)):typeof S!="function"&&ut(e,b,S)}}}return l&&ol(!0),c}function Gs(e,t,n=[],r=[],i,o=!1){M9(n,r,s=>{var a=void 0,l={},c=e.nodeName==="SELECT",u=!1;if(lh(()=>{var h=t(...s.map(x)),p=Fpt(e,a,h,i,o);u&&c&&"value"in h&&ng(e,h.value);for(let y of Object.getOwnPropertySymbols(l))h[y]||co(l[y]);for(let y of Object.getOwnPropertySymbols(h)){var g=h[y];y.description===Ldt&&(!a||g!==a[y])&&(l[y]&&co(l[y]),l[y]=ji(()=>Rpt(e,()=>g))),p[y]=g}a=p}),c){var f=e;Pg(()=>{ng(f,a.value,!0),Bw(f)})}u=!0})}function Z5(e){return e.__attributes??={[oP]:e.nodeName.includes("-"),[sP]:e.namespaceURI===Ddt}}var S7=new Map;function lP(e){var t=S7.get(e.nodeName);if(t)return t;S7.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=p9(r);for(var o in n)n[o].set&&t.push(o);r=D5(r)}return t}const Bpt=()=>performance.now(),Hl={tick:e=>requestAnimationFrame(e),now:()=>Bpt(),tasks:new Set};function cP(){const e=Hl.now();Hl.tasks.forEach(t=>{t.c(e)||(Hl.tasks.delete(t),t.f())}),Hl.tasks.size!==0&&Hl.tick(cP)}function uP(e){let t;return Hl.tasks.size===0&&Hl.tick(cP),{promise:new Promise(n=>{Hl.tasks.add(t={c:e,f:n})}),abort(){Hl.tasks.delete(t)}}}function Kb(e,t){pS(()=>{e.dispatchEvent(new CustomEvent(t))})}function Ppt(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function A7(e){const t={},n=e.split(";");for(const r of n){const[i,o]=r.split(":");if(!i||o===void 0)break;const s=Ppt(i.trim());t[s]=o.trim()}return t}const zpt=e=>e;function Upt(e,t,n){var r=tw,i,o,s,a=null;r.a??={element:e,measure(){i=this.element.getBoundingClientRect()},apply(){if(s?.abort(),o=this.element.getBoundingClientRect(),i.left!==o.left||i.right!==o.right||i.top!==o.top||i.bottom!==o.bottom){const l=t()(this.element,{from:i,to:o},n?.());s=zw(this.element,l,void 0,1,()=>{s?.abort(),s=void 0})}},fix(){if(!e.getAnimations().length){var{position:l,width:c,height:u}=getComputedStyle(e);if(l!=="absolute"&&l!=="fixed"){var f=e.style;a={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=c,f.height=u;var h=e.getBoundingClientRect();if(i.left!==h.left||i.top!==h.top){var p=`translate(${i.left-h.left}px, ${i.top-h.top}px)`;f.transform=f.transform?`${f.transform} ${p}`:p}}}},unfix(){if(a){var l=e.style;l.position=a.position,l.width=a.width,l.height=a.height,l.transform=a.transform}}},r.a.element=e}function Pw(e,t,n,r){var i=(e&Cdt)!==0,o=(e&Ndt)!==0,s=i&&o,a=(e&$dt)!==0,l=s?"both":i?"in":"out",c,u=t.inert,f=t.style.overflow,h,p;function g(){return pS(()=>c??=n()(t,r?.()??{},{direction:l}))}var y={is_global:a,in(){if(t.inert=u,!i){p?.abort(),p?.reset?.();return}o||h?.abort(),Kb(t,"introstart"),h=zw(t,g(),p,1,()=>{Kb(t,"introend"),h?.abort(),h=c=void 0,t.style.overflow=f})},out(w){if(!o){w?.(),c=void 0;return}t.inert=!0,Kb(t,"outrostart"),p=zw(t,g(),h,0,()=>{Kb(t,"outroend"),w?.()})},stop:()=>{h?.abort(),p?.abort()}},v=He;if((v.transitions??=[]).push(y),i&&JT){var b=a;if(!b){for(var _=v.parent;_&&(_.f&tp)!==0;)for(;(_=_.parent)&&(_.f&Fg)===0;);b=!_||(_.f&sS)!==0}b&&Pg(()=>{bs(()=>y.in())})}}function zw(e,t,n,r,i){var o=r===1;if(r0(t)){var s,a=!1;return np(()=>{if(!a){var v=t({direction:o?"in":"out"});s=zw(e,v,n,r,i)}}),{abort:()=>{a=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(n?.deactivate(),!t?.duration)return i(),{abort:vn,deactivate:vn,reset:vn,t:()=>r};const{delay:l=0,css:c,tick:u,easing:f=zpt}=t;var h=[];if(o&&n===void 0&&(u&&u(0,1),c)){var p=A7(c(0,1));h.push(p,p)}var g=()=>1-r,y=e.animate(h,{duration:l,fill:"forwards"});return y.onfinish=()=>{y.cancel();var v=n?.t()??1-r;n?.abort();var b=r-v,_=t.duration*Math.abs(b),w=[];if(_>0){var S=!1;if(c)for(var k=Math.ceil(_/16.666666666666668),E=0;E<=k;E+=1){var T=v+b*f(E/k),M=A7(c(T,1-T));w.push(M),S||=M.overflow==="hidden"}S&&(e.style.overflow="hidden"),g=()=>{var I=y.currentTime;return v+b*f(I/_)},u&&uP(()=>{if(y.playState!=="running")return!1;var I=g();return u(I,1-I),!0})}y=e.animate(w,{duration:_,fill:"forwards"}),y.onfinish=()=>{g=()=>r,u?.(r,1-r),i()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=vn)},deactivate:()=>{i=vn},reset:()=>{r===0&&u?.(1,0)},t:()=>g()}}function qpt(e,t,n=t){var r=ep(),i=new WeakSet;Spt(e,"input",o=>{var s=o?e.defaultValue:e.value;if(s=BE(e)?PE(s):s,n(s),Zn!==null&&i.add(Zn),r&&s!==(s=t())){var a=e.selectionStart,l=e.selectionEnd;e.value=s??"",l!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(l,e.value.length))}}),(ze&&e.defaultValue!==e.value||bs(t)==null&&e.value)&&(n(BE(e)?PE(e.value):e.value),Zn!==null&&i.add(Zn)),rp(()=>{var o=t();if(e===document.activeElement){var s=Z_??Zn;if(i.has(s))return}BE(e)&&o===PE(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function BE(e){var t=e.type;return t==="number"||t==="range"}function PE(e){return e===""?null:+e}function jpt(e,t,n){var r=_u(e,t);r&&r.set&&(e[t]=n,dS(()=>{e[t]=null}))}class Q5{#t=new WeakMap;#e;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#t.get(t)||new Set;return r.add(n),this.#t.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#t.get(t);i.delete(n),i.size===0&&(this.#t.delete(t),this.#e.unobserve(t))}}#r(){return this.#e??(this.#e=new ResizeObserver(t=>{for(var n of t){Q5.entries.set(n.target,n);for(var r of this.#t.get(n.target)||[])r(n)}}))}}var Vpt=new Q5({box:"border-box"});function Cd(e,t,n){var r=Vpt.observe(e,()=>n(e[t]));Pg(()=>(bs(()=>n(e[t])),r))}function E7(e,t){return e===t||e?.[oc]===t}function ds(e={},t,n,r){return Pg(()=>{var i,o;return rp(()=>{i=o,o=[],bs(()=>{e!==n(...o)&&(t(e,...o),i&&E7(n(...i),e)&&t(null,...i))})}),()=>{np(()=>{o&&E7(n(...o),e)&&t(null,...o)})}}),e}function t6(e=!1){const t=Fn,n=t.l.u;if(!n)return;let r=()=>X5(t.s);if(e){let i=0,o={};const s=l1(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>x(s)}n.b.length&&fe(()=>{k7(t,r),Zy(n.b)}),Gi(()=>{const i=bs(()=>n.m.map(adt));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Gi(()=>{k7(t,r),Zy(n.a)})}function k7(e,t){if(e.l.s)for(const n of e.l.s)x(n);t()}function T7(e,t){var n=e.$$events?.[t.type],r=Lg(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function e6(e,t,n){if(e==null)return t(void 0),n&&n(void 0),vn;const r=bs(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Up=[];function fP(e,t){return{subscribe:rg(e,t).subscribe}}function rg(e,t=vn){let n=null;const r=new Set;function i(a){if(uS(e,a)&&(e=a,n)){const l=!Up.length;for(const c of r)c[1](),Up.push(c,e);if(l){for(let c=0;c<Up.length;c+=2)Up[c][0](Up[c+1]);Up.length=0}}}function o(a){i(a(e))}function s(a,l=vn){const c=[a,l];return r.add(c),r.size===1&&(n=t(i,o)||vn),a(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function n6(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return fP(n,(s,a)=>{let l=!1;const c=[];let u=0,f=vn;const h=()=>{if(u)return;f();const g=t(r?c[0]:c,s,a);o?s(g):f=typeof g=="function"?g:vn},p=i.map((g,y)=>e6(g,v=>{c[y]=v,u&=~(1<<y),l&&h()},()=>{u|=1<<y}));return l=!0,h(),function(){Zy(p),f(),l=!1}})}function Wpt(e){let t;return e6(e,n=>t=n)(),t}let Jb=!1,t4=Symbol();function uo(e,t,n){const r=n[t]??={store:null,source:k0(void 0),unsubscribe:vn};if(r.store!==e&&!(t4 in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=vn;else{var i=!0;r.unsubscribe=e6(e,o=>{i?r.source.v=o:H(r.source,o)}),i=!1}return e&&t4 in n?Wpt(e):x(r.source)}function Fm(e,t){return e.set(t),t}function _s(){const e={};function t(){dS(()=>{for(var n in e)e[n].unsubscribe();Jy(e,t4,{enumerable:!1,value:!0})})}return[e,t]}function Ypt(e){var t=Jb;try{return Jb=!1,[e(),Jb]}finally{Jb=t}}const Hpt={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function jo(e,t,n){return new Proxy({props:e,exclude:t},Hpt)}const Gpt={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(r0(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];r0(i)&&(i=i());const o=_u(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(r0(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=_u(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===oc||t===z5)return!1;for(let n of e.props)if(r0(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(r0(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function e4(...e){return new Proxy({props:e},Gpt)}function ie(e,t,n,r){var i=!Bg||(n&Tdt)!==0,o=(n&Idt)!==0,s=(n&Rdt)!==0,a=r,l=!0,c=()=>(l&&(l=!1,a=s?bs(r):r),a),u;if(o){var f=oc in e||z5 in e;u=_u(e,t)?.set??(f&&t in e?w=>e[t]=w:void 0)}var h,p=!1;o?[h,p]=Ypt(()=>e[t]):h=e[t],h===void 0&&r!==void 0&&(h=c(),u&&(i&&bdt(),u(h)));var g;if(i?g=()=>{var w=e[t];return w===void 0?c():(l=!0,w)}:g=()=>{var w=e[t];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&(n&Mdt)===0)return g;if(u){var y=e.$$legacy;return function(w,S){return arguments.length>0?((!i||!S||y||p)&&u(S?g():w),w):g()}}var v=!1,b=((n&kdt)!==0?l1:W5)(()=>(v=!1,g()));o&&x(b);var _=He;return function(w,S){if(arguments.length>0){const k=S?x(b):i&&o?Aa(w):w;return H(b,k),v=!0,a!==void 0&&(a=k),w}return ip&&v||(_.f&Qd)!==0?b.v:x(b)}}function Xpt(e){return new Kpt(e)}class Kpt{#t;#e;constructor(t){var n=new Map,r=(o,s)=>{var a=k0(s,!1,!1);return n.set(o,a),a};const i=new Proxy({...t.props||{},$$events:{}},{get(o,s){return x(n.get(s)??r(s,Reflect.get(o,s)))},has(o,s){return s===z5?!0:(x(n.get(s)??r(s,Reflect.get(o,s))),Reflect.has(o,s))},set(o,s,a){return H(n.get(s)??r(s,a),a),Reflect.set(o,s,a)}});this.#e=(t.hydrate?Ept:J5)(t.component,{target:t.target,anchor:t.anchor,props:i,context:t.context,intro:t.intro??!1,recover:t.recover}),(!t?.props?.$$host||t.sync===!1)&&C9(),this.#t=i.$$events;for(const o of Object.keys(this.#e))o==="$set"||o==="$destroy"||o==="$on"||Jy(this,o,{get(){return this.#e[o]},set(s){this.#e[o]=s},enumerable:!0});this.#e.$set=o=>{Object.assign(i,o)},this.#e.$destroy=()=>{kpt(this.#e)}}$set(t){this.#e.$set(t)}$on(t,n){this.#t[t]=this.#t[t]||[];const r=(...i)=>n.call(this,...i);return this.#t[t].push(r),()=>{this.#t[t]=this.#t[t].filter(i=>i!==r)}}$destroy(){this.#e.$destroy()}}function zg(e){Fn===null&&s1(),Bg&&Fn.l!==null?hP(Fn).m.push(e):Gi(()=>{const t=bs(e);if(typeof t=="function")return t})}function r6(e){Fn===null&&s1(),zg(()=>()=>bs(e))}function Jpt(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Zpt(){const e=Fn;return e===null&&s1(),(t,n,r)=>{const i=e.s.$$events?.[t];if(i){const o=Lg(i)?i.slice():[i],s=Jpt(t,n,r);for(const a of o)a.call(e.x,s);return!s.defaultPrevented}return!0}}function Qpt(e){Fn===null&&s1(),Fn.l===null&&vdt(),hP(Fn).a.push(e)}function hP(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const t0t="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(t0t);Udt();function e0t(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,s=[],a="",l=e.split("/");for(l[0]||l.shift();i=l.shift();)n=i[0],n==="*"?(s.push("wild"),a+="/(.*)"):n===":"?(r=i.indexOf("?",1),o=i.indexOf(".",1),s.push(i.substring(1,~r?r:~o?o:i.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+i.substring(o))):a+="/"+i;return{keys:s,pattern:new RegExp("^"+a+"/?$","i")}}function M7(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const i6=fP(null,function(t){t(M7());const n=()=>{t(M7())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});n6(i6,e=>e.location);n6(i6,e=>e.querystring);const I7=rg(void 0);function n0t(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function r0t(e,t){Re(t,!1);let n=ie(t,"routes",24,()=>({})),r=ie(t,"prefix",8,""),i=ie(t,"restoreScrollState",8,!1);class o{constructor(E,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!E||typeof E=="string"&&(E.length<1||E.charAt(0)!="/"&&E.charAt(0)!="*")||typeof E=="object"&&!(E instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:M,keys:I}=e0t(E);this.path=E,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=M,this._keys=I}match(E){if(r()){if(typeof r()=="string")if(E.startsWith(r()))E=E.substr(r().length)||"/";else return null;else if(r()instanceof RegExp){const $=E.match(r());if($&&$[0])E=E.substr($[0].length)||"/";else return null}}const T=this._pattern.exec(E);if(T===null)return null;if(this._keys===!1)return T;const M={};let I=0;for(;I<this._keys.length;){try{M[this._keys[I]]=decodeURIComponent(T[I+1]||"")||null}catch{M[this._keys[I]]=null}I++}return M}async checkConditions(E){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](E))return!1;return!0}}const s=[];n()instanceof Map?n().forEach((k,E)=>{s.push(new o(E,k))}):Object.keys(n()).forEach(k=>{s.push(new o(k,n()[k]))});let a=k0(null),l=k0(null),c=k0({});const u=Zpt();async function f(k,E){await dpt(),u(k,E)}let h=null,p=null;i()&&(p=k=>{k.state&&(k.state.__svelte_spa_router_scrollY||k.state.__svelte_spa_router_scrollX)?h=k.state:h=null},window.addEventListener("popstate",p),Qpt(()=>{n0t(h)}));let g=null,y=null;const v=i6.subscribe(async k=>{g=k;let E=0;for(;E<s.length;){const T=s[E].match(k.location);if(!T){E++;continue}const M={route:s[E].path,location:k.location,querystring:k.querystring,userData:s[E].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await s[E].checkConditions(M)){H(a,null),y=null,f("conditionsFailed",M);return}f("routeLoading",Object.assign({},M));const I=s[E].component;if(y!=I){I.loading?(H(a,I.loading),y=I,H(l,I.loadingParams),H(c,{}),f("routeLoaded",Object.assign({},M,{component:x(a),name:x(a).name,params:x(l)}))):(H(a,null),y=null);const $=await I();if(k!=g)return;H(a,$&&$.default||$),y=I}T&&typeof T=="object"&&Object.keys(T).length?H(l,T):H(l,null),H(c,s[E].props),f("routeLoaded",Object.assign({},M,{component:x(a),name:x(a).name,params:x(l)})).then(()=>{I7.set(x(l))});return}H(a,null),y=null,I7.set(void 0)});r6(()=>{v(),p&&window.removeEventListener("popstate",p)}),apt(()=>X5(i()),()=>{history.scrollRestoration=i()?"manual":"auto"}),lpt(),t6();var b=Mn(),_=Ht(b);{var w=k=>{var E=Mn(),T=Ht(E);ov(T,()=>x(a),(M,I)=>{I(M,e4({get params(){return x(l)}},()=>x(c),{$$events:{routeEvent($){T7.call(this,t,$)}}}))}),rt(k,E)},S=k=>{var E=Mn(),T=Ht(E);ov(T,()=>x(a),(M,I)=>{I(M,e4(()=>x(c),{$$events:{routeEvent($){T7.call(this,t,$)}}}))}),rt(k,E)};Ft(_,k=>{x(l)?k(w):k(S,!1)})}rt(e,b),Ce()}const R7={};function dP(e,t=!1){let n,r,i=R7;function o(c){n=e(c)?.catch(()=>{}).finally(()=>{if(r){const{event:u}=r;r=null,o(u)}else n=null})||null}function s(c){r={event:c}}function a(c){n?s(c):o(c)}function l(c){i!==c&&requestAnimationFrame(()=>{const u=i;i=R7,a(u)}),i=c}return t?l:a}function mS(e){return e instanceof ch}class ch{_filterBy;_requestUpdate;_coordinator;_pending;_enabled;_initialized;_request;constructor(t){this._filterBy=t,this._requestUpdate=dP(()=>this.requestQuery(),!0),this._coordinator=null,this._pending=Promise.resolve(),this._enabled=!0,this._initialized=!1,this._request=null}get coordinator(){return this._coordinator}set coordinator(t){this._coordinator=t}get enabled(){return this._enabled}set enabled(t){t=!!t,this._enabled!==t&&(this._enabled=t,t&&(this._initialized?this._request&&this.requestQuery(this._request===!0?void 0:this._request):this.initialize(),this._request=null))}get pending(){return this._pending}get filterBy(){return this._filterBy}get filterStable(){return!0}async prepare(){}query(t){return null}queryPending(){return this}queryResult(t){return this}queryError(t){return this}requestQuery(t){if(this._enabled){const n=t||this.query(this.filterBy?.predicate(this));return this._coordinator.requestQuery(this,n)}else return this._request=t??!0,null}requestUpdate(){this._enabled?this._requestUpdate():this.requestQuery()}initialize(){this._enabled?this._coordinator&&(this._initialized=!0,this._pending=this.prepare().then(()=>this.requestQuery())):this._initialized=!1}destroy(){this.coordinator?.disconnect(this)}update(){return this}}const pP=Uint8Array.of(65,82,82,79,87,49),yS={V1:0,V4:3,V5:4},Af={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},$t={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},gP={HALF:0,SINGLE:1,DOUBLE:2},Uw={DAY:0,MILLISECOND:1},Ca={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},R0={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},o6={Sparse:0,Dense:1},i0t=Uint8Array,mP=Uint16Array,o0t=Uint32Array,yP=BigUint64Array,vP=Int8Array,s0t=Int16Array,El=Int32Array,Tc=BigInt64Array,a0t=Float32Array,vS=Float64Array;function l0t(e,t){const n=Math.log2(e)-3;return(t?[vP,s0t,El,Tc]:[i0t,mP,o0t,yP])[n]}function s6(e,t){let n=0,r=e.length;if(r<=2147483648)do{const i=n+r>>>1;e[i]<=t?n=i+1:r=i}while(n<r);else do{const i=Math.trunc((n+r)/2);e[i]<=t?n=i+1:r=i}while(n<r);return n}function a6(e,t,n){if(t(e))return e;throw new Error(n(e))}function gl(e,t,n){return t=Array.isArray(t)?t:Object.values(t),a6(e,r=>t.includes(r),n??(()=>`${e} must be one of ${t}`))}function bP(e,t){for(const[n,r]of Object.entries(e))if(r===t)return n;return"<Unknown>"}const l6=e=>`Unsupported data type: "${bP($t,e)}" (id ${e})`,_P=(e,t,n=!0,r=null)=>({name:e,type:t,nullable:n,metadata:r});function wP(e){return Object.hasOwn(e,"name")&&xP(e.type)}function xP(e){return typeof e?.typeId=="number"}function Ff(e,t="",n=!0){return wP(e)?e:_P(t,a6(e,xP,()=>"Data type expected."),n)}const c0t=(e,t,n=!1,r=-1)=>({typeId:$t.Dictionary,id:r,dictionary:e,indices:t||AP(),ordered:n}),SP=(e=32,t=!0)=>({typeId:$t.Int,bitWidth:gl(e,[8,16,32,64]),signed:t,values:l0t(e,t)}),AP=()=>SP(32),u0t=(e=2)=>({typeId:$t.Float,precision:gl(e,gP),values:[mP,a0t,vS][e]}),f0t=()=>({typeId:$t.Binary,offsets:El}),h0t=()=>({typeId:$t.Utf8,offsets:El}),d0t=(e,t,n=128)=>({typeId:$t.Decimal,precision:e,scale:t,bitWidth:gl(n,[32,64,128,256]),values:n===32?El:yP}),p0t=e=>({typeId:$t.Date,unit:gl(e,Uw),values:e===Uw.DAY?El:Tc}),g0t=(e=Ca.MILLISECOND,t=32)=>({typeId:$t.Time,unit:gl(e,Ca),bitWidth:gl(t,[32,64]),values:t===32?El:Tc}),m0t=(e=Ca.MILLISECOND,t=null)=>({typeId:$t.Timestamp,unit:gl(e,Ca),timezone:t,values:Tc}),y0t=(e=R0.MONTH_DAY_NANO)=>({typeId:$t.Interval,unit:gl(e,R0),values:e===R0.MONTH_DAY_NANO?void 0:El}),v0t=e=>({typeId:$t.List,children:[Ff(e)],offsets:El}),b0t=e=>({typeId:$t.Struct,children:Array.isArray(e)&&wP(e[0])?e:Object.entries(e).map(([t,n])=>_P(t,n))}),_0t=(e,t,n,r)=>(n??=t.map((i,o)=>o),{typeId:$t.Union,mode:gl(e,o6),typeIds:n,typeMap:n.reduce((i,o,s)=>(i[o]=s,i),{}),children:t.map((i,o)=>Ff(i,`_${o}`)),typeIdForValue:r,offsets:El}),w0t=e=>({typeId:$t.FixedSizeBinary,stride:e}),x0t=(e,t)=>({typeId:$t.FixedSizeList,stride:t,children:[Ff(e)]}),S0t=(e,t)=>({typeId:$t.Map,keysSorted:e,children:[t],offsets:El}),A0t=(e=Ca.MILLISECOND)=>({typeId:$t.Duration,unit:gl(e,Ca),values:Tc}),E0t=()=>({typeId:$t.LargeBinary,offsets:Tc}),k0t=()=>({typeId:$t.LargeUtf8,offsets:Tc}),T0t=e=>({typeId:$t.LargeList,children:[Ff(e)],offsets:Tc}),M0t=(e,t)=>({typeId:$t.RunEndEncoded,children:[a6(Ff(e,"run_ends"),n=>n.type.typeId===$t.Int,()=>"Run-ends must have an integer type."),Ff(t,"values")]}),I0t=e=>({typeId:$t.ListView,children:[Ff(e,"value")],offsets:El}),R0t=e=>({typeId:$t.LargeListView,children:[Ff(e,"value")],offsets:Tc}),C0t=new vS(2),N0t=C0t.buffer;new Tc(N0t);function Bf(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${e}`);return Number(e)}function c6(e,t){return Number(e/t)+Number(e%t)/Number(t)}const g0=e=>BigInt.asUintN(64,e);function $0t(e,t){return BigInt.asIntN(64,e[t])}function O0t(e,t){const n=t<<1;let r;return BigInt.asIntN(64,e[n+1])<0?(r=g0(~e[n])|g0(~e[n+1])<<64n,r=-(r+1n)):r=e[n]|e[n+1]<<64n,r}function D0t(e,t){const n=t<<2;let r;return BigInt.asIntN(64,e[n+3])<0?(r=g0(~e[n])|g0(~e[n+1])<<64n|g0(~e[n+2])<<128n|g0(~e[n+3])<<192n,r=-(r+1n)):r=e[n]|e[n+1]<<64n|e[n+2]<<128n|e[n+3]<<192n,r}const L0t=new TextDecoder("utf-8");new TextEncoder;function bS(e){return L0t.decode(e)}const sv=4;function EP(e,t){return(e[t>>3]&1<<t%8)!==0}function Bu(e,t){const n=t+$r(e,t),r=n-$r(e,n),i=ha(e,r);return(o,s,a=null)=>{if(o<i){const l=ha(e,r+o);if(l)return s(e,n+l)}return a}}function Xh(e,t){return t}function av(e,t){return!!F0t(e,t)}function F0t(e,t){return u6(e,t)<<24>>24}function u6(e,t){return e[t]}function ha(e,t){return B0t(e,t)<<16>>16}function B0t(e,t){return e[t]|e[t+1]<<8}function $r(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function C7(e,t){return $r(e,t)>>>0}function ma(e,t){return Bf(BigInt.asIntN(64,BigInt(C7(e,t))+(BigInt(C7(e,t+sv))<<32n)))}function qw(e,t){let n=t+$r(e,t);const r=$r(e,n);return n+=sv,bS(e.subarray(n,n+r))}function Of(e,t,n,r){if(!t)return[];const i=t+$r(e,t);return Array.from({length:$r(e,i)},(o,s)=>r(e,i+sv+s*n))}const zE=Symbol("rowIndex");function n4(e,t){class n{constructor(o){this[zE]=o}toJSON(){return TP(e,t,this[zE])}}const r=n.prototype;for(let i=0;i<e.length;++i){if(Object.hasOwn(r,e[i]))continue;const o=t[i];Object.defineProperty(r,e[i],{get(){return o.at(this[zE])},enumerable:!0})}return i=>new n(i)}function kP(e,t){return n=>TP(e,t,n)}function TP(e,t,n){const r={};for(let i=0;i<e.length;++i)r[e[i]]=t[i].at(n);return r}function P0t(e){return e instanceof ly}class _S{static ArrayType=null;constructor({length:t,nullCount:n,type:r,validity:i,values:o,offsets:s,sizes:a,children:l}){this.length=t,this.nullCount=n,this.type=r,this.validity=i,this.values=o,this.offsets=s,this.sizes=a,this.children=l,(!n||!this.validity)&&(this.at=c=>this.value(c))}get[Symbol.toStringTag](){return"Batch"}at(t){return this.isValid(t)?this.value(t):null}isValid(t){return EP(this.validity,t)}value(t){return this.values[t]}slice(t,n){const r=n-t,i=Array(r);for(let o=0;o<r;++o)i[o]=this.at(t+o);return i}*[Symbol.iterator](){for(let t=0;t<this.length;++t)yield this.at(t)}}class ly extends _S{constructor(t){super(t);const{length:n,values:r}=this;this.values=r.subarray(0,n)}slice(t,n){return this.nullCount?super.slice(t,n):this.values.subarray(t,n)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}}class wS extends _S{static ArrayType=vS}class oi extends _S{static ArrayType=Array}class z0t extends oi{value(t){return null}}class Ug extends wS{value(t){return Bf(this.values[t])}}class U0t extends wS{value(t){const n=this.values[t],r=(n&31744)>>10,i=(n&1023)/1024,o=(-1)**((n&32768)>>15);switch(r){case 31:return o*(i?Number.NaN:1/0);case 0:return o*(i?6103515625e-14*i:0)}return o*2**(r-15)*(1+i)}}class q0t extends oi{value(t){return EP(this.values,t)}}class j0t extends wS{constructor(t){super(t);const{scale:n}=this.type;this.scale=10**n}value(t){return this.values[t]/this.scale}}class MP extends _S{constructor(t){super(t);const{bitWidth:n,scale:r}=this.type;this.decimal=n===64?$0t:n===128?O0t:D0t,this.scale=10n**BigInt(r)}}class V0t extends MP{static ArrayType=vS;value(t){return c6(this.decimal(this.values,t),this.scale)}}class W0t extends MP{static ArrayType=Array;value(t){return this.decimal(this.values,t)}}class N7 extends oi{constructor(t){super(t),this.source=t}value(t){return new Date(this.source.value(t))}}class Y0t extends wS{value(t){return 864e5*this.values[t]}}const H0t=Ug;class G0t extends Ug{value(t){return super.value(t)*1e3}}const X0t=Ug;class K0t extends Ug{value(t){return c6(this.values[t],1000n)}}class J0t extends Ug{value(t){return c6(this.values[t],1000000n)}}class Z0t extends oi{value(t){return this.values.subarray(t<<1,t+1<<1)}}class Q0t extends oi{value(t){const n=this.values,r=t<<4;return Float64Array.of($r(n,r),$r(n,r+4),ma(n,r+8))}}const IP=({values:e,offsets:t},n)=>e.subarray(t[n],t[n+1]),RP=({values:e,offsets:t},n)=>e.subarray(Bf(t[n]),Bf(t[n+1]));class tgt extends oi{value(t){return IP(this,t)}}class egt extends oi{value(t){return RP(this,t)}}class ngt extends oi{value(t){return bS(IP(this,t))}}class rgt extends oi{value(t){return bS(RP(this,t))}}class igt extends oi{value(t){const n=this.offsets;return this.children[0].slice(n[t],n[t+1])}}class ogt extends oi{value(t){const n=this.offsets;return this.children[0].slice(Bf(n[t]),Bf(n[t+1]))}}class sgt extends oi{value(t){const n=this.offsets[t],r=n+this.sizes[t];return this.children[0].slice(n,r)}}class agt extends oi{value(t){const n=this.offsets[t],r=n+this.sizes[t];return this.children[0].slice(Bf(n),Bf(r))}}class CP extends oi{constructor(t){super(t),this.stride=this.type.stride}}class lgt extends CP{value(t){const{stride:n,values:r}=this;return r.subarray(t*n,(t+1)*n)}}class cgt extends CP{value(t){const{children:n,stride:r}=this;return n[0].slice(t*r,(t+1)*r)}}function NP({children:e,offsets:t},n){const[r,i]=e[0].children,o=t[n],s=t[n+1],a=[];for(let l=o;l<s;++l)a.push([r.at(l),i.at(l)]);return a}class ugt extends oi{value(t){return NP(this,t)}}class fgt extends oi{value(t){return new Map(NP(this,t))}}class $P extends oi{constructor({typeIds:t,...n}){super(n),this.typeIds=t,this.typeMap=this.type.typeMap}value(t,n=t){const{typeIds:r,children:i,typeMap:o}=this;return i[o[r[t]]].at(n)}}class hgt extends $P{value(t){return super.value(t,this.offsets[t])}}class OP extends oi{constructor(t,n=kP){super(t),this.names=this.type.children.map(r=>r.name),this.factory=n(this.names,this.children)}value(t){return this.factory(t)}}class dgt extends OP{constructor(t){super(t,n4)}}class pgt extends oi{value(t){const[{values:n},r]=this.children;return r.at(s6(n,t))}}let ggt=class extends oi{setDictionary(t){return this.dictionary=t,this.cache=t.cache(),this}value(t){return this.cache[this.key(t)]}key(t){return this.values[t]}};class DP extends oi{constructor({data:t,...n}){super(n),this.data=t}view(t){const{values:n,data:r}=this,i=t<<4;let o=i+4,s=n;const a=$r(s,i);return a>12&&(o=$r(s,i+12),s=r[$r(s,i+8)]),s.subarray(o,o+a)}}class mgt extends DP{value(t){return this.view(t)}}class ygt extends DP{value(t){return bS(this.view(t))}}function $7(e){let t=[];return{add(n){return t.push(n),this},clear:()=>t=[],done:()=>new vgt(t,e)}}class vgt{constructor(t,n=t[0]?.type){this.type=n,this.length=t.reduce((o,s)=>o+s.length,0),this.nullCount=t.reduce((o,s)=>o+s.nullCount,0),this.data=t;const r=t.length,i=new Int32Array(r+1);if(r===1){const[o]=t;i[1]=o.length,this.at=s=>o.at(s)}else for(let o=0,s=0;o<r;++o)i[o+1]=s+=t[o].length;this.offsets=i}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){const t=this.data;return t.length===1?t[0][Symbol.iterator]():bgt(t)}at(t){const{data:n,offsets:r}=this,i=s6(r,t)-1;return n[i]?.at(t-r[i])}get(t){return this.at(t)}toArray(){const{length:t,nullCount:n,data:r}=this,i=!n&&P0t(r[0]),o=r.length;if(i&&o===1)return r[0].values;const s=!o||n>0?Array:r[0].constructor.ArrayType??r[0].values.constructor,a=new s(t);return i?_gt(a,r):wgt(a,r)}cache(){return this._cache??(this._cache=this.toArray())}}function*bgt(e){for(let t=0;t<e.length;++t){const n=e[t][Symbol.iterator]();for(let r=n.next();!r.done;r=n.next())yield r.value}}function _gt(e,t){for(let n=0,r=0;n<t.length;++n){const{values:i}=t[n];e.set(i,r),r+=i.length}return e}function wgt(e,t){let n=-1;for(let r=0;r<t.length;++r){const i=t[r];for(let o=0;o<i.length;++o)e[++n]=i.at(o)}return e}let xgt=class LP{constructor(t,n,r=!1){const i=t.fields.map(s=>s.name);this.schema=t,this.names=i,this.children=n,this.factory=r?n4:kP;const o=[];this.getFactory=s=>o[s]??(o[s]=this.factory(i,n.map(a=>a.data[s])))}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){return this.children[0]?.length??0}getChildAt(t){return this.children[t]}getChild(t){const n=this.names.findIndex(r=>r===t);return n>-1?this.children[n]:void 0}selectAt(t,n=[]){const{children:r,factory:i,schema:o}=this,{fields:s}=o;return new LP({...o,fields:t.map((a,l)=>Sgt(s[a],n[l]))},t.map(a=>r[a]),i===n4)}select(t,n){const r=this.names,i=t.map(o=>r.indexOf(o));return this.selectAt(i,n)}toColumns(){const{children:t,names:n}=this,r={};return n.forEach((i,o)=>r[i]=t[o]?.toArray()??[]),r}toArray(){const{children:t,getFactory:n,numRows:r}=this,i=t[0]?.data??[],o=Array(r);for(let s=0,a=-1;s<i.length;++s){const l=n(s);for(let c=0;c<i[s].length;++c)o[++a]=l(c)}return o}*[Symbol.iterator](){const{children:t,getFactory:n}=this,r=t[0]?.data??[];for(let i=0;i<r.length;++i){const o=n(i);for(let s=0;s<r[i].length;++s)yield o(s)}}at(t){const{children:n,getFactory:r,numRows:i}=this;if(t<0||t>=i)return null;const[{offsets:o}]=n,s=s6(o,t)-1;return r(s)(t-o[s])}get(t){return this.at(t)}};function Sgt(e,t){return t!=null&&t!==e.name?{...e,name:t}:e}function Agt(e,t={}){const{typeId:n,bitWidth:r,precision:i,unit:o}=e,{useBigInt:s,useDate:a,useDecimalInt:l,useMap:c,useProxy:u}=t;switch(n){case $t.Null:return z0t;case $t.Bool:return q0t;case $t.Int:case $t.Time:case $t.Duration:return s||r<64?ly:Ug;case $t.Float:return i?ly:U0t;case $t.Date:return O7(o===Uw.DAY?Y0t:H0t,a&&N7);case $t.Timestamp:return O7(o===Ca.SECOND?G0t:o===Ca.MILLISECOND?X0t:o===Ca.MICROSECOND?K0t:J0t,a&&N7);case $t.Decimal:return r===32?l?ly:j0t:l?W0t:V0t;case $t.Interval:return o===R0.DAY_TIME?Z0t:o===R0.YEAR_MONTH?ly:Q0t;case $t.FixedSizeBinary:return lgt;case $t.Utf8:return ngt;case $t.LargeUtf8:return rgt;case $t.Binary:return tgt;case $t.LargeBinary:return egt;case $t.BinaryView:return mgt;case $t.Utf8View:return ygt;case $t.List:return igt;case $t.LargeList:return ogt;case $t.Map:return c?fgt:ugt;case $t.ListView:return sgt;case $t.LargeListView:return agt;case $t.FixedSizeList:return cgt;case $t.Struct:return u?dgt:OP;case $t.RunEndEncoded:return pgt;case $t.Dictionary:return ggt;case $t.Union:return e.mode?hgt:$P}throw new Error(l6(n))}function O7(e,t){return t?class extends t{constructor(r){super(new e(r))}}:e}function Egt(e,t){return{offset:ma(e,t),metadataLength:$r(e,t+8),bodyLength:ma(e,t+16)}}function D7(e,t){return Of(e,t,24,Egt)}function FP(e,t,n){const r=Bu(e,t);if(r(10,Xh,0))throw new Error("Record batch compression not implemented");const i=n<yS.V4?8:0;return{length:r(4,ma,0),nodes:Of(e,r(6,Xh),16,(o,s)=>({length:ma(o,s),nullCount:ma(o,s+8)})),regions:Of(e,r(8,Xh),16+i,(o,s)=>({offset:ma(o,s+i),length:ma(o,s+i+8)})),variadic:Of(e,r(12,Xh),8,ma)}}function kgt(e,t,n){const r=Bu(e,t);return{id:r(4,ma,0),data:r(6,(i,o)=>FP(i,o,n)),isDelta:r(8,av,!1)}}function BP(e,t,n,r){gl(n,$t,l6);const i=Bu(e,t);switch(n){case $t.Binary:return f0t();case $t.Utf8:return h0t();case $t.LargeBinary:return E0t();case $t.LargeUtf8:return k0t();case $t.List:return v0t(r[0]);case $t.ListView:return I0t(r[0]);case $t.LargeList:return T0t(r[0]);case $t.LargeListView:return R0t(r[0]);case $t.Struct:return b0t(r);case $t.RunEndEncoded:return M0t(r[0],r[1]);case $t.Int:return SP(i(4,$r,0),i(6,av,!1));case $t.Float:return u0t(i(4,ha,gP.HALF));case $t.Decimal:return d0t(i(4,$r,0),i(6,$r,0),i(8,$r,128));case $t.Date:return p0t(i(4,ha,Uw.MILLISECOND));case $t.Time:return g0t(i(4,ha,Ca.MILLISECOND),i(6,$r,32));case $t.Timestamp:return m0t(i(4,ha,Ca.SECOND),i(6,qw));case $t.Interval:return y0t(i(4,ha,R0.YEAR_MONTH));case $t.Duration:return A0t(i(4,ha,Ca.MILLISECOND));case $t.FixedSizeBinary:return w0t(i(4,$r,0));case $t.FixedSizeList:return x0t(r[0],i(4,$r,0));case $t.Map:return S0t(i(4,av,!1),r[0]);case $t.Union:return _0t(i(4,ha,o6.Sparse),r,Of(e,i(6,Xh),4,$r))}return{typeId:n}}function f6(e,t){const n=Of(e,t,4,(r,i)=>{const o=Bu(r,i);return[o(4,qw),o(6,qw)]});return n.length?new Map(n):null}function PP(e,t,n){const r=Bu(e,t);return{version:n,endianness:r(4,ha,0),fields:r(6,Tgt,[]),metadata:r(8,f6)}}function Tgt(e,t){return Of(e,t,4,zP)}function zP(e,t){const n=Bu(e,t),r=n(8,u6,$t.NONE),i=n(10,Xh,0),o=n(12,Igt),s=n(14,(l,c)=>Mgt(l,c));let a=BP(e,i,r,s);return o&&(o.dictionary=a,a=o),{name:n(4,qw),type:a,nullable:n(6,av,!1),metadata:n(16,f6)}}function Mgt(e,t){const n=Of(e,t,4,zP);return n.length?n:null}function Igt(e,t){if(!t)return null;const n=Bu(e,t);return c0t(null,n(6,Rgt,AP()),n(8,av,!1),n(4,ma,0))}function Rgt(e,t){return BP(e,t,$t.Int)}const Cgt=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,Ngt=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`,$gt=e=>`Unsupported message type: ${e} (${bP(Af,e)})`;function r4(e,t){let n=$r(e,t)||0;if(t+=sv,n===-1&&(n=$r(e,t)||0,t+=sv),n===0)return null;const r=e.subarray(t,t+=n);if(r.byteLength<n)throw new Error(Cgt(n,r.byteLength));const i=Bu(r,0),o=i(4,ha,yS.V1),s=i(6,u6,Af.NONE),a=i(8,Xh,0),l=i(10,ma,0);let c;if(a){const u=s===Af.Schema?PP:s===Af.DictionaryBatch?kgt:s===Af.RecordBatch?FP:null;if(!u)throw new Error($gt(s));if(c=u(r,a,o),l>0){const f=e.subarray(t,t+=l);if(f.byteLength<l)throw new Error(Ngt(l,f.byteLength));c.body=f}}return{version:o,type:s,index:t,content:c}}function Ogt(e){const t=e instanceof ArrayBuffer?new Uint8Array(e):e;return t instanceof Uint8Array&&Dgt(t)?Fgt(t):Lgt(t)}function Dgt(e){if(!e||e.length<4)return!1;for(let t=0;t<6;++t)if(pP[t]!==e[t])return!1;return!0}function Lgt(e){const t=[e].flat();let n;const r=[],i=[];for(const o of t){if(!(o instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let s=0;for(;;){const a=r4(o,s);if(a===null)break;if(s=a.index,!!a.content)switch(a.type){case Af.Schema:n||(n=a.content);break;case Af.RecordBatch:r.push(a.content);break;case Af.DictionaryBatch:i.push(a.content);break}}}return{schema:n,dictionaries:i,records:r,metadata:null}}function Fgt(e){const t=e.byteLength-(pP.length+4),n=$r(e,t),r=Bu(e,t-n),i=r(4,ha,yS.V1),o=r(8,D7,[]),s=r(10,D7,[]);return{schema:r(6,(a,l)=>PP(a,l,i)),dictionaries:o.map(({offset:a})=>r4(e,a).content),records:s.map(({offset:a})=>r4(e,a).content),metadata:r(12,f6)}}function Bgt(e,t){return Pgt(Ogt(e),t)}function Pgt(e,t={}){const{schema:n={fields:[]},dictionaries:r,records:i}=e,{version:o,fields:s}=n,a=new Map,l=Ugt(t,o,a),c=new Map;zgt(n,h=>{const p=h.type;p.typeId===$t.Dictionary&&c.set(p.id,p.dictionary)});const u=new Map;for(const h of r){const{id:p,data:g,isDelta:y,body:v}=h,b=c.get(p),_=i4(b,l({...g,body:v}));if(u.has(p)){const w=u.get(p);y||w.clear(),w.add(_)}else{if(y)throw new Error("Delta update can not be first dictionary batch.");u.set(p,$7(b).add(_))}}u.forEach((h,p)=>a.set(p,h.done()));const f=s.map(h=>$7(h.type));for(const h of i){const p=l(h);s.forEach((g,y)=>f[y].add(i4(g.type,p)))}return new xgt(n,f.map(h=>h.done()),t.useProxy)}function zgt(e,t){e.fields.forEach(function n(r){t(r),r.type.dictionary?.children?.forEach(n),r.type.children?.forEach(n)})}function Ugt(e,t,n){const r={version:t,options:e,dictionary:i=>n.get(i)};return i=>{const{length:o,nodes:s,regions:a,variadic:l,body:c}=i;let u=-1,f=-1,h=-1;return{...r,length:o,node:()=>s[++u],buffer:p=>{const{length:g,offset:y}=a[++f];return p?new p(c.buffer,c.byteOffset+y,g/p.BYTES_PER_ELEMENT):c.subarray(y,y+g)},variadic:()=>l[++h],visit(p){return p.map(g=>i4(g.type,this))}}}}function i4(e,t){const{typeId:n}=e,{length:r,options:i,node:o,buffer:s,variadic:a,version:l}=t,c=Agt(e,i);if(n===$t.Null)return new c({length:r,nullCount:r,type:e});const u={...o(),type:e};switch(n){case $t.Bool:case $t.Int:case $t.Time:case $t.Duration:case $t.Float:case $t.Decimal:case $t.Date:case $t.Timestamp:case $t.Interval:case $t.FixedSizeBinary:return new c({...u,validity:s(),values:s(e.values)});case $t.Utf8:case $t.LargeUtf8:case $t.Binary:case $t.LargeBinary:return new c({...u,validity:s(),offsets:s(e.offsets),values:s()});case $t.BinaryView:case $t.Utf8View:return new c({...u,validity:s(),values:s(),data:Array.from({length:a()},()=>s())});case $t.List:case $t.LargeList:case $t.Map:return new c({...u,validity:s(),offsets:s(e.offsets),children:t.visit(e.children)});case $t.ListView:case $t.LargeListView:return new c({...u,validity:s(),offsets:s(e.offsets),sizes:s(e.offsets),children:t.visit(e.children)});case $t.FixedSizeList:case $t.Struct:return new c({...u,validity:s(),children:t.visit(e.children)});case $t.RunEndEncoded:return new c({...u,children:t.visit(e.children)});case $t.Dictionary:{const{id:f,indices:h}=e;return new c({...u,validity:s(),values:s(h.values)}).setDictionary(t.dictionary(f))}case $t.Union:return l<yS.V5&&s(),new c({...u,typeIds:s(vP),offsets:e.mode===o6.Sparse?null:s(e.offsets),children:t.visit(e.children)});default:throw new Error(l6(n))}}new Uint16Array(new Uint8Array([1,0]).buffer)[0];function jw(e,t={useDate:!0}){return Bgt(e,t)}function qgt(e){return new UP(e)}class UP{_uri;_queue;_connected;_request;_ws;_events;constructor({uri:t="ws://localhost:3000/",ipc:n=void 0}={}){this._uri=t,this._queue=[],this._connected=!1,this._request=null,this._ws=null;const r=this;this._events={open(){r._connected=!0,r.next()},close(){for(r._connected=!1,r._request=null,r._ws=null;r._queue.length;)r._queue.shift().reject("Socket closed")},error(i){if(r._request){const{reject:o}=r._request;r._request=null,r.next(),o(i)}else console.error("WebSocket error: ",i)},message(i){const{data:o}=i;if(r._request){const{query:s,resolve:a,reject:l}=r._request;if(r._request=null,r.next(),typeof o=="string"){const c=JSON.parse(o);c.error?l(c.error):a(c)}else if(s.type==="exec")a();else if(s.type==="arrow")a(jw(o,n));else throw new Error(`Unexpected socket data: ${o}`)}else console.log("WebSocket message: ",o)}}}get connected(){return this._connected}init(){this._ws=new WebSocket(this._uri),this._ws.binaryType="arraybuffer";for(const t in this._events)this._ws.addEventListener(t,this._events[t])}enqueue(t,n,r){this._ws==null&&this.init(),this._queue.push({query:t,resolve:n,reject:r}),this._connected&&!this._request&&this.next()}next(){this._queue.length&&(this._request=this._queue.shift(),this._ws.send(JSON.stringify(this._request.query)))}query(t){return new Promise((n,r)=>this.enqueue(t,n,r))}}const h6="COLUMN_REF",d6="COLUMN_PARAM",jgt="TABLE_REF",Vgt="LITERAL",Wgt="INTERVAL",qP="ORDER_BY",jP="CAST",VP="CASE",WP="WHEN",Ygt="COLLATE",YP="UNARY",HP="UNARY_POSTFIX",GP="BINARY",XP="BETWEEN",KP="NOT_BETWEEN",JP="LOGICAL_OPERATOR",ZP="IN",QP="FUNCTION",xS="AGGREGATE",p6="WINDOW",tz="WINDOW_FUNCTION",ez="WINDOW_DEF",nz="WINDOW_FRAME",rz="WINDOW_EXTENT_EXPR",Hgt="EXPRESSION",g6="FRAGMENT",iz="VERBATIM",m6="PARAM",oz="WITH_CLAUSE",sz="WINDOW_CLAUSE",az="SELECT_CLAUSE",lz="FROM_CLAUSE",Ggt="SAMPLE_CLAUSE",cz="SELECT_QUERY",uz="DESCRIBE_QUERY",fz="SET_OPERATION",Xgt="SCALAR_SUBQUERY";function dc(e){return e instanceof Wa}class Wa{type;constructor(t){this.type=t}clone(){const t=new this.constructor;for(const n in this)t[n]=this[n];return t}}class Qr extends Wa{}let y6=class extends Qr{value;constructor(t){super(Vgt),this.value=t}toString(){return hz(this.value)}};function hz(e){switch(typeof e){case"number":return Number.isFinite(e)?`${e}`:"NULL";case"string":return`'${e.replaceAll("'","''")}'`;case"boolean":return e?"TRUE":"FALSE";default:if(e==null)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`DATE '${n}-${r+1}-${i}'`:`epoch_ms(${t})`}else return e instanceof RegExp?`'${e.source}'`:`${e}`}}let SS=class extends Qr{param;constructor(t){super(m6),this.param=t}get value(){return this.param.value}toString(){return hz(this.value)}};class Kgt extends Qr{name;args;constructor(t,n=[]){super(QP),this.name=t,this.args=n}toString(){const{name:t,args:n}=this;return`${t}(${n.join(", ")})`}}function wr(e,...t){return new Kgt(e,AS(t).map(In))}function wn(e,...t){return new Dy(e,AS(t).map(In))}function kl(e,...t){return new Kh(new Qgt(e,AS(t).map(In)))}function $y(e,t){return e.flat().filter(n=>n!=null).map(n=>t(n))}function Pf(e){return $y(e,In)}function AS(e){const t=e.length;let n=t;for(;n>0&&e[n-1]===void 0;--n);return n<t?e.slice(0,n):e}function dz(e){return e.split(".")}function qg(e){return`"${e}"`}function UE(e){return e&&Jgt(e)?e.slice(1,-1):e}function Jgt(e){return e[0]==='"'&&e[e.length-1]==='"'}class Zgt extends Wa{name;def;constructor(t,n){super(sz),this.name=t,this.def=n}toString(){return`${qg(this.name)} AS ${this.def}`}}class Kh extends Qr{func;def;constructor(t,n=new v6){super(p6),this.func=t,this.def=n}over(t){return new Kh(this.func,this.def.over(t))}partitionby(...t){return new Kh(this.func,this.def.partitionby(...t))}orderby(...t){return new Kh(this.func,this.def.orderby(...t))}frame(t){return new Kh(this.func,this.def.frame(t))}toString(){return`${this.func} OVER ${this.def}`}}class Qgt extends Qr{name;args;ignoreNulls;order;constructor(t,n=[],r=!1,i=[]){super(tz),this.name=t,this.args=n,this.ignoreNulls=r,this.order=Pf([i])}toString(){const{name:t,args:n,ignoreNulls:r,order:i}=this,o=[n.join(", "),i.length?`ORDER BY ${i.join(", ")}`:"",r?"IGNORE NULLS":""].filter(s=>s).join(" ");return`${t}(${o})`}}class v6 extends Wa{name;partition;order;framedef;constructor(t,n,r,i){super(ez),this.name=t,this.partition=n,this.order=r,this.framedef=i}over(t){return Zb(this,{name:t})}partitionby(...t){return Zb(this,{partition:Pf(t)})}orderby(...t){return Zb(this,{order:Pf(t)})}frame(t){return Zb(this,{framedef:t})}toString(){const{name:t,partition:n,order:r,framedef:i}=this,o=t&&qg(t),s=[o,n?.length&&`PARTITION BY ${n.join(", ")}`,r?.length&&`ORDER BY ${r.join(", ")}`,i].filter(a=>a);return o&&s.length<2?o:`(${s.join(" ")})`}}function Zb(e,t){return new v6(t.name??e.name,t.partition??e.partition,t.order??e.order,t.framedef??e.framedef)}function ES(e){return e instanceof kS}class kS extends Qr{table;constructor(t,n){super(t),this.table=n}get column(){return""}toString(){const{column:t,table:n}=this,r=`${n??""}`,i=t==="*"?"*":qg(t);return(r?r+".":"")+i}}class pz extends kS{name;constructor(t,n){super(h6,n),this.name=t}get column(){return this.name}}function tmt(e){return e instanceof gz}class gz extends kS{param;constructor(t,n){super(d6,n),this.param=t}get column(){return`${this.param.value}`}}function zf(e){return typeof e=="string"}function o4(e){return Array.isArray(e)}function u1(e){if(e){const t=e;return typeof t?.addEventListener=="function"&&t.dynamic!==!1&&"value"in t}return!1}function Mt(e,t){const n=vz(t);return u1(e)?new gz(new SS(e),n):new pz(e,n)}class mz extends Qr{value;hint;constructor(t,n){super(iz),this.value=t,this.hint=n}toString(){return this.value}}function Zt(e){return new y6(e)}function emt(e,t){return new mz(e,t)}function Vw(e){return e instanceof yz}class yz extends Qr{table;constructor(t){super(jgt),this.table=[t].flat()}get name(){return this.table[this.table.length-1]}toString(){return this.table.map(t=>qg(t)).join(".")}}function b6(...e){const t=$y(e,String);return t?.length?new yz(t):void 0}function In(e){return zf(e)?rmt(e):TS(e)}function Oy(e){return zf(e)?emt(e):TS(e)}function TS(e){return e instanceof Qr?e:u1(e)?new SS(e):Zt(e)}function vz(e){return bz(e)}function nmt(e){return bz(e)}function bz(e){return zf(e)?imt(e):o4(e)?b6(e):e}function rmt(e){const t=dz(e);return Mt(t.pop(),b6(t))}function imt(e){return b6(dz(e))}function omt(){return new v6}class Dy extends Qr{name;args;isDistinct;filter;order;constructor(t,n,r=!1,i=null,o=[]){super(xS),this.name=t,this.args=n,this.isDistinct=r,this.filter=i,this.order=Pf([o])}distinct(t=!0){return new Dy(this.name,this.args,t,this.filter,this.order)}where(t){return zf(t)&&(t=Oy(t)),new Dy(this.name,this.args,this.isDistinct,t,this.order)}argOrder(t){return new Dy(this.name,this.args,this.isDistinct,this.filter,t)}window(){return new Kh(this)}partitionby(...t){return this.window().partitionby(...t)}orderby(...t){return this.window().orderby(...t)}frame(t){return this.window().frame(t)}toString(){const{name:t,args:n,isDistinct:r,filter:i,order:o}=this,s=[r?"DISTINCT":"",n?.length?n.join(", "):t.toLowerCase()==="count"?"*":"",o.length?`ORDER BY ${o.join(", ")}`:""].filter(l=>l).join(" "),a=i?` FILTER (WHERE ${i})`:"";return`${t}(${s})${a}`}}const smt=["any_value","approx_count_distinct","approx_quantile","arbitrary","arg_max","arg_max_null","arg_min","arg_min_null","array_agg","avg","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","corr","count","count_star","covar_pop","covar_samp","entropy","favg","first","fsum","geomean","kurtosis_pop","kurtosis","last","mad","max","max_by","median","min","min_by","mode","product","quantile","quantile_cont","quantile_disc","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_sxx","regr_sxy","regr_syy","regr_slope","reservoir_quantile","skewness","stddev","stddev_pop","stddev_samp","string_agg","sum","variance","var_pop","var_samp"];class _z extends Qr{expr;extent;constructor(t,n,r){super(t),this.expr=n,this.extent=r}toSQL(t){const{extent:n,expr:r}=this;return n?`(${r} ${t} ${n[0]} AND ${n[1]})`:""}}class wz extends _z{constructor(t,n){super(XP,t,n)}toString(){return super.toSQL("BETWEEN")}}class amt extends _z{constructor(t,n){super(KP,t,n)}toString(){return super.toSQL("NOT BETWEEN")}}class lmt extends Qr{op;left;right;constructor(t,n,r){super(GP),this.op=t,this.left=n,this.right=r}toString(){return`(${this.left} ${this.op} ${this.right})`}}class lv extends Qr{expr;_when;_else;constructor(t=void 0,n=[],r=void 0){super(VP),this.expr=t,this._when=n,this._else=r}when(t,n){return new lv(this.expr,this._when.concat(new xz(In(t),In(n))),this._else)}else(t){return new lv(this.expr,this._when,In(t))}toString(){return"CASE "+(this.expr?`${this.expr} `:"")+this._when.join(" ")+(this._else?` ELSE ${this._else}`:"")+" END"}}class xz extends Wa{when;then;constructor(t,n){super(WP),this.when=t,this.then=n}toString(){return`WHEN ${this.when} THEN ${this.then}`}}class cmt extends Qr{expr;cast;constructor(t,n){super(jP),this.expr=t,this.cast=n}toString(){return`(${this.expr})::${this.cast}`}}class umt extends Qr{spans;constructor(t){super(g6),this.spans=t}toString(){return this.spans.join("")}}class fmt extends Wa{size;perc;method;seed;constructor(t,n=!1,r,i){super(Ggt),this.size=t,this.perc=n,this.method=r,this.seed=i}toString(){const{size:t,perc:n,method:r,seed:i}=this,o=r?`${r} `:"",s=i!=null?` REPEATABLE (${i})`:"";return`${o}(${t}${n?"%":" ROWS"})${s}`}}class hmt extends Wa{expr;alias;constructor(t,n){super(az),this.expr=t,this.alias=n}toString(){const{expr:t,alias:n}=this;return!n||dmt(t,n)?`${t}`:`${t} AS ${qg(n)}`}}function dmt(e,t){return e instanceof kS&&e.table==null&&e.column===t}class s4 extends Wa{name;query;materialized;constructor(t,n,r=null){super(oz),this.name=t,this.query=n,this.materialized=r}toString(){const t=this.materialized,n=t===!0?" MATERIALIZED":t===!1?" NOT MATERIALIZED":"";return`"${this.name}" AS${n} (${this.query})`}}function _6(e){return e instanceof zt}function MS(e){return e instanceof ig}function pmt(e){return e instanceof IS}class zt extends Qr{static with(...t){return new gmt(...t)}static select(...t){return new ig().select(...t)}static from(...t){return new ig().from(...t)}static union(...t){return new m0("UNION",t.flat())}static unionAll(...t){return new m0("UNION ALL",t.flat())}static intersect(...t){return new m0("INTERSECT",t.flat())}static except(...t){return new m0("EXCEPT",t.flat())}static describe(t){return new IS(t)}_with=[];_orderby=[];_limitPerc=!1;_limit;_offset;cteFor=null;constructor(t){super(t)}get subqueries(){return[]}clone(){return this}setCteFor(t){this.cteFor=t}with(...t){const n=[],r=(i,o)=>{const s=o.clone();s.setCteFor(this),n.push(new s4(i,s))};return t.flat().forEach(i=>{if(i instanceof s4)n.push(i);else if(i!=null)for(const o in i)r(o,i[o])}),this._with=this._with.concat(n),this}orderby(...t){return this._orderby=this._orderby.concat(Pf(t)),this}limitPercent(t){return this._limitPerc=!0,this._limit=In(t),this}limit(t){return this._limitPerc=!1,this._limit=In(t),this}offset(t){return this._offset=In(t),this}}class ig extends zt{_select=[];_from=[];_where=[];_sample;_groupby=[];_having=[];_window=[];_qualify=[];_distinct=!1;constructor(){super(cz)}get subqueries(){const t=this.cteFor||this,r=(t instanceof ig?t._with:[]).reduce((o,s)=>(o[s.name]=s.query,o),{}),i=[];return this._from.forEach(({expr:o})=>{if(_6(o))i.push(o);else if(Vw(o)){const s=r[o.name];s&&i.push(s)}}),i}clone(){return Object.assign(new ig,this)}select(...t){const n=new Set,r=[],i=(o,s)=>{const a=UE(s);n.add(a),o&&r.push(new hmt(In(o),a))};return t.flat().forEach(o=>{if(o!=null)if(zf(o))i(o,o);else if(ES(o))i(o,o.column);else if(o4(o))i(o[1],o[0]);else if(dc(o))i(o,`${o}`);else for(const s in o)i(o[s],s)}),this._select=this._select.filter(o=>!n.has(o.alias)).concat(r),this}setSelect(...t){return this._select=[],this.select(...t)}distinct(t=!0){return this._distinct=!!t,this}from(...t){const n=[],r=(i,o)=>{n.push(new L7(nmt(i),UE(o)))};return t.flat().forEach(i=>{if(i!=null)if(i instanceof L7)n.push(i);else if(zf(i))r(i,i);else if(Vw(i))r(i,i.name);else if(dc(i))r(i);else if(o4(i))r(i[1],i[0]);else for(const o in i)r(i[o],o)}),this._from=this._from.concat(n),this}setFrom(...t){return this._from=[],this.from(...t)}sample(t,n,r){let i;if(typeof t=="number"){const o=t>0&&t<1,s=o?t*100:Math.floor(t);i=new fmt(s,o,n,r)}else i=t;return this._sample=i,this}where(...t){return this._where=this._where.concat($y(t,Oy)),this}setWhere(...t){return this._where=[],this.where(...t)}groupby(...t){return this._groupby=this._groupby.concat(Pf(t)),this}setGroupby(...t){return this._groupby=[],this.groupby(...t)}having(...t){return this._having=this._having.concat($y(t,Oy)),this}window(...t){const n=[];return t.flat().forEach(r=>{if(r!=null)for(const i in r)n.push(new Zgt(UE(i),r[i]))}),this._window=this._window.concat(n),this}qualify(...t){return this._qualify=this._qualify.concat($y(t,Oy)),this}toString(){const{_with:t,_select:n,_distinct:r,_from:i,_sample:o,_where:s,_groupby:a,_having:l,_window:c,_qualify:u,_orderby:f,_limitPerc:h,_limit:p,_offset:g}=this,y=[];if(t.length&&y.push(`WITH ${t.join(", ")}`),y.push(`SELECT${r?" DISTINCT":""} ${n.join(", ")}`),i.length&&y.push(`FROM ${i.join(", ")}`),s.length){const v=s.map(String).filter(b=>b).join(" AND ");v&&y.push(`WHERE ${v}`)}if(o&&y.push(`USING SAMPLE ${o}`),a.length&&y.push(`GROUP BY ${a.join(", ")}`),l.length){const v=l.map(String).filter(b=>b).join(" AND ");v&&y.push(`HAVING ${v}`)}if(c.length&&y.push(`WINDOW ${c.join(", ")}`),u.length){const v=u.map(String).filter(b=>b).join(" AND ");v&&y.push(`QUALIFY ${v}`)}return f.length&&y.push(`ORDER BY ${f.join(", ")}`),p&&y.push(`LIMIT ${p}${h?"%":""}`),g&&y.push(`OFFSET ${g}`),y.join(" ")}}class IS extends Wa{query;constructor(t){super(uz),this.query=t}clone(){return new IS(this.query.clone())}toString(){return`DESCRIBE ${this.query}`}}class m0 extends zt{op;queries;constructor(t,n){super(fz),this.op=t,this.queries=n}setCteFor(t){super.setCteFor(t);const{queries:n,cteFor:r}=this;r&&n.forEach(i=>i.setCteFor(r))}get subqueries(){return this.queries}clone(){const{op:t,queries:n,...r}=this;return Object.assign(new m0(t,n),r)}toString(){const{op:t,queries:n,_with:r,_orderby:i,_limitPerc:o,_limit:s,_offset:a}=this,l=[];return r.length&&l.push(`WITH ${r.join(", ")}`),l.push(n.join(` ${t} `)),i.length&&l.push(`ORDER BY ${i.join(", ")}`),s&&l.push(`LIMIT ${s}${o?"%":""}`),a&&l.push(`OFFSET ${a}`),l.join(" ")}}class gmt{_with;constructor(...t){this._with=t}select(...t){return zt.select(...t).with(...this._with)}from(...t){return zt.from(...t).with(...this._with)}union(...t){return zt.union(...t).with(...this._with)}unionAll(...t){return zt.unionAll(...t).with(...this._with)}intersect(...t){return zt.intersect(...t).with(...this._with)}except(...t){return zt.except(...t).with(...this._with)}}class L7 extends Wa{expr;alias;sample;constructor(t,n,r){super(lz),this.expr=t,this.alias=n,this.sample=r}toString(){const{expr:t,alias:n,sample:r}=this,i=_6(t)?`(${t})`:`${t}`;return`${n&&!(Vw(t)&&t.table.join(".")===n)?`${i} AS ${qg(n)}`:`${i}`}${r?` TABLESAMPLE ${r}`:""}`}}class mmt extends Qr{expr;values;constructor(t,n){super(ZP),this.expr=t,this.values=n}toString(){return`(${this.expr} IN (${this.values.join(", ")}))`}}class ymt extends Qr{name;steps;constructor(t,n=1){super(Wgt),this.name=t,this.steps=n}toString(){return`INTERVAL ${this.steps} ${this.name}`}}class Sz extends Qr{op;clauses;constructor(t,n){super(JP),this.op=t,this.clauses=n}toString(){const t=this.clauses;return t.length===0?"":t.length===1?`${t[0]}`:`(${t.join(` ${this.op} `)})`}}class vmt extends Sz{constructor(t){super("AND",t)}}class bmt extends Sz{constructor(t){super("OR",t)}}class Az extends Qr{expr;desc;nullsFirst;constructor(t,n,r){super(qP),this.expr=t,this.desc=n,this.nullsFirst=r}toString(){const{expr:t,desc:n,nullsFirst:r}=this;return`${t}${n?" DESC":n===!1?" ASC":""}${r?" NULLS FIRST":r===!1?" NULLS LAST":""}`}}class Ez extends Qr{op;expr;constructor(t,n,r){super(t),this.op=n,this.expr=r}}class _mt extends Ez{constructor(t,n){super(YP,t,n)}toString(){return`(${this.op} ${this.expr})`}}class wmt extends Ez{constructor(t,n){super(HP,t,n)}toString(){return`(${this.expr} ${this.op})`}}const xmt="ROWS",Smt="RANGE",Amt="GROUPS",Emt="PRECEDING",kmt="FOLLOWING",kz="CURRENT ROW",Tz="UNBOUNDED";let RS=class extends Wa{frameType;extent;exclude;constructor(t,n,r){super(nz),this.frameType=t,this.extent=u1(n)?new SS(n):n,this.exclude=r}toString(){const{frameType:t,exclude:n,extent:r}=this,[i,o]=dc(r)?r.value:r,s=F7(i,Emt),a=F7(o,kmt);return`${t} BETWEEN ${s} AND ${a}${n?` ${n}`:""}`}};function F7(e,t){return e instanceof Tmt?e:e!=null&&typeof e!="number"?`${e} ${t}`:e===0?kz:e&&Number.isFinite(e)?`${Math.abs(e)} ${t}`:`${Tz} ${t}`}class Tmt extends Wa{scope;expr;constructor(t,n=null){super(rz),this.scope=t,this.expr=n}toString(){const{scope:t,expr:n}=this;return t===kz?t:`${n??Tz} ${t}`}}function Ww(e,t){return wn("arg_max",e,t)}function Yw(e,t){return wn("arg_min",e,t)}function Mmt(e){return wn("array_agg",e)}function CS(e){return wn("avg",e)}function Imt(e,t){return wn("corr",e,t)}function sr(e){return wn("count",e)}function Rmt(e,t){return wn("covar_samp",e,t)}function Cmt(e,t){return wn("covar_pop",e,t)}function Nmt(e){return wn("entropy",e)}function $mt(e){return wn("first",e)}function Omt(e){return wn("geomean",e)}function Dmt(e){return wn("kurtosis",e)}function Lmt(e){return wn("mad",e)}function Ba(e){return wn("max",e)}function NS(e){return wn("median",e)}function ml(e){return wn("min",e)}function Fmt(e){return wn("mode",e)}function Bmt(e){return wn("last",e)}function Pmt(e){return wn("product",e)}function a4(e,t){return wn("quantile",e,t)}function Mz(e,t){return wn("regr_avgx",e,t)}function zmt(e,t){return wn("regr_avgy",e,t)}function Iz(e,t){return wn("regr_count",e,t)}function Umt(e,t){return wn("regr_intercept",e,t)}function qmt(e,t){return wn("regr_sxx",e,t)}function jmt(e,t){return wn("regr_syy",e,t)}function Vmt(e,t){return wn("regr_slope",e,t)}function Wmt(e){return wn("skewness",e)}function Rz(e){return wn("stddev",e)}function Ymt(e){return wn("stddev_pop",e)}function Hmt(e){return wn("string_agg",e)}function kr(e){return wn("sum",e)}function Gmt(e){return wn("var_samp",e)}function Xmt(e){return wn("var_pop",e)}function rs(e,t,n){return e?new lv(void 0,[new xz(In(e),In(t))],In(n)):new lv}function Kr(e,t){return new cmt(In(e),t)}function Si(e){return Kr(e,"INTEGER")}function Kmt(e){return Kr(e,"FLOAT")}function Mo(e){return Kr(e,"DOUBLE")}function Jmt(e,t,n=null){return new s4(e,t,n)}function Tl(e,t){return new ymt(e,t)}function Zmt(e){return Tl("YEARS",e)}function Qmt(e){return Tl("MONTHS",e)}function tyt(e){return Tl("DAYS",e)}function eyt(e){return Tl("HOURS",e)}function nyt(e){return Tl("MINUTES",e)}function ryt(e){return Tl("SECONDS",e)}function iyt(e){return Tl("MILLISECONDS",e)}function oyt(e){return Tl("MICROSECONDS",e)}function syt(e){return wr("epoch_ms",e)}function ayt(e,t,n=1){return wr("time_bucket",Tl(t,n),e)}function lyt(e){return wr("make_date",2012,wr("month",e),1)}function cyt(e){const t=In(e);return wr("make_date",2012,wr("month",t),wr("day",t))}function uyt(e){return wr("make_date",2012,1,wr("day",e))}function Df(e){return wr("isfinite",e)}function fyt(...e){return wr("greatest",...e)}function w6(e){return wr("exp",e)}function Cz(e){return wr("log",e)}function C0(e){return wr("ln",e)}function Iu(e){return wr("sign",e)}function Ao(e){return wr("abs",e)}function cv(e){return wr("sqrt",e)}function hyt(e){return wr("ceil",e)}function Us(e){return wr("floor",e)}function uv(e,t){return wr("round",e,t)}function dyt(e,t){return new _mt(e,In(t))}function Nz(e,t){return new wmt(e,In(t))}function Vo(e,t,n){return new lmt(e,In(t),In(n))}function Li(...e){return new vmt(Pf(e))}function Oo(...e){return new bmt(Pf(e))}function og(e){return dyt("NOT",e)}function cl(e){return Nz("IS NULL",e)}function pc(e){return Nz("IS NOT NULL",e)}function qE(e,t){return Vo("&",e,t)}function tr(e,t){return Vo("+",e,t)}function Be(e,t){return Vo("-",e,t)}function Pe(e,t){return Vo("*",e,t)}function hr(e,t){return Vo("/",e,t)}function pyt(e,t){return Vo("%",e,t)}function so(e,t){return Vo("**",e,t)}function Ns(e,t){return Vo("=",e,t)}function f1(e,t){return Vo("<>",e,t)}function fi(e,t){return Vo("<",e,t)}function ba(e,t){return Vo(">",e,t)}function sc(e,t){return Vo("<=",e,t)}function gyt(e,t){return Vo(">=",e,t)}function myt(e,t){return Vo("IS DISTINCT FROM",e,t)}function x6(e,t){return Vo("IS NOT DISTINCT FROM",e,t)}function Do(e,t){return new wz(In(e),t?.map(In))}function yyt(e,t){return new amt(In(e),t?.map(In))}function Nd(e,t){return new mmt(In(e),t.map(In))}function vyt(e,t){return new Az(In(e),!1,t)}function jg(e,t){return new Az(In(e),!0,t)}function $z(e){return wr("st_asgeojson",e)}function byt(e){return wr("st_x",e)}function _yt(e){return wr("st_y",e)}function S6(e){return wr("st_centroid",e)}function wyt(e){return byt(S6(e))}function xyt(e){return _yt(S6(e))}function ee(e,...t){return new umt(Syt(e,t))}function Syt(e,t){const n=[e[0]],r=t.length;for(let i=0,o=0;i<r;){const s=t[i];dc(s)?n[++o]=s:u1(s)?n[++o]=new SS(s):n[o]+=zf(s)?s:`${Zt(s)}`;const a=e[++i];dc(n[o])?n[++o]=a:n[o]+=a}return n.filter(i=>i).map(i=>zf(i)?new mz(i):i)}function $S(e,t,...n){return wr(e,t,...AS(n).map(TS))}function Ayt(e,t,n){return $S("regexp_matches",e,t,n)}function Eyt(e,t){return $S("contains",e,t)}function kyt(e,t){return $S("starts_with",e,t)}function Tyt(e,t){return $S("ends_with",e,t)}function Oz(...e){return wr("coalesce",...e)}function Dz(){return kl("row_number")}function Myt(){return kl("rank")}function Iyt(){return kl("dense_rank")}function Ryt(){return kl("percent_rank")}function Cyt(){return kl("cume_dist")}function Nyt(e){return kl("ntile",e)}function $yt(e,t,n){return kl("lag",e,t,n)}function l4(e,t,n){return kl("lead",e,t,n)}function Oyt(e){return kl("first_value",e)}function Dyt(e){return kl("last_value",e)}function Lyt(e,t){return kl("nth_value",e,t)}function Fyt(e,t){return new RS(xmt,e,t)}function Byt(e,t){return new RS(Smt,e,t)}function Pyt(e,t){return new RS(Amt,e,t)}const Lz={[xS]:["args","order","filter"],[XP]:["expr","extent"],[GP]:["left","right"],[VP]:["expr","_when","_else"],[jP]:["expr"],[Ygt]:["expr"],[d6]:["param","table"],[h6]:["table"],[uz]:["query"],[Hgt]:["node"],[g6]:["spans"],[lz]:["expr"],[QP]:["args"],[ZP]:["expr","values"],[JP]:["clauses"],[KP]:["expr","extent"],[qP]:["expr"],[m6]:["value"],[Xgt]:["subquery"],[az]:["expr"],[cz]:["_with","_select","_from","_where","_sample","_groupby","_having","_window","_qualify","_orderby"],[fz]:["queries","_orderby"],[YP]:["expr"],[HP]:["expr"],[WP]:["when","then"],[p6]:["func","def"],[sz]:["def"],[ez]:["partition","order","framedef"],[rz]:["expr"],[nz]:["extent"],[tz]:["args"],[oz]:["query"]};function c4(e,t){if(t.has(e))return t.get(e);if(dc(e)){const n=Lz[e.type],r=n?.length??0;if(r>0){e=e.clone();for(let i=0;i<r;++i){const o=n[i],s=e[o];if(Array.isArray(s)){const a=e[o]=s.slice(),l=s.length;for(let c=0;c<l;++c)a[c]=c4(s[c],t)}else s&&(e[o]=c4(s,t))}}}return e}function $d(e,t){if(!dc(e))return;const n=t(e);if(n)return n;const r=Lz[e.type],i=r?.length??0;for(let o=0;o<i;++o){const s=e[r[o]];if(Array.isArray(s)){const a=s.length;for(let l=0;l<a;++l)if(s[l]&&Number($d(s[l],t))<0)return n}else if(s&&Number($d(s,t))<0)return-1}}const zyt=new RegExp(`^(${smt.join("|")})$`),Uyt=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\w+\()/g;function qyt(e){return e.split(Uyt).some(t=>t.endsWith("(")&&zyt.test(t.slice(0,-1)))}function uh(e){let t=0;return $d(e,n=>{switch(n.type){case p6:return-1;case xS:return t|=1,-1;case g6:case iz:{let r=`${n}`.toLowerCase();const i=r.indexOf("(select ");return i>=0&&(r=r.slice(0,i)),r.includes(") over ")?-1:qyt(r)?(t|=2,-1):1}}}),t}function jyt(e){const t=new Set;return $d(e,n=>{n.type===xS&&t.add(n)}),Array.from(t)}function A6(e){const t={};return $d(e,n=>{(n.type===h6||n.type===d6)&&(t[`${n}`]=n)}),Object.values(t)}function Vyt(e){const t=new Set;return $d(e,n=>{n.type===m6&&t.add(n.param)}),Array.from(t)}function h1(e,t,{replace:n=!1,temp:r=!1,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function Wyt(e,{strict:t=!1}={}){return"CREATE SCHEMA "+(t?"":"IF NOT EXISTS ")+e}function Fz(e){return`INSTALL ${e}; LOAD ${e}`}function Yyt(e,{columns:t=Object.keys(e?.[0]||{})}={}){let n=[];if(Array.isArray(t)?(n=t,t=n.reduce((i,o)=>(i[o]=o,i),{})):t&&(n=Object.keys(t)),!n.length)throw new Error("Can not create table from empty column set.");const r=[];for(const i of e){const o=n.map(s=>`${TS(i[s])} AS "${t[s]}"`);r.push(`(SELECT ${o.join(", ")})`)}return r.join(" UNION ALL ")}function OS(e,t,n,r={},i={}){const{select:o=["*"],where:s,view:a,temp:l,replace:c,...u}=r,f=Zyt({...i,...u}),h=`${e}('${n}'${f?", "+f:""})`,p=s?` WHERE ${s}`:"",g=`SELECT ${o.join(", ")} FROM ${h}${p}`;return h1(t,g,{view:a,temp:l,replace:c})}function Hyt(e,t,n){return OS("read_csv",e,t,n,{auto_detect:!0,sample_size:-1})}function Gyt(e,t,n){return OS("read_json",e,t,n,{auto_detect:!0,format:"auto"})}function Xyt(e,t,n){return OS("read_parquet",e,t,n)}function Kyt(e,t,n={}){const{options:r,...i}=n;if(r){const o=Array.isArray(r)?r.join(", "):typeof r=="string"?r:Object.entries(r).map(([s,a])=>`${s}=${a}`).join(", ");Object.assign(i,{open_options:o.toUpperCase()})}return OS("st_read",e,t,i)}function Jyt(e,t,n={}){const{select:r=["*"],...i}=n,o=Yyt(t),s=r.length===1&&r[0]==="*"?o:`SELECT ${r} FROM ${o}`;return h1(e,s,i)}function Zyt(e){return Object.entries(e).map(([t,n])=>`${t}=${u4(n)}`).join(", ")}function u4(e){switch(typeof e){case"boolean":return String(e);case"string":return`'${e}'`;case"undefined":case"object":return e==null?"NULL":Array.isArray(e)?"["+e.map(t=>u4(t)).join(", ")+"]":"{"+Object.entries(e).map(([t,n])=>`'${t}': ${u4(n)}`).join(", ")+"}";default:return`${e}`}}function Qyt(e,t,n,r,i=!1){const o=i?Be(n,Mo(e)):Be(Mo(e),t),s=n===t?0:r/(n-t);return s?Pe(o,Mo(s)):o}function tvt(e,t,n,r,i,o){return e.select({index:tr(Si(Us(t)),Pe(Si(Us(n)),i)),...r}).groupby("index",o)}function evt(e,t,n){let{step:r,steps:i=25}=n;const{minstep:o=0,nice:s=!0,base:a}=n;if(s!==!1){const l=t-e,c=a?Math.log(a):Math.LN10;r=r||f4(l,i,o,c);let u=Math.log(r);const f=u>=0?0:~~(-u/c)+1,h=Math.pow(10,-f-1);u=Math.floor(e/r+h)*r,e=e<u?u-r:u,t=Math.ceil(t/r)*r,i=Math.round((t-e)/r)}return{min:e,max:t,steps:i}}function f4(e,t,n=0,r=Math.LN10){let i;const o=Math.ceil(Math.log(t)/r);let s=Math.max(n,Math.pow(10,Math.round(Math.log(e)/r)-o));for(;Math.ceil(e/s)>t;)s*=10;const a=[5,2];for(let l=0,c=a.length;l<c;++l)i=s/a[l],i>=n&&e/i<=t&&(s=i);return s}const Bz="year",B7="month",P7="day",Qb="hour",t_="minute",e_="second",nvt="millisecond",rvt="microsecond",cy=1e3,uy=cy*60,fy=uy*60,DS=fy*24,ivt=DS*7,z7=DS*30,Pz=DS*365,Bm=[{unit:e_,step:1,dt:cy},{unit:e_,step:5,dt:cy*5},{unit:e_,step:15,dt:cy*15},{unit:e_,step:30,dt:cy*30},{unit:t_,step:1,dt:uy},{unit:t_,step:5,dt:uy*5},{unit:t_,step:15,dt:uy*15},{unit:t_,step:30,dt:uy*30},{unit:Qb,step:1,dt:fy},{unit:Qb,step:3,dt:fy*3},{unit:Qb,step:6,dt:fy*6},{unit:Qb,step:12,dt:fy*12},{unit:P7,step:1,dt:DS},{unit:P7,step:7,dt:ivt},{unit:B7,step:1,dt:z7},{unit:B7,step:3,dt:z7*3},{unit:Bz,step:1,dt:Pz}];function ovt(e,t,n){const r=+t-+e,i=r/n,o=svt(Bm,i,l=>l.dt);let s,a;return o===Bm.length?(s=Bz,a=f4(r/Pz,n)):o?{unit:s,step:a}=Bm[i/Bm[o-1].dt<Bm[o].dt/i?o-1:o]:(a=f4(r,n),s=a>=1?nvt:rvt,a=a>=1?a:a*1e3),{unit:s,step:a}}function svt(e,t,n){const r=(a,l)=>Number(a)-Number(l),i=(a,l)=>r(n(a),l);let o=0,s=e.length;if(o<s){if(r(t,t)!==0)return s;do{const a=o+s>>>1;i(e[a],t)<=0?o=a+1:s=a}while(o<s)}return o}function avt(e,t,n={}){const{offset:r=0}=n,{unit:i,step:o=1}=n.interval?{unit:n.interval,step:n.step}:ovt(t[0],t[1],n.steps||40),s=ayt(e,i,o);return r?tr(s,Tl(i,r*o)):s}function Ly(e){return e}function U7(){return{apply:Ly,invert:Ly,sqlApply:In,sqlInvert:Ly}}function lvt({base:e=null}={}){if(e==null||e===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:t=>C0(t),sqlInvert:t=>w6(t)};if(e===10)return{apply:Math.log10,invert:t=>Math.pow(10,t),sqlApply:t=>Cz(t),sqlInvert:t=>so(10,t)};{const t=+e;return{apply:n=>Math.log(n)/Math.log(t),invert:n=>Math.pow(t,n),sqlApply:n=>hr(C0(n),C0(t)),sqlInvert:n=>so(t,n)}}}function cvt({constant:e=1}={}){const t=+e;return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n)),invert:n=>Math.sign(n)*Math.exp(Math.abs(n)-t),sqlApply:n=>(n=In(n),Pe(Iu(n),C0(tr(t,Ao(n))))),sqlInvert:n=>Pe(Iu(n),Be(w6(Ao(n)),t))}}function uvt(){return{apply:e=>Math.sign(e)*Math.sqrt(Math.abs(e)),invert:e=>Math.sign(e)*e*e,sqlApply:e=>(e=In(e),Pe(Iu(e),cv(Ao(e)))),sqlInvert:e=>Pe(Iu(e),so(e,2))}}function fvt({exponent:e=1}={}){const t=+e;return{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),t),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/t),sqlApply:n=>(n=In(n),Pe(Iu(n),so(Ao(n),t))),sqlInvert:n=>Pe(Iu(n),so(Ao(n),hr(1,t)))}}function q7(){return{apply:e=>Number(e),invert:e=>new Date(e),sqlApply:e=>e instanceof Date?Zt(+e):dvt(e)?Zt(Number(e.value)):syt(e),sqlInvert:Ly}}const hvt={identity:U7,linear:U7,log:lvt,symlog:cvt,sqrt:uvt,pow:fvt,time:q7,utc:q7};function E6(e){const t=hvt[e.type];if(!t)throw new Error(`Unrecognized scale type: ${e.type}`);return{...e,...t(e)}}function dvt(e){return e instanceof y6&&e.value instanceof Date}function pvt(e,t,n={},r=E6({type:"linear"})){const[i,o]=t,{offset:s=0}=n,{apply:a,sqlApply:l,sqlInvert:c}=r,u=evt(a(i),a(o),n),f=l(e),h=(u.max-u.min)/u.steps;let p=u.min===0?f:Be(f,u.min);return h!==1&&(p=hr(p,Mo(h))),p=Us(s?tr(s,p):p),h!==1&&(p=Pe(h,p)),u.min!==0&&(p=tr(u.min,p)),c(p)}function gvt(e,t,n=void 0,r=[]){const i=n?a=>Pe(a,n):a=>a,o=Us(t),s=tr(o,1);return zt.from(zt.unionAll(e.clone().select({i:Si(o),w:i(Be(s,t))}),e.clone().select({i:Si(s),w:i(Be(t,o))}))).select({index:"i",density:kr("w")},r).groupby("index",r).having(f1("density",0))}function mvt(e,t,n,r,i,o=[]){const s=r?b=>Pe(b,r):Ly,a=(b,_)=>e.clone().select({xp:t,yp:n,i:b,w:_}),l=(b,_)=>tr(b,Pe(_,i)),c=Si(Us(t)),u=Si(Us(n)),f=tr(c,1),h=tr(u,1),p=Be(t,c),g=Be(f,t),y=Be(n,u),v=Be(h,n);return zt.from(zt.unionAll(a(l(c,u),s(Pe(g,v))),a(l(c,h),s(Pe(g,y))),a(l(f,u),s(Pe(p,v))),a(l(f,h),s(Pe(p,y))))).select({index:"i",density:kr("w")},o).groupby("index",o).having(f1("density",0))}function yvt(e,t,n,r,i,o,s=[],a=!0){e.select({x:Si(Us(t)),y:Si(Us(n))});const l=s.concat(r),c=zt.from(e).select(l,{x0:"x",y0:"y",dx:Be(l4("x").over("sw"),"x"),dy:Be(l4("y").over("sw"),"y")}).window({sw:omt().partitionby(l).orderby(vyt("x"))}).qualify([Oo(fi("x0",i),fi(tr("x0","dx"),i)),Oo(fi("y0",o),fi(tr("y0","dy"),o)),Oo(ba("x0",0),ba(tr("x0","dx"),0)),Oo(ba("y0",0),ba(tr("y0","dy"),0))]),u=zt.select({x:fyt(Ba(Ao("dx")),Ba(Ao("dy")))}).from("pairs"),f=zt.select({i:Si(ee`UNNEST(range((${u})))`)}),h=zt.unionAll(zt.select(l,{x:tr("x0","i"),y:tr("y0",Si(uv(hr(Pe("i","dy"),"dx"))))}).from("pairs","indices").where([sc(Ao("dy"),Ao("dx")),fi("i",Ao("dx"))]),zt.select(l,{x:tr("x0",Si(uv(hr(Pe(Pe(Iu("dy"),"i"),"dx"),"dy")))),y:tr("y0",Pe(Iu("dy"),"i"))}).from("pairs","indices").where([ba(Ao("dy"),Ao("dx")),fi("i",Ao("dy"))]),zt.select(l,{x:"x0",y:"y0"}).from("pairs").where(cl("dx"))),p=zt.from("raster").select(l,"x","y",a?{w:hr(1,sr().partitionby(["x"].concat(l)))}:null).where([sc(0,"x"),fi("x",i),sc(0,"y"),fi("y",o)]);return zt.with({pairs:c,indices:f,raster:h,points:p}).from("points").select(s,{index:tr("x",Pe("y",Si(i))),density:a?kr("w"):sr()}).groupby("index",s)}function vvt(e,t,n,r,i=[]){const o=Si(Us(t)),s=_6(e),a=s?"input":e,l=s?zt.with(Jmt(String(a),e,!0)):zt,c=u=>zt.from(a).select(u).groupby(o,i);return l.union(c([{[n]:ml(n),[r]:Yw(r,n)},...i]),c([{[n]:Ba(n),[r]:Ww(r,n)},...i]),c([{[n]:Yw(n,r),[r]:ml(r)},...i]),c([{[n]:Ww(n,r),[r]:Ba(r)},...i])).orderby(i,n)}function zz(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n){const i=e.charCodeAt(n),o=i&65280;o&&(t=j7(t^o>>8)),t=j7(t^i&255)}return bvt(t)>>>0}function j7(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function bvt(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,e&4294967295}function _vt(e,t,n){switch(e.name){case"count":case"count_star":return wvt(t,e);case"sum":return qz(t,e);case"avg":return xvt(t,e);case"geomean":return Svt(t,e);case"arg_max":return Avt(t,e);case"arg_min":return Evt(t,e);case"variance":case"var_samp":return n_(t,e,n);case"var_pop":return n_(t,e,n,!1);case"stddev":case"stddev_samp":return cv(n_(t,e,n));case"stddev_pop":return cv(n_(t,e,n,!1));case"covar_samp":return ew(t,e,n);case"covar_pop":return ew(t,e,n,!1);case"corr":return V7(t,e,n);case"regr_count":return Vg(t,e).expr;case"regr_avgx":return Vz(t,e);case"regr_avgy":return Wz(t,e);case"regr_syy":return d4(t,0,e,n);case"regr_sxx":return d4(t,1,e,n);case"regr_sxy":return ew(t,e,n,null);case"regr_slope":return Yz(t,e,n);case"regr_intercept":return kvt(t,e,n);case"regr_r2":return so(V7(t,e,n),2);case"max":case"min":case"bit_and":case"bit_or":case"bit_xor":case"bool_and":case"bool_or":case"product":{const r=Uz(e);return t[r]=e,ee`${e.name}("${r}")`}default:return null}}function Uz(e){return"pre_"+zz(`${e}`).toString(16)}function ho(e,t,n){const r=n?.filter;r&&(t=t.filter?t.where(Li(r,t.filter)):t.where(r));const i=Uz(t);return e[i]=t,i}function k6(e,t){const n=ho(e,sr(t.args[0]),t);return{expr:Oz(kr(n),0),name:n}}function wvt(e,t){return Oz(qz(e,t),0)}function qz(e,t){return kr(ho(e,t))}function xvt(e,t){const n=ho(e,t),{expr:r,name:i}=k6(e,t);return hr(kr(Pe(n,i)),r)}function Svt(e,t){const n=t.args[0],r=ho(e,kr(C0(n)),t),{expr:i}=k6(e,t);return w6(hr(kr(r),i))}function Avt(e,t){const n=ho(e,t),r=ho(e,Ba(t.args[1]),t);return Ww(n,r)}function Evt(e,t){const n=ho(e,t),r=ho(e,ml(t.args[1]),t);return Yw(n,r)}function n_(e,t,n,r=!0){const i=t.args[0],{expr:o}=k6(e,t),s=Be(i,n(i)),a=ho(e,kr(so(s,2)),t),l=ho(e,kr(s),t),c=r?Be(o,1):o;return hr(Be(kr(a),hr(so(kr(l),2),o)),c)}function ew(e,t,n,r=!0){const{expr:i}=Vg(e,t),o=jz(e,t,n),s=fv(e,1,t,n),a=fv(e,0,t,n),l=Be(o,hr(Pe(s,a),i));return r===null?l:r?hr(l,Be(i,1)):hr(l,i)}function V7(e,t,n){const{expr:r}=Vg(e,t),i=jz(e,t,n),o=h4(e,1,t,n),s=h4(e,0,t,n),a=fv(e,1,t,n),l=fv(e,0,t,n),c=Be(o,hr(so(a,2),r)),u=Be(s,hr(so(l,2),r));return hr(Be(i,hr(Pe(a,l),r)),cv(Pe(c,u)))}function Vg(e,t){const[n,r]=t.args,i=ho(e,Iz(n,r),t);return{expr:kr(i),name:i}}function fv(e,t,n,r){const i=n.args,o=i[t],s=i[1-t],a=kr(Be(o,r(o))).where(pc(s));return kr(ho(e,a,n))}function h4(e,t,n,r){const i=n.args,o=i[t],s=i[1-t],a=kr(so(Be(o,r(o)),2)).where(pc(s));return kr(ho(e,a,n))}function jz(e,t,n){const[r,i]=t.args,o=kr(Pe(Be(i,n(i)),Be(r,n(r))));return kr(ho(e,o,t))}function Vz(e,t){const[n,r]=t.args,{expr:i,name:o}=Vg(e,t),s=ho(e,Mz(n,r),t);return hr(kr(Pe(s,o)),i)}function Wz(e,t){const[n,r]=t.args,{expr:i,name:o}=Vg(e,t),s=ho(e,zmt(n,r),t);return hr(kr(Pe(s,o)),i)}function d4(e,t,n,r){const{expr:i}=Vg(e,n),o=fv(e,t,n,r),s=h4(e,t,n,r);return Be(s,hr(so(o,2),i))}function Yz(e,t,n){const r=ew(e,t,n,null),i=d4(e,1,t,n);return hr(r,i)}function kvt(e,t,n){const r=Vz(e,t),i=Wz(e,t),o=Yz(e,t,n);return Be(i,Pe(o,r))}function Tvt(e){if(!e.filterStable)return null;const t=e.query();if(!MS(t))return null;const n=Hw(t,l=>{const c=l._from[0]?.expr;return Vw(c)?c.name:c});if(typeof n!="string")return null;const r=new Map,i={},o={},s=[],a=l=>{const c=l.column,u=Hw(t,f=>f._select.find(h=>h.alias===c)?.expr);return ee`(SELECT avg(${u??l}) FROM "${n}")`};for(const{alias:l,expr:c}of t._select){if(uh(c)>1)return null;const u=jyt(c);if(u.length===0)s.push(l),i[l]=c;else{for(const f of u){if(f.isDistinct)return null;const h=_vt(f,i,a);if(!h)return null;r.set(f,h)}o[l]=c4(c,r)}}return r.size?{group:s,preagg:i,output:o}:null}function Hw(e,t){const n=e.subqueries;if(MS(e)&&n.length===0)return t(e);const r=Hw(n[0],t);for(let i=1;i<n.length;++i){const o=Hw(n[i],t);if(o!==void 0&&o!==r)return NaN}return r}const Mvt={skip:!0,result:null};class Ivt{entries;active;mc;_schema;_enabled;constructor(t,{schema:n="mosaic",enabled:r=!0}={}){this.entries=new Map,this.active=null,this.mc=t,this._schema=n,this._enabled=r}set enabled(t){this._enabled!==t&&(t||this.clear(),this._enabled=t)}get enabled(){return this._enabled}set schema(t){this._schema!==t&&(this.clear(),this._schema=t)}get schema(){return this._schema}dropSchema(){return this.clear(),this.mc.exec(`DROP SCHEMA IF EXISTS "${this.schema}" CASCADE`)}clear(){this.entries.clear(),this.active=null}request(t,n,r){if(!this.enabled||r==null)return null;const{entries:i,mc:o,schema:s}=this,{source:a}=r;if(!a||this.active&&(this.active.source!==a&&this.clear(),this.active?.source===null))return null;let{active:l}=this;if(!l&&(r.predicate==null||(this.active=l=Rvt(r),l.source===null)))return null;if(i.has(t))return i.get(t);const c=Tvt(t);let u;if(!c)u=null;else if(n.skip(t,r))u=Mvt;else{const f=n.remove(a).predicate(t);u=$vt(t.query(f),l,c,s),u.result=o.exec([`CREATE SCHEMA IF NOT EXISTS ${s}`,h1(u.table,u.create,{temp:!1})]),u.result.catch(h=>o.logger().error(h))}return i.set(t,u),u}}function Rvt(e){const{source:t,meta:n}=e,r=e.predicate,i=A6(r).map(a=>a.column);let o,s;if(!n||!i)return{source:null,columns:s,predicate:o};switch(n.type){case"point":o=a=>a,s=Object.fromEntries(i.map(a=>[`${a}`,In(a)]));break;case"interval":{const{scales:a,bin:l,pixelSize:c=1}=n;if(!a)break;const u=a.map(f=>Nvt(f,c,l));u.some(f=>!f)||(u.length===1?(o=f=>f?Do("active0",f.extent?.map(u[0])):[],s={active0:u[0](r.expr)}):(o=f=>f?Li(f.clauses.map((h,p)=>Do(`active${p}`,h.extent?.map(u[p])))):[],s=Object.fromEntries(r.clauses.map((f,h)=>[`active${h}`,u[h](f.expr)]))))}}return{source:s?t:null,columns:s,predicate:o}}const Cvt={ceil:hyt,round:uv};function Nvt(e,t,n){const{type:r,domain:i,range:o,apply:s,sqlApply:a}=E6(e);if(!s)return;const l=Cvt[`${n}`.toLowerCase()]||Us,c=i.map(y=>Number(y)),u=s(Math.min(...c)),f=s(Math.max(...c)),h=(r==="identity"?1:Math.abs(o[1]-o[0])/(f-u))/t,p=h===1?y=>y:y=>Pe(Mo(h),y),g=u===0?y=>y:y=>Be(y,Mo(u));return y=>Si(l(p(g(a(y)))))}function $vt(e,t,n,r){const{group:i,output:o,preagg:s}=n,{columns:a}=t,l=e.setSelect({...s,...a}).groupby(Object.keys(a)),[c]=l.subqueries;if(c){const v=Object.values(a).flatMap(b=>A6(b).map(_=>_.column));Ovt(c,v)}const u=l._having,f=l._orderby;l._having=[],l._orderby=[];const h=l.toString(),p=(zz(h)>>>0).toString(16),g=`${r}.preagg_${p}`,y=zt.select(i,o).from(g).groupby(i).having(u).orderby(f);return new Lvt({table:g,create:h,active:t,select:y})}function Ovt(e,t){const n=new Set,r=i=>{if(!n.has(i)){if(n.add(i),MS(i)&&i._from.length&&(i.select(t),Dvt(i))){const o=new Set(i._groupby.flatMap(s=>s instanceof pz?[s.name]:[]));i.groupby(t.filter(s=>!o.has(s)))}i.subqueries.forEach(r)}};r(e)}function Dvt(e){return e._groupby.length>0||e._select.some(t=>uh(t))}class Lvt{table;create;result;active;select;skip;constructor({table:t,create:n,active:r,select:i}){this.table=t,this.create=n,this.result=null,this.active=r,this.select=i,this.skip=!1}query(t){return this.select.clone().where(this.active.predicate(t))}}function p4(){return{debug(){},info(){},log(){},warn(){},error(){},group(){},groupCollapsed(){},groupEnd(){}}}const Jh=Object.freeze({pending:Symbol("pending"),ready:Symbol("ready"),error:Symbol("error"),done:Symbol("done")});class T6 extends Promise{_resolve;_reject;_state;_value;constructor(){let t,n;super((r,i)=>{t=r,n=i}),this._resolve=t,this._reject=n,this._state=Jh.pending,this._value=void 0}fulfill(t){if(this._value!==void 0){if(t!==void 0)throw Error("Promise is ready and fulfill has a provided value");this._resolve(this._value)}else{if(t===void 0)throw Error("Promise is neither ready nor has provided value");this._resolve(t)}return this._state=Jh.done,this}ready(t){return this._state=Jh.ready,this._value=t,this}reject(t){return this._state=Jh.error,this._reject(t),this}get state(){return this._state}}T6.prototype.constructor=Promise;function Fvt(e){return typeof requestAnimationFrame<"u"?requestAnimationFrame(e):typeof setImmediate<"u"?setImmediate(e):setTimeout(e)}function Bvt(e,t){let n=[],r=0;function i(){const o=Pvt(n,t);n=[],r=0;for(const s of o)Uvt(s,e),Vvt(s,t)}return{add(o,s){o.request.type==="arrow"?(r||=Fvt(()=>i()),n.push({entry:o,priority:s,index:n.length})):e(o,s)}}}function Pvt(e,t){const n=[],r=new Map;for(const i of e){const{entry:{request:o}}=i,s=zvt(o.query,t);if(!r.has(s)){const a=[];n.push(a),r.set(s,a)}r.get(s).push(i)}return n}function zvt(e,t){const n=`${e}`;if(MS(e)&&!t.get(n)){if(e._orderby.length||e._where.length||e._qualify.length||e._having.length)return n;const r=e.clone().setSelect("*"),i=e._groupby;if(i.length){const o={};e._select.forEach(({alias:s,expr:a})=>o[s]=a),r.setGroupby(i.map(s=>ES(s)&&o[s.column]||s))}else e._select.some(o=>uh(o.expr))&&r.setGroupby("ALL");return`${r}`}else return n}function Uvt(e,t){if(qvt(e))t({request:{type:"arrow",cache:!1,query:e.query=jvt(e)},result:e.result=new T6});else for(const{entry:n,priority:r}of e)t(n,r)}function qvt(e){if(e.length>1){const t=`${e[0].entry.request.query}`;for(let n=1;n<e.length;++n)if(t!==`${e[n].entry.request.query}`)return!0}return!1}function jvt(e){const t=e.maps=[],n=new Map;for(const o of e){const s=o.entry.request.query,a=[];t.push(a);for(const{alias:l,expr:c}of s._select){const u=`${c}`;n.has(u)||n.set(u,[`col${n.size}`,c]);const[f]=n.get(u);a.push([f,l])}}const r=e[0].entry.request.query.clone(),i=r._groupby;if(i.length){const o={};e.maps[0].forEach(([s,a])=>o[a]=s),r.setGroupby(i.map(s=>ES(s)&&o[s.column]||s))}return r.setSelect(Array.from(n.values()))}async function Vvt(e,t){const{maps:n,query:r,result:i}=e;if(!n)return;let o;try{o=await i}catch(a){for(const{entry:l}of e)l.result.reject(a);return}const s=pmt(r);e.forEach(({entry:a},l)=>{const{request:c,result:u}=a,f=n[l],h=s&&f?Yvt(o,f):f?Wvt(o,f):o;c.cache&&t.set(String(c.query),h),u.fulfill(h)})}function Wvt(e,t){return e.select(t.map(n=>n[0]),t.map(n=>n[1]))}function Yvt(e,t){const n=new Map(t),r=[];for(const i of e)n.has(i.column_name)&&r.push({...i,column_name:n.get(i.column_name)});return r}const Hvt=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout;function Gvt(){return{get:()=>{},set:(e,t)=>t,clear:()=>{}}}function Xvt({max:e=1e3,ttl:t=10800*1e3}={}){let n=new Map;function r(){const i=performance.now()-t;let o=null,s=1/0;for(const[a,l]of n){const{last:c}=l;c<s&&(o=a,s=c),i>c&&n.delete(a)}o&&n.delete(o)}return{get(i){const o=n.get(i);if(o)return o.last=performance.now(),o.value},set(i,o){return n.set(i,{last:performance.now(),value:o}),n.size>e&&Hvt(r),o},clear(){n=new Map}}}class Kvt{queue;constructor(t){this.queue=Array.from({length:t},()=>({head:null,tail:null}))}isEmpty(){return this.queue.every(t=>!t.head)}insert(t,n){const r=this.queue[n];if(!r)throw new Error(`Invalid queue priority rank: ${n}`);const i={item:t,next:null};r.head===null?r.head=r.tail=i:r.tail=r.tail.next=i}remove(t){for(const n of this.queue){let{head:r,tail:i}=n;for(let o=null,s=r;s;o=s,s=s.next)t(s.item)&&(s===r?r=s.next:o.next=s.next,s===i&&(i=o||r));n.head=r,n.tail=i}}next(){for(const t of this.queue){const{head:n}=t;if(n!==null)return t.head=n.next,t.tail===n&&(t.tail=null),n.item}}}const y0=Object.freeze({High:0,Normal:1,Low:2});class Jvt{queue;db;clientCache;_logger;_logQueries;_consolidate;pendingResults;maxConcurrentRequests;pendingExec;constructor(t=32){this.queue=new Kvt(3),this.db=null,this.clientCache=null,this._logger=p4(),this._logQueries=!1,this._consolidate=null,this.pendingResults=[],this.maxConcurrentRequests=t,this.pendingExec=!1}next(){if(this.queue.isEmpty()||this.pendingResults.length>this.maxConcurrentRequests||this.pendingExec)return;const t=this.queue.next();if(!t)return;const{request:n,result:r}=t;this.pendingResults.push(r),n.type==="exec"&&(this.pendingExec=!0),this.submit(n,r).finally(()=>{for(;this.pendingResults.length&&this.pendingResults[0].state!==Jh.pending;){const i=this.pendingResults.shift();i.state===Jh.ready?i.fulfill():i.state===Jh.done&&this._logger.warn("Found resolved query in pending results.")}n.type==="exec"&&(this.pendingExec=!1),this.next()})}enqueue(t,n=y0.Normal){this.queue.insert(t,n),this.next()}async submit(t,n){try{const{query:r,type:i,cache:o=!1,options:s}=t,a=r?`${r}`:null;if(o){const f=this.clientCache.get(a);if(f){const h=await f;this._logger.debug("Cache"),n.ready(h);return}}const l=performance.now();this._logQueries&&this._logger.debug("Query",{type:i,sql:a,...s});const c=this.db.query({type:i,sql:a,...s});o&&this.clientCache.set(a,c);const u=await c;o&&this.clientCache.set(a,u),this._logger.debug(`Request: ${(performance.now()-l).toFixed(1)}`),n.ready(i==="exec"?null:u)}catch(r){n.reject(r)}}cache(t){return t!==void 0?this.clientCache=t===!0?Xvt():t||Gvt():this.clientCache}logger(t){return t?this._logger=t:this._logger}logQueries(t){return t!==void 0?this._logQueries=!!t:this._logQueries}connector(t){return t?this.db=t:this.db}consolidate(t){t&&!this._consolidate?this._consolidate=Bvt(this.enqueue.bind(this),this.clientCache):!t&&this._consolidate&&(this._consolidate=null)}request(t,n=y0.Normal){const r=new T6,i={request:t,result:r};return this._consolidate?this._consolidate.add(i,n):this.enqueue(i,n),r}cancel(t){const n=new Set(t);if(n.size){this.queue.remove(({result:r})=>n.has(r)?(r.reject("Canceled"),!0):!1);for(const r of this.pendingResults)n.has(r)&&r.reject("Canceled")}}clear(){this.queue.remove(({result:t})=>(t.reject("Cleared"),!0));for(const t of this.pendingResults)t.reject("Cleared");this.pendingResults=[]}}let r_;function Ya(e){return e?r_=e:r_==null&&(r_=new Zvt),r_}class Zvt{manager;preaggregator;clients=new Set;filterGroups=new Map;_logger=p4();constructor(t=new UP,n={}){const{logger:r=console,manager:i=new Jvt,cache:o=!0,consolidate:s=!0,preagg:a={}}=n;this.manager=i,this.manager.cache(o),this.manager.consolidate(s),this.databaseConnector(t),this.logger(r),this.clear(),this.preaggregator=new Ivt(this,a)}clear(t={}){const{clients:n=!0,cache:r=!0}=t;this.manager.clear(),n&&(this.filterGroups?.forEach(i=>i.disconnect()),this.filterGroups=new Map,this.clients?.forEach(i=>this.disconnect(i)),this.clients=new Set),r&&this.manager.cache().clear()}databaseConnector(t){return t?this.manager.connector(t):this.manager.connector()}logger(t){return arguments.length&&(this._logger=t||p4(),this.manager.logger(this._logger)),this._logger}cancel(t){this.manager.cancel(t)}exec(t,n={}){const{priority:r=y0.Normal}=n;return t=Array.isArray(t)?t.filter(i=>i).join(`;
`):t,this.manager.request({type:"exec",query:t},r)}query(t,n={}){const{type:r="arrow",cache:i=!0,priority:o=y0.Normal,...s}=n;return this.manager.request({type:r,query:t,cache:i,options:s},o)}prefetch(t,n={}){return this.query(t,{...n,cache:!0,priority:y0.Low})}updateClient(t,n,r=y0.Normal){return t.queryPending(),t._pending=this.query(n,{priority:r}).then(i=>t.queryResult(i).update(),i=>{this._logger?.error(i),t.queryError(i)}).catch(i=>this._logger?.error(i))}requestQuery(t,n){return this.preaggregator.clear(),n?this.updateClient(t,n):Promise.resolve(t.update())}connect(t){const{clients:n}=this;if(n?.has(t))throw new Error("Client already connected.");n?.add(t),t.coordinator=this,t.initialize(),Qvt(this,t.filterBy,t)}disconnect(t){const{clients:n,filterGroups:r}=this;if(!n?.has(t))return;n.delete(t),t.coordinator=null;const i=r?.get(t.filterBy);i&&i.clients.delete(t)}}function Qvt(e,t,n){if(!t)return;let r=e.filterGroups?.get(t);if(!r){const i=s=>t1t(e,t,s),o=()=>e1t(e,t);t.addEventListener("activate",i),t.addEventListener("value",o),r={selection:t,clients:new Set,disconnect(){t.removeEventListener("activate",i),t.removeEventListener("value",o)}},e.filterGroups?.set(t,r)}r.clients.add(n)}function t1t(e,t,n){const{preaggregator:r,filterGroups:i}=e,{clients:o}=i.get(t);for(const s of o)s.enabled&&r.request(s,t,n)}function e1t(e,t){const{preaggregator:n,filterGroups:r}=e,{clients:i}=r.get(t),{active:o}=t;return Promise.allSettled(Array.from(i,s=>{if(!s.enabled)return s.requestQuery();const a=n.request(s,t,o),l=a?null:t.predicate(s);if(a?.skip||!a&&!l)return;const c=a?.query(o.predicate)??s.query(l);return e.updateClient(s,c)}))}function n1t(e){const{coordinator:t=Ya(),...n}=e,r=new r1t(n);return t.connect(r),r}class r1t extends ch{_methods;_filterStable;constructor({selection:t=void 0,enabled:n=!0,filterStable:r=!0,...i}){super(t),this.enabled=n,this._methods=i,this._filterStable=r}get filterStable(){return this._filterStable}async prepare(){await this._methods.prepare?.()}query(t){return this._methods.query?.(t)??null}queryResult(t){return this._methods.queryResult?.(t),this}queryPending(){return this._methods.queryPending?.(),this}queryError(t){return this._methods.queryError?.(t),this}}class i1t{_callbacks;constructor(){this._callbacks=new Map}addEventListener(t,n){this._callbacks.has(t)||this._callbacks.set(t,{callbacks:new Set,pending:null,queue:new o1t}),this._callbacks.get(t).callbacks.add(n)}removeEventListener(t,n){const r=this._callbacks.get(t);r&&r.callbacks.delete(n)}willEmit(t,n){return n}emitQueueFilter(t,n){return null}cancel(t){this._callbacks.get(t)?.queue.clear()}async pending(t){await this._callbacks.get(t)?.pending}emit(t,n){const r=this._callbacks.get(t)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(t,n));else{const i=this.willEmit(t,n),{callbacks:o,queue:s}=r;if(o?.size){const a=Array.from(o,l=>l(i));r.pending=Promise.allSettled(a).then(()=>{r.pending=null,s.isEmpty()||this.emit(t,s.dequeue())})}}}}class o1t{next=null;constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(t,n){const r={value:t};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:t}=this;return this.next=t?.next||null,t?.value}}function Hz(e,t){return e===t?!1:e instanceof Date&&t instanceof Date?+e!=+t:Array.isArray(e)&&Array.isArray(t)?s1t(e,t):!0}function s1t(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function Na(e){return e instanceof _a}class _a extends i1t{_value;constructor(t){super(),this._value=t}static value(t){return new _a(t)}static array(t){if(t.some(n=>Na(n))){const n=new _a,r=()=>{n.update(t.map(i=>Na(i)?i.value:i))};return r(),t.forEach(i=>Na(i)?i.addEventListener("value",r):0),n}return new _a(t)}get value(){return this._value}update(t,{force:n}={}){return Hz(this._value,t)||n?this.emit("value",t):this.cancel("value"),this}willEmit(t,n){return t==="value"&&(this._value=n),n}}function Lo(e){return e instanceof sg}function i_(e,t){return new sg(new Xz(e),t?[t].flat():void 0)}let sg=class Gz extends _a{_resolved;_resolver;_relay;static intersect({cross:t=!1,empty:n=!1,include:r=[]}={}){return i_({cross:t,empty:n},r)}static union({cross:t=!1,empty:n=!1,include:r=[]}={}){return i_({cross:t,empty:n,union:!0},r)}static single({cross:t=!1,empty:n=!1,include:r=[]}={}){return i_({cross:t,empty:n,single:!0},r)}static crossfilter({empty:t=!1,include:n=[]}={}){return i_({cross:!0,empty:t},n)}constructor(t=new Xz,n=[]){if(super([]),this._resolved=this._value,this._resolver=t,this._relay=new Set,Array.isArray(n))for(const r of n)r._relay.add(this)}clone(){const t=new Gz(this._resolver);return t._value=t._resolved=this._value,t}remove(t){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:t}),n._value.active={source:t},n}get resolver(){return this._resolver}get single(){return this._resolver.single}get clauses(){return super.value}get active(){return this.clauses.active}get value(){return this.active?.value}valueFor(t){return this.clauses.find(n=>n.source===t)?.value}activate(t){this.emit("activate",t),this._relay.forEach(n=>n.activate(t))}update(t){return this._resolved=this._resolver.resolve(this._resolved,t,!0),this._resolved.active=t,this._relay.forEach(n=>n.update(t)),super.update(this._resolved)}reset(t){return t??=this._resolved,t.forEach(n=>n.source?.reset?.()),this._resolved=this._resolved.filter(n=>t.includes(n)),this._relay.forEach(n=>n.reset(t)),super.update(this._resolved=[])}willEmit(t,n){return t==="value"?(this._value=n,this.value):n}emitQueueFilter(t,n){return t==="value"?this._resolver.queueFilter(n):null}skip(t,n){return this._resolver.skip(t,n)}predicate(t,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,t)}};class Xz{union;cross;single;empty;constructor({union:t,cross:n,single:r,empty:i}={}){this.union=!!t,this.cross=!!n,this.single=!!r,this.empty=!!i}resolve(t,n,r=!1){const{source:i,predicate:o}=n,s=t.filter(l=>i!==l.source),a=this.single?[]:s;return this.single&&r&&s.forEach(l=>l.source?.reset?.()),o&&a.push(n),a}skip(t,n){return!!(this.cross&&n?.clients?.has(t))}predicate(t,n,r){const{empty:i,union:o}=this;if(i&&!t.length)return[Zt(!1)];if(this.skip(r,n))return;const s=t.filter(a=>!this.skip(r,a)).map(a=>a.predicate);return o&&s.length>1?Oo(s):s}queueFilter(t){if(this.cross){const n=t.active?.source;return r=>r.active?.source!==n}return null}}function a1t(e){return new l1t(e)}class l1t{_uri;_ipc;constructor({uri:t="http://localhost:3000/",ipc:n=void 0}={}){this._uri=t,this._ipc=n}async query(t){const n=fetch(this._uri,{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n;if(!r.ok)throw new Error(`Query failed with HTTP status ${r.status}: ${await r.text()}`);return t.type==="exec"?n:t.type==="arrow"?jw(await r.arrayBuffer(),this._ipc):r.json()}}function Le(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(f){s(f)}}function l(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function W7(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ye(e){return this instanceof Ye?(this.v=e,this):new Ye(e)}function ec(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(g){return Promise.resolve(g).then(p,f)}}function a(p,g){r[p]&&(i[p]=function(y){return new Promise(function(v,b){o.push([p,y,v,b])>1||l(p,y)})},g&&(i[p]=g(i[p])))}function l(p,g){try{c(r[p](g))}catch(y){h(o[0][3],y)}}function c(p){p.value instanceof Ye?Promise.resolve(p.value.v).then(u,f):h(o[0][2],p)}function u(p){l("next",p)}function f(p){l("throw",p)}function h(p,g){p(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function nw(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:Ye(e[i](s)),done:!1}:o?o(s):s}:o}}function cd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof W7=="function"?W7(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}const c1t=new TextDecoder("utf-8"),g4=e=>c1t.decode(e),u1t=new TextEncoder,M6=e=>u1t.encode(e),f1t=e=>typeof e=="number",Kz=e=>typeof e=="boolean",xi=e=>typeof e=="function",ps=e=>e!=null&&Object(e)===e,Od=e=>ps(e)&&xi(e.then),d1=e=>ps(e)&&xi(e[Symbol.iterator]),Wg=e=>ps(e)&&xi(e[Symbol.asyncIterator]),m4=e=>ps(e)&&ps(e.schema),Jz=e=>ps(e)&&"done"in e&&"value"in e,Zz=e=>ps(e)&&xi(e.stat)&&f1t(e.fd),Qz=e=>ps(e)&&I6(e.body),LS=e=>"_getDOMStream"in e&&"_getNodeStream"in e,h1t=e=>ps(e)&&xi(e.abort)&&xi(e.getWriter)&&!LS(e),I6=e=>ps(e)&&xi(e.cancel)&&xi(e.getReader)&&!LS(e),d1t=e=>ps(e)&&xi(e.end)&&xi(e.write)&&Kz(e.writable)&&!LS(e),tU=e=>ps(e)&&xi(e.read)&&xi(e.pipe)&&Kz(e.readable)&&!LS(e),p1t=e=>ps(e)&&xi(e.clear)&&xi(e.bytes)&&xi(e.position)&&xi(e.setPosition)&&xi(e.capacity)&&xi(e.getBufferIdentifier)&&xi(e.createLong),R6=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function g1t(e){const t=e[0]?[e[0]]:[];let n,r,i,o;for(let s,a,l=0,c=0,u=e.length;++l<u;){if(s=t[c],a=e[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset){a&&(t[++c]=a);continue}if({byteOffset:n,byteLength:i}=s,{byteOffset:r,byteLength:o}=a,n+i<r||r+o<n){a&&(t[++c]=a);continue}t[c]=new Uint8Array(s.buffer,n,r-n+o)}return t}function Y7(e,t,n=0,r=t.byteLength){const i=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,i),s=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return o.set(s,n),e}function gc(e,t){const n=g1t(e),r=n.reduce((u,f)=>u+f.byteLength,0);let i,o,s,a=0,l=-1;const c=Math.min(t||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],o=i.subarray(0,Math.min(i.length,c-a)),c<=a+o.length){o.length<i.length?n[l]=i.subarray(o.length):o.length===i.length&&l++,s?Y7(s,o,a):s=o;break}Y7(s||(s=new Uint8Array(c)),o,a),a+=o.length}return[s||new Uint8Array(0),n.slice(l),r-(s?s.byteLength:0)]}function Qn(e,t){let n=Jz(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=M6(n)),n instanceof ArrayBuffer?new e(n):n instanceof R6?new e(n):p1t(n)?Qn(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Pm=e=>Qn(Int32Array,e),H7=e=>Qn(BigInt64Array,e),yn=e=>Qn(Uint8Array,e),y4=e=>(e.next(),e);function*m1t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof R6?n(t):d1(t)?t:n(t);return yield*y4(function*(i){let o=null;do o=i.next(yield Qn(e,o));while(!o.done)}(r[Symbol.iterator]())),new e}const y1t=e=>m1t(Uint8Array,e);function eU(e,t){return ec(this,arguments,function*(){if(Od(t))return yield Ye(yield Ye(yield*nw(cd(eU(e,yield Ye(t))))));const r=function(s){return ec(this,arguments,function*(){yield yield Ye(yield Ye(s))})},i=function(s){return ec(this,arguments,function*(){yield Ye(yield*nw(cd(y4(function*(a){let l=null;do l=a.next(yield l?.value);while(!l.done)}(s[Symbol.iterator]())))))})},o=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof R6?r(t):d1(t)?i(t):Wg(t)?t:r(t);return yield Ye(yield*nw(cd(y4(function(s){return ec(this,arguments,function*(){let a=null;do a=yield Ye(s.next(yield yield Ye(Qn(e,a))));while(!a.done)})}(o[Symbol.asyncIterator]()))))),yield Ye(new e)})}const v1t=e=>eU(Uint8Array,e);function nU(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function b1t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const da={fromIterable(e){return o_(_1t(e))},fromAsyncIterable(e){return o_(w1t(e))},fromDOMStream(e){return o_(x1t(e))},fromNodeStream(e){return o_(A1t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},o_=e=>(e.next(),e);function*_1t(e){let t,n=!1,r=[],i,o,s,a=0;function l(){return o==="peek"?gc(r,s)[0]:([i,r,a]=gc(r,s),i)}({cmd:o,size:s}=(yield null)||{cmd:"read",size:0});const c=y1t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(s-a)?c.next():c.next(s-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||s<=a)do({cmd:o,size:s}=yield l());while(s<a);while(!t)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function w1t(e){return ec(this,arguments,function*(){let n,r=!1,i=[],o,s,a,l=0;function c(){return s==="peek"?gc(i,a)[0]:([o,i,l]=gc(i,a),o)}({cmd:s,size:a}=(yield yield Ye(null))||{cmd:"read",size:0});const u=v1t(e)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(a-l)?yield Ye(u.next()):yield Ye(u.next(a-l)),!n&&o.byteLength>0&&(i.push(o),l+=o.byteLength),n||a<=l)do({cmd:s,size:a}=yield yield Ye(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield Ye(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield Ye(u.return(new Uint8Array(0))))}return yield Ye(null)})}function x1t(e){return ec(this,arguments,function*(){let n=!1,r=!1,i=[],o,s,a,l=0;function c(){return s==="peek"?gc(i,a)[0]:([o,i,l]=gc(i,a),o)}({cmd:s,size:a}=(yield yield Ye(null))||{cmd:"read",size:0});const u=new S1t(e);try{do if({done:n,value:o}=Number.isNaN(a-l)?yield Ye(u.read()):yield Ye(u.read(a-l)),!n&&o.byteLength>0&&(i.push(yn(o)),l+=o.byteLength),n||a<=l)do({cmd:s,size:a}=yield yield Ye(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield Ye(u.cancel(f)))}finally{r===!1?yield Ye(u.cancel()):e.locked&&u.releaseLock()}return yield Ye(null)})}class S1t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Le(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Le(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=yn(n)),n})}}const jE=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function A1t(e){return ec(this,arguments,function*(){const n=[];let r="error",i=!1,o=null,s,a,l=0,c=[],u;function f(){return s==="peek"?gc(c,a)[0]:([u,c,l]=gc(c,a),u)}if({cmd:s,size:a}=(yield yield Ye(null))||{cmd:"read",size:0},e.isTTY)return yield yield Ye(new Uint8Array(0)),yield Ye(null);try{n[0]=jE(e,"end"),n[1]=jE(e,"error");do{if(n[2]=jE(e,"readable"),[r,o]=yield Ye(Promise.race(n.map(p=>p[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=yn(e.read(a-l)),u.byteLength<a-l&&(u=yn(e.read()))):u=yn(e.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:s,size:a}=yield yield Ye(f()));while(a<l)}while(!i)}finally{yield Ye(h(n,r==="error"?o:null))}return yield Ye(null);function h(p,g){return u=c=null,new Promise((y,v)=>{for(const[b,_]of p)e.off(b,_);try{const b=e.destroy;b&&b.call(e,g),g=void 0}catch(b){g=b||g}finally{g!=null?v(g):y()}})}})}var ri;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ri||(ri={}));var po;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(po||(po={}));var fo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(fo||(fo={}));var Pa;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Pa||(Pa={}));var Se;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Se||(Se={}));var mc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mc||(mc={}));const VE=2,Gl=4,lu=4,Hn=4,yf=new Int32Array(2),G7=new Float32Array(yf.buffer),X7=new Float64Array(yf.buffer),s_=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var v4;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(v4||(v4={}));let ag=class rU{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new rU(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return yf[0]=this.readInt32(t),G7[0]}readFloat64(t){return yf[s_?0:1]=this.readInt32(t),yf[s_?1:0]=this.readInt32(t+4),X7[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){G7[0]=n,this.writeInt32(t,yf[0])}writeFloat64(t,n){X7[0]=n,this.writeInt32(t,yf[s_?0:1]),this.writeInt32(t+4,yf[s_?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Gl+lu)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<lu;n++)t+=String.fromCharCode(this.readInt8(this.position_+Gl+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Gl;const i=this.bytes_.subarray(t,t+r);return n===v4.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Gl}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=lu)throw new Error("FlatBuffers: file identifier must be length "+lu);for(let n=0;n<lu;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Gl+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const o=t(i);o!==null&&r.push(o.unpack())}return r}},iU=class oU{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=ag.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=oU.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=ag.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Gl,0),this.writeInt32(this.offset()-t+Gl)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const o=(r+i)*VE;this.addInt16(o);let s=0;const a=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(o==this.bb.readInt16(l)){for(let c=VE;c<o;c+=VE)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue t;s=this.vtables[n];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Hn:0;if(n){const o=n;if(this.prep(this.minalign,Gl+lu+i),o.length!=lu)throw new TypeError("FlatBuffers: file identifier must be length "+lu);for(let s=lu-1;s>=0;s--)this.writeInt8(o.charCodeAt(s))}this.prep(this.minalign,Gl+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Gl,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;return t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(t){return t==null?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Gw;(function(e){e[e.BUFFER=0]="BUFFER"})(Gw||(Gw={}));var Xw;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Xw||(Xw={}));class vf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Hn),(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Xw.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Gw.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Xw.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Gw.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return vf.startBodyCompression(t),vf.addCodec(t,n),vf.addMethod(t,r),vf.endBodyCompression(t)}}class sU{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}}let aU=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},eu=class b4{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new b4).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Hn),(n||new b4).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new aU).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sU).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new vf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},i0=class _4{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new _4).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Hn),(n||new _4).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new eu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var lg;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(lg||(lg={}));var Kw;(function(e){e[e.DenseArray=0]="DenseArray"})(Kw||(Kw={}));class $s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new $s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Hn),(n||new $s).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return $s.startInt(t),$s.addBitWidth(t,n),$s.addIsSigned(t,r),$s.endInt(t)}}class cu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new cu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Hn),(n||new cu).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $s).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Kw.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Kw.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ai).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Hn),(n||new Ai).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ai.startKeyValue(t),Ai.addKey(t,n),Ai.addValue(t,r),Ai.endKeyValue(t)}}let K7=class hy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new hy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Hn),(n||new hy).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return hy.startBinary(t),hy.endBinary(t)}},J7=class dy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new dy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Hn),(n||new dy).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return dy.startBool(t),dy.endBool(t)}},rw=class o0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Hn),(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pa.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Pa.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return o0.startDate(t),o0.addUnit(t,n),o0.endDate(t)}},s0=class gf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new gf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Hn),(n||new gf).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return gf.startDecimal(t),gf.addPrecision(t,n),gf.addScale(t,r),gf.addBitWidth(t,i),gf.endDecimal(t)}},iw=class a0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Hn),(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Se.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Se.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return a0.startDuration(t),a0.addUnit(t,n),a0.endDuration(t)}},ow=class l0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new l0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Hn),(n||new l0).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return l0.startFixedSizeBinary(t),l0.addByteWidth(t,n),l0.endFixedSizeBinary(t)}},sw=class c0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new c0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Hn),(n||new c0).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return c0.startFixedSizeList(t),c0.addListSize(t,n),c0.endFixedSizeList(t)}};class Xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Hn),(n||new Xl).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):fo.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,fo.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Xl.startFloatingPoint(t),Xl.addPrecision(t,n),Xl.endFloatingPoint(t)}}class Kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Hn),(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,mc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Kl.startInterval(t),Kl.addUnit(t,n),Kl.endInterval(t)}}let Z7=class py{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new py).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Hn),(n||new py).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return py.startLargeBinary(t),py.endLargeBinary(t)}},Q7=class gy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new gy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Hn),(n||new gy).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return gy.startLargeUtf8(t),gy.endLargeUtf8(t)}},tO=class my{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new my).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Hn),(n||new my).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return my.startList(t),my.endList(t)}},aw=class u0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Hn),(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return u0.startMap(t),u0.addKeysSorted(t,n),u0.endMap(t)}},eO=class yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Hn),(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return yy.startNull(t),yy.endNull(t)}};class Zh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Zh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Hn),(n||new Zh).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Zh.startStruct_(t),Zh.endStruct_(t)}}class ya{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ya).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Hn),(n||new ya).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Se.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Se.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return ya.startTime(t),ya.addUnit(t,n),ya.addBitWidth(t,r),ya.endTime(t)}}class va{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new va).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Hn),(n||new va).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Se.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Se.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return va.startTimestamp(t),va.addUnit(t,n),va.addTimezone(t,r),va.endTimestamp(t)}}class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Hn),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):po.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,po.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return os.startUnion(t),os.addMode(t,n),os.addTypeIds(t,r),os.endUnion(t)}}let nO=class vy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new vy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Hn),(n||new vy).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return vy.startUtf8(t),vy.endUtf8(t)}};var _r;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(_r||(_r={}));let aa=class lw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Hn),(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_r.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new cu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new lw).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_r.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},zl=class Zc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Zc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Hn),(n||new Zc).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lg.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new aa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,lg.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,o){return Zc.startSchema(t),Zc.addEndianness(t,n),Zc.addFields(t,r),Zc.addCustomMetadata(t,i),Zc.addFeatures(t,o),Zc.endSchema(t)}};var Cn;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Cn||(Cn={}));var J;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(J||(J={}));var nu;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(nu||(nu={}));const E1t=void 0;function hv(e){if(e===null)return"null";if(e===E1t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>hv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}function dr(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function lU(e,t){return dr(e/t)+dr(e%t)/dr(t)}const k1t=Symbol.for("isArrowBigNum");function Ml(e,...t){return t.length===0?Object.setPrototypeOf(Qn(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ml.prototype[k1t]=!0;Ml.prototype.toJSON=function(){return`"${pv(this)}"`};Ml.prototype.valueOf=function(e){return cU(this,e)};Ml.prototype.toString=function(){return pv(this)};Ml.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return cU(this);case"string":return pv(this);case"default":return I1t(this)}return pv(this)};function N0(...e){return Ml.apply(this,e)}function $0(...e){return Ml.apply(this,e)}function dv(...e){return Ml.apply(this,e)}Object.setPrototypeOf(N0.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf($0.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(dv.prototype,Object.create(Uint32Array.prototype));Object.assign(N0.prototype,Ml.prototype,{constructor:N0,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign($0.prototype,Ml.prototype,{constructor:$0,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(dv.prototype,Ml.prototype,{constructor:dv,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const T1t=BigInt(4294967296)*BigInt(4294967296),M1t=T1t-BigInt(1);function cU(e,t){const{buffer:n,byteOffset:r,byteLength:i,signed:o}=e,s=new BigUint64Array(n,r,i/8),a=o&&s.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),c=0;if(a){for(const u of s)l|=(u^M1t)*(BigInt(1)<<BigInt(64*c++));l*=BigInt(-1),l-=BigInt(1)}else for(const u of s)l|=u*(BigInt(1)<<BigInt(64*c++));if(typeof t=="number"){const u=BigInt(Math.pow(10,t)),f=l/u,h=l%u;return dr(f)+dr(h)/dr(u)}return dr(l)}function pv(e){if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return WE(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return WE(e);t=t.slice();let r=1;for(let o=0;o<t.length;o++){const s=t[o],a=~s+r;t[o]=a,r&=s===0?1:0}return`-${WE(t)}`}function I1t(e){return e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:pv(e)}function WE(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let o=-1;const s=r.length-1;do{for(n[0]=r[o=0];o<s;)r[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[o];r[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class C6{static new(t,n){switch(n){case!0:return new N0(t);case!1:return new $0(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new N0(t)}return t.byteLength===16?new dv(t):new $0(t)}static signed(t){return new N0(t)}static unsigned(t){return new $0(t)}static decimal(t){return new dv(t)}constructor(t,n){return C6.new(t,n)}}var uU,fU,hU,dU,pU,gU,mU,yU,vU,bU,_U,wU,xU,SU,AU,EU,kU,TU,MU,IU,RU,CU;class ne{static isNull(t){return t?.typeId===J.Null}static isInt(t){return t?.typeId===J.Int}static isFloat(t){return t?.typeId===J.Float}static isBinary(t){return t?.typeId===J.Binary}static isLargeBinary(t){return t?.typeId===J.LargeBinary}static isUtf8(t){return t?.typeId===J.Utf8}static isLargeUtf8(t){return t?.typeId===J.LargeUtf8}static isBool(t){return t?.typeId===J.Bool}static isDecimal(t){return t?.typeId===J.Decimal}static isDate(t){return t?.typeId===J.Date}static isTime(t){return t?.typeId===J.Time}static isTimestamp(t){return t?.typeId===J.Timestamp}static isInterval(t){return t?.typeId===J.Interval}static isDuration(t){return t?.typeId===J.Duration}static isList(t){return t?.typeId===J.List}static isStruct(t){return t?.typeId===J.Struct}static isUnion(t){return t?.typeId===J.Union}static isFixedSizeBinary(t){return t?.typeId===J.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===J.FixedSizeList}static isMap(t){return t?.typeId===J.Map}static isDictionary(t){return t?.typeId===J.Dictionary}static isDenseUnion(t){return ne.isUnion(t)&&t.mode===po.Dense}static isSparseUnion(t){return ne.isUnion(t)&&t.mode===po.Sparse}constructor(t){this.typeId=t}}uU=Symbol.toStringTag;ne[uU]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(ne.prototype);class Uf extends ne{constructor(){super(J.Null)}toString(){return"Null"}}fU=Symbol.toStringTag;Uf[fU]=(e=>e[Symbol.toStringTag]="Null")(Uf.prototype);class Dd extends ne{constructor(t,n){super(J.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}hU=Symbol.toStringTag;Dd[hU]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Dd.prototype);class gv extends Dd{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(gv.prototype,"ArrayType",{value:Int32Array});class Jw extends ne{constructor(t){super(J.Float),this.precision=t}get ArrayType(){switch(this.precision){case fo.HALF:return Uint16Array;case fo.SINGLE:return Float32Array;case fo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}dU=Symbol.toStringTag;Jw[dU]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Jw.prototype);class Zw extends ne{constructor(){super(J.Binary)}toString(){return"Binary"}}pU=Symbol.toStringTag;Zw[pU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Zw.prototype);class Qw extends ne{constructor(){super(J.LargeBinary)}toString(){return"LargeBinary"}}gU=Symbol.toStringTag;Qw[gU]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(Qw.prototype);class tx extends ne{constructor(){super(J.Utf8)}toString(){return"Utf8"}}mU=Symbol.toStringTag;tx[mU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(tx.prototype);class ex extends ne{constructor(){super(J.LargeUtf8)}toString(){return"LargeUtf8"}}yU=Symbol.toStringTag;ex[yU]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(ex.prototype);class nx extends ne{constructor(){super(J.Bool)}toString(){return"Bool"}}vU=Symbol.toStringTag;nx[vU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(nx.prototype);class rx extends ne{constructor(t,n,r=128){super(J.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}bU=Symbol.toStringTag;rx[bU]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(rx.prototype);class ix extends ne{constructor(t){super(J.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Pa[this.unit]}>`}get ArrayType(){return this.unit===Pa.DAY?Int32Array:BigInt64Array}}_U=Symbol.toStringTag;ix[_U]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(ix.prototype);class ox extends ne{constructor(t,n){super(J.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Se[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}wU=Symbol.toStringTag;ox[wU]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ox.prototype);class sx extends ne{constructor(t,n){super(J.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${Se[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}xU=Symbol.toStringTag;sx[xU]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(sx.prototype);class ax extends ne{constructor(t){super(J.Interval),this.unit=t}toString(){return`Interval<${mc[this.unit]}>`}}SU=Symbol.toStringTag;ax[SU]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(ax.prototype);class lx extends ne{constructor(t){super(J.Duration),this.unit=t}toString(){return`Duration<${Se[this.unit]}>`}}AU=Symbol.toStringTag;lx[AU]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(lx.prototype);class cx extends ne{constructor(t){super(J.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}EU=Symbol.toStringTag;cx[EU]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(cx.prototype);class No extends ne{constructor(t){super(J.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}kU=Symbol.toStringTag;No[kU]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(No.prototype);class ux extends ne{constructor(t,n,r){super(J.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,o,s)=>(i[o]=s)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}TU=Symbol.toStringTag;ux[TU]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(ux.prototype);class fx extends ne{constructor(t){super(J.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}MU=Symbol.toStringTag;fx[MU]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(fx.prototype);class hx extends ne{constructor(t,n){super(J.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}IU=Symbol.toStringTag;hx[IU]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(hx.prototype);class dx extends ne{constructor(t,n=!1){var r,i,o;if(super(J.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t?.type)===null||r===void 0)&&r.children)){const s=(i=t?.type)===null||i===void 0?void 0:i.children[0];s&&(s.name="key");const a=(o=t?.type)===null||o===void 0?void 0:o.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}RU=Symbol.toStringTag;dx[RU]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(dx.prototype);const R1t=(e=>()=>++e)(-1);class cg extends ne{constructor(t,n,r,i){super(J.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?R1t():dr(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}CU=Symbol.toStringTag;cg[CU]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(cg.prototype);function ru(e){const t=e;switch(e.typeId){case J.Decimal:return e.bitWidth/32;case J.Interval:return 1+t.unit;case J.FixedSizeList:return t.listSize;case J.FixedSizeBinary:return t.byteWidth;default:return 1}}class Qe{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(o=>o[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return C1t(this,t,n)}getVisitFnByTypeId(t,n=!0){return f0(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function C1t(e,t,n=!0){return typeof t=="number"?f0(e,t,n):typeof t=="string"&&t in J?f0(e,J[t],n):t&&t instanceof ne?f0(e,rO(t),n):t?.type&&t.type instanceof ne?f0(e,rO(t.type),n):f0(e,J.NONE,n)}function f0(e,t,n=!0){let r=null;switch(t){case J.Null:r=e.visitNull;break;case J.Bool:r=e.visitBool;break;case J.Int:r=e.visitInt;break;case J.Int8:r=e.visitInt8||e.visitInt;break;case J.Int16:r=e.visitInt16||e.visitInt;break;case J.Int32:r=e.visitInt32||e.visitInt;break;case J.Int64:r=e.visitInt64||e.visitInt;break;case J.Uint8:r=e.visitUint8||e.visitInt;break;case J.Uint16:r=e.visitUint16||e.visitInt;break;case J.Uint32:r=e.visitUint32||e.visitInt;break;case J.Uint64:r=e.visitUint64||e.visitInt;break;case J.Float:r=e.visitFloat;break;case J.Float16:r=e.visitFloat16||e.visitFloat;break;case J.Float32:r=e.visitFloat32||e.visitFloat;break;case J.Float64:r=e.visitFloat64||e.visitFloat;break;case J.Utf8:r=e.visitUtf8;break;case J.LargeUtf8:r=e.visitLargeUtf8;break;case J.Binary:r=e.visitBinary;break;case J.LargeBinary:r=e.visitLargeBinary;break;case J.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case J.Date:r=e.visitDate;break;case J.DateDay:r=e.visitDateDay||e.visitDate;break;case J.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case J.Timestamp:r=e.visitTimestamp;break;case J.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case J.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case J.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case J.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case J.Time:r=e.visitTime;break;case J.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case J.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case J.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case J.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case J.Decimal:r=e.visitDecimal;break;case J.List:r=e.visitList;break;case J.Struct:r=e.visitStruct;break;case J.Union:r=e.visitUnion;break;case J.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case J.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case J.Dictionary:r=e.visitDictionary;break;case J.Interval:r=e.visitInterval;break;case J.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case J.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case J.Duration:r=e.visitDuration;break;case J.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case J.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case J.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case J.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case J.FixedSizeList:r=e.visitFixedSizeList;break;case J.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${J[t]}'`)}function rO(e){switch(e.typeId){case J.Null:return J.Null;case J.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?J.Int8:J.Uint8;case 16:return n?J.Int16:J.Uint16;case 32:return n?J.Int32:J.Uint32;case 64:return n?J.Int64:J.Uint64}return J.Int}case J.Float:switch(e.precision){case fo.HALF:return J.Float16;case fo.SINGLE:return J.Float32;case fo.DOUBLE:return J.Float64}return J.Float;case J.Binary:return J.Binary;case J.LargeBinary:return J.LargeBinary;case J.Utf8:return J.Utf8;case J.LargeUtf8:return J.LargeUtf8;case J.Bool:return J.Bool;case J.Decimal:return J.Decimal;case J.Time:switch(e.unit){case Se.SECOND:return J.TimeSecond;case Se.MILLISECOND:return J.TimeMillisecond;case Se.MICROSECOND:return J.TimeMicrosecond;case Se.NANOSECOND:return J.TimeNanosecond}return J.Time;case J.Timestamp:switch(e.unit){case Se.SECOND:return J.TimestampSecond;case Se.MILLISECOND:return J.TimestampMillisecond;case Se.MICROSECOND:return J.TimestampMicrosecond;case Se.NANOSECOND:return J.TimestampNanosecond}return J.Timestamp;case J.Date:switch(e.unit){case Pa.DAY:return J.DateDay;case Pa.MILLISECOND:return J.DateMillisecond}return J.Date;case J.Interval:switch(e.unit){case mc.DAY_TIME:return J.IntervalDayTime;case mc.YEAR_MONTH:return J.IntervalYearMonth}return J.Interval;case J.Duration:switch(e.unit){case Se.SECOND:return J.DurationSecond;case Se.MILLISECOND:return J.DurationMillisecond;case Se.MICROSECOND:return J.DurationMicrosecond;case Se.NANOSECOND:return J.DurationNanosecond}return J.Duration;case J.Map:return J.Map;case J.List:return J.List;case J.Struct:return J.Struct;case J.Union:switch(e.mode){case po.Dense:return J.DenseUnion;case po.Sparse:return J.SparseUnion}return J.Union;case J.FixedSizeBinary:return J.FixedSizeBinary;case J.FixedSizeList:return J.FixedSizeList;case J.Dictionary:return J.Dictionary}throw new Error(`Unrecognized type '${J[e.typeId]}'`)}Qe.prototype.visitInt8=null;Qe.prototype.visitInt16=null;Qe.prototype.visitInt32=null;Qe.prototype.visitInt64=null;Qe.prototype.visitUint8=null;Qe.prototype.visitUint16=null;Qe.prototype.visitUint32=null;Qe.prototype.visitUint64=null;Qe.prototype.visitFloat16=null;Qe.prototype.visitFloat32=null;Qe.prototype.visitFloat64=null;Qe.prototype.visitDateDay=null;Qe.prototype.visitDateMillisecond=null;Qe.prototype.visitTimestampSecond=null;Qe.prototype.visitTimestampMillisecond=null;Qe.prototype.visitTimestampMicrosecond=null;Qe.prototype.visitTimestampNanosecond=null;Qe.prototype.visitTimeSecond=null;Qe.prototype.visitTimeMillisecond=null;Qe.prototype.visitTimeMicrosecond=null;Qe.prototype.visitTimeNanosecond=null;Qe.prototype.visitDenseUnion=null;Qe.prototype.visitSparseUnion=null;Qe.prototype.visitIntervalDayTime=null;Qe.prototype.visitIntervalYearMonth=null;Qe.prototype.visitDuration=null;Qe.prototype.visitDurationSecond=null;Qe.prototype.visitDurationMillisecond=null;Qe.prototype.visitDurationMicrosecond=null;Qe.prototype.visitDurationNanosecond=null;const NU=new Float64Array(1),qp=new Uint32Array(NU.buffer);function $U(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function N1t(e){if(e!==e)return 32256;NU[0]=e;const t=(qp[1]&2147483648)>>16&65535;let n=qp[1]&2146435072,r=0;return n>=1089470464?qp[0]>0?n=31744:(n=(n&2080374784)>>16,r=(qp[1]&1048575)>>10):n<=1056964608?(r=1048576+(qp[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(qp[1]&1048575)+512>>10),t|n|r&65535}class Ee extends Qe{}function Ne(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const $1t=(e,t,n)=>{e[t]=Math.floor(n/864e5)},OU=(e,t,n,r)=>{if(n+1<t.length){const i=dr(t[n]),o=dr(t[n+1]);e.set(r.subarray(0,o-i),i)}},O1t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Pu=({values:e},t,n)=>{e[t]=n},N6=({values:e},t,n)=>{e[t]=n},DU=({values:e},t,n)=>{e[t]=N1t(n)},D1t=(e,t,n)=>{switch(e.type.precision){case fo.HALF:return DU(e,t,n);case fo.SINGLE:case fo.DOUBLE:return N6(e,t,n)}},LU=({values:e},t,n)=>{$1t(e,t,n.valueOf())},FU=({values:e},t,n)=>{e[t]=BigInt(n)},L1t=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},BU=({values:e,valueOffsets:t},n,r)=>OU(e,t,n,r),PU=({values:e,valueOffsets:t},n,r)=>OU(e,t,n,M6(r)),F1t=(e,t,n)=>{e.type.unit===Pa.DAY?LU(e,t,n):FU(e,t,n)},zU=({values:e},t,n)=>{e[t]=BigInt(n/1e3)},UU=({values:e},t,n)=>{e[t]=BigInt(n)},qU=({values:e},t,n)=>{e[t]=BigInt(n*1e3)},jU=({values:e},t,n)=>{e[t]=BigInt(n*1e6)},B1t=(e,t,n)=>{switch(e.type.unit){case Se.SECOND:return zU(e,t,n);case Se.MILLISECOND:return UU(e,t,n);case Se.MICROSECOND:return qU(e,t,n);case Se.NANOSECOND:return jU(e,t,n)}},VU=({values:e},t,n)=>{e[t]=n},WU=({values:e},t,n)=>{e[t]=n},YU=({values:e},t,n)=>{e[t]=n},HU=({values:e},t,n)=>{e[t]=n},P1t=(e,t,n)=>{switch(e.type.unit){case Se.SECOND:return VU(e,t,n);case Se.MILLISECOND:return WU(e,t,n);case Se.MICROSECOND:return YU(e,t,n);case Se.NANOSECOND:return HU(e,t,n)}},z1t=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},U1t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,o=za.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=i[t],l=i[t+1];a<l;)o(r,a++,n[++s]);else for(let s=-1,a=i[t],l=i[t+1];a<l;)o(r,a++,n.get(++s))},q1t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,o=za.getVisitFn(r);let{[t]:s,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(o(r,s,c),++s>=a)break},j1t=(e,t)=>(n,r,i,o)=>r&&n(r,e,t[o]),V1t=(e,t)=>(n,r,i,o)=>r&&n(r,e,t.get(o)),W1t=(e,t)=>(n,r,i,o)=>r&&n(r,e,t.get(i.name)),Y1t=(e,t)=>(n,r,i,o)=>r&&n(r,e,t[i.name]),H1t=(e,t,n)=>{const r=e.type.children.map(o=>za.getVisitFn(o.type)),i=n instanceof Map?W1t(t,n):n instanceof Ur?V1t(t,n):Array.isArray(n)?j1t(t,n):Y1t(t,n);e.type.children.forEach((o,s)=>i(r[s],e.children[s],o,s))},G1t=(e,t,n)=>{e.type.mode===po.Dense?GU(e,t,n):XU(e,t,n)},GU=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];za.visit(i,e.valueOffsets[t],n)},XU=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];za.visit(i,t,n)},X1t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},K1t=(e,t,n)=>{e.type.unit===mc.DAY_TIME?KU(e,t,n):JU(e,t,n)},KU=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},JU=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},ZU=({values:e},t,n)=>{e[t]=n},QU=({values:e},t,n)=>{e[t]=n},tq=({values:e},t,n)=>{e[t]=n},eq=({values:e},t,n)=>{e[t]=n},J1t=(e,t,n)=>{switch(e.type.unit){case Se.SECOND:return ZU(e,t,n);case Se.MILLISECOND:return QU(e,t,n);case Se.MICROSECOND:return tq(e,t,n);case Se.NANOSECOND:return eq(e,t,n)}},Z1t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],o=za.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=t*r;++s<r;)o(i,a+s,n[s]);else for(let s=-1,a=t*r;++s<r;)o(i,a+s,n.get(s))};Ee.prototype.visitBool=Ne(O1t);Ee.prototype.visitInt=Ne(Pu);Ee.prototype.visitInt8=Ne(Pu);Ee.prototype.visitInt16=Ne(Pu);Ee.prototype.visitInt32=Ne(Pu);Ee.prototype.visitInt64=Ne(Pu);Ee.prototype.visitUint8=Ne(Pu);Ee.prototype.visitUint16=Ne(Pu);Ee.prototype.visitUint32=Ne(Pu);Ee.prototype.visitUint64=Ne(Pu);Ee.prototype.visitFloat=Ne(D1t);Ee.prototype.visitFloat16=Ne(DU);Ee.prototype.visitFloat32=Ne(N6);Ee.prototype.visitFloat64=Ne(N6);Ee.prototype.visitUtf8=Ne(PU);Ee.prototype.visitLargeUtf8=Ne(PU);Ee.prototype.visitBinary=Ne(BU);Ee.prototype.visitLargeBinary=Ne(BU);Ee.prototype.visitFixedSizeBinary=Ne(L1t);Ee.prototype.visitDate=Ne(F1t);Ee.prototype.visitDateDay=Ne(LU);Ee.prototype.visitDateMillisecond=Ne(FU);Ee.prototype.visitTimestamp=Ne(B1t);Ee.prototype.visitTimestampSecond=Ne(zU);Ee.prototype.visitTimestampMillisecond=Ne(UU);Ee.prototype.visitTimestampMicrosecond=Ne(qU);Ee.prototype.visitTimestampNanosecond=Ne(jU);Ee.prototype.visitTime=Ne(P1t);Ee.prototype.visitTimeSecond=Ne(VU);Ee.prototype.visitTimeMillisecond=Ne(WU);Ee.prototype.visitTimeMicrosecond=Ne(YU);Ee.prototype.visitTimeNanosecond=Ne(HU);Ee.prototype.visitDecimal=Ne(z1t);Ee.prototype.visitList=Ne(U1t);Ee.prototype.visitStruct=Ne(H1t);Ee.prototype.visitUnion=Ne(G1t);Ee.prototype.visitDenseUnion=Ne(GU);Ee.prototype.visitSparseUnion=Ne(XU);Ee.prototype.visitDictionary=Ne(X1t);Ee.prototype.visitInterval=Ne(K1t);Ee.prototype.visitIntervalDayTime=Ne(KU);Ee.prototype.visitIntervalYearMonth=Ne(JU);Ee.prototype.visitDuration=Ne(J1t);Ee.prototype.visitDurationSecond=Ne(ZU);Ee.prototype.visitDurationMillisecond=Ne(QU);Ee.prototype.visitDurationMicrosecond=Ne(tq);Ee.prototype.visitDurationNanosecond=Ne(eq);Ee.prototype.visitFixedSizeList=Ne(Z1t);Ee.prototype.visitMap=Ne(q1t);const za=new Ee,tl=Symbol.for("parent"),O0=Symbol.for("rowIndex");class $6{constructor(t,n){return this[tl]=t,this[O0]=n,new Proxy(this,new tbt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[O0],n=this[tl],r=n.type.children,i={};for(let o=-1,s=r.length;++o<s;)i[r[o].name]=gs.visit(n.children[o],t);return i}toString(){return`{${[...this].map(([t,n])=>`${hv(t)}: ${hv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Q1t(this[tl],this[O0])}}class Q1t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,gs.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties($6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tl]:{writable:!0,enumerable:!1,configurable:!1,value:null},[O0]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class tbt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[tl].type.children.map(n=>n.name)}has(t,n){return t[tl].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[tl].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[tl].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=gs.visit(t[tl].children[r],t[O0]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[tl].type.children.findIndex(o=>o.name===n);return i!==-1?(za.visit(t[tl].children[i],t[O0],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class ye extends Qe{}function ke(e){return(t,n)=>t.getValid(n)?e(t,n):null}const ebt=(e,t)=>864e5*e[t],nbt=(e,t)=>null,nq=(e,t,n)=>{if(n+1>=t.length)return null;const r=dr(t[n]),i=dr(t[n+1]);return e.subarray(r,i)},rbt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},rq=({values:e},t)=>ebt(e,t),iq=({values:e},t)=>dr(e[t]),fh=({stride:e,values:t},n)=>t[e*n],ibt=({stride:e,values:t},n)=>$U(t[e*n]),oq=({values:e},t)=>e[t],obt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),sq=({values:e,valueOffsets:t},n)=>nq(e,t,n),aq=({values:e,valueOffsets:t},n)=>{const r=nq(e,t,n);return r!==null?g4(r):null},sbt=({values:e},t)=>e[t],abt=({type:e,values:t},n)=>e.precision!==fo.HALF?t[n]:$U(t[n]),lbt=(e,t)=>e.type.unit===Pa.DAY?rq(e,t):iq(e,t),lq=({values:e},t)=>1e3*dr(e[t]),cq=({values:e},t)=>dr(e[t]),uq=({values:e},t)=>lU(e[t],BigInt(1e3)),fq=({values:e},t)=>lU(e[t],BigInt(1e6)),cbt=(e,t)=>{switch(e.type.unit){case Se.SECOND:return lq(e,t);case Se.MILLISECOND:return cq(e,t);case Se.MICROSECOND:return uq(e,t);case Se.NANOSECOND:return fq(e,t)}},hq=({values:e},t)=>e[t],dq=({values:e},t)=>e[t],pq=({values:e},t)=>e[t],gq=({values:e},t)=>e[t],ubt=(e,t)=>{switch(e.type.unit){case Se.SECOND:return hq(e,t);case Se.MILLISECOND:return dq(e,t);case Se.MICROSECOND:return pq(e,t);case Se.NANOSECOND:return gq(e,t)}},fbt=({values:e,stride:t},n)=>C6.decimal(e.subarray(t*n,t*(n+1))),hbt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:o,[t*r+1]:s}=n,l=i[0].slice(o,s-o);return new Ur([l])},dbt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:o}=n,s=r[0];return new O6(s.slice(i,o-i))},pbt=(e,t)=>new $6(e,t),gbt=(e,t)=>e.type.mode===po.Dense?mq(e,t):yq(e,t),mq=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return gs.visit(r,e.valueOffsets[t])},yq=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return gs.visit(r,t)},mbt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},ybt=(e,t)=>e.type.unit===mc.DAY_TIME?vq(e,t):bq(e,t),vq=({values:e},t)=>e.subarray(2*t,2*(t+1)),bq=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},_q=({values:e},t)=>e[t],wq=({values:e},t)=>e[t],xq=({values:e},t)=>e[t],Sq=({values:e},t)=>e[t],vbt=(e,t)=>{switch(e.type.unit){case Se.SECOND:return _q(e,t);case Se.MILLISECOND:return wq(e,t);case Se.MICROSECOND:return xq(e,t);case Se.NANOSECOND:return Sq(e,t)}},bbt=(e,t)=>{const{stride:n,children:r}=e,o=r[0].slice(t*n,n);return new Ur([o])};ye.prototype.visitNull=ke(nbt);ye.prototype.visitBool=ke(rbt);ye.prototype.visitInt=ke(sbt);ye.prototype.visitInt8=ke(fh);ye.prototype.visitInt16=ke(fh);ye.prototype.visitInt32=ke(fh);ye.prototype.visitInt64=ke(oq);ye.prototype.visitUint8=ke(fh);ye.prototype.visitUint16=ke(fh);ye.prototype.visitUint32=ke(fh);ye.prototype.visitUint64=ke(oq);ye.prototype.visitFloat=ke(abt);ye.prototype.visitFloat16=ke(ibt);ye.prototype.visitFloat32=ke(fh);ye.prototype.visitFloat64=ke(fh);ye.prototype.visitUtf8=ke(aq);ye.prototype.visitLargeUtf8=ke(aq);ye.prototype.visitBinary=ke(sq);ye.prototype.visitLargeBinary=ke(sq);ye.prototype.visitFixedSizeBinary=ke(obt);ye.prototype.visitDate=ke(lbt);ye.prototype.visitDateDay=ke(rq);ye.prototype.visitDateMillisecond=ke(iq);ye.prototype.visitTimestamp=ke(cbt);ye.prototype.visitTimestampSecond=ke(lq);ye.prototype.visitTimestampMillisecond=ke(cq);ye.prototype.visitTimestampMicrosecond=ke(uq);ye.prototype.visitTimestampNanosecond=ke(fq);ye.prototype.visitTime=ke(ubt);ye.prototype.visitTimeSecond=ke(hq);ye.prototype.visitTimeMillisecond=ke(dq);ye.prototype.visitTimeMicrosecond=ke(pq);ye.prototype.visitTimeNanosecond=ke(gq);ye.prototype.visitDecimal=ke(fbt);ye.prototype.visitList=ke(hbt);ye.prototype.visitStruct=ke(pbt);ye.prototype.visitUnion=ke(gbt);ye.prototype.visitDenseUnion=ke(mq);ye.prototype.visitSparseUnion=ke(yq);ye.prototype.visitDictionary=ke(mbt);ye.prototype.visitInterval=ke(ybt);ye.prototype.visitIntervalDayTime=ke(vq);ye.prototype.visitIntervalYearMonth=ke(bq);ye.prototype.visitDuration=ke(vbt);ye.prototype.visitDurationSecond=ke(_q);ye.prototype.visitDurationMillisecond=ke(wq);ye.prototype.visitDurationMicrosecond=ke(xq);ye.prototype.visitDurationNanosecond=ke(Sq);ye.prototype.visitFixedSizeList=ke(bbt);ye.prototype.visitMap=ke(dbt);const gs=new ye,h0=Symbol.for("keys"),D0=Symbol.for("vals"),d0=Symbol.for("kKeysAsStrings"),w4=Symbol.for("_kKeysAsStrings");class O6{constructor(t){return this[h0]=new Ur([t.children[0]]).memoize(),this[D0]=t.children[1],new Proxy(this,new wbt)}get[d0](){return this[w4]||(this[w4]=Array.from(this[h0].toArray(),String))}[Symbol.iterator](){return new _bt(this[h0],this[D0])}get size(){return this[h0].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[h0],n=this[D0],r={};for(let i=-1,o=t.length;++i<o;)r[t.get(i)]=gs.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${hv(t)}: ${hv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class _bt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),gs.visit(this.vals,t)]})}}class wbt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[d0]}has(t,n){return t[d0].includes(n)}getOwnPropertyDescriptor(t,n){if(t[d0].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[d0].indexOf(n);if(r!==-1){const i=gs.visit(Reflect.get(t,D0),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[d0].indexOf(n);return i!==-1?(za.visit(Reflect.get(t,D0),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(O6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[h0]:{writable:!0,enumerable:!1,configurable:!1,value:null},[D0]:{writable:!0,enumerable:!1,configurable:!1,value:null},[w4]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let iO;function Aq(e,t,n,r){const{length:i=0}=e;let o=typeof t!="number"?0:t,s=typeof n!="number"?i:n;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(iO=o,o=s,s=iO),s>i&&(s=i),r?r(e,o,s):[o,s]}const D6=(e,t)=>e<0?t+e:e,oO=e=>e!==e;function Yg(e){if(typeof e!=="object"||e===null)return oO(e)?oO:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?b1t(e,n):!1:e instanceof Map?Sbt(e):Array.isArray(e)?xbt(e):e instanceof Ur?Abt(e):Ebt(e,!0)}function xbt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Yg(e[n]);return FS(t)}function Sbt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Yg(r);return FS(n)}function Abt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Yg(e.get(n));return FS(t)}function Ebt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,o=n.length;++i<o;)r[i]=Yg(e[n[i]]);return FS(r,n)}function FS(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return kbt(e,n);case Map:return sO(e,n,n.keys());case O6:case $6:case Object:case void 0:return sO(e,n,t||Object.keys(n))}return n instanceof Ur?Tbt(e,n):!1}}function kbt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Tbt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function sO(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let s=0;const a=e.length;let l=o.next(),c=r.next(),u=i.next();for(;s<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!e[s](l.value));++s,c=r.next(),u=i.next(),l=o.next());return s===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),o.return&&o.return(),!1)}function Eq(e,t,n,r){return(n&1<<r)!==0}function Mbt(e,t,n,r){return(n&1<<r)>>r}function px(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):gx(new L6(n,e,t,null,Eq)).subarray(0,r)),i}return n}function gx(e){const t=[];let n=0,r=0,i=0;for(const s of e)s&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const o=new Uint8Array(t.length+7&-8);return o.set(t),o}class L6{constructor(t,n,r,i,o){this.bytes=t,this.length=r,this.context=i,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function x4(e,t,n){if(n-t<=0)return 0;if(n-t<8){let o=0;for(const s of new L6(e,t,n-t,e,Mbt))o+=s;return o}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return x4(e,t,i)+x4(e,r,n)+Ibt(e,i>>3,r-i>>3)}function Ibt(e,t,n){let r=0,i=Math.trunc(t);const o=new DataView(e.buffer,e.byteOffset,e.byteLength),s=n===void 0?e.byteLength:i+n;for(;s-i>=4;)r+=YE(o.getUint32(i)),i+=4;for(;s-i>=2;)r+=YE(o.getUint16(i)),i+=2;for(;s-i>=1;)r+=YE(o.getUint8(i)),i+=1;return r}function YE(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Rbt=-1;class Kn{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return ne.isSparseUnion(t)?this.children.some(n=>n.nullable):ne.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),o&&(t+=o.byteLength),this.children.reduce((s,a)=>s+a.byteLength,t)}get nullCount(){if(ne.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Rbt&&(n=this.nullBitmap)&&(this._nullCount=t=n.length===0?0:this.length-x4(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,o,s=[],a){this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;o instanceof Kn?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=ru(t),o&&((l=o[0])&&(this.valueOffsets=l),(l=o[1])&&(this.values=l),(l=o[2])&&(this.nullBitmap=l),(l=o[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(ne.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],o=r.mode===po.Dense?this.valueOffsets[t]:t;return i.getValid(o)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(ne.isUnion(i)){const o=i,s=this.children[o.typeIdToChildIndex[this.typeIds[t]]],a=o.mode===po.Dense?this.valueOffsets[t]:t;r=s.getValid(a),s.setValid(a,n)}else{let{nullBitmap:o}=this;const{offset:s,length:a}=this,l=s+t,c=1<<l%8,u=l>>3;(!o||o.byteLength<=u)&&(o=new Uint8Array((s+a+63&-64)>>3).fill(255),this.nullCount>0?(o.set(px(s,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:o})):Object.assign(this,{nullBitmap:o,_nullCount:0}));const f=o[u];r=(f&c)!==0,o[u]=n?f|c:f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,o=this,s=this.children){return new Kn(t,n,r,i,o,s,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:o}=this,s=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,s,l,o.length===0||this.valueOffsets?o:this._sliceChildren(o,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===J.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(px(this.offset,n,this.nullBitmap),0);const o=this.buffers;return o[nu.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),o)}_sliceBuffers(t,n,r,i){let o;const{buffers:s}=this;return(o=s[nu.TYPE])&&(s[nu.TYPE]=o.subarray(t,t+n)),(o=s[nu.OFFSET])&&(s[nu.OFFSET]=o.subarray(t,t+n+1))||(o=s[nu.DATA])&&(s[nu.DATA]=i===6?o:o.subarray(r*t,r*(t+n))),s}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Kn.prototype.children=Object.freeze([]);class Fy extends Qe{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Kn(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.data),o=yn(t.nullBitmap),s=Pm(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,i,o])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.data),o=yn(t.nullBitmap),s=H7(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,i,o])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.data),o=yn(t.nullBitmap),s=Pm(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,i,o])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.data),o=yn(t.nullBitmap),s=H7(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,i,o])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,o=yn(t.nullBitmap),s=Pm(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,void 0,o],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,o=yn(t.nullBitmap),{length:s=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,void 0,o],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,o=Qn(n.ArrayType,t.typeIds),{["length"]:s=o.length,["nullCount"]:a=-1}=t;if(ne.isSparseUnion(n))return new Kn(n,r,s,a,[void 0,void 0,void 0,o],i);const l=Pm(t.valueOffsets);return new Kn(n,r,s,a,[l,void 0,void 0,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.indices.ArrayType,t.data),{["dictionary"]:s=new Ur([new Fy().visit({type:n.dictionary})])}=t,{["length"]:a=o.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[void 0,o,i],[],s)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=yn(t.nullBitmap),o=Qn(n.ArrayType,t.data),{["length"]:s=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,o,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Fy().visit({type:n.valueType})}=t,o=yn(t.nullBitmap),{["length"]:s=i.length/ru(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Kn(n,r,s,a,[void 0,void 0,o],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Fy().visit({type:n.childType})}=t,o=yn(t.nullBitmap),s=Pm(t.valueOffsets),{["length"]:a=s.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Kn(n,r,a,l,[s,void 0,o],[i])}}const Cbt=new Fy;function tn(e){return Cbt.visit(e)}class aO{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Nbt(e){return e.some(t=>t.nullable)}function kq(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Tq(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Mq(e,t,n,r){const i=[];for(let o=-1,s=e.length;++o<s;){const a=e[o],l=t[o],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(e[0].slice(0,0)),i}function F6(e,t,n,r){let i=0,o=0,s=t.length-1;do{if(i>=s-1)return n<t[s]?r(e,i,n-t[i]):null;o=i+Math.trunc((s-i)*.5),n<t[o]?s=o:i=o}while(i<s)}function B6(e,t){return e.getValid(t)}function mx(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return F6(r,this._offsets,n,t)}}function Iq(e){let t;function n(r,i,o){return e(r[i],o,t)}return function(r,i){const o=this.data;t=i;const s=F6(o,this._offsets,r,n);return t=void 0,s}}function Rq(e){let t;function n(r,i,o){let s=o,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=e(f,t,s)))return l+a;s=0,l+=f.length}return-1}return function(r,i){t=r;const o=this.data,s=typeof i!="number"?n(o,0,0):F6(o,this._offsets,i,n);return t=void 0,s}}class ve extends Qe{}function $bt(e,t){return t===null&&e.length>0?0:-1}function Obt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new L6(n,e.offset+(t||0),e.length,n,Eq)){if(!i)return r;++r}return-1}function Oe(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case J.Union:break;case J.Dictionary:break;default:return Obt(e,n)}const r=gs.getVisitFn(e),i=Yg(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(i(r(e,o)))return o;return-1}function Cq(e,t,n){const r=gs.getVisitFn(e),i=Yg(t);for(let o=(n||0)-1,s=e.length;++o<s;)if(i(r(e,o)))return o;return-1}ve.prototype.visitNull=$bt;ve.prototype.visitBool=Oe;ve.prototype.visitInt=Oe;ve.prototype.visitInt8=Oe;ve.prototype.visitInt16=Oe;ve.prototype.visitInt32=Oe;ve.prototype.visitInt64=Oe;ve.prototype.visitUint8=Oe;ve.prototype.visitUint16=Oe;ve.prototype.visitUint32=Oe;ve.prototype.visitUint64=Oe;ve.prototype.visitFloat=Oe;ve.prototype.visitFloat16=Oe;ve.prototype.visitFloat32=Oe;ve.prototype.visitFloat64=Oe;ve.prototype.visitUtf8=Oe;ve.prototype.visitLargeUtf8=Oe;ve.prototype.visitBinary=Oe;ve.prototype.visitLargeBinary=Oe;ve.prototype.visitFixedSizeBinary=Oe;ve.prototype.visitDate=Oe;ve.prototype.visitDateDay=Oe;ve.prototype.visitDateMillisecond=Oe;ve.prototype.visitTimestamp=Oe;ve.prototype.visitTimestampSecond=Oe;ve.prototype.visitTimestampMillisecond=Oe;ve.prototype.visitTimestampMicrosecond=Oe;ve.prototype.visitTimestampNanosecond=Oe;ve.prototype.visitTime=Oe;ve.prototype.visitTimeSecond=Oe;ve.prototype.visitTimeMillisecond=Oe;ve.prototype.visitTimeMicrosecond=Oe;ve.prototype.visitTimeNanosecond=Oe;ve.prototype.visitDecimal=Oe;ve.prototype.visitList=Oe;ve.prototype.visitStruct=Oe;ve.prototype.visitUnion=Oe;ve.prototype.visitDenseUnion=Cq;ve.prototype.visitSparseUnion=Cq;ve.prototype.visitDictionary=Oe;ve.prototype.visitInterval=Oe;ve.prototype.visitIntervalDayTime=Oe;ve.prototype.visitIntervalYearMonth=Oe;ve.prototype.visitDuration=Oe;ve.prototype.visitDurationSecond=Oe;ve.prototype.visitDurationMillisecond=Oe;ve.prototype.visitDurationMicrosecond=Oe;ve.prototype.visitDurationNanosecond=Oe;ve.prototype.visitFixedSizeList=Oe;ve.prototype.visitMap=Oe;const yx=new ve;class be extends Qe{}function Te(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(ne.isInt(t)&&t.bitWidth!==64||ne.isTime(t)&&t.bitWidth!==64||ne.isFloat(t)&&t.precision!==fo.HALF))return new aO(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new aO(e.data.length,r=>{const o=e.data[r].length,s=e.slice(n,n+o);return n+=o,new Dbt(s)})}class Dbt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}be.prototype.visitNull=Te;be.prototype.visitBool=Te;be.prototype.visitInt=Te;be.prototype.visitInt8=Te;be.prototype.visitInt16=Te;be.prototype.visitInt32=Te;be.prototype.visitInt64=Te;be.prototype.visitUint8=Te;be.prototype.visitUint16=Te;be.prototype.visitUint32=Te;be.prototype.visitUint64=Te;be.prototype.visitFloat=Te;be.prototype.visitFloat16=Te;be.prototype.visitFloat32=Te;be.prototype.visitFloat64=Te;be.prototype.visitUtf8=Te;be.prototype.visitLargeUtf8=Te;be.prototype.visitBinary=Te;be.prototype.visitLargeBinary=Te;be.prototype.visitFixedSizeBinary=Te;be.prototype.visitDate=Te;be.prototype.visitDateDay=Te;be.prototype.visitDateMillisecond=Te;be.prototype.visitTimestamp=Te;be.prototype.visitTimestampSecond=Te;be.prototype.visitTimestampMillisecond=Te;be.prototype.visitTimestampMicrosecond=Te;be.prototype.visitTimestampNanosecond=Te;be.prototype.visitTime=Te;be.prototype.visitTimeSecond=Te;be.prototype.visitTimeMillisecond=Te;be.prototype.visitTimeMicrosecond=Te;be.prototype.visitTimeNanosecond=Te;be.prototype.visitDecimal=Te;be.prototype.visitList=Te;be.prototype.visitStruct=Te;be.prototype.visitUnion=Te;be.prototype.visitDenseUnion=Te;be.prototype.visitSparseUnion=Te;be.prototype.visitDictionary=Te;be.prototype.visitInterval=Te;be.prototype.visitIntervalDayTime=Te;be.prototype.visitIntervalYearMonth=Te;be.prototype.visitDuration=Te;be.prototype.visitDurationSecond=Te;be.prototype.visitDurationMillisecond=Te;be.prototype.visitDurationMicrosecond=Te;be.prototype.visitDurationNanosecond=Te;be.prototype.visitFixedSizeList=Te;be.prototype.visitMap=Te;const P6=new be;var Nq;const $q={},Oq={};let Ur=class Vh{constructor(t){var n,r,i;const o=t[0]instanceof Vh?t.flatMap(a=>a.data):t;if(o.length===0||o.some(a=>!(a instanceof Kn)))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c}=$q[s.typeId],u=o[0];this.isValid=f=>B6(u,f),this.get=f=>a(u,f),this.set=(f,h)=>l(u,f,h),this.indexOf=f=>c(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,Oq[s.typeId]),this._offsets=Tq(o);break}this.data=o,this.type=s,this.stride=ru(s),this.numChildren=(i=(r=s.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return Nbt(this.data)}get nullCount(){return kq(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${J[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get(D6(t,this.length))}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return P6.visit(this)}concat(...t){return new Vh(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Vh(Aq(this,t,n,({data:r,_offsets:i},o,s)=>Mq(r,i,o,s)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:o}=this;switch(t.typeId){case J.Int:case J.Float:case J.Decimal:case J.Time:case J.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((s,{values:a,length:l})=>(s.array.set(a.subarray(0,l*i),s.offset),s.offset+=l*i,s),{array:new o(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Vh(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return ne.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ne.isDictionary(this.type)){const t=new vx(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Vh(n)}return new vx(this)}unmemoize(){if(ne.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Vh(n)}return this}};Nq=Symbol.toStringTag;Ur[Nq]=(e=>{e.type=ne.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(J).map(n=>J[n]).filter(n=>typeof n=="number"&&n!==J.NONE);for(const n of t){const r=gs.getVisitFnByTypeId(n),i=za.getVisitFnByTypeId(n),o=yx.getVisitFnByTypeId(n);$q[n]={get:r,set:i,indexOf:o},Oq[n]=Object.create(e,{isValid:{value:mx(B6)},get:{value:mx(gs.getVisitFnByTypeId(n))},set:{value:Iq(za.getVisitFnByTypeId(n))},indexOf:{value:Rq(yx.getVisitFnByTypeId(n))}})}return"Vector"})(Ur.prototype);class vx extends Ur{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(s){const a=o[s];if(a!==void 0)return a;const l=n.call(this,s);return o[s]=l,l}}),Object.defineProperty(this,"set",{value(s,a){r.call(this,s,a),o[s]=a}}),Object.defineProperty(this,"slice",{value:(s,a)=>new vx(i.call(this,s,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ur(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class S4{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class Cs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Hn),(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ri.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new zl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new S4).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new S4).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ri.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class qn{constructor(t=[],n,r,i=ri.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=A4(this.fields)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new qn(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new qn(n,this.metadata)}assign(...t){const n=t[0]instanceof qn?t[0]:Array.isArray(t[0])?new qn(t[0]):new qn(t),r=[...this.fields],i=a_(a_(new Map,this.metadata),n.metadata),o=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:a_(a_(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),s=A4(o,new Map);return new qn([...r,...o],i,new Map([...this.dictionaries,...s]))}}qn.prototype.fields=null;qn.prototype.metadata=null;qn.prototype.dictionaries=null;class Mr{static new(...t){let[n,r,i,o]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),o===void 0&&(o=t[0].metadata)),new Mr(`${n}`,r,i,o)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,o]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,o=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:o=this.metadata}=t[0],Mr.new(n,r,i,o)}}Mr.prototype.type=null;Mr.prototype.name=null;Mr.prototype.nullable=null;Mr.prototype.metadata=null;function a_(e,t){return new Map([...e||new Map,...t||new Map])}function A4(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const o=e[n].type;if(ne.isDictionary(o)){if(!t.has(o.id))t.set(o.id,o.dictionary);else if(t.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&A4(o.children,t)}return t}var Lbt=iU,Fbt=ag;class mv{static decode(t){t=new Fbt(yn(t));const n=Cs.getRootAsFooter(t),r=qn.decode(n.schema(),new Map,n.version());return new Bbt(r,n)}static encode(t){const n=new Lbt,r=qn.encode(n,t.schema);Cs.startRecordBatchesVector(n,t.numRecordBatches);for(const s of[...t.recordBatches()].slice().reverse())qf.encode(n,s);const i=n.endVector();Cs.startDictionariesVector(n,t.numDictionaries);for(const s of[...t.dictionaryBatches()].slice().reverse())qf.encode(n,s);const o=n.endVector();return Cs.startFooter(n),Cs.addSchema(n,r),Cs.addVersion(n,ri.V5),Cs.addRecordBatches(n,i),Cs.addDictionaries(n,o),Cs.finishFooterBuffer(n,Cs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=ri.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Bbt extends mv{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return qf.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return qf.decode(n)}return null}}class qf{static decode(t){return new qf(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),o=BigInt(n.bodyLength);return S4.createBlock(t,i,r,o)}constructor(t,n,r){this.metaDataLength=t,this.offset=dr(r),this.bodyLength=dr(n)}}const qr=Object.freeze({done:!0,value:void 0});class lO{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class z6{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Pbt extends z6{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Le(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(qr);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return da.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return da.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Le(this,void 0,void 0,function*(){return yield this.abort(t),qr})}return(t){return Le(this,void 0,void 0,function*(){return yield this.close(),qr})}read(t){return Le(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Le(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(qr)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class cw extends Pbt{write(t){if((t=yn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?g4(this.toUint8Array(!0)):this.toUint8Array(!1).then(g4)}toUint8Array(t=!1){return t?gc(this._values)[0]:Le(this,void 0,void 0,function*(){var n,r,i,o;const s=[];let a=0;try{for(var l=!0,c=cd(this),u;u=yield c.next(),n=u.done,!n;l=!0){o=u.value,l=!1;const f=o;s.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return gc(s,a)[0]})}}class bx{constructor(t){t&&(this.source=new zbt(da.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ug{constructor(t){t instanceof ug?this.source=t.source:t instanceof cw?this.source=new zh(da.fromAsyncIterable(t)):tU(t)?this.source=new zh(da.fromNodeStream(t)):I6(t)?this.source=new zh(da.fromDOMStream(t)):Qz(t)?this.source=new zh(da.fromDOMStream(t.body)):d1(t)?this.source=new zh(da.fromIterable(t)):Od(t)?this.source=new zh(da.fromAsyncIterable(t)):Wg(t)&&(this.source=new zh(da.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class zbt{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||qr)}return(t){return Object.create(this.source.return&&this.source.return(t)||qr)}}class zh{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return Le(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return Le(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Le(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t){return Le(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(t){return Le(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||qr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return Le(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||qr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class cO extends bx{constructor(t,n){super(),this.position=0,this.buffer=yn(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:r}=this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),n.subarray(i,this.position)):null}readAt(t,n){const r=this.buffer,i=Math.min(this.size,t+n);return r?r.subarray(t,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class _x extends ug{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=Le(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return Le(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(t,4);return new DataView(n,r).getInt32(0,!0)})}seek(t){return Le(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return Le(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let o=i,s=0,a=0;const l=Math.min(r,o+Math.min(r-o,t)),c=new Uint8Array(Math.max(0,(this.position=l)-o));for(;(o+=a)<l&&(s+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,s,c.byteLength-s,o));return c}return null})}readAt(t,n){return Le(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+n<i){const o=Math.min(i,t+n),s=new Uint8Array(o-t);return(yield r.read(s,0,n,t)).buffer}return new Uint8Array(n)})}close(){return Le(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return Le(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return Le(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Ubt=65536;function v0(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const fg=8,U6=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Dq{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let o=i>>>16;return i=n[2]*r[3],o+=i,i=n[3]*r[2]>>>0,o+=i,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<i?Ubt:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${v0(this.buffer[1])} ${v0(this.buffer[0])}`}}class Jn extends Dq{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Jn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Jn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.length,i=new Jn(n);for(let o=0;o<r;){const s=fg<r-o?fg:r-o,a=new Jn(new Uint32Array([Number.parseInt(t.slice(o,o+s),10),0])),l=new Jn(new Uint32Array([U6[s],0]));i.times(l),i.plus(a),o+=s}return i}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Jn.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Jn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Jn(new Uint32Array(t.buffer)).plus(n)}}class Qo extends Dq{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,r=t.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return Qo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Qo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,o=new Qo(n);for(let s=r?1:0;s<i;){const a=fg<i-s?fg:i-s,l=new Qo(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),c=new Qo(new Uint32Array([U6[a],0]));o.times(c),o.plus(l),s+=a}return r?o.negate():o}static convertArray(t){const n=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Qo.from(t[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(t,n){return new Qo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Qo(new Uint32Array(t.buffer)).plus(n)}}class Ul{constructor(t){this.buffer=t}high(){return new Qo(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Qo(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Jn(new Uint32Array([this.buffer[3],0])),r=new Jn(new Uint32Array([this.buffer[2],0])),i=new Jn(new Uint32Array([this.buffer[1],0])),o=new Jn(new Uint32Array([this.buffer[0],0])),s=new Jn(new Uint32Array([t.buffer[3],0])),a=new Jn(new Uint32Array([t.buffer[2],0])),l=new Jn(new Uint32Array([t.buffer[1],0])),c=new Jn(new Uint32Array([t.buffer[0],0]));let u=Jn.multiply(o,c);this.buffer[0]=u.low();const f=new Jn(new Uint32Array([u.high(),0]));return u=Jn.multiply(i,c),f.plus(u),u=Jn.multiply(o,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new Jn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Jn.multiply(r,c)).plus(Jn.multiply(i,l)).plus(Jn.multiply(o,a)),this.buffer[3]+=Jn.multiply(n,c).plus(Jn.multiply(r,l)).plus(Jn.multiply(i,a)).plus(Jn.multiply(o,s)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${v0(this.buffer[3])} ${v0(this.buffer[2])} ${v0(this.buffer[1])} ${v0(this.buffer[0])}`}static multiply(t,n){return new Ul(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Ul(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Ul.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Ul.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,o=new Ul(n);for(let s=r?1:0;s<i;){const a=fg<i-s?fg:i-s,l=new Ul(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0,0,0])),c=new Ul(new Uint32Array([U6[a],0,0,0]));o.times(c),o.plus(l),s+=a}return r?o.negate():o}static convertArray(t){const n=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)Ul.from(t[r],new Uint32Array(n.buffer,n.byteOffset+16*r,4));return n}}class Lq extends Qe{constructor(t,n,r,i,o=ri.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=o}visit(t){return super.visit(t instanceof Mr?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return tn({type:t,length:n})}visitBool(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<ri.V5&&this.readNullBitmap(t,r),t.mode===po.Sparse?this.visitSparseUnion(t,{length:n,nullCount:r}):this.visitDenseUnion(t,{length:n,nullCount:r})}visitDenseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:r}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,r=this.nextBufferRange()){return n>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class qbt extends Lq{constructor(t,n,r,i,o){super(new Uint8Array(0),n,r,i,o),this.sources=t}readNullBitmap(t,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):gx(this.sources[r])}readOffsets(t,{offset:n}=this.nextBufferRange()){return Qn(Uint8Array,Qn(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return Qn(Uint8Array,Qn(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return ne.isTimestamp(t)||(ne.isInt(t)||ne.isTime(t))&&t.bitWidth===64||ne.isDuration(t)||ne.isDate(t)&&t.unit===Pa.MILLISECOND?Qn(Uint8Array,Qo.convertArray(r[n])):ne.isDecimal(t)?Qn(Uint8Array,Ul.convertArray(r[n])):ne.isBinary(t)||ne.isLargeBinary(t)||ne.isFixedSizeBinary(t)?jbt(r[n]):ne.isBool(t)?gx(r[n]):ne.isUtf8(t)||ne.isLargeUtf8(t)?M6(r[n].join("")):Qn(Uint8Array,Qn(t.ArrayType,r[n].map(i=>+i)))}}function jbt(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}class _e extends Qe{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Wo(e,t){return t instanceof e.constructor}function op(e,t){return e===t||Wo(e,t)}function zu(e,t){return e===t||Wo(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function BS(e,t){return e===t||Wo(e,t)&&e.precision===t.precision}function Vbt(e,t){return e===t||Wo(e,t)&&e.byteWidth===t.byteWidth}function q6(e,t){return e===t||Wo(e,t)&&e.unit===t.unit}function p1(e,t){return e===t||Wo(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function g1(e,t){return e===t||Wo(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Wbt(e,t){return e===t||Wo(e,t)&&e.children.length===t.children.length&&jf.compareManyFields(e.children,t.children)}function Ybt(e,t){return e===t||Wo(e,t)&&e.children.length===t.children.length&&jf.compareManyFields(e.children,t.children)}function j6(e,t){return e===t||Wo(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&jf.compareManyFields(e.children,t.children)}function Hbt(e,t){return e===t||Wo(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&jf.visit(e.indices,t.indices)&&jf.visit(e.dictionary,t.dictionary)}function V6(e,t){return e===t||Wo(e,t)&&e.unit===t.unit}function m1(e,t){return e===t||Wo(e,t)&&e.unit===t.unit}function Gbt(e,t){return e===t||Wo(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&jf.compareManyFields(e.children,t.children)}function Xbt(e,t){return e===t||Wo(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&jf.compareManyFields(e.children,t.children)}_e.prototype.visitNull=op;_e.prototype.visitBool=op;_e.prototype.visitInt=zu;_e.prototype.visitInt8=zu;_e.prototype.visitInt16=zu;_e.prototype.visitInt32=zu;_e.prototype.visitInt64=zu;_e.prototype.visitUint8=zu;_e.prototype.visitUint16=zu;_e.prototype.visitUint32=zu;_e.prototype.visitUint64=zu;_e.prototype.visitFloat=BS;_e.prototype.visitFloat16=BS;_e.prototype.visitFloat32=BS;_e.prototype.visitFloat64=BS;_e.prototype.visitUtf8=op;_e.prototype.visitLargeUtf8=op;_e.prototype.visitBinary=op;_e.prototype.visitLargeBinary=op;_e.prototype.visitFixedSizeBinary=Vbt;_e.prototype.visitDate=q6;_e.prototype.visitDateDay=q6;_e.prototype.visitDateMillisecond=q6;_e.prototype.visitTimestamp=p1;_e.prototype.visitTimestampSecond=p1;_e.prototype.visitTimestampMillisecond=p1;_e.prototype.visitTimestampMicrosecond=p1;_e.prototype.visitTimestampNanosecond=p1;_e.prototype.visitTime=g1;_e.prototype.visitTimeSecond=g1;_e.prototype.visitTimeMillisecond=g1;_e.prototype.visitTimeMicrosecond=g1;_e.prototype.visitTimeNanosecond=g1;_e.prototype.visitDecimal=op;_e.prototype.visitList=Wbt;_e.prototype.visitStruct=Ybt;_e.prototype.visitUnion=j6;_e.prototype.visitDenseUnion=j6;_e.prototype.visitSparseUnion=j6;_e.prototype.visitDictionary=Hbt;_e.prototype.visitInterval=V6;_e.prototype.visitIntervalDayTime=V6;_e.prototype.visitIntervalYearMonth=V6;_e.prototype.visitDuration=m1;_e.prototype.visitDurationSecond=m1;_e.prototype.visitDurationMillisecond=m1;_e.prototype.visitDurationMicrosecond=m1;_e.prototype.visitDurationNanosecond=m1;_e.prototype.visitFixedSizeList=Gbt;_e.prototype.visitMap=Xbt;const jf=new _e;function E4(e,t){return jf.compareSchemas(e,t)}function HE(e,t){return Kbt(e,t.map(n=>n.data.concat()))}function Kbt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,h)=>Math.max(f,h.length),0)};let o=0,s=0,a=-1;const l=t.length;let c,u=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=t[a].shift(),s=Math.min(s,c?c.length:s);Number.isFinite(s)&&(u=Jbt(n,s,u,t,i),s>0&&(r[o++]=tn({type:new No(n),length:s,nullCount:0,children:u.slice()})))}return[e=e.assign(n),r.map(f=>new ss(e,f))]}function Jbt(e,t,n,r,i){var o;const s=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c?.length;if(u>=t)u===t?n[a]=c:(n[a]=c.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(t,u-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(o=c?._changeLengthAndBackfillNullBitmap(t))!==null&&o!==void 0?o:tn({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return n}var Fq;let Vf=class Wh{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new qn([]),this._offsets=[0],this;let i,o;t[0]instanceof qn&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(o=t.pop());const s=l=>{if(l){if(l instanceof ss)return[l];if(l instanceof Wh)return l.batches;if(l instanceof Kn){if(l.type instanceof No)return[new ss(new qn(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>s(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>s(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(p=>new Ur([l[p]])),f=i??new qn(c.map((p,g)=>new Mr(String(p),u[g].type,u[g].nullable))),[,h]=HE(f,u);return h.length===0?[new ss(l)]:h}}}return[]},a=t.flatMap(l=>s(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new qn([]),!(i instanceof qn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof ss))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!E4(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=o??Tq(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=kq(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get(D6(t,this.numRows))}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?P6.visit(new Ur(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Wh(n,r.map(i=>new ss(n,i)))}slice(t,n){const r=this.schema;[t,n]=Aq({length:this.numRows},t,n);const i=Mq(this.data,this._offsets,t,n);return new Wh(r,i.map(o=>new ss(r,o)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=tn({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ur(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Ur([tn({type:new Uf,length:this.numRows})]));const o=r.fields.slice(),s=o[t].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[o[t],a[t]]=[s,n],[r,i]=HE(r,a)}return new Wh(r,i)}select(t){const n=this.schema.fields.reduce((r,i,o)=>r.set(i.name,o),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Wh(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,c)=>{const[u,f]=a,h=n.findIndex(p=>p.name===l.name);return~h?f[h]=c:u.push(c),a},[[],[]]),o=this.schema.assign(t.schema),s=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Wh(...HE(o,s))}};Fq=Symbol.toStringTag;Vf[Fq]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=mx(B6),e.get=mx(gs.getVisitFn(J.Struct)),e.set=Iq(za.getVisitFn(J.Struct)),e.indexOf=Rq(yx.getVisitFn(J.Struct)),"Table"))(Vf.prototype);var Bq;let ss=class by{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof qn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=tn({nullCount:0,type:new No(this.schema.fields),children:this.schema.fields.map(n=>tn({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Kn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=uO(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:o}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Mr.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),s=new qn(r),a=tn({type:new No(r),length:o,children:i,nullCount:0});[this.schema,this.data]=uO(s,a.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Pq(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return gs.visit(this.data,t)}at(t){return this.get(D6(t,this.numRows))}set(t,n){return za.visit(this.data,t,n)}indexOf(t,n){return yx.visit(this.data,t,n)}[Symbol.iterator](){return P6.visit(new Ur([this.data]))}toArray(){return[...this]}concat(...t){return new Vf(this.schema,[this,...t])}slice(t,n){const[r]=new Ur([this.data]).slice(t,n).data;return new by(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Ur([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Ur([tn({type:new Uf,length:this.numRows})]));const o=r.fields.slice(),s=i.children.slice(),a=o[t].clone({type:n.type});[o[t],s[t]]=[a,n.data[0]],r=new qn(o,new Map(this.schema.metadata)),i=tn({type:new No(o),children:s})}return new by(r,i)}select(t){const n=this.schema.select(t),r=new No(n.fields),i=[];for(const o of t){const s=this.schema.fields.findIndex(a=>a.name===o);~s&&(i[s]=this.data.children[s])}return new by(n,tn({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(o=>this.data.children[o]).filter(Boolean),i=tn({type:new No(n.fields),length:this.numRows,children:r});return new by(n,i)}};Bq=Symbol.toStringTag;ss[Bq]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(ss.prototype);function uO(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],o=[...t],s=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const c=t[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),o[a]=(r=c?._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:tn({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(s)}))}return[e.assign(i),tn({type:new No(i),length:n,children:o})]}function Pq(e,t,n=new Map){var r,i;if(((r=e?.length)!==null&&r!==void 0?r:0)>0&&e?.length===t?.length)for(let o=-1,s=e.length;++o<s;){const{type:a}=e[o],l=t[o];for(const c of[l,...((i=l?.dictionary)===null||i===void 0?void 0:i.data)||[]])Pq(a.children,c?.children,n);if(ne.isDictionary(a)){const{id:c}=a;if(!n.has(c))l?.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class W6 extends ss{constructor(t){const n=t.fields.map(i=>tn({type:i.type})),r=tn({type:new No(t.fields),nullCount:0,children:n});super(t,r)}}let hf=class Fl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Fl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Hn),(n||new Fl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ri.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Cn.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ri.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Cn.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,o,s){return Fl.startMessage(t),Fl.addVersion(t,n),Fl.addHeaderType(t,r),Fl.addHeader(t,i),Fl.addBodyLength(t,o),Fl.addCustomMetadata(t,s),Fl.endMessage(t)}};class Zbt extends Qe{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return eO.startNull(n),eO.endNull(n)}visitInt(t,n){return $s.startInt(n),$s.addBitWidth(n,t.bitWidth),$s.addIsSigned(n,t.isSigned),$s.endInt(n)}visitFloat(t,n){return Xl.startFloatingPoint(n),Xl.addPrecision(n,t.precision),Xl.endFloatingPoint(n)}visitBinary(t,n){return K7.startBinary(n),K7.endBinary(n)}visitLargeBinary(t,n){return Z7.startLargeBinary(n),Z7.endLargeBinary(n)}visitBool(t,n){return J7.startBool(n),J7.endBool(n)}visitUtf8(t,n){return nO.startUtf8(n),nO.endUtf8(n)}visitLargeUtf8(t,n){return Q7.startLargeUtf8(n),Q7.endLargeUtf8(n)}visitDecimal(t,n){return s0.startDecimal(n),s0.addScale(n,t.scale),s0.addPrecision(n,t.precision),s0.addBitWidth(n,t.bitWidth),s0.endDecimal(n)}visitDate(t,n){return rw.startDate(n),rw.addUnit(n,t.unit),rw.endDate(n)}visitTime(t,n){return ya.startTime(n),ya.addUnit(n,t.unit),ya.addBitWidth(n,t.bitWidth),ya.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return va.startTimestamp(n),va.addUnit(n,t.unit),r!==void 0&&va.addTimezone(n,r),va.endTimestamp(n)}visitInterval(t,n){return Kl.startInterval(n),Kl.addUnit(n,t.unit),Kl.endInterval(n)}visitDuration(t,n){return iw.startDuration(n),iw.addUnit(n,t.unit),iw.endDuration(n)}visitList(t,n){return tO.startList(n),tO.endList(n)}visitStruct(t,n){return Zh.startStruct_(n),Zh.endStruct_(n)}visitUnion(t,n){os.startTypeIdsVector(n,t.typeIds.length);const r=os.createTypeIdsVector(n,t.typeIds);return os.startUnion(n),os.addMode(n,t.mode),os.addTypeIds(n,r),os.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return cu.startDictionaryEncoding(n),cu.addId(n,BigInt(t.id)),cu.addIsOrdered(n,t.isOrdered),r!==void 0&&cu.addIndexType(n,r),cu.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return ow.startFixedSizeBinary(n),ow.addByteWidth(n,t.byteWidth),ow.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return sw.startFixedSizeList(n),sw.addListSize(n,t.listSize),sw.endFixedSizeList(n)}visitMap(t,n){return aw.startMap(n),aw.addKeysSorted(n,t.keysSorted),aw.endMap(n)}}const GE=new Zbt;function Qbt(e,t=new Map){return new qn(e_t(e,t),uw(e.metadata),t)}function zq(e){return new qs(e.count,Uq(e.columns),qq(e.columns))}function t_t(e){return new yc(zq(e.data),e.id,e.isDelta)}function e_t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function fO(e,t){return(e.children||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function Uq(e){return(e||[]).reduce((t,n)=>[...t,new Wf(n.count,n_t(n.VALIDITY)),...Uq(n.children)],[])}function qq(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new nc(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new nc(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new nc(t.length,i.OFFSET.length)),i.DATA&&t.push(new nc(t.length,i.DATA.length)),t=qq(i.children,t)}return t}function n_t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function r_t(e,t){let n,r,i,o,s,a;return!t||!(o=e.dictionary)?(s=dO(e,fO(e,t)),i=new Mr(e.name,s,e.nullable,uw(e.metadata))):t.has(n=o.id)?(r=(r=o.indexType)?hO(r):new gv,a=new cg(t.get(n),r,n,o.isOrdered),i=new Mr(e.name,a,e.nullable,uw(e.metadata))):(r=(r=o.indexType)?hO(r):new gv,t.set(n,s=dO(e,fO(e,t))),a=new cg(s,r,n,o.isOrdered),i=new Mr(e.name,a,e.nullable,uw(e.metadata))),i||null}function uw(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function hO(e){return new Dd(e.isSigned,e.bitWidth)}function dO(e,t){const n=e.type.name;switch(n){case"NONE":return new Uf;case"null":return new Uf;case"binary":return new Zw;case"largebinary":return new Qw;case"utf8":return new tx;case"largeutf8":return new ex;case"bool":return new nx;case"list":return new cx((t||[])[0]);case"struct":return new No(t||[]);case"struct_":return new No(t||[])}switch(n){case"int":{const r=e.type;return new Dd(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Jw(fo[r.precision])}case"decimal":{const r=e.type;return new rx(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new ix(Pa[r.unit])}case"time":{const r=e.type;return new ox(Se[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new sx(Se[r.unit],r.timezone)}case"interval":{const r=e.type;return new ax(mc[r.unit])}case"duration":{const r=e.type;return new lx(Se[r.unit])}case"union":{const r=e.type,[i,...o]=(r.mode+"").toLowerCase(),s=i.toUpperCase()+o.join("");return new ux(po[s],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new fx(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new hx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new dx((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var i_t=iU,o_t=ag;class $o{static fromJSON(t,n){const r=new $o(0,ri.V5,n);return r._createHeader=s_t(t,n),r}static decode(t){t=new o_t(yn(t));const n=hf.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),o=n.headerType(),s=new $o(r,i,o);return s._createHeader=a_t(n,o),s}static encode(t){const n=new i_t;let r=-1;return t.isSchema()?r=qn.encode(n,t.header()):t.isRecordBatch()?r=qs.encode(n,t.header()):t.isDictionaryBatch()&&(r=yc.encode(n,t.header())),hf.startMessage(n),hf.addVersion(n,ri.V5),hf.addHeader(n,r),hf.addHeaderType(n,t.headerType),hf.addBodyLength(n,BigInt(t.bodyLength)),hf.finishMessageBuffer(n,hf.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof qn)return new $o(0,ri.V5,Cn.Schema,t);if(t instanceof qs)return new $o(n,ri.V5,Cn.RecordBatch,t);if(t instanceof yc)return new $o(n,ri.V5,Cn.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Cn.Schema}isRecordBatch(){return this.headerType===Cn.RecordBatch}isDictionaryBatch(){return this.headerType===Cn.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=dr(t)}}class qs{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=dr(t)}}class yc{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=dr(n)}}class nc{constructor(t,n){this.offset=dr(t),this.length=dr(n)}}class Wf{constructor(t,n){this.length=dr(t),this.nullCount=dr(n)}}function s_t(e,t){return()=>{switch(t){case Cn.Schema:return qn.fromJSON(e);case Cn.RecordBatch:return qs.fromJSON(e);case Cn.DictionaryBatch:return yc.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Cn[t]}, type: ${t} }`)}}function a_t(e,t){return()=>{switch(t){case Cn.Schema:return qn.decode(e.header(new zl),new Map,e.version());case Cn.RecordBatch:return qs.decode(e.header(new eu),e.version());case Cn.DictionaryBatch:return yc.decode(e.header(new i0),e.version())}throw new Error(`Unrecognized Message type: { name: ${Cn[t]}, type: ${t} }`)}}Mr.encode=v_t;Mr.decode=m_t;Mr.fromJSON=r_t;qn.encode=y_t;qn.decode=l_t;qn.fromJSON=Qbt;qs.encode=b_t;qs.decode=c_t;qs.fromJSON=zq;yc.encode=__t;yc.decode=u_t;yc.fromJSON=t_t;Wf.encode=w_t;Wf.decode=h_t;nc.encode=x_t;nc.decode=f_t;function l_t(e,t=new Map,n=ri.V5){const r=g_t(e,t);return new qn(r,fw(e),t,n)}function c_t(e,t=ri.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new qs(e.length(),d_t(e),p_t(e,t))}function u_t(e,t=ri.V5){return new yc(qs.decode(e.data(),t),e.id(),e.isDelta())}function f_t(e){return new nc(e.offset(),e.length())}function h_t(e){return new Wf(e.length(),e.nullCount())}function d_t(e){const t=[];for(let n,r=-1,i=-1,o=e.nodesLength();++r<o;)(n=e.nodes(r))&&(t[++i]=Wf.decode(n));return t}function p_t(e,t){const n=[];for(let r,i=-1,o=-1,s=e.buffersLength();++i<s;)(r=e.buffers(i))&&(t<ri.V4&&(r.bb_pos+=8*(i+1)),n[++o]=nc.decode(r));return n}function g_t(e,t){const n=[];for(let r,i=-1,o=-1,s=e.fieldsLength();++i<s;)(r=e.fields(i))&&(n[++o]=Mr.decode(r,t));return n}function pO(e,t){const n=[];for(let r,i=-1,o=-1,s=e.childrenLength();++i<s;)(r=e.children(i))&&(n[++o]=Mr.decode(r,t));return n}function m_t(e,t){let n,r,i,o,s,a;return!t||!(a=e.dictionary())?(i=mO(e,pO(e,t)),r=new Mr(e.name(),i,e.nullable(),fw(e))):t.has(n=dr(a.id()))?(o=(o=a.indexType())?gO(o):new gv,s=new cg(t.get(n),o,n,a.isOrdered()),r=new Mr(e.name(),s,e.nullable(),fw(e))):(o=(o=a.indexType())?gO(o):new gv,t.set(n,i=mO(e,pO(e,t))),s=new cg(i,o,n,a.isOrdered()),r=new Mr(e.name(),s,e.nullable(),fw(e))),r||null}function fw(e){const t=new Map;if(e)for(let n,r,i=-1,o=Math.trunc(e.customMetadataLength());++i<o;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function gO(e){return new Dd(e.isSigned(),e.bitWidth())}function mO(e,t){const n=e.typeType();switch(n){case _r.NONE:return new Uf;case _r.Null:return new Uf;case _r.Binary:return new Zw;case _r.LargeBinary:return new Qw;case _r.Utf8:return new tx;case _r.LargeUtf8:return new ex;case _r.Bool:return new nx;case _r.List:return new cx((t||[])[0]);case _r.Struct_:return new No(t||[])}switch(n){case _r.Int:{const r=e.type(new $s);return new Dd(r.isSigned(),r.bitWidth())}case _r.FloatingPoint:{const r=e.type(new Xl);return new Jw(r.precision())}case _r.Decimal:{const r=e.type(new s0);return new rx(r.scale(),r.precision(),r.bitWidth())}case _r.Date:{const r=e.type(new rw);return new ix(r.unit())}case _r.Time:{const r=e.type(new ya);return new ox(r.unit(),r.bitWidth())}case _r.Timestamp:{const r=e.type(new va);return new sx(r.unit(),r.timezone())}case _r.Interval:{const r=e.type(new Kl);return new ax(r.unit())}case _r.Duration:{const r=e.type(new iw);return new lx(r.unit())}case _r.Union:{const r=e.type(new os);return new ux(r.mode(),r.typeIdsArray()||[],t||[])}case _r.FixedSizeBinary:{const r=e.type(new ow);return new fx(r.byteWidth())}case _r.FixedSizeList:{const r=e.type(new sw);return new hx(r.listSize(),(t||[])[0])}case _r.Map:{const r=e.type(new aw);return new dx((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_r[n]}" (${n})`)}function y_t(e,t){const n=t.fields.map(o=>Mr.encode(e,o));zl.startFieldsVector(e,n.length);const r=zl.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?zl.createCustomMetadataVector(e,[...t.metadata].map(([o,s])=>{const a=e.createString(`${o}`),l=e.createString(`${s}`);return Ai.startKeyValue(e),Ai.addKey(e,a),Ai.addValue(e,l),Ai.endKeyValue(e)})):-1;return zl.startSchema(e),zl.addFields(e,r),zl.addEndianness(e,S_t?lg.Little:lg.Big),i!==-1&&zl.addCustomMetadata(e,i),zl.endSchema(e)}function v_t(e,t){let n=-1,r=-1,i=-1;const o=t.type;let s=t.typeId;ne.isDictionary(o)?(s=o.dictionary.typeId,i=GE.visit(o,e),r=GE.visit(o.dictionary,e)):r=GE.visit(o,e);const a=(o.children||[]).map(u=>Mr.encode(e,u)),l=aa.createChildrenVector(e,a),c=t.metadata&&t.metadata.size>0?aa.createCustomMetadataVector(e,[...t.metadata].map(([u,f])=>{const h=e.createString(`${u}`),p=e.createString(`${f}`);return Ai.startKeyValue(e),Ai.addKey(e,h),Ai.addValue(e,p),Ai.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),aa.startField(e),aa.addType(e,r),aa.addTypeType(e,s),aa.addChildren(e,l),aa.addNullable(e,!!t.nullable),n!==-1&&aa.addName(e,n),i!==-1&&aa.addDictionary(e,i),c!==-1&&aa.addCustomMetadata(e,c),aa.endField(e)}function b_t(e,t){const n=t.nodes||[],r=t.buffers||[];eu.startNodesVector(e,n.length);for(const s of n.slice().reverse())Wf.encode(e,s);const i=e.endVector();eu.startBuffersVector(e,r.length);for(const s of r.slice().reverse())nc.encode(e,s);const o=e.endVector();return eu.startRecordBatch(e),eu.addLength(e,BigInt(t.length)),eu.addNodes(e,i),eu.addBuffers(e,o),eu.endRecordBatch(e)}function __t(e,t){const n=qs.encode(e,t.data);return i0.startDictionaryBatch(e),i0.addId(e,BigInt(t.id)),i0.addIsDelta(e,t.isDelta),i0.addData(e,n),i0.endDictionaryBatch(e)}function w_t(e,t){return aU.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function x_t(e,t){return sU.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const S_t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Y6=e=>`Expected ${Cn[e]} Message in stream, but was null or length 0.`,H6=e=>`Header pointer of flatbuffer-encoded ${Cn[e]} Message is null or length 0.`,jq=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,Vq=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class Wq{constructor(t){this.source=t instanceof bx?t:new bx(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?qr:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Y6(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=yn(this.source.read(t));if(n.byteLength<t)throw new Error(Vq(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Cn.Schema,r=this.readMessage(n),i=r?.header();if(t&&!i)throw new Error(H6(n));return i}readMetadataLength(){const t=this.source.read(PS),n=t&&new ag(t),r=n?.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(t){const n=this.source.read(t);if(!n)return qr;if(n.byteLength<t)throw new Error(jq(t,n.byteLength));return{done:!1,value:$o.decode(n)}}}class A_t{constructor(t,n){this.source=t instanceof ug?t:Zz(t)?new _x(t,n):new ug(t)}[Symbol.asyncIterator](){return this}next(){return Le(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?qr:t})}throw(t){return Le(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return Le(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return Le(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Y6(t));return n.value})}readMessageBody(t){return Le(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=yn(yield this.source.read(t));if(n.byteLength<t)throw new Error(Vq(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return Le(this,arguments,void 0,function*(t=!1){const n=Cn.Schema,r=yield this.readMessage(n),i=r?.header();if(t&&!i)throw new Error(H6(n));return i})}readMetadataLength(){return Le(this,void 0,void 0,function*(){const t=yield this.source.read(PS),n=t&&new ag(t),r=n?.readInt32(0)||0;return{done:r===0,value:r}})}readMetadata(t){return Le(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return qr;if(n.byteLength<t)throw new Error(jq(t,n.byteLength));return{done:!1,value:$o.decode(n)}})}}class E_t extends Wq{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof lO?t:new lO(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:$o.fromJSON(t.schema,Cn.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:$o.fromJSON(n,Cn.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:$o.fromJSON(n,Cn.RecordBatch)}}return this._body=[],qr}readMessageBody(t){return n(this._body);function n(r){return(r||[]).reduce((i,o)=>[...i,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE_ID&&[o.TYPE_ID]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(Y6(t));return n.value}readSchema(){const t=Cn.Schema,n=this.readMessage(t),r=n?.header();if(!n||!r)throw new Error(H6(t));return r}}const PS=4,k4="ARROW1",yv=new Uint8Array(k4.length);for(let e=0;e<k4.length;e+=1)yv[e]=k4.codePointAt(e);function G6(e,t=0){for(let n=-1,r=yv.length;++n<r;)if(yv[n]!==e[t+n])return!1;return!0}const y1=yv.length,Yq=y1+PS,k_t=y1*2+PS;class $a extends z6{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Od(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return da.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return da.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof $a?t:m4(t)?R_t(t):Zz(t)?$_t(t):Od(t)?Le(this,void 0,void 0,function*(){return yield $a.from(yield t)}):Qz(t)||I6(t)||tU(t)||Wg(t)?N_t(new ug(t)):C_t(new bx(t))}static readAll(t){return t instanceof $a?t.isSync()?yO(t):vO(t):m4(t)||ArrayBuffer.isView(t)||d1(t)||Jz(t)?yO(t):vO(t)}}class wx extends $a{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return ec(this,arguments,function*(){yield Ye(yield*nw(cd(this[Symbol.iterator]())))})}}class xx extends $a{constructor(t){super(t),this._impl=t}readAll(){return Le(this,void 0,void 0,function*(){var t,n,r,i;const o=new Array;try{for(var s=!0,a=cd(this),l;l=yield a.next(),t=l.done,!t;s=!0){i=l.value,s=!1;const c=i;o.push(c)}}catch(c){n={error:c}}finally{try{!s&&!t&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return o})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Hq extends wx{constructor(t){super(t),this._impl=t}}class T_t extends xx{constructor(t){super(t),this._impl=t}}class Gq{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const r=this._loadVectors(t,n,this.schema.fields),i=tn({type:new No(this.schema.fields),length:t.length,children:r});return new ss(this.schema,i)}_loadDictionaryBatch(t,n){const{id:r,isDelta:i}=t,{dictionaries:o,schema:s}=this,a=o.get(r),l=s.dictionaries.get(r),c=this._loadVectors(t.data,n,[l]);return(a&&i?a.concat(new Ur(c)):new Ur(c)).memoize()}_loadVectors(t,n,r){return new Lq(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Sx extends Gq{constructor(t,n){super(n),this._reader=m4(t)?new E_t(this._handle=t):new Wq(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Kq(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):qr}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):qr}next(){if(this.closed)return qr;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=n.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new W6(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Ax extends Gq{constructor(t,n){super(n),this._reader=new A_t(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return Le(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return Le(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Kq(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return Le(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):qr})}return(t){return Le(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):qr})}next(){return Le(this,void 0,void 0,function*(){if(this.closed)return qr;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield n.readMessageBody(t.bodyLength),o=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new W6(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return Le(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class Xq extends Sx{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof cO?t:new cO(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Cn.RecordBatch);if(i?.isRecordBatch()){const o=i.header(),s=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null}_readDictionaryBatch(t){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(Cn.DictionaryBatch);if(i?.isDictionaryBatch()){const o=i.header(),s=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}}_readFooter(){const{_handle:t}=this,n=t.size-Yq,r=t.readInt32(n),i=t.readAt(n-r,r);return mv.decode(i)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class M_t extends Ax{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(t instanceof _x?t:new _x(t,r),i)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return Le(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){return Le(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Cn.RecordBatch);if(i?.isRecordBatch()){const o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(o,s)}}return null})}_readDictionaryBatch(t){return Le(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(Cn.DictionaryBatch);if(i?.isDictionaryBatch()){const o=i.header(),s=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(o,s);this.dictionaries.set(o.id,a)}}})}_readFooter(){return Le(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-Yq,r=yield t.readInt32(n),i=yield t.readAt(n-r,r);return mv.decode(i)})}_readNextMessageAndValidate(t){return Le(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class I_t extends Sx{constructor(t,n){super(t,n)}_loadVectors(t,n,r){return new qbt(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function Kq(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*yO(e){const t=$a.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function vO(e){return ec(this,arguments,function*(){const n=yield Ye($a.from(e));try{if(!(yield Ye(n.open({autoDestroy:!1}))).closed)do yield yield Ye(n);while(!(yield Ye(n.reset().open())).closed)}finally{yield Ye(n.cancel())}})}function R_t(e){return new wx(new I_t(e))}function C_t(e){const t=e.peek(y1+7&-8);return t&&t.byteLength>=4?G6(t)?new Hq(new Xq(e.read())):new wx(new Sx(e)):new wx(new Sx(function*(){}()))}function N_t(e){return Le(this,void 0,void 0,function*(){const t=yield e.peek(y1+7&-8);return t&&t.byteLength>=4?G6(t)?new Hq(new Xq(yield e.read())):new xx(new Ax(e)):new xx(new Ax(function(){return ec(this,arguments,function*(){})}()))})}function $_t(e){return Le(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new _x(e,t);return t>=k_t&&G6(yield n.readAt(0,y1+7&-8))?new T_t(new M_t(n)):new xx(new Ax(n))})}class Vr extends Qe{static assemble(...t){const n=i=>i.flatMap(o=>Array.isArray(o)?n(o):o instanceof ss?o.data.children:o.data),r=new Vr;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Ur)return this.visitMany(t.data),this;const{type:n}=t;if(!ne.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ne.isUnion(n))this.nodes.push(new Wf(r,0));else{const{nullCount:i}=t;ne.isNull(n)||ul.call(this,i<=0?new Uint8Array(0):px(t.offset,r,t.nullBitmap)),this.nodes.push(new Wf(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function ul(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new nc(this._byteLength,t)),this._byteLength+=t,this}function O_t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:o}=e;if(ul.call(this,i),n.mode===po.Sparse)return T4.call(this,e);if(n.mode===po.Dense){if(e.offset<=0)return ul.call(this,o),T4.call(this,e);{const s=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let c,u,f=-1;++f<r;)(c=i[f])!==void 0&&((u=a[c])===void 0&&(u=a[c]=o[f]),s[f]=o[f]-u,l[c]=((t=l[c])!==null&&t!==void 0?t:0)+1);ul.call(this,s),this.visitMany(e.children.map((c,u)=>{const f=n.typeIds[u],h=a[f],p=l[f];return c.slice(h,Math.min(r,p))}))}}return this}function D_t(e){let t;return e.nullCount>=e.length?ul.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ul.call(this,px(e.offset,e.length,t)):ul.call(this,gx(e.values))}function Uu(e){return ul.call(this,e.values.subarray(0,e.length*e.stride))}function zS(e){const{length:t,values:n,valueOffsets:r}=e,i=dr(r[0]),o=dr(r[t]),s=Math.min(o-i,n.byteLength-i);return ul.call(this,nU(-i,t+1,r)),ul.call(this,n.subarray(i,i+s)),this}function X6(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return ul.call(this,nU(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function T4(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Vr.prototype.visitBool=D_t;Vr.prototype.visitInt=Uu;Vr.prototype.visitFloat=Uu;Vr.prototype.visitUtf8=zS;Vr.prototype.visitLargeUtf8=zS;Vr.prototype.visitBinary=zS;Vr.prototype.visitLargeBinary=zS;Vr.prototype.visitFixedSizeBinary=Uu;Vr.prototype.visitDate=Uu;Vr.prototype.visitTimestamp=Uu;Vr.prototype.visitTime=Uu;Vr.prototype.visitDecimal=Uu;Vr.prototype.visitList=X6;Vr.prototype.visitStruct=T4;Vr.prototype.visitUnion=O_t;Vr.prototype.visitInterval=Uu;Vr.prototype.visitDuration=Uu;Vr.prototype.visitFixedSizeList=X6;Vr.prototype.visitMap=X6;class Jq extends z6{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new cw,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,ps(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Od(t)?t.then(n=>this.writeAll(n)):Wg(t)?Q6(this,t):Z6(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof cw?this._sink=t:(this._sink=new cw,t&&h1t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&d1t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!E4(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Vf&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof ss&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!E4(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof ss?t instanceof W6||this._writeRecordBatch(t):t instanceof Vf?this.writeAll(t.batches):d1(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=$o.encode(t),o=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=o+s+r&~r,l=a-o-s;return t.headerType===Cn.RecordBatch?this._recordBatchBlocks.push(new qf(a,t.bodyLength,this._position)):t.headerType===Cn.DictionaryBatch&&this._dictionaryBlocks.push(new qf(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),o>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=yn(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage($o.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(yv)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:o}=Vr.assemble(t),s=new qs(t.numRows,r,i),a=$o.from(s,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(o)}_writeDictionaryBatch(t,n,r=!1){const{byteLength:i,nodes:o,bufferRegions:s,buffers:a}=Vr.assemble(new Ur([t])),l=new qs(t.length,o,s),c=new yc(l,n,r),u=$o.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let o=-1,s=t.length;++o<s;)(n=t[o])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){var n,r;for(const[i,o]of t.dictionaries){const s=(n=o?.data)!==null&&n!==void 0?n:[],a=this._seenDictionaries.get(i),l=(r=this._dictionaryDeltaOffsets.get(i))!==null&&r!==void 0?r:0;if(!a||a.data[0]!==s[0])for(const[c,u]of s.entries())this._writeDictionaryBatch(u,i,c>0);else if(l<s.length)for(const c of s.slice(l))this._writeDictionaryBatch(c,i,!0);this._seenDictionaries.set(i,o),this._dictionaryDeltaOffsets.set(i,s.length)}return this}}class K6 extends Jq{static writeAll(t,n){const r=new K6(n);return Od(t)?t.then(i=>r.writeAll(i)):Wg(t)?Q6(r,t):Z6(r,t)}}class J6 extends Jq{static writeAll(t){const n=new J6;return Od(t)?t.then(r=>n.writeAll(r)):Wg(t)?Q6(n,t):Z6(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(t,n,r=!1){if(!r&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(t,n,r)}_writeFooter(t){const n=mv.encode(new mv(t,ri.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Z6(e,t){let n=t;t instanceof Vf&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Q6(e,t){return Le(this,void 0,void 0,function*(){var n,r,i,o,s,a,l;try{for(n=!0,r=cd(t);i=yield r.next(),o=i.done,!o;n=!0){l=i.value,n=!1;const c=l;e.write(c)}}catch(c){s={error:c}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return e.finish()})}function L_t(e,t="stream"){return(t==="stream"?K6:J6).writeAll(e).toUint8Array(!0)}var F_t=Object.create,Zq=Object.defineProperty,B_t=Object.getOwnPropertyDescriptor,P_t=Object.getOwnPropertyNames,z_t=Object.getPrototypeOf,U_t=Object.prototype.hasOwnProperty,q_t=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),j_t=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of P_t(t))!U_t.call(e,i)&&i!==n&&Zq(e,i,{get:()=>t[i],enumerable:!(r=B_t(t,i))||r.enumerable});return e},V_t=(e,t,n)=>(n=e!=null?F_t(z_t(e)):{},j_t(!e||!e.__esModule?Zq(n,"default",{value:e,enumerable:!0}):n,e)),W_t=q_t((e,t)=>{t.exports=Worker}),Y_t=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Y_t||{}),H_t=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(H_t||{}),G_t=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(G_t||{}),X_t=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(X_t||{}),K_t=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(K_t||{}),J_t=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(J_t||{}),Qq=class{log(t){}},tj=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},Z_t=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(Z_t||{}),Q_t=class{constructor(t,n){this._bindings=t,this._conn=n}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let n=await this._bindings.runQuery(this._conn,t),r=$a.from(n);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new Vf(r)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let n=await this._bindings.startPendingQuery(this._conn,t);for(;n==null;)n=await this._bindings.pollPendingQuery(this._conn);let r=new ej(this._bindings,this._conn,n),i=await $a.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let n=await this._bindings.createPrepared(this._conn,t);return new twt(this._bindings,this._conn,n)}async insertArrowTable(t,n){let r=L_t(t,"stream");await this.insertArrowFromIPCStream(r,n)}async insertArrowFromIPCStream(t,n){await this._bindings.insertArrowFromIPCStream(this._conn,t,n)}async insertCSVFromPath(t,n){await this._bindings.insertCSVFromPath(this._conn,t,n)}async insertJSONFromPath(t,n){await this._bindings.insertJSONFromPath(this._conn,t,n)}},ej=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},twt=class{constructor(t,n,r){this.bindings=t,this.connectionId=n,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let n=await this.bindings.runPrepared(this.connectionId,this.statementId,t),r=$a.from(n);return console.assert(r.isSync()),console.assert(r.isFile()),new Vf(r)}async send(...t){let n=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),r=new ej(this.bindings,this.connectionId,n),i=await $a.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},ewt=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(ewt||{}),nwt=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(nwt||{}),Sn=class{constructor(t,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=n,this.promise=new Promise((r,i)=>{this.promiseResolver=r,this.promiseRejecter=i})}};function hw(e){switch(e.typeId){case J.Binary:return{sqlType:"binary"};case J.Bool:return{sqlType:"bool"};case J.Date:return{sqlType:"date"};case J.DateDay:return{sqlType:"date32[d]"};case J.DateMillisecond:return{sqlType:"date64[ms]"};case J.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case J.Float:return{sqlType:"float"};case J.Float16:return{sqlType:"float16"};case J.Float32:return{sqlType:"float32"};case J.Float64:return{sqlType:"float64"};case J.Int:return{sqlType:"int32"};case J.Int16:return{sqlType:"int16"};case J.Int32:return{sqlType:"int32"};case J.Int64:return{sqlType:"int64"};case J.Uint16:return{sqlType:"uint16"};case J.Uint32:return{sqlType:"uint32"};case J.Uint64:return{sqlType:"uint64"};case J.Uint8:return{sqlType:"uint8"};case J.IntervalDayTime:return{sqlType:"interval[dt]"};case J.IntervalYearMonth:return{sqlType:"interval[m]"};case J.List:return{sqlType:"list",valueType:hw(e.valueType)};case J.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case J.Null:return{sqlType:"null"};case J.Utf8:return{sqlType:"utf8"};case J.Struct:return{sqlType:"struct",fields:e.children.map(t=>M4(t.name,t.type))};case J.Map:{let t=e;return{sqlType:"map",keyType:hw(t.keyType),valueType:hw(t.valueType)}}case J.Time:return{sqlType:"time[s]"};case J.TimeMicrosecond:return{sqlType:"time[us]"};case J.TimeMillisecond:return{sqlType:"time[ms]"};case J.TimeNanosecond:return{sqlType:"time[ns]"};case J.TimeSecond:return{sqlType:"time[s]"};case J.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case J.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case J.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case J.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case J.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function M4(e,t){let n=hw(t);return n.name=e,n}var rwt=new TextEncoder,nj=class{constructor(t,n=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),n!=null&&this.attach(n)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((n,r)=>{this._workerShutdownResolver=n})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,n=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let r=this._nextMessageId++;return this._pendingRequests.set(r,t),this._worker.postMessage({messageId:r,type:t.type,data:t.data},n),await t.promise}onMessage(t){var n;let r=t.data;switch(r.type){case"LOG":{this._logger.log(r.data);return}case"INSTANTIATE_PROGRESS":{for(let o of this._onInstantiationProgress)o(r.data);return}}let i=this._pendingRequests.get(r.requestId);if(!i){console.warn("unassociated response: [".concat(r.requestId,", ").concat(r.type.toString(),"]"));return}if(this._pendingRequests.delete(r.requestId),r.type=="ERROR"){let o=new Error(r.data.message);o.name=r.data.name,(n=Object.getOwnPropertyDescriptor(o,"stack"))!=null&&n.writable&&(o.stack=r.data.stack),i.promiseRejecter(o);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(r.type=="OK"){i.promiseResolver(r.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],r.type=="OK"){i.promiseResolver(r.data);return}break;case"GLOB_FILE_INFOS":if(r.type=="FILE_INFOS"){i.promiseResolver(r.data);return}break;case"GET_VERSION":if(r.type=="VERSION_STRING"){i.promiseResolver(r.data);return}break;case"GET_FEATURE_FLAGS":if(r.type=="FEATURE_FLAGS"){i.promiseResolver(r.data);return}break;case"GET_TABLE_NAMES":if(r.type=="TABLE_NAMES"){i.promiseResolver(r.data);return}break;case"TOKENIZE":if(r.type=="SCRIPT_TOKENS"){i.promiseResolver(r.data);return}break;case"COPY_FILE_TO_BUFFER":if(r.type=="FILE_BUFFER"){i.promiseResolver(r.data);return}break;case"EXPORT_FILE_STATISTICS":if(r.type=="FILE_STATISTICS"){i.promiseResolver(r.data);return}break;case"CONNECT":if(r.type=="CONNECTION_INFO"){i.promiseResolver(r.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(r.type=="QUERY_RESULT"){i.promiseResolver(r.data);return}break;case"SEND_PREPARED":if(r.type=="QUERY_RESULT_HEADER"){i.promiseResolver(r.data);return}break;case"START_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"POLL_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],r.type=="SUCCESS"){i.promiseResolver(r.data);return}break;case"FETCH_QUERY_RESULTS":if(r.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(r.data);return}break;case"CREATE_PREPARED":if(r.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(r.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(r.type.toString())))}onError(t){console.error(t),console.error("error in duckdb worker: ".concat(t.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let t=new Sn("RESET",null);return await this.postTask(t)}async ping(){let t=new Sn("PING",null);await this.postTask(t)}async dropFile(t){let n=new Sn("DROP_FILE",t);return await this.postTask(n)}async dropFiles(){let t=new Sn("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new Sn("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,n=null,r=i=>{}){this._onInstantiationProgress.push(r);let i=new Sn("INSTANTIATE",[t,n]);return await this.postTask(i)}async getVersion(){let t=new Sn("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new Sn("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let n=new Sn("OPEN",t);await this.postTask(n)}async tokenize(t){let n=new Sn("TOKENIZE",t);return await this.postTask(n)}async connectInternal(){let t=new Sn("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new Q_t(this,t)}async disconnect(t){let n=new Sn("DISCONNECT",t);await this.postTask(n)}async runQuery(t,n){let r=new Sn("RUN_QUERY",[t,n]);return await this.postTask(r)}async startPendingQuery(t,n){let r=new Sn("START_PENDING_QUERY",[t,n]);return await this.postTask(r)}async pollPendingQuery(t){let n=new Sn("POLL_PENDING_QUERY",t);return await this.postTask(n)}async cancelPendingQuery(t){let n=new Sn("CANCEL_PENDING_QUERY",t);return await this.postTask(n)}async fetchQueryResults(t){let n=new Sn("FETCH_QUERY_RESULTS",t);return await this.postTask(n)}async getTableNames(t,n){let r=new Sn("GET_TABLE_NAMES",[t,n]);return await this.postTask(r)}async createPrepared(t,n){let r=new Sn("CREATE_PREPARED",[t,n]);return await this.postTask(r)}async closePrepared(t,n){let r=new Sn("CLOSE_PREPARED",[t,n]);await this.postTask(r)}async runPrepared(t,n,r){let i=new Sn("RUN_PREPARED",[t,n,r]);return await this.postTask(i)}async sendPrepared(t,n,r){let i=new Sn("SEND_PREPARED",[t,n,r]);return await this.postTask(i)}async globFiles(t){let n=new Sn("GLOB_FILE_INFOS",t);return await this.postTask(n)}async registerFileText(t,n){let r=rwt.encode(n);await this.registerFileBuffer(t,r)}async registerFileURL(t,n,r,i){n===void 0&&(n=t);let o=new Sn("REGISTER_FILE_URL",[t,n,r,i]);await this.postTask(o)}async registerEmptyFileBuffer(t){}async registerFileBuffer(t,n){let r=new Sn("REGISTER_FILE_BUFFER",[t,n]);await this.postTask(r,[n.buffer])}async registerFileHandle(t,n,r,i){let o=new Sn("REGISTER_FILE_HANDLE",[t,n,r,i]);await this.postTask(o,[])}async collectFileStatistics(t,n){let r=new Sn("COLLECT_FILE_STATISTICS",[t,n]);await this.postTask(r,[])}async exportFileStatistics(t){let n=new Sn("EXPORT_FILE_STATISTICS",t);return await this.postTask(n,[])}async copyFileToBuffer(t){let n=new Sn("COPY_FILE_TO_BUFFER",t);return await this.postTask(n)}async copyFileToPath(t,n){let r=new Sn("COPY_FILE_TO_PATH",[t,n]);await this.postTask(r)}async insertArrowFromIPCStream(t,n,r){if(n.length==0)return;let i=new Sn("INSERT_ARROW_FROM_IPC_STREAM",[t,n,r]);await this.postTask(i,[n.buffer])}async insertCSVFromPath(t,n,r){if(r.columns!==void 0){let o=[];for(let s in r.columns){let a=r.columns[s];o.push(M4(s,a))}r.columnsFlat=o,delete r.columns}let i=new Sn("IMPORT_CSV_FROM_PATH",[t,n,r]);await this.postTask(i)}async insertJSONFromPath(t,n,r){if(r.columns!==void 0){let o=[];for(let s in r.columns){let a=r.columns[s];o.push(M4(s,a))}r.columnsFlat=o,delete r.columns}let i=new Sn("IMPORT_JSON_FROM_PATH",[t,n,r]);await this.postTask(i)}},iwt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),owt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),swt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),awt=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),tI={name:"@duckdb/duckdb-wasm",version:"1.29.0"},lwt=tI.name,cwt=tI.version,eI=tI.version.split(".");eI[0];eI[1];eI[2];var uwt=()=>typeof navigator>"u";function fwt(){let e="https://cdn.jsdelivr.net/npm/".concat(lwt,"@").concat(cwt,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}var XE=null,KE=null,JE=null,ZE=null,QE=null;async function hwt(){return XE==null&&(XE=typeof BigInt64Array<"u"),KE==null&&(KE=await owt()),JE==null&&(JE=await awt()),ZE==null&&(ZE=await swt()),QE==null&&(QE=await iwt()),{bigInt64Array:XE,crossOriginIsolated:uwt()||globalThis.crossOriginIsolated||!1,wasmExceptions:KE,wasmSIMD:ZE,wasmThreads:JE,wasmBulkMemory:QE}}async function rj(e){let t=await hwt();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}V_t(W_t());function dwt(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}dwt();var pwt=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(pwt||{});function gwt(e={}){return new mwt(e)}class mwt{_ipc;_options;_db;_con;_loadPromise;constructor(t={}){const{ipc:n,duckdb:r,connection:i,...o}=t;this._ipc=n,this._options=o,this._db=r,this._con=i}async getDuckDB(){return this._db||await bO(this),this._db}async getConnection(){return this._con||await bO(this),this._con}async query(t){const{type:n,sql:r}=t,i=await this.getConnection(),o=await ywt(i,r);return n==="exec"?void 0:n==="arrow"?jw(o,this._ipc):jw(o).toArray()}}function ywt(e,t){return new Promise((n,r)=>{e.useUnsafe(async(i,o)=>{try{const s=await i.runQuery(o,t);n(s)}catch(s){r(s)}})})}function bO(e){return e._loadPromise||(e._loadPromise=(e._db?Promise.resolve(e._db):vwt(e._options).then(t=>e._db=t)).then(t=>t.connect()).then(t=>e._con=t)),e._loadPromise}async function vwt({log:e=!1}={}){const t=fwt(),n=await rj(t),r=URL.createObjectURL(new Blob([`importScripts("${n.mainWorker}");`],{type:"text/javascript"})),i=new Worker(r),o=e?new tj:new Qq,s=new nj(o,i);return await s.instantiate(n.mainModule,n.pthreadWorker),URL.revokeObjectURL(r),s}function Ex(e,t,{source:n,clients:r=mS(n)?new Set([n]):void 0}){const i=t!==void 0?Nd(e,[Zt(t)]):null;return{meta:{type:"point"},source:n,clients:r,value:t,predicate:i}}function US(e,t,{source:n,clients:r=mS(n)?new Set([n]):void 0}){let i=null;if(t){const o=t.length&&e.length===1?[Nd(e[0],t.map(s=>Zt(s[0])))]:t.map(s=>Li(s.map((a,l)=>x6(e[l],Zt(a)))));i=t.length===0?Zt(!1):o.length>1?Oo(o):o[0]}return{meta:{type:"point"},source:n,clients:r,value:t,predicate:i}}function nI(e,t,{source:n,clients:r=mS(n)?new Set([n]):void 0,bin:i,scale:o,pixelSize:s=1}){const a=t!=null?Do(e,t):null;return{meta:{type:"interval",scales:o&&[o],bin:i,pixelSize:s},source:n,clients:r,value:t,predicate:a}}function bwt(e,t,{source:n,clients:r=mS(n)?new Set([n]):void 0,bin:i,scales:o=[],pixelSize:s=1}){const a=t!=null?Li(e.map((c,u)=>Do(c,t[u]))):null;return{meta:{type:"interval",scales:o,bin:i,pixelSize:s},source:n,clients:r,value:t,predicate:a}}const _wt={contains:Eyt,prefix:kyt,suffix:Tyt,regexp:Ayt};function wwt(e,t,{source:n,clients:r=void 0,method:i="contains"}){const o=_wt[i],s=t?o(e,Zt(t)):null;return{meta:{type:"match",method:i},source:n,clients:r,value:t,predicate:s}}function xwt(e){return typeof e?.getChild=="function"}class Swt{_set;_done;_promise;constructor(){this._set=new Set,this._done=()=>{},this._promise=new Promise(t=>this._done=t)}pending(t){this._set.add(t)}ready(t){return this._set.delete(t),this._set.size===0}resolve(){this._promise=new Promise(t=>{this._done(),this._done=t})}get promise(){return this._promise}}function Ld(e){if(xwt(e))return Awt(e);if(Array.isArray(e))return Ewt(e);throw new Error("Unrecognized data format.")}function Awt(e){const{numRows:t}=e;return{numRows:t,columns:e.toColumns()}}function Ewt(e){const t=e.length;if(typeof e[0]=="object"){const n=t?Object.keys(e[0]):[],r={};return n.length>0&&n.forEach(i=>{r[i]=e.map(o=>o[i])}),{numRows:t,columns:r}}else return{numRows:t,values:e}}function ij(e){switch(e){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIMESTAMP WITH TIME ZONE":case"TIME":case"TIMESTAMP_NS":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":case"JSON":return"string";case"ARRAY":case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":case"GEOMETRY":return"object";default:if(e.startsWith("ENUM"))return"string";if(e.startsWith("DECIMAL"))return"number";if(e.startsWith("STRUCT")||e.startsWith("MAP"))return"object";if(e.endsWith("]"))return"array";throw new Error(`Unsupported type: ${e}`)}}const kwt="count",Twt="nulls",Mwt="max",Iwt="min",Rwt="distinct",Cwt={[kwt]:sr,[Rwt]:e=>sr(e).distinct(),[Mwt]:Ba,[Iwt]:ml,[Twt]:e=>sr().where(cl(e))};function Nwt({table:e,column:t,stats:n}){return zt.from(e).select(Array.from(n,r=>({[r]:Cwt[r](t)})))}async function rI(e,t){return t.length===1&&t[0].column==="*"?Owt(e,t[0].table):(await Promise.all(t.map(n=>$wt(e,n)))).filter(n=>n!==void 0)}async function $wt(e,{table:t,column:n,stats:r}){const i=zt.from({source:t}).select({column:n}).groupby(dc(n)&&uh(n)?ee`ALL`:[]),[o]=Array.from(await e.query(zt.describe(i))),s={table:t,column:`${n}`,sqlType:o.column_type,type:ij(o.column_type),nullable:o.null==="YES"};if(!r?.length)return s;const[a]=await e.query(Nwt({table:t,column:n,stats:r}),{persist:!0});return Object.assign(s,a)}async function Owt(e,t){return Array.from(await e.query(`DESCRIBE ${vz(t)}`)).map(r=>({table:t,column:r.column_name,sqlType:r.column_type,type:ij(r.column_type),nullable:r.null==="YES"}))}var Dwt=(e,t)=>{t.onClick?.()},Lwt=Et("<span> </span>"),Fwt=Et("<button><!> <!></button>");function wa(e,t){Re(t,!0);let n=ie(t,"label",3,null),r=ie(t,"icon",3,null),i=ie(t,"title",3,""),o=ie(t,"order",3,null),s=ie(t,"style",3,"default");const a={default:"bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 dark:text-slate-400 focus-visible:outline-2 outline-blue-600 -outline-offset-1",plotCell:"bg-white text-slate-400 border-slate-300 hover:text-slate-500 hover:border-slate-500 dark:text-slate-500 dark:border-slate-500 dark:bg-slate-800 dark:hover:border-slate-300 dark:hover:text-slate-300",plotCellClose:"bg-white text-red-500 border-red-500 hover:text-white hover:bg-red-500 dark:bg-slate-800"};var l=Fwt();l.__click=[Dwt,t];let c;var u=ot(l);{var f=g=>{var y=Mn();const v=dt(r);var b=Ht(y);ov(b,()=>x(v),(_,w)=>{w(_,{class:"w-5 h-5"})}),rt(g,y)};Ft(u,g=>{r()!=null&&g(f)})}var h=mt(u,2);{var p=g=>{var y=Lwt();let v;var b=ot(y,!0);et(y),Pt(_=>{v=ar(y,1,"",null,v,_),ce(b,n())},[()=>({"ml-1":r()!=null})]),rt(g,y)};Ft(h,g=>{n()!=null&&n()!=""&&g(p)})}et(l),Pt(g=>{ar(l,1,`rounded-md px-1.5 py-1.5 h-[28px] flex select-none items-center border ${a[s()]??""} ${t.class??""??""}`),ut(l,"title",i()),c=Me(l,"",c,g)},[()=>({order:o()})]),rt(e,l),Ce()}Br(["click"]);var Bwt=(e,t,n)=>t(n),Pwt=Et('<button class="px-2 py-1 text-left rounded-md text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"> </button>'),zwt=Et('<ul class="absolute mt-1 w-full rounded-md shadow-md p-1 z-10 flex flex-col bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700"></ul>'),Uwt=Et('<div><input type="text" class="form-input rounded-md py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 w-full"/> <!></div>');function _O(e,t){Re(t,!0);let n=ie(t,"value",3,""),r=ie(t,"options",19,()=>[]),i,o,s=wt(!1),a=dt(()=>n()!=null&&r()!=null?r().filter(g=>g.toLowerCase().includes(n().toLowerCase())):r()??[]);function l(g){t.onChange?.(g)}function c(g){l(g),H(s,!1)}var u=Uwt(),f=ot(u);aP(f),f.__change=()=>l(i.value??""),f.__input=()=>l(i.value??""),ds(f,g=>i=g,()=>i);var h=mt(f,2);{var p=g=>{var y=zwt();En(y,20,()=>x(a),v=>v,(v,b)=>{var _=Pwt();_.__click=[Bwt,c,b];var w=ot(_,!0);et(_),Pt(()=>ce(w,b)),rt(v,_)}),et(y),rt(g,y)};Ft(h,g=>{x(s)&&x(a).length>0&&g(p)})}et(u),ds(u,g=>o=g,()=>o),Pt(()=>{ar(u,1,`relative ${t.className??""??""}`),ut(f,"placeholder",t.placeholder),Dpt(f,n())}),I0("focus",f,()=>H(s,!0)),I0("blur",f,g=>{g.relatedTarget&&g.relatedTarget instanceof Node&&o.contains(g.relatedTarget)||H(s,!1)}),rt(e,u),Ce()}Br(["change","input","click"]);const qwt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let iI=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=qwt[n[e]&63];return t};function wO(e,t,n,r){!t()||!x(n)||t()(r(x(n).value))}var jwt=Et("<option disabled selected> </option>"),Vwt=Et("<hr/>"),Wwt=Et("<option> </option>"),Ywt=Et('<label class="select-none flex items-center gap-2"><span class="text-slate-500 dark:text-slate-400 whitespace-nowrap"> </span> <select><!><!></select></label>'),Hwt=Et("<option disabled selected> </option>"),Gwt=Et("<hr/>"),Xwt=Et("<option> </option>"),Kwt=Et("<select><!><!></select>");function xa(e,t){Re(t,!0);let n=ie(t,"label",3,void 0),r=ie(t,"disabled",3,!1),i=ie(t,"placeholder",3,null),o=ie(t,"options",19,()=>[]),s=ie(t,"onChange",3,void 0),a=wt(void 0);const l=iI(),c=l+"_null",u=l+"_undefined",f=b=>b===null?c:b===void 0?u:b.toString(),h=b=>b===c?null:b===u?void 0:b;var p=Mn(),g=Ht(p);{var y=b=>{var _=Ywt(),w=ot(_),S=ot(w,!0);et(w);var k=mt(w,2);k.__change=[wO,s,a,h];var E=ot(k);{var T=$=>{var C=jwt(),L=ot(C,!0);et(C),C.value=(C.__value=null)??"",Pt(()=>ce(L,i())),rt($,C)};Ft(E,$=>{i()!=null&&$(T)})}var M=mt(E);En(M,17,o,Un,($,C)=>{var L=Mn(),F=Ht(L);{var N=D=>{var B=Vwt();rt(D,B)},O=D=>{var B=Wwt(),j=ot(B,!0);et(B);var z={};Pt(U=>{ce(j,x(C).label),z!==(z=U)&&(B.value=(B.__value=U)??"")},[()=>f(x(C).value)]),rt(D,B)};Ft(F,D=>{x(C)==="---"?D(N):D(O,!1)})}rt($,L)}),et(k),ds(k,$=>H(a,$),()=>x(a));var I;Bw(k),et(_),Pt($=>{ce(S,n()),ar(k,1,`form-select rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 dark:text-slate-400 text-ellipsis ${t.class??""??""}`),k.disabled=r(),I!==(I=$)&&(k.value=(k.__value=$)??"",ng(k,$))},[()=>f(t.value)]),rt(b,_)},v=b=>{var _=Kwt();_.__change=[wO,s,a,h];var w=ot(_);{var S=T=>{var M=Hwt(),I=ot(M,!0);et(M),M.value=(M.__value=null)??"",Pt(()=>ce(I,i())),rt(T,M)};Ft(w,T=>{i()!=null&&T(S)})}var k=mt(w);En(k,17,o,Un,(T,M)=>{var I=Mn(),$=Ht(I);{var C=F=>{var N=Gwt();rt(F,N)},L=F=>{var N=Xwt(),O=ot(N,!0);et(N);var D={};Pt(B=>{ce(O,x(M).label),D!==(D=B)&&(N.value=(N.__value=B)??"")},[()=>f(x(M).value)]),rt(F,N)};Ft($,F=>{x(M)==="---"?F(C):F(L,!1)})}rt(T,I)}),et(_),ds(_,T=>H(a,T),()=>x(a));var E;Bw(_),Pt(T=>{ar(_,1,`form-select rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 dark:text-slate-400 select-none text-ellipsis ${t.class??""??""}`),_.disabled=r(),E!==(E=T)&&(_.value=(_.__value=T)??"",ng(_,T))},[()=>f(t.value)]),rt(b,_)};Ft(g,b=>{n()!=null?b(y):b(v,!1)})}rt(e,p),Ce()}Br(["change"]);function Jwt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hg(e){return e=kx(Math.abs(e)),e?e[1]:NaN}function Zwt(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Qwt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var txt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vv(e){if(!(t=txt.exec(e)))throw new Error("invalid format: "+e);var t;return new oI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vv.prototype=oI.prototype;function oI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}oI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ext(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oj;function nxt(e,t){var n=kx(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(oj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+kx(e,Math.max(0,t+o-1))[0]}function xO(e,t){var n=kx(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const SO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Jwt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xO(e*100,t),r:xO,s:nxt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AO(e){return e}var EO=Array.prototype.map,kO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function rxt(e){var t=e.grouping===void 0||e.thousands===void 0?AO:Zwt(EO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?AO:Qwt(EO.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=vv(f);var h=f.fill,p=f.align,g=f.sign,y=f.symbol,v=f.zero,b=f.width,_=f.comma,w=f.precision,S=f.trim,k=f.type;k==="n"?(_=!0,k="g"):SO[k]||(w===void 0&&(w=12),S=!0,k="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var E=y==="$"?n:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",T=y==="$"?r:/[%p]/.test(k)?s:"",M=SO[k],I=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function $(C){var L=E,F=T,N,O,D;if(k==="c")F=M(C)+F,C="";else{C=+C;var B=C<0||1/C<0;if(C=isNaN(C)?l:M(Math.abs(C),w),S&&(C=ext(C)),B&&+C==0&&g!=="+"&&(B=!1),L=(B?g==="("?g:a:g==="-"||g==="("?"":g)+L,F=(k==="s"?kO[8+oj/3]:"")+F+(B&&g==="("?")":""),I){for(N=-1,O=C.length;++N<O;)if(D=C.charCodeAt(N),48>D||D>57){F=(D===46?i+C.slice(N+1):C.slice(N))+F,C=C.slice(0,N);break}}}_&&!v&&(C=t(C,1/0));var j=L.length+C.length+F.length,z=j<b?new Array(b-j+1).join(h):"";switch(_&&v&&(C=t(z+C,z.length?b-F.length:1/0),z=""),p){case"<":C=L+C+F+z;break;case"=":C=L+z+C+F;break;case"^":C=z.slice(0,j=z.length>>1)+L+C+F+z.slice(j);break;default:C=z+L+C+F;break}return o(C)}return $.toString=function(){return f+""},$}function u(f,h){var p=c((f=vv(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(hg(h)/3)))*3,y=Math.pow(10,-g),v=kO[8+g/3];return function(b){return p(y*b)+v}}return{format:c,formatPrefix:u}}var l_,Ha,sj;ixt({thousands:",",grouping:[3],currency:["$",""]});function ixt(e){return l_=rxt(e),Ha=l_.format,sj=l_.formatPrefix,l_}function oxt(e){return Math.max(0,-hg(Math.abs(e)))}function sxt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hg(t)/3)))*3-hg(Math.abs(e)))}function axt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hg(t)-hg(e))+1}function Wn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fd(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qS(e){let t,n,r;e.length!==2?(t=Wn,n=(a,l)=>Wn(e(a),l),r=(a,l)=>e(a)-l):(t=e===Wn||e===Fd?e:lxt,n=e,r=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function lxt(){return 0}function aj(e){return e===null?NaN:+e}function*cxt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const uxt=qS(Wn),jS=uxt.right;qS(aj).center;const lj=cj(uj),fxt=cj(hxt);function cj(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:s}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((s=Math.floor(s!==void 0?s:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!s||!n&&!r)return t;const a=n&&e(n),l=r&&e(r),c=i.slice();return a&&l?(jp(a,c,i,o,s),jp(a,i,c,o,s),jp(a,c,i,o,s),Vp(l,i,c,o,s),Vp(l,c,i,o,s),Vp(l,i,c,o,s)):a?(jp(a,i,c,o,s),jp(a,c,i,o,s),jp(a,i,c,o,s)):l&&(Vp(l,i,c,o,s),Vp(l,c,i,o,s),Vp(l,i,c,o,s)),t}}function jp(e,t,n,r,i){for(let o=0,s=r*i;o<s;)e(t,n,o,o+=r,1)}function Vp(e,t,n,r,i){for(let o=0,s=r*i;o<r;++o)e(t,n,o,o+s,r)}function hxt(e){const t=uj(e);return(n,r,i,o,s)=>{i<<=2,o<<=2,s<<=2,t(n,r,i+0,o+0,s),t(n,r,i+1,o+1,s),t(n,r,i+2,o+2,s),t(n,r,i+3,o+3,s)}}function uj(e){const t=Math.floor(e);if(t===e)return dxt(e);const n=e-t,r=2*e+1;return(i,o,s,a,l)=>{if(!((a-=l)>=s))return;let c=t*o[s];const u=l*t,f=u+l;for(let h=s,p=s+u;h<p;h+=l)c+=o[Math.min(a,h)];for(let h=s,p=a;h<=p;h+=l)c+=o[Math.min(a,h+u)],i[h]=(c+n*(o[Math.max(s,h-f)]+o[Math.min(a,h+f)]))/r,c-=o[Math.max(s,h-u)]}}function dxt(e){const t=2*e+1;return(n,r,i,o,s)=>{if(!((o-=s)>=i))return;let a=e*r[i];const l=s*e;for(let c=i,u=i+l;c<u;c+=s)a+=r[Math.min(o,c)];for(let c=i,u=o;c<=u;c+=s)a+=r[Math.min(o,c+l)],n[c]=a/t,a-=r[Math.max(i,c-l)]}}function VS(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function pxt(e){return e.length|0}function gxt(e){return!(e>0)}function mxt(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function yxt(e){return t=>e(...t)}function vxt(...e){const t=typeof e[e.length-1]=="function"&&yxt(e.pop());e=e.map(mxt);const n=e.map(pxt),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(gxt))return o;for(;;){o.push(i.map((a,l)=>e[l][a]));let s=r;for(;++i[s]===n[s];){if(s===0)return t?o.map(t):o;i[s--]=0}}}function bxt(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function sI(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function v1(e,t){const n=sI(e,t);return n&&Math.sqrt(n)}function di(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class ac{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class Bd extends Map{constructor(t,n=dj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(I4(this,t))}has(t){return super.has(I4(this,t))}set(t,n){return super.set(fj(this,t),n)}delete(t){return super.delete(hj(this,t))}}class Hg extends Set{constructor(t,n=dj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(I4(this,t))}add(t){return super.add(fj(this,t))}delete(t){return super.delete(hj(this,t))}}function I4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function hj({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function dj(e){return e!==null&&typeof e=="object"?e.valueOf():e}function R4(e){return e}function hh(e,...t){return aI(e,R4,R4,t)}function L0(e,t,...n){return aI(e,R4,t,n)}function _xt(e,t,...n){return aI(e,Array.from,t,n)}function aI(e,t,n,r){return function i(o,s){if(s>=r.length)return n(o);const a=new Bd,l=r[s++];let c=-1;for(const u of o){const f=l(u,++c,o),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,s));return t(a)}(e,0)}function wxt(e,t){return Array.from(t,n=>e[n])}function Tx(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const s of t){const a=bv(s[i],s[o]);if(a)return a}})):(n=e.map(n),r.sort((i,o)=>bv(n[i],n[o]))),wxt(e,r)}return e.sort(lI(n))}function lI(e=Wn){if(e===Wn)return bv;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function bv(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function cI(e,t,n){return(t.length!==2?Tx(L0(e,t,n),([r,i],[o,s])=>Wn(i,s)||Wn(r,o)):Tx(hh(e,n),([r,i],[o,s])=>t(i,s)||Wn(r,o))).map(([r])=>r)}const xxt=Math.sqrt(50),Sxt=Math.sqrt(10),Axt=Math.sqrt(2);function Mx(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=xxt?10:o>=Sxt?5:o>=Axt?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Mx(e,t,n*2):[a,l,c]}function Yf(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?Mx(t,e,n):Mx(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function _v(e,t,n){return t=+t,e=+e,n=+n,Mx(e,t,n)[2]}function C4(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?_v(t,e,n):_v(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function pj(e,t,n){let r;for(;;){const i=_v(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function uI(e){return Math.max(1,Math.ceil(Math.log(VS(e))/Math.LN2)+1)}function Wr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ext(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Lr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kxt(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function gj(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?bv:lI(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(t-c*f/l+h)),g=Math.min(r,Math.floor(t+(l-c)*f/l+h));gj(e,t,p,g,i)}const o=e[t];let s=n,a=r;for(zm(e,n,t),i(e[r],o)>0&&zm(e,n,r);s<a;){for(zm(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?zm(e,n,a):(++a,zm(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function zm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function fI(e,t=Wn){let n,r=!1;if(t.length===1){let i;for(const o of e){const s=t(o);(r?Wn(s,i)>0:Wn(s,s)===0)&&(n=o,i=s,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Hf(e,t,n){if(e=Float64Array.from(cxt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Lr(e);if(t>=1)return Wr(e);var r,i=(r-1)*t,o=Math.floor(i),s=Wr(gj(e,o).subarray(0,o+1)),a=Lr(e.subarray(o+1));return s+(a-s)*(i-o)}}function Txt(e,t,n=aj){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Mxt(e,t,n){const r=VS(e),i=Hf(e,.75)-Hf(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function mj(e,t,n){const r=VS(e),i=v1(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function WS(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function wv(e,t){return Hf(e,.5,t)}function*Ixt(e){for(const t of e)yield*t}function yj(e){return Array.from(Ixt(e))}function vj(e,t){const n=new Bd;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&s>=s&&n.set(s,(n.get(s)||0)+1)}let r,i=0;for(const[o,s]of n)s>i&&(i=s,r=o);return r}function Rxt(e,t=Cxt){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function Cxt(e,t){return[e,t]}function Ls(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function bj(e,t=Wn){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=Wn);const i=(a,l)=>t(n[a],n[l]);let o,s;return e=Uint32Array.from(n,(a,l)=>l),e.sort(t===Wn?(a,l)=>bv(n[a],n[l]):lI(i)),e.forEach((a,l)=>{const c=i(a,o===void 0?a:o);c>=0?((o===void 0||c>0)&&(o=a,s=l),r[a]=s):r[a]=NaN}),r}function Nxt(e,t=Wn){let n,r=!1;if(t.length===1){let i;for(const o of e){const s=t(o);(r?Wn(s,i)<0:Wn(s,s)===0)&&(n=o,i=s,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function yl(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ix(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Mc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function YS(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const N4=Symbol("implicit");function hI(){var e=new Bd,t=[],n=[],r=N4;function i(o){let s=e.get(o);if(s===void 0){if(r!==N4)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Bd;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return hI(t,n).unknown(r)},Mc.apply(i,arguments),i}function b1(){var e=hI().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var h=t().length,p=i<r,g=p?i:r,y=p?r:i;o=(y-g)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),g+=(y-g-o*(h-l))*u,s=o*(1-l),a&&(g=Math.round(g),s=Math.round(s));var v=Ls(h).map(function(b){return g+o*b});return n(p?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return b1(t(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Mc.apply(f(),arguments)}function _j(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _j(t())},e}function $xt(){return _j(b1.apply(null,arguments).paddingInner(1))}function Gg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _1(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function dh(){}var Pd=.7,dg=1/Pd,F0="\\s*([+-]?\\d+)\\s*",xv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oxt=/^#([0-9a-f]{3,8})$/,Dxt=new RegExp(`^rgb\\(${F0},${F0},${F0}\\)$`),Lxt=new RegExp(`^rgb\\(${lc},${lc},${lc}\\)$`),Fxt=new RegExp(`^rgba\\(${F0},${F0},${F0},${xv}\\)$`),Bxt=new RegExp(`^rgba\\(${lc},${lc},${lc},${xv}\\)$`),Pxt=new RegExp(`^hsl\\(${xv},${lc},${lc}\\)$`),zxt=new RegExp(`^hsla\\(${xv},${lc},${lc},${xv}\\)$`),TO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gg(dh,Gf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MO,formatHex:MO,formatHex8:Uxt,formatHsl:qxt,formatRgb:IO,toString:IO});function MO(){return this.rgb().formatHex()}function Uxt(){return this.rgb().formatHex8()}function qxt(){return wj(this).formatHsl()}function IO(){return this.rgb().formatRgb()}function Gf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Oxt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?RO(t):n===3?new Di(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?c_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?c_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Dxt.exec(e))?new Di(t[1],t[2],t[3],1):(t=Lxt.exec(e))?new Di(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fxt.exec(e))?c_(t[1],t[2],t[3],t[4]):(t=Bxt.exec(e))?c_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pxt.exec(e))?$O(t[1],t[2]/100,t[3]/100,1):(t=zxt.exec(e))?$O(t[1],t[2]/100,t[3]/100,t[4]):TO.hasOwnProperty(e)?RO(TO[e]):e==="transparent"?new Di(NaN,NaN,NaN,0):null}function RO(e){return new Di(e>>16&255,e>>8&255,e&255,1)}function c_(e,t,n,r){return r<=0&&(e=t=n=NaN),new Di(e,t,n,r)}function dI(e){return e instanceof dh||(e=Gf(e)),e?(e=e.rgb(),new Di(e.r,e.g,e.b,e.opacity)):new Di}function ms(e,t,n,r){return arguments.length===1?dI(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gg(Di,ms,_1(dh,{brighter(e){return e=e==null?dg:Math.pow(dg,e),new Di(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pd:Math.pow(Pd,e),new Di(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Di(ud(this.r),ud(this.g),ud(this.b),Rx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CO,formatHex:CO,formatHex8:jxt,formatRgb:NO,toString:NO}));function CO(){return`#${Qh(this.r)}${Qh(this.g)}${Qh(this.b)}`}function jxt(){return`#${Qh(this.r)}${Qh(this.g)}${Qh(this.b)}${Qh((isNaN(this.opacity)?1:this.opacity)*255)}`}function NO(){const e=Rx(this.opacity);return`${e===1?"rgb(":"rgba("}${ud(this.r)}, ${ud(this.g)}, ${ud(this.b)}${e===1?")":`, ${e})`}`}function Rx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ud(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qh(e){return e=ud(e),(e<16?"0":"")+e.toString(16)}function $O(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rl(e,t,n,r)}function wj(e){if(e instanceof rl)return new rl(e.h,e.s,e.l,e.opacity);if(e instanceof dh||(e=Gf(e)),!e)return new rl;if(e instanceof rl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new rl(s,a,l,e.opacity)}function $4(e,t,n,r){return arguments.length===1?wj(e):new rl(e,t,n,r??1)}function rl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gg(rl,$4,_1(dh,{brighter(e){return e=e==null?dg:Math.pow(dg,e),new rl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pd:Math.pow(Pd,e),new rl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Di(tk(e>=240?e-240:e+120,i,r),tk(e,i,r),tk(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rl(OO(this.h),u_(this.s),u_(this.l),Rx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rx(this.opacity);return`${e===1?"hsl(":"hsla("}${OO(this.h)}, ${u_(this.s)*100}%, ${u_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OO(e){return e=(e||0)%360,e<0?e+360:e}function u_(e){return Math.max(0,Math.min(1,e||0))}function tk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xj=Math.PI/180,Sj=180/Math.PI,Cx=18,Aj=.96422,Ej=1,kj=.82521,Tj=4/29,B0=6/29,Mj=3*B0*B0,Vxt=B0*B0*B0;function Ij(e){if(e instanceof cc)return new cc(e.l,e.a,e.b,e.opacity);if(e instanceof fu)return Rj(e);e instanceof Di||(e=dI(e));var t=ik(e.r),n=ik(e.g),r=ik(e.b),i=ek((.2225045*t+.7168786*n+.0606169*r)/Ej),o,s;return t===n&&n===r?o=s=i:(o=ek((.4360747*t+.3850649*n+.1430804*r)/Aj),s=ek((.0139322*t+.0971045*n+.7141733*r)/kj)),new cc(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Nx(e,t,n,r){return arguments.length===1?Ij(e):new cc(e,t,n,r??1)}function cc(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Gg(cc,Nx,_1(dh,{brighter(e){return new cc(this.l+Cx*(e??1),this.a,this.b,this.opacity)},darker(e){return new cc(this.l-Cx*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Aj*nk(t),e=Ej*nk(e),n=kj*nk(n),new Di(rk(3.1338561*t-1.6168667*e-.4906146*n),rk(-.9787684*t+1.9161415*e+.033454*n),rk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ek(e){return e>Vxt?Math.pow(e,1/3):e/Mj+Tj}function nk(e){return e>B0?e*e*e:Mj*(e-Tj)}function rk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ik(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Wxt(e){if(e instanceof fu)return new fu(e.h,e.c,e.l,e.opacity);if(e instanceof cc||(e=Ij(e)),e.a===0&&e.b===0)return new fu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Sj;return new fu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function O4(e,t,n,r){return arguments.length===1?Wxt(e):new fu(e,t,n,r??1)}function fu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Rj(e){if(isNaN(e.h))return new cc(e.l,0,0,e.opacity);var t=e.h*xj;return new cc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Gg(fu,O4,_1(dh,{brighter(e){return new fu(this.h,this.c,this.l+Cx*(e??1),this.opacity)},darker(e){return new fu(this.h,this.c,this.l-Cx*(e??1),this.opacity)},rgb(){return Rj(this).rgb()}}));var Cj=-.14861,pI=1.78277,gI=-.29227,HS=-.90649,Sv=1.97294,DO=Sv*HS,LO=Sv*pI,FO=pI*gI-HS*Cj;function Yxt(e){if(e instanceof fd)return new fd(e.h,e.s,e.l,e.opacity);e instanceof Di||(e=dI(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(FO*r+DO*t-LO*n)/(FO+DO-LO),o=r-i,s=(Sv*(n-i)-gI*o)/HS,a=Math.sqrt(s*s+o*o)/(Sv*i*(1-i)),l=a?Math.atan2(s,o)*Sj-120:NaN;return new fd(l<0?l+360:l,a,i,e.opacity)}function vc(e,t,n,r){return arguments.length===1?Yxt(e):new fd(e,t,n,r??1)}function fd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gg(fd,vc,_1(dh,{brighter(e){return e=e==null?dg:Math.pow(dg,e),new fd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pd:Math.pow(Pd,e),new fd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*xj,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Di(255*(t+n*(Cj*r+pI*i)),255*(t+n*(gI*r+HS*i)),255*(t+n*(Sv*r)),this.opacity)}}));function Hxt(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function Gxt(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return Hxt((n-r/t)*t,s,i,o,a)}}const GS=e=>()=>e;function Nj(e,t){return function(n){return e+n*t}}function Xxt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mI(e,t){var n=t-e;return n?Nj(e,n>180||n<-180?n-360*Math.round(n/360):n):GS(isNaN(e)?t:e)}function Kxt(e){return(e=+e)==1?ao:function(t,n){return n-t?Xxt(t,n,e):GS(isNaN(t)?n:t)}}function ao(e,t){var n=t-e;return n?Nj(e,n):GS(isNaN(e)?t:e)}const zd=function e(t){var n=Kxt(t);function r(i,o){var s=n((i=ms(i)).r,(o=ms(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=ao(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Jxt(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=ms(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Zxt=Jxt(Gxt);function Qxt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function t2t(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function e2t(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Xg(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function n2t(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function eo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function r2t(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xg(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var D4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ok=new RegExp(D4.source,"g");function i2t(e){return function(){return e}}function o2t(e){return function(t){return e(t)+""}}function $j(e,t){var n=D4.lastIndex=ok.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=D4.exec(e))&&(i=ok.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:eo(r,i)})),n=ok.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?o2t(l[0].x):i2t(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Xg(e,t){var n=typeof t,r;return t==null||n==="boolean"?GS(t):(n==="number"?eo:n==="string"?(r=Gf(t))?(t=r,zd):$j:t instanceof Gf?zd:t instanceof Date?n2t:t2t(t)?Qxt:Array.isArray(t)?e2t:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?r2t:eo)(e,t)}function yI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var BO=180/Math.PI,L4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oj(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*BO,skewX:Math.atan(l)*BO,scaleX:s,scaleY:a}}var f_;function s2t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?L4:Oj(t.a,t.b,t.c,t.d,t.e,t.f)}function a2t(e){return e==null||(f_||(f_=document.createElementNS("http://www.w3.org/2000/svg","g")),f_.setAttribute("transform",e),!(e=f_.transform.baseVal.consolidate()))?L4:(e=e.matrix,Oj(e.a,e.b,e.c,e.d,e.e,e.f))}function Dj(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,p,g){if(c!==f||u!==h){var y=p.push("translate(",null,t,null,n);g.push({i:y-4,x:eo(c,f)},{i:y-2,x:eo(u,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function s(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:eo(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:eo(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,p,g){if(c!==f||u!==h){var y=p.push(i(p)+"scale(",null,",",null,")");g.push({i:y-4,x:eo(c,f)},{i:y-2,x:eo(u,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),s(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(p){for(var g=-1,y=h.length,v;++g<y;)f[(v=h[g]).i]=v.x(p);return f.join("")}}}var l2t=Dj(s2t,"px, ","px)","deg)"),c2t=Dj(a2t,", ",")",")"),u2t=1e-12;function PO(e){return((e=Math.exp(e))+1/e)/2}function f2t(e){return((e=Math.exp(e))-1/e)/2}function h2t(e){return((e=Math.exp(2*e))-1)/(e+1)}const d2t=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],u=s[0],f=s[1],h=s[2],p=u-a,g=f-l,y=p*p+g*g,v,b;if(y<u2t)b=Math.log(h/c)/t,v=function(T){return[a+T*p,l+T*g,c*Math.exp(t*T*b)]};else{var _=Math.sqrt(y),w=(h*h-c*c+r*y)/(2*c*n*_),S=(h*h-c*c-r*y)/(2*h*n*_),k=Math.log(Math.sqrt(w*w+1)-w),E=Math.log(Math.sqrt(S*S+1)-S);b=(E-k)/t,v=function(T){var M=T*b,I=PO(k),$=c/(n*_)*(I*h2t(t*M+k)-f2t(k));return[a+$*p,l+$*g,c*I/PO(t*M+k)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function p2t(e){return function(t,n){var r=e((t=$4(t)).h,(n=$4(n)).h),i=ao(t.s,n.s),o=ao(t.l,n.l),s=ao(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const g2t=p2t(mI);function m2t(e,t){var n=ao((e=Nx(e)).l,(t=Nx(t)).l),r=ao(e.a,t.a),i=ao(e.b,t.b),o=ao(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function y2t(e){return function(t,n){var r=e((t=O4(t)).h,(n=O4(n)).h),i=ao(t.c,n.c),o=ao(t.l,n.l),s=ao(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const v2t=y2t(mI);function Lj(e){return function t(n){n=+n;function r(i,o){var s=e((i=vc(i)).h,(o=vc(o)).h),a=ao(i.s,o.s),l=ao(i.l,o.l),c=ao(i.opacity,o.opacity);return function(u){return i.h=s(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}Lj(mI);var vI=Lj(ao);function XS(e,t){t===void 0&&(t=e,e=Xg);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function vl(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function b2t(e){return function(){return e}}function F4(e){return+e}var zO=[0,1];function Ea(e){return e}function B4(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:b2t(isNaN(t)?NaN:.5)}function _2t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function w2t(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=B4(i,r),o=n(s,o)):(r=B4(r,i),o=n(o,s)),function(a){return o(r(a))}}function x2t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=B4(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=jS(e,a,1,r)-1;return o[l](i[l](a))}}function w1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function KS(){var e=zO,t=zO,n=Xg,r,i,o,s=Ea,a,l,c;function u(){var h=Math.min(e.length,t.length);return s!==Ea&&(s=_2t(e[0],e[h-1])),a=h>2?x2t:w2t,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=a(e.map(r),t,n)))(r(s(h)))}return f.invert=function(h){return s(i((c||(c=a(t,e.map(r),eo)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,F4),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=yI,u()},f.clamp=function(h){return arguments.length?(s=h?!0:Ea,u()):s!==Ea},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return r=h,i=p,u()}}function Fj(){return KS()(Ea,Ea)}function S2t(e,t,n,r){var i=C4(e,t,n),o;switch(r=vv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=sxt(i,s))&&(r.precision=o),sj(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=axt(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=oxt(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ha(r)}function x1(e){var t=e.domain;return e.ticks=function(n){var r=t();return Yf(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return S2t(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=_v(s,a,n),c===l)return r[i]=s,r[o]=a,t(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function qu(){var e=Fj();return e.copy=function(){return w1(e,qu())},Mc.apply(e,arguments),x1(e)}function Bj(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,F4),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Bj(e).unknown(t)},e=arguments.length?Array.from(e,F4):[0,1],x1(n)}function Pj(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function UO(e){return Math.log(e)}function qO(e){return Math.exp(e)}function A2t(e){return-Math.log(-e)}function E2t(e){return-Math.exp(-e)}function k2t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function T2t(e){return e===10?k2t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M2t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function jO(e){return(t,n)=>-e(-t,n)}function zj(e){const t=e(UO,qO),n=t.domain;let r=10,i,o;function s(){return i=M2t(r),o=T2t(r),n()[0]<0?(i=jO(i),o=jO(o),e(A2t,E2t)):e(UO,qO),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),p=i(u),g,y;const v=a==null?10:+a;let b=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(g=1;g<r;++g)if(y=h<0?g/o(-h):g*o(h),!(y<c)){if(y>u)break;b.push(y)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(y=h>0?g/o(-h):g*o(h),!(y<c)){if(y>u)break;b.push(y)}b.length*2<v&&(b=Yf(c,u,v))}else b=Yf(h,p,Math.min(p-h,v)).map(o);return f?b.reverse():b},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=vv(l)).precision==null&&(l.trim=!0),l=Ha(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(Pj(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function pg(){const e=zj(KS()).domain([1,10]);return e.copy=()=>w1(e,pg()).base(e.base()),Mc.apply(e,arguments),e}function VO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function WO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Uj(e){var t=1,n=e(VO(t),WO(t));return n.constant=function(r){return arguments.length?e(VO(t=+r),WO(t)):t},x1(n)}function bI(){var e=Uj(KS());return e.copy=function(){return w1(e,bI()).constant(e.constant())},Mc.apply(e,arguments)}function YO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I2t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function R2t(e){return e<0?-e*e:e*e}function qj(e){var t=e(Ea,Ea),n=1;function r(){return n===1?e(Ea,Ea):n===.5?e(I2t,R2t):e(YO(n),YO(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},x1(t)}function jj(){var e=qj(KS());return e.copy=function(){return w1(e,jj()).exponent(e.exponent())},Mc.apply(e,arguments),e}function Vj(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=Txt(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[jS(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Wn),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Vj().domain(e).range(t).unknown(r)},Mc.apply(o,arguments)}function Wj(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[jS(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Wj().domain(e).range(t).unknown(n)},Mc.apply(i,arguments)}const sk=new Date,ak=new Date;function Ei(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),t(o,a),e(o);while(c<o&&o<s);return l},i.filter=o=>Ei(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(sk.setTime(+o),ak.setTime(+s),e(sk),e(ak),Math.floor(n(sk,ak))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const $x=Ei(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$x.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ei(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):$x);$x.range;const hu=1e3,ka=hu*60,du=ka*60,Ru=du*24,_I=Ru*7,HO=Ru*30,lk=Ru*365,sl=Ei(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*hu)},(e,t)=>(t-e)/hu,e=>e.getUTCSeconds());sl.range;const S1=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hu)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getMinutes());S1.range;const A1=Ei(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getUTCMinutes());A1.range;const E1=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hu-e.getMinutes()*ka)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getHours());E1.range;const k1=Ei(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getUTCHours());k1.range;const sp=Ei(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ka)/Ru,e=>e.getDate()-1);sp.range;const JS=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ru,e=>e.getUTCDate()-1);JS.range;const ZS=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ru,e=>Math.floor(e/Ru));ZS.range;function ap(e){return Ei(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ka)/_I)}const gg=ap(0),Av=ap(1),Yj=ap(2),Hj=ap(3),Ud=ap(4),Gj=ap(5),Xj=ap(6);gg.range;Av.range;Yj.range;Hj.range;Ud.range;Gj.range;Xj.range;function lp(e){return Ei(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/_I)}const mg=lp(0),Ev=lp(1),Kj=lp(2),Jj=lp(3),qd=lp(4),Zj=lp(5),Qj=lp(6);mg.range;Ev.range;Kj.range;Jj.range;qd.range;Zj.range;Qj.range;const T1=Ei(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());T1.range;const M1=Ei(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());M1.range;const bl=Ei(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bl.range;const _l=Ei(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_l.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_l.range;function tV(e,t,n,r,i,o){const s=[[sl,1,hu],[sl,5,5*hu],[sl,15,15*hu],[sl,30,30*hu],[o,1,ka],[o,5,5*ka],[o,15,15*ka],[o,30,30*ka],[i,1,du],[i,3,3*du],[i,6,6*du],[i,12,12*du],[r,1,Ru],[r,2,2*Ru],[n,1,_I],[t,1,HO],[t,3,3*HO],[e,1,lk]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const p=f&&typeof f.range=="function"?f:l(c,u,f),g=p?p.range(c,+u+1):[];return h?g.reverse():g}function l(c,u,f){const h=Math.abs(u-c)/f,p=qS(([,,v])=>v).right(s,h);if(p===s.length)return e.every(C4(c/lk,u/lk,f));if(p===0)return $x.every(Math.max(C4(c,u,f),1));const[g,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return g.every(y)}return[a,l]}const[C2t,eV]=tV(_l,M1,mg,ZS,k1,A1),[N2t,$2t]=tV(bl,T1,gg,sp,E1,S1);function ck(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Um(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function O2t(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=qm(i),u=jm(i),f=qm(o),h=jm(o),p=qm(s),g=jm(s),y=qm(a),v=jm(a),b=qm(l),_=jm(l),w={a:B,A:j,b:z,B:U,c:null,d:QO,e:QO,f:rSt,g:dSt,G:gSt,H:tSt,I:eSt,j:nSt,L:nV,m:iSt,M:oSt,p:V,q:Y,Q:nD,s:rD,S:sSt,u:aSt,U:lSt,V:cSt,w:uSt,W:fSt,x:null,X:null,y:hSt,Y:pSt,Z:mSt,"%":eD},S={a:Z,A:ct,b:gt,B:pt,c:null,d:tD,e:tD,f:_St,g:RSt,G:NSt,H:ySt,I:vSt,j:bSt,L:iV,m:wSt,M:xSt,p:lt,q:yt,Q:nD,s:rD,S:SSt,u:ASt,U:ESt,V:kSt,w:TSt,W:MSt,x:null,X:null,y:ISt,Y:CSt,Z:$St,"%":eD},k={a:$,A:C,b:L,B:F,c:N,d:JO,e:JO,f:K2t,g:KO,G:XO,H:ZO,I:ZO,j:Y2t,L:X2t,m:W2t,M:H2t,p:I,q:V2t,Q:Z2t,s:Q2t,S:G2t,u:P2t,U:z2t,V:U2t,w:B2t,W:q2t,x:O,X:D,y:KO,Y:XO,Z:j2t,"%":J2t};w.x=E(n,w),w.X=E(r,w),w.c=E(t,w),S.x=E(n,S),S.X=E(r,S),S.c=E(t,S);function E(at,vt){return function(st){var Q=[],It=-1,_t=0,Dt=at.length,Ut,xt,qt;for(st instanceof Date||(st=new Date(+st));++It<Dt;)at.charCodeAt(It)===37&&(Q.push(at.slice(_t,It)),(xt=GO[Ut=at.charAt(++It)])!=null?Ut=at.charAt(++It):xt=Ut==="e"?" ":"0",(qt=vt[Ut])&&(Ut=qt(st,xt)),Q.push(Ut),_t=It+1);return Q.push(at.slice(_t,It)),Q.join("")}}function T(at,vt){return function(st){var Q=Um(1900,void 0,1),It=M(Q,at,st+="",0),_t,Dt;if(It!=st.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(vt&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(_t=uk(Um(Q.y,0,1)),Dt=_t.getUTCDay(),_t=Dt>4||Dt===0?Ev.ceil(_t):Ev(_t),_t=JS.offset(_t,(Q.V-1)*7),Q.y=_t.getUTCFullYear(),Q.m=_t.getUTCMonth(),Q.d=_t.getUTCDate()+(Q.w+6)%7):(_t=ck(Um(Q.y,0,1)),Dt=_t.getDay(),_t=Dt>4||Dt===0?Av.ceil(_t):Av(_t),_t=sp.offset(_t,(Q.V-1)*7),Q.y=_t.getFullYear(),Q.m=_t.getMonth(),Q.d=_t.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Dt="Z"in Q?uk(Um(Q.y,0,1)).getUTCDay():ck(Um(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Dt+5)%7:Q.w+Q.U*7-(Dt+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,uk(Q)):ck(Q)}}function M(at,vt,st,Q){for(var It=0,_t=vt.length,Dt=st.length,Ut,xt;It<_t;){if(Q>=Dt)return-1;if(Ut=vt.charCodeAt(It++),Ut===37){if(Ut=vt.charAt(It++),xt=k[Ut in GO?vt.charAt(It++):Ut],!xt||(Q=xt(at,st,Q))<0)return-1}else if(Ut!=st.charCodeAt(Q++))return-1}return Q}function I(at,vt,st){var Q=c.exec(vt.slice(st));return Q?(at.p=u.get(Q[0].toLowerCase()),st+Q[0].length):-1}function $(at,vt,st){var Q=p.exec(vt.slice(st));return Q?(at.w=g.get(Q[0].toLowerCase()),st+Q[0].length):-1}function C(at,vt,st){var Q=f.exec(vt.slice(st));return Q?(at.w=h.get(Q[0].toLowerCase()),st+Q[0].length):-1}function L(at,vt,st){var Q=b.exec(vt.slice(st));return Q?(at.m=_.get(Q[0].toLowerCase()),st+Q[0].length):-1}function F(at,vt,st){var Q=y.exec(vt.slice(st));return Q?(at.m=v.get(Q[0].toLowerCase()),st+Q[0].length):-1}function N(at,vt,st){return M(at,t,vt,st)}function O(at,vt,st){return M(at,n,vt,st)}function D(at,vt,st){return M(at,r,vt,st)}function B(at){return s[at.getDay()]}function j(at){return o[at.getDay()]}function z(at){return l[at.getMonth()]}function U(at){return a[at.getMonth()]}function V(at){return i[+(at.getHours()>=12)]}function Y(at){return 1+~~(at.getMonth()/3)}function Z(at){return s[at.getUTCDay()]}function ct(at){return o[at.getUTCDay()]}function gt(at){return l[at.getUTCMonth()]}function pt(at){return a[at.getUTCMonth()]}function lt(at){return i[+(at.getUTCHours()>=12)]}function yt(at){return 1+~~(at.getUTCMonth()/3)}return{format:function(at){var vt=E(at+="",w);return vt.toString=function(){return at},vt},parse:function(at){var vt=T(at+="",!1);return vt.toString=function(){return at},vt},utcFormat:function(at){var vt=E(at+="",S);return vt.toString=function(){return at},vt},utcParse:function(at){var vt=T(at+="",!0);return vt.toString=function(){return at},vt}}}var GO={"-":"",_:" ",0:"0"},Fi=/^\s*\d+/,D2t=/^%/,L2t=/[\\^$*+?|[\]().{}]/g;function Nn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function F2t(e){return e.replace(L2t,"\\$&")}function qm(e){return new RegExp("^(?:"+e.map(F2t).join("|")+")","i")}function jm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function B2t(e,t,n){var r=Fi.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function P2t(e,t,n){var r=Fi.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function z2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function U2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function q2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function XO(e,t,n){var r=Fi.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function KO(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function j2t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function V2t(e,t,n){var r=Fi.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function W2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function JO(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Y2t(e,t,n){var r=Fi.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ZO(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function H2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function G2t(e,t,n){var r=Fi.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function X2t(e,t,n){var r=Fi.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function K2t(e,t,n){var r=Fi.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function J2t(e,t,n){var r=D2t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Z2t(e,t,n){var r=Fi.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Q2t(e,t,n){var r=Fi.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function QO(e,t){return Nn(e.getDate(),t,2)}function tSt(e,t){return Nn(e.getHours(),t,2)}function eSt(e,t){return Nn(e.getHours()%12||12,t,2)}function nSt(e,t){return Nn(1+sp.count(bl(e),e),t,3)}function nV(e,t){return Nn(e.getMilliseconds(),t,3)}function rSt(e,t){return nV(e,t)+"000"}function iSt(e,t){return Nn(e.getMonth()+1,t,2)}function oSt(e,t){return Nn(e.getMinutes(),t,2)}function sSt(e,t){return Nn(e.getSeconds(),t,2)}function aSt(e){var t=e.getDay();return t===0?7:t}function lSt(e,t){return Nn(gg.count(bl(e)-1,e),t,2)}function rV(e){var t=e.getDay();return t>=4||t===0?Ud(e):Ud.ceil(e)}function cSt(e,t){return e=rV(e),Nn(Ud.count(bl(e),e)+(bl(e).getDay()===4),t,2)}function uSt(e){return e.getDay()}function fSt(e,t){return Nn(Av.count(bl(e)-1,e),t,2)}function hSt(e,t){return Nn(e.getFullYear()%100,t,2)}function dSt(e,t){return e=rV(e),Nn(e.getFullYear()%100,t,2)}function pSt(e,t){return Nn(e.getFullYear()%1e4,t,4)}function gSt(e,t){var n=e.getDay();return e=n>=4||n===0?Ud(e):Ud.ceil(e),Nn(e.getFullYear()%1e4,t,4)}function mSt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nn(t/60|0,"0",2)+Nn(t%60,"0",2)}function tD(e,t){return Nn(e.getUTCDate(),t,2)}function ySt(e,t){return Nn(e.getUTCHours(),t,2)}function vSt(e,t){return Nn(e.getUTCHours()%12||12,t,2)}function bSt(e,t){return Nn(1+JS.count(_l(e),e),t,3)}function iV(e,t){return Nn(e.getUTCMilliseconds(),t,3)}function _St(e,t){return iV(e,t)+"000"}function wSt(e,t){return Nn(e.getUTCMonth()+1,t,2)}function xSt(e,t){return Nn(e.getUTCMinutes(),t,2)}function SSt(e,t){return Nn(e.getUTCSeconds(),t,2)}function ASt(e){var t=e.getUTCDay();return t===0?7:t}function ESt(e,t){return Nn(mg.count(_l(e)-1,e),t,2)}function oV(e){var t=e.getUTCDay();return t>=4||t===0?qd(e):qd.ceil(e)}function kSt(e,t){return e=oV(e),Nn(qd.count(_l(e),e)+(_l(e).getUTCDay()===4),t,2)}function TSt(e){return e.getUTCDay()}function MSt(e,t){return Nn(Ev.count(_l(e)-1,e),t,2)}function ISt(e,t){return Nn(e.getUTCFullYear()%100,t,2)}function RSt(e,t){return e=oV(e),Nn(e.getUTCFullYear()%100,t,2)}function CSt(e,t){return Nn(e.getUTCFullYear()%1e4,t,4)}function NSt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qd(e):qd.ceil(e),Nn(e.getUTCFullYear()%1e4,t,4)}function $St(){return"+0000"}function eD(){return"%"}function nD(e){return+e}function rD(e){return Math.floor(+e/1e3)}var Wp,wI,I1;OSt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function OSt(e){return Wp=O2t(e),wI=Wp.format,Wp.parse,I1=Wp.utcFormat,Wp.utcParse,Wp}function DSt(e){return new Date(e)}function LSt(e){return e instanceof Date?+e:+new Date(+e)}function xI(e,t,n,r,i,o,s,a,l,c){var u=Fj(),f=u.invert,h=u.domain,p=c(".%L"),g=c(":%S"),y=c("%I:%M"),v=c("%I %p"),b=c("%a %d"),_=c("%b %d"),w=c("%B"),S=c("%Y");function k(E){return(l(E)<E?p:a(E)<E?g:s(E)<E?y:o(E)<E?v:r(E)<E?i(E)<E?b:_:n(E)<E?w:S)(E)}return u.invert=function(E){return new Date(f(E))},u.domain=function(E){return arguments.length?h(Array.from(E,LSt)):h().map(DSt)},u.ticks=function(E){var T=h();return e(T[0],T[T.length-1],E??10)},u.tickFormat=function(E,T){return T==null?k:c(T)},u.nice=function(E){var T=h();return(!E||typeof E.range!="function")&&(E=t(T[0],T[T.length-1],E??10)),E?h(Pj(T,E)):u},u.copy=function(){return w1(u,xI(e,t,n,r,i,o,s,a,l,c))},u}function FSt(){return Mc.apply(xI(N2t,$2t,bl,T1,gg,sp,E1,S1,sl,wI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BSt(){return Mc.apply(xI(C2t,eV,_l,M1,mg,JS,k1,A1,sl,I1).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function QS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function t3(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,c=Ea,u,f=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(r*y<r*o?a:l),c(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,n]=y,i=u(e=+e),o=u(t=+t),s=u(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(c=y,p):c};function g(y){return function(v){var b,_,w;return arguments.length?([b,_,w]=v,c=XS(y,[b,_,w]),p):[c(0),c(.5),c(1)]}}return p.range=g(Xg),p.rangeRound=g(yI),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return u=y,i=y(e),o=y(t),s=y(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p}}function sV(){var e=x1(t3()(Ea));return e.copy=function(){return QS(e,sV())},YS.apply(e,arguments)}function aV(){var e=zj(t3()).domain([.1,1,10]);return e.copy=function(){return QS(e,aV()).base(e.base())},YS.apply(e,arguments)}function lV(){var e=Uj(t3());return e.copy=function(){return QS(e,lV()).constant(e.constant())},YS.apply(e,arguments)}function cV(){var e=qj(t3());return e.copy=function(){return QS(e,cV()).exponent(e.exponent())},YS.apply(e,arguments)}const Vm={linear:{type:"linear",expr:e=>e,forward:e=>e,reverse:e=>e},log:{type:"log",expr:e=>rs(ba(e,0),Cz(e),Zt("nan")),forward:e=>Math.log10(e),reverse:e=>Math.pow(10,e)},symlog:{type:"symlog",expr:(e,t)=>Pe(Iu(e),C0(tr(1,Ao(hr(e,t))))),forward:(e,t)=>Math.sign(e)*Math.log1p(Math.abs(e)/t),reverse:(e,t)=>Math.sign(e)*Math.expm1(Math.abs(e))*t}};function PSt(e,t){let n=e,r=1/0;for(let i of t){let o=Math.abs(e-i);o<r&&(r=o,n=i)}return n}function uV(e,t={}){let{min:n,max:r,median:i,count:o}=e,s=t.scale;s=="band"&&(s=null),s==null&&(s="linear",o>=100&&n>=0&&i<r*.05&&(s=n>0?"log":"symlog")),n<=0&&s=="log"&&(r<=0?(n=1,r=10):n=Math.min(e.minPositive,r/10));let a=t.desiredCount??5;switch(s){case"linear":{let l=qu().domain([n,r]).nice(a),c=l.ticks(a);return{scale:{...Vm.linear,domain:l.domain()},binStart:l.domain()[0],binSize:c[1]-c[0]}}case"log":{let l=pg().domain([n,r]).nice(),c=Math.log10(l.domain()[0]),u=(Math.log10(l.domain()[1])-c)/a;return u=PSt(u,[.05,.1,.2,.5,1,1.5,2]),{scale:{...Vm.log,domain:l.domain()},binStart:c,binSize:u}}case"symlog":{let l=Math.max(Math.abs(n),Math.abs(r)),c=l>=100?1:l>0?l/1e5:1,u=Vm.symlog.forward(n,c),f=Vm.symlog.forward(r,c);return{scale:{...Vm.symlog,domain:[n,r],constant:c},binStart:u,binSize:(f-u)/a}}default:throw new Error("invalid scale type")}}function je(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const zSt=je("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),USt=je("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),qSt=je("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),jSt=je("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),VSt=je("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),WSt=je("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),YSt=je("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),HSt=je("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),GSt=je("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),XSt=je("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),KSt=je("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),gr=e=>Zxt(e[e.length-1]);var fV=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(je);const hV=gr(fV);var dV=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(je);const pV=gr(dV);var gV=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(je);const mV=gr(gV);var yV=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(je);const vV=gr(yV);var P4=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(je);const Ox=gr(P4);var bV=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(je);const _V=gr(bV);var z4=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(je);const Dx=gr(z4);var wV=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(je);const xV=gr(wV);var SV=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(je);const AV=gr(SV);var EV=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(je);const kV=gr(EV);var TV=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(je);const MV=gr(TV);var IV=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(je);const RV=gr(IV);var CV=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(je);const NV=gr(CV);var $V=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(je);const SI=gr($V);var OV=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(je);const DV=gr(OV);var LV=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(je);const FV=gr(LV);var BV=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(je);const PV=gr(BV);var zV=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(je);const AI=gr(zV);var UV=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(je);const qV=gr(UV);var jV=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(je);const VV=gr(jV);var WV=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(je);const YV=gr(WV);var HV=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(je);const GV=gr(HV);var XV=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(je);const KV=gr(XV);var JV=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(je);const ZV=gr(JV);var QV=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(je);const tW=gr(QV);var eW=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(je);const nW=gr(eW);var rW=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(je);const iW=gr(rW);function oW(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const sW=vI(vc(300,.5,0),vc(-240,.5,1));var aW=vI(vc(-100,.75,.35),vc(80,1.5,.8)),lW=vI(vc(260,.75,.35),vc(80,1.5,.8)),h_=vc();function cW(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return h_.h=360*e-100,h_.s=1.5-1.5*t,h_.l=.8-.9*t,h_+""}var d_=ms(),JSt=Math.PI/3,ZSt=Math.PI*2/3;function uW(e){var t;return e=(.5-e)*Math.PI,d_.r=255*(t=Math.sin(e))*t,d_.g=255*(t=Math.sin(e+JSt))*t,d_.b=255*(t=Math.sin(e+ZSt))*t,d_+""}function EI(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function e3(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const fW=e3(je("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var hW=e3(je("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),n3=e3(je("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),dW=e3(je("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function pW(){return!(navigator.gpu==null||navigator.gpu.requestAdapter==null)}function QSt(e){return e==0&&(e=4),e%4!=0&&(e+=4-e%4),e}function P0(e,t,n,r){return(e.buffer==null||e.byteSize!=n||e.usage!=r)&&(e.buffer!=null&&e.buffer.destroy(),e.buffer=t.createBuffer({size:QSt(n),usage:r}),e.byteSize=n,e.destroy=()=>{e.buffer?.destroy()}),e.buffer}function fk(e,t,n,r){if(e.buffer!==n||e.data!==r){if(r!=null)if(r.byteLength%4!=0){let i=r.byteLength-r.byteLength%4;if(t.queue.writeBuffer(n,0,r,0,i),r instanceof Uint8Array){let o=new Uint8Array(4);for(let s=0;s<4;s++)i+s<r.length&&(o[s]=r[i+s]);t.queue.writeBuffer(n,i,o)}}else t.queue.writeBuffer(n,0,r,0);else t.queue.writeBuffer(n,0,new ArrayBuffer(n.size));e.buffer=n,e.data=r}return n}function iD(e,t,n,r,i,o){return(e.texture==null||e.width!=n||e.height!=r||e.format!=i||e.usage!=o)&&(e.texture!=null&&e.texture.destroy(),e.texture=t.createTexture({size:[n,r],format:i,usage:o}),e.destroy=()=>{e.texture?.destroy()}),e.texture}const js=2,kI=4,r3=8,R1=16,ju=32,cp=64,gW=128,Oa=256,Lx=512,io=1024,Ua=2048,ph=4096,fl=8192,up=16384,TI=32768,MI=65536,oD=1<<17,t3t=1<<18,II=1<<19,RI=1<<20,U4=1<<21,CI=1<<22,hd=1<<23,dd=Symbol("$state"),mW=Symbol("legacy props"),e3t=Symbol(""),NI=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},yW=3,kv=8,n3t=!1;var $I=Array.isArray,r3t=Array.prototype.indexOf,OI=Array.from,Fx=Object.defineProperty,z0=Object.getOwnPropertyDescriptor,vW=Object.getOwnPropertyDescriptors,i3t=Object.prototype,o3t=Array.prototype,DI=Object.getPrototypeOf,sD=Object.isExtensible;function bW(e){for(var t=0;t<e.length;t++)e[t]()}function s3t(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function _W(e){return e===this.v}function wW(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function a3t(e,t){return e!==t}function xW(e){return!wW(e,this.v)}function l3t(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function SW(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function c3t(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function u3t(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function f3t(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function h3t(e){throw new Error("https://svelte.dev/e/effect_orphan")}function d3t(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function p3t(){throw new Error("https://svelte.dev/e/hydration_failed")}function g3t(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function m3t(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function y3t(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function v3t(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let b3t=!1;const LI=1,FI=2,AW=4,_3t=8,w3t=16,x3t=1,S3t=4,A3t=8,E3t=16,k3t=1,T3t=2,EW="[",BI="[!",PI="]",U0={},Ci=Symbol(),M3t="http://www.w3.org/1999/xhtml";let Vs=null;function Bx(e){Vs=e}function fp(e,t=!1,n){Vs={p:Vs,c:null,e:null,s:e,x:null,l:null}}function hp(e){var t=Vs,n=t.e;if(n!==null){t.e=null;for(var r of n)KW(r)}return e!==void 0&&(t.x=e),Vs=t.p,e??{}}function kW(){return!0}function i3(e){console.warn("https://svelte.dev/e/hydration_mismatch")}let er=!1;function pu(e){er=e}let Vn;function hl(e){if(e===null)throw i3(),U0;return Vn=e}function C1(){return hl(Vu(Vn))}function hi(e){if(er){if(Vu(Vn)!==null)throw i3(),U0;Vn=e}}function I3t(e=1){if(er){for(var t=e,n=Vn;t--;)n=Vu(n);Vn=n}}function q4(){for(var e=0,t=Vn;;){if(t.nodeType===kv){var n=t.data;if(n===PI){if(e===0)return t;e-=1}else(n===EW||n===BI)&&(e+=1)}var r=Vu(t);t.remove(),t=r}}function TW(e){if(!e||e.nodeType!==kv)throw i3(),U0;return e.data}function td(e){if(typeof e!="object"||e===null||dd in e)return e;const t=DI(e);if(t!==i3t&&t!==o3t)return e;var n=new Map,r=$I(e),i=Ar(0),o=gd,s=a=>{if(gd===o)return a();var l=kn,c=gd;bc(null),hD(o);var u=a();return bc(l),hD(c),u};return r&&n.set("length",Ar(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&m3t();var u=n.get(l);return u===void 0?u=s(()=>{var f=Ar(c.value);return n.set(l,f),f}):De(u,c.value,!0),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0){if(l in a){const u=s(()=>Ar(Ci));n.set(l,u),hk(i)}}else De(c,Ci),hk(i);return!0},get(a,l,c){if(l===dd)return e;var u=n.get(l),f=l in a;if(u===void 0&&(!f||z0(a,l)?.writable)&&(u=s(()=>{var p=td(f?a[l]:Ci),g=Ar(p);return g}),n.set(l,u)),u!==void 0){var h=X(u);return h===Ci?void 0:h}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=X(u))}else if(c===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==Ci)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(a,l){if(l===dd)return!0;var c=n.get(l),u=c!==void 0&&c.v!==Ci||Reflect.has(a,l);if(c!==void 0||bn!==null&&(!u||z0(a,l)?.writable)){c===void 0&&(c=s(()=>{var h=u?td(a[l]):Ci,p=Ar(h);return p}),n.set(l,c));var f=X(c);if(f===Ci)return!1}return u},set(a,l,c,u){var f=n.get(l),h=l in a;if(r&&l==="length")for(var p=c;p<f.v;p+=1){var g=n.get(p+"");g!==void 0?De(g,Ci):p in a&&(g=s(()=>Ar(Ci)),n.set(p+"",g))}if(f===void 0)(!h||z0(a,l)?.writable)&&(f=s(()=>Ar(void 0)),De(f,td(c)),n.set(l,f));else{h=f.v!==Ci;var y=s(()=>td(c));De(f,y)}var v=Reflect.getOwnPropertyDescriptor(a,l);if(v?.set&&v.set.call(u,c),!h){if(r&&typeof l=="string"){var b=n.get("length"),_=Number(l);Number.isInteger(_)&&_>=b.v&&De(b,_+1)}hk(i)}return!0},ownKeys(a){X(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Ci});for(var[c,u]of n)u.v!==Ci&&!(c in a)&&l.push(c);return l},setPrototypeOf(){y3t()}})}var aD,MW,IW,RW;function j4(){if(aD===void 0){aD=window,MW=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;IW=z0(t,"firstChild").get,RW=z0(t,"nextSibling").get,sD(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),sD(n)&&(n.__t=void 0)}}function Xf(e=""){return document.createTextNode(e)}function Cu(e){return IW.call(e)}function Vu(e){return RW.call(e)}function Oi(e,t){if(!er)return Cu(e);var n=Cu(Vn);if(n===null)n=Vn.appendChild(Xf());else if(t&&n.nodeType!==yW){var r=Xf();return n?.before(r),hl(r),r}return hl(n),n}function p0(e,t){if(!er){var n=Cu(e);return n instanceof Comment&&n.data===""?Vu(n):n}return Vn}function Or(e,t=1,n=!1){let r=er?Vn:e;for(var i;t--;)i=r,r=Vu(r);if(!er)return r;if(n&&r?.nodeType!==yW){var o=Xf();return r===null?i?.after(o):r.before(o),hl(o),o}return hl(r),r}function CW(e){e.textContent=""}function NW(){return!1}const R3t=new WeakMap;function C3t(e){var t=bn;if(t===null)return kn.f|=hd,e;if((t.f&TI)===0){if((t.f&gW)===0)throw!t.parent&&e instanceof Error&&$W(e),e;t.b.error(e)}else zI(e,t)}function zI(e,t){for(;t!==null;){if((t.f&gW)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&$W(e),e}function $W(e){const t=R3t.get(e);t&&(Fx(e,"message",{value:t.message}),Fx(e,"stack",{value:t.stack}))}let Tv=[],V4=[];function OW(){var e=Tv;Tv=[],bW(e)}function N3t(){var e=V4;V4=[],bW(e)}function UI(e){Tv.length===0&&queueMicrotask(OW),Tv.push(e)}function $3t(){Tv.length>0&&OW(),V4.length>0&&N3t()}function O3t(){for(var e=bn.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&l3t(),e}function o3(e){var t=js|Ua,n=kn!==null&&(kn.f&js)!==0?kn:null;return bn===null||n!==null&&(n.f&Oa)!==0?t|=Oa:bn.f|=II,{ctx:Vs,deps:null,effects:null,equals:_W,f:t,fn:e,reactions:null,rv:0,v:Ci,wv:0,parent:n??bn,ac:null}}function D3t(e,t){let n=bn;n===null&&c3t();var r=n.b,i=void 0,o=Mv(Ci),s=null,a=!kn;return G3t(()=>{try{var l=e()}catch(p){l=Promise.reject(p)}var c=()=>l;i=s?.then(c,c)??Promise.resolve(l),s=i;var u=li,f=r.pending;a&&(r.update_pending_count(1),f||u.increment());const h=(p,g=void 0)=>{s=null,f||u.activate(),g?g!==NI&&(o.f|=hd,Iv(o,g)):((o.f&hd)!==0&&(o.f^=hd),Iv(o,p)),a&&(r.update_pending_count(-1),f||u.decrement()),BW()};if(i.then(h,p=>h(null,p||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(l=>{function c(u){function f(){u===i?l(o):c(i)}u.then(f,f)}c(i)})}function ae(e){const t=o3(e);return jW(t),t}function DW(e){const t=o3(e);return t.equals=xW,t}function LW(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Nu(t[n])}}function L3t(e){for(var t=e.parent;t!==null;){if((t.f&js)===0)return t;t=t.parent}return null}function qI(e){var t,n=bn;Kf(L3t(e));try{LW(e),t=HW(e)}finally{Kf(n)}return t}function FW(e){var t=qI(e);if(e.equals(t)||(e.v=t,e.wv=WW()),!dp)if(yg!==null)yg.set(e,e.v);else{var n=(Ef||(e.f&Oa)!==0)&&e.deps!==null?ph:io;us(e,n)}}function F3t(e,t,n){const r=o3;if(t.length===0){n(e.map(r));return}var i=li,o=bn,s=B3t(),a=O3t();Promise.all(t.map(l=>D3t(l))).then(l=>{i?.activate(),s();try{n([...e.map(r),...l])}catch(c){(o.f&up)===0&&zI(c,o)}i?.deactivate(),BW()}).catch(l=>{a.error(l)})}function B3t(){var e=bn,t=kn,n=Vs;return function(){Kf(e),bc(t),Bx(n)}}function BW(){Kf(null),bc(null),Bx(null)}const Wm=new Set;let li=null,yg=null,lD=new Set,Px=[];function PW(){const e=Px.shift();Px.length>0&&queueMicrotask(PW),e()}let jd=[],s3=null,W4=!1,dw=!1,jI=class Y4{current=new Map;#t=new Map;#e=new Set;#n=0;#r=null;#c=!1;#i=[];#o=[];#a=[];#s=[];#l=[];#f=[];#u=[];skipped_effects=new Set;process(t){jd=[];var n=null;if(Wm.size>1){n=new Map,yg=new Map;for(const[o,s]of this.current)n.set(o,{v:o.v,wv:o.wv}),o.v=s;for(const o of Wm)if(o!==this)for(const[s,a]of o.#t)n.has(s)||(n.set(s,{v:s.v,wv:s.wv}),s.v=a)}for(const o of t)this.#p(o);if(this.#i.length===0&&this.#n===0){this.#d();var r=this.#a,i=this.#s;this.#a=[],this.#s=[],this.#l=[],li=null,cD(r),cD(i),li===null?li=this:Wm.delete(this),this.#r?.resolve()}else this.#h(this.#a),this.#h(this.#s),this.#h(this.#l);if(n){for(const[o,{v:s,wv:a}]of n)o.wv<=a&&(o.v=s);yg=null}for(const o of this.#i)By(o);for(const o of this.#o)By(o);this.#i=[],this.#o=[]}#p(t){t.f^=io;for(var n=t.first;n!==null;){var r=n.f,i=(r&(ju|cp))!==0,o=i&&(r&io)!==0,s=o||(r&fl)!==0||this.skipped_effects.has(n);if(!s&&n.fn!==null){if(i)n.f^=io;else if((r&io)===0)if((r&kI)!==0)this.#s.push(n);else if((r&CI)!==0){var a=n.b?.pending?this.#o:this.#i;a.push(n)}else a3(n)&&((n.f&R1)!==0&&this.#l.push(n),By(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#h(t){for(const n of t)((n.f&Ua)!==0?this.#f:this.#u).push(n),us(n,io);t.length=0}capture(t,n){this.#t.has(t)||this.#t.set(t,n),this.current.set(t,t.v)}activate(){li=this}deactivate(){li=null;for(const t of lD)if(lD.delete(t),t(),li!==null)break}neuter(){this.#c=!0}flush(){jd.length>0?zW():this.#d(),li===this&&(this.#n===0&&Wm.delete(this),this.deactivate())}#d(){if(!this.#c)for(const t of this.#e)t();this.#e.clear()}increment(){this.#n+=1}decrement(){if(this.#n-=1,this.#n===0){for(const t of this.#f)us(t,Ua),Vd(t);for(const t of this.#u)us(t,ph),Vd(t);this.#a=[],this.#s=[],this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#r??=s3t()).promise}static ensure(){if(li===null){const t=li=new Y4;Wm.add(li),dw||Y4.enqueue(()=>{li===t&&t.flush()})}return li}static enqueue(t){Px.length===0&&queueMicrotask(PW),Px.unshift(t)}};function P3t(e){var t=dw;dw=!0;try{for(var n;;){if($3t(),jd.length===0&&(li?.flush(),jd.length===0))return s3=null,n;zW()}}finally{dw=t}}function zW(){var e=q0;W4=!0;try{var t=0;for(uD(!0);jd.length>0;){var n=jI.ensure();if(t++>1e3){var r,i;z3t()}n.process(jd),pd.clear()}}finally{W4=!1,uD(e),s3=null}}function z3t(){try{d3t()}catch(e){zI(e,s3)}}function cD(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(up|fl))===0&&a3(r)){var i=li?li.current.size:0;if(By(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?eY(r):r.fn=null),li!==null&&li.current.size>i&&(r.f&RI)!==0)break}}for(;n<t;)Vd(e[n++])}}function Vd(e){for(var t=s3=e;t.parent!==null;){t=t.parent;var n=t.f;if(W4&&t===bn&&(n&R1)!==0)return;if((n&(cp|ju))!==0){if((n&io)===0)return;t.f^=io}}jd.push(t)}const pd=new Map;function Mv(e,t){var n={f:0,v:e,reactions:null,equals:_W,rv:0,wv:0};return n}function Ar(e,t){const n=Mv(e);return jW(n),n}function UW(e,t=!1,n=!0){const r=Mv(e);return t||(r.equals=xW),r}function De(e,t,n=!1){kn!==null&&(!Jl||(kn.f&oD)!==0)&&kW()&&(kn.f&(js|R1|CI|oD))!==0&&!xu?.includes(e)&&v3t();let r=n?td(t):t;return Iv(e,r)}function Iv(e,t){if(!e.equals(t)){var n=e.v;dp?pd.set(e,t):pd.set(e,n),e.v=t;var r=jI.ensure();r.capture(e,n),(e.f&js)!==0&&((e.f&Ua)!==0&&qI(e),us(e,(e.f&Oa)===0?io:ph)),e.wv=WW(),qW(e,Ua),bn!==null&&(bn.f&io)!==0&&(bn.f&(ju|cp))===0&&(ca===null?U3t([e]):ca.push(e))}return t}function hk(e){De(e,e.v+1)}function qW(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i],s=o.f,a=(s&Ua)===0;a&&us(o,t),(s&js)!==0?qW(o,ph):a&&Vd(o)}}let q0=!1;function uD(e){q0=e}let dp=!1;function fD(e){dp=e}let kn=null,Jl=!1;function bc(e){kn=e}let bn=null;function Kf(e){bn=e}let xu=null;function jW(e){kn!==null&&(xu===null?xu=[e]:xu.push(e))}let Eo=null,Is=0,ca=null;function U3t(e){ca=e}let VW=1,Rv=0,gd=Rv;function hD(e){gd=e}let Ef=!1;function WW(){return++VW}function a3(e){var t=e.f;if((t&Ua)!==0)return!0;if((t&ph)!==0){var n=e.deps,r=(t&Oa)!==0;if(n!==null){var i,o,s=(t&Lx)!==0,a=r&&bn!==null&&!Ef,l=n.length;if((s||a)&&(bn===null||(bn.f&up)===0)){var c=e,u=c.parent;for(i=0;i<l;i++)o=n[i],(s||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);s&&(c.f^=Lx),a&&u!==null&&(u.f&Oa)===0&&(c.f^=Oa)}for(i=0;i<l;i++)if(o=n[i],a3(o)&&FW(o),o.wv>e.wv)return!0}(!r||bn!==null&&!Ef)&&us(e,io)}return!1}function YW(e,t,n=!0){var r=e.reactions;if(r!==null&&!xu?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];(o.f&js)!==0?YW(o,t,!1):t===o&&(n?us(o,Ua):(o.f&io)!==0&&us(o,ph),Vd(o))}}function HW(e){var t=Eo,n=Is,r=ca,i=kn,o=Ef,s=xu,a=Vs,l=Jl,c=gd,u=e.f;Eo=null,Is=0,ca=null,Ef=(u&Oa)!==0&&(Jl||!q0||kn===null),kn=(u&(ju|cp))===0?e:null,xu=null,Bx(e.ctx),Jl=!1,gd=++Rv,e.ac!==null&&(e.ac.abort(NI),e.ac=null);try{e.f|=U4;var f=(0,e.fn)(),h=e.deps;if(Eo!==null){var p;if(zx(e,Is),h!==null&&Is>0)for(h.length=Is+Eo.length,p=0;p<Eo.length;p++)h[Is+p]=Eo[p];else e.deps=h=Eo;if(!Ef||(u&js)!==0&&e.reactions!==null)for(p=Is;p<h.length;p++)(h[p].reactions??=[]).push(e)}else h!==null&&Is<h.length&&(zx(e,Is),h.length=Is);if(kW()&&ca!==null&&!Jl&&h!==null&&(e.f&(js|ph|Ua))===0)for(p=0;p<ca.length;p++)YW(ca[p],e);return i!==null&&i!==e&&(Rv++,ca!==null&&(r===null?r=ca:r.push(...ca))),(e.f&hd)!==0&&(e.f^=hd),f}catch(g){return C3t(g)}finally{e.f^=U4,Eo=t,Is=n,ca=r,kn=i,Ef=o,xu=s,Bx(a),Jl=l,gd=c}}function q3t(e,t){let n=t.reactions;if(n!==null){var r=r3t.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&js)!==0&&(Eo===null||!Eo.includes(t))&&(us(t,ph),(t.f&(Oa|Lx))===0&&(t.f^=Lx),LW(t),zx(t,0))}function zx(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)q3t(e,n[r])}function By(e){var t=e.f;if((t&up)===0){us(e,io);var n=bn,r=q0;bn=e,q0=!0;try{(t&R1)!==0?X3t(e):tY(e),QW(e);var i=HW(e);e.teardown=typeof i=="function"?i:null,e.wv=VW;var o;n3t&&b3t&&(e.f&Ua)!==0&&e.deps}finally{q0=r,bn=n}}}function X(e){var t=e.f,n=(t&js)!==0;if(kn!==null&&!Jl){var r=bn!==null&&(bn.f&up)!==0;if(!r&&!xu?.includes(e)){var i=kn.deps;if((kn.f&U4)!==0)e.rv<Rv&&(e.rv=Rv,Eo===null&&i!==null&&i[Is]===e?Is++:Eo===null?Eo=[e]:(!Ef||!Eo.includes(e))&&Eo.push(e));else{(kn.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[kn]:o.includes(kn)||o.push(kn)}}}else if(n&&e.deps===null&&e.effects===null){var s=e,a=s.parent;a!==null&&(a.f&Oa)===0&&(s.f^=Oa)}if(dp){if(pd.has(e))return pd.get(e);if(n){s=e;var l=s.v;return((s.f&io)===0&&s.reactions!==null||GW(s))&&(l=qI(s)),pd.set(s,l),l}}else if(n){if(s=e,yg?.has(s))return yg.get(s);a3(s)&&FW(s)}if((e.f&hd)!==0)throw e.v;return e.v}function GW(e){if(e.v===Ci)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(pd.has(t)||(t.f&js)!==0&&GW(t))return!0;return!1}function Kg(e){var t=Jl;try{return Jl=!0,e()}finally{Jl=t}}const j3t=-7169;function us(e,t){e.f=e.f&j3t|t}function V3t(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(dd in e)H4(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&dd in n&&H4(n)}}}function H4(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{H4(e[r],t)}catch{}const n=DI(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=vW(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function XW(e){bn===null&&kn===null&&h3t(),kn!==null&&(kn.f&Oa)!==0&&bn===null&&f3t(),dp&&u3t()}function W3t(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ic(e,t,n,r=!0){var i=bn;i!==null&&(i.f&fl)!==0&&(e|=fl);var o={ctx:Vs,deps:null,nodes_start:null,nodes_end:null,f:e|Ua,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{By(o),o.f|=TI}catch(l){throw Nu(o),l}else t!==null&&Vd(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&II)===0;if(!s&&r&&(i!==null&&W3t(o,i),kn!==null&&(kn.f&js)!==0&&(e&cp)===0)){var a=kn;(a.effects??=[]).push(o)}return o}function Y3t(e){const t=Ic(r3,null,!1);return us(t,io),t.teardown=e,t}function Qc(e){XW();var t=bn.f,n=!kn&&(t&ju)!==0&&(t&TI)===0;if(n){var r=Vs;(r.e??=[]).push(e)}else return KW(e)}function KW(e){return Ic(kI|RI,e,!1)}function Ux(e){return XW(),Ic(r3|RI,e,!0)}function H3t(e){jI.ensure();const t=Ic(cp,e,!0);return(n={})=>new Promise(r=>{n.outro?l3(t,()=>{Nu(t),r(void 0)}):(Nu(t),r(void 0))})}function JW(e){return Ic(kI,e,!1)}function G3t(e){return Ic(CI|II,e,!0)}function ZW(e,t=0){return Ic(r3|t,e,!0)}function Ds(e,t=[],n=[]){F3t(t,n,r=>{Ic(r3,()=>e(...r.map(X)),!0)})}function VI(e,t=0){var n=Ic(R1|t,e,!0);return n}function Wd(e,t=!0){return Ic(ju,e,!0,t)}function QW(e){var t=e.teardown;if(t!==null){const n=dp,r=kn;fD(!0),bc(null);try{t.call(null)}finally{fD(n),bc(r)}}}function tY(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(NI);var r=n.next;(n.f&cp)!==0?n.parent=null:Nu(n,t),n=r}}function X3t(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ju)===0&&Nu(t),t=n}}function Nu(e,t=!0){var n=!1;(t||(e.f&t3t)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(K3t(e.nodes_start,e.nodes_end),n=!0),tY(e,t&&!n),zx(e,0),us(e,up);var r=e.transitions;if(r!==null)for(const o of r)o.stop();QW(e);var i=e.parent;i!==null&&i.first!==null&&eY(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function K3t(e,t){for(;e!==null;){var n=e===t?null:Vu(e);e.remove(),e=n}}function eY(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function l3(e,t){var n=[];WI(e,n,!0),nY(n,()=>{Nu(e),t&&t()})}function nY(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function WI(e,t,n){if((e.f&fl)===0){if(e.f^=fl,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&MI)!==0||(r.f&ju)!==0;WI(r,t,o?n:!1),r=i}}}function YI(e){rY(e,!0)}function rY(e,t){if((e.f&fl)!==0){e.f^=fl,(e.f&io)===0&&(us(e,Ua),Vd(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&MI)!==0||(n.f&ju)!==0;rY(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function J3t(e){var t=kn,n=bn;bc(null),Kf(null);try{return e()}finally{bc(t),Kf(n)}}const iY=new Set,G4=new Set;function Z3t(e,t,n,r={}){function i(o){if(r.capture||_y.call(t,o),!o.cancelBubble)return J3t(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?UI(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function dD(e,t,n,r,i){var o={capture:r,passive:i},s=Z3t(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Y3t(()=>{t.removeEventListener(e,s,o)})}function HI(e){for(var t=0;t<e.length;t++)iY.add(e[t]);for(var n of G4)n(e)}let pD=null;function _y(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;pD=e;var s=0,a=pD===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){Fx(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=kn,f=bn;bc(null),Kf(null);try{for(var h,p=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var y=o["__"+r];if(y!=null&&(!o.disabled||e.target===o))if($I(y)){var[v,...b]=y;v.apply(o,[e,...b])}else y.call(o,e)}catch(_){h?p.push(_):h=_}if(e.cancelBubble||g===t||g===null)break;o=g}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{e.__root=t,delete e.currentTarget,bc(u),Kf(f)}}}function oY(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Lf(e,t){var n=bn;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function gh(e,t){var n=(t&k3t)!==0,r=(t&T3t)!==0,i,o=!e.startsWith("<!>");return()=>{if(er)return Lf(Vn,null),Vn;i===void 0&&(i=oY(o?e:"<!>"+e),n||(i=Cu(i)));var s=r||MW?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Cu(s),l=s.lastChild;Lf(a,l)}else Lf(s,s);return s}}function Q3t(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(er)return Lf(Vn,null),Vn;if(!o){var s=oY(i),a=Cu(s);o=Cu(a)}var l=o.cloneNode(!0);return Lf(l,l),l}}function Wu(e,t){return Q3t(e,t,"svg")}function Ym(){if(er)return Lf(Vn,null),Vn;var e=document.createDocumentFragment(),t=document.createComment(""),n=Xf();return e.append(t,n),Lf(t,n),e}function Xr(e,t){if(er){bn.nodes_end=Vn,C1();return}e!==null&&e.before(t)}const tAt=["touchstart","touchmove"];function eAt(e){return tAt.includes(e)}function Py(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function sY(e,t){return aY(e,t)}function nAt(e,t){j4(),t.intro=t.intro??!1;const n=t.target,r=er,i=Vn;try{for(var o=Cu(n);o&&(o.nodeType!==kv||o.data!==EW);)o=Vu(o);if(!o)throw U0;pu(!0),hl(o),C1();const s=aY(e,{...t,anchor:o});if(Vn===null||Vn.nodeType!==kv||Vn.data!==PI)throw i3(),U0;return pu(!1),s}catch(s){if(s===U0)return t.recover===!1&&p3t(),j4(),CW(n),pu(!1),sY(e,t);throw s}finally{pu(r),hl(i)}}const Yp=new Map;function aY(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){j4();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var p=f[h];if(!a.has(p)){a.add(p);var g=eAt(p);t.addEventListener(p,_y,{passive:g});var y=Yp.get(p);y===void 0?(document.addEventListener(p,_y,{passive:g}),Yp.set(p,1)):Yp.set(p,y+1)}}};l(OI(iY)),G4.add(l);var c=void 0,u=H3t(()=>{var f=n??t.appendChild(Xf());return Wd(()=>{if(o){fp({});var h=Vs;h.c=o}i&&(r.$$events=i),er&&Lf(f,null),c=e(f,r)||{},er&&(bn.nodes_end=Vn),o&&hp()}),()=>{for(var h of a){t.removeEventListener(h,_y);var p=Yp.get(h);--p===0?(document.removeEventListener(h,_y),Yp.delete(h)):Yp.set(h,p)}G4.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return X4.set(c,u),c}let X4=new WeakMap;function rAt(e,t){const n=X4.get(e);return n?(X4.delete(e),n(t)):Promise.resolve()}function iAt(e){return new oAt(e)}class oAt{#t;#e;constructor(t){var n=new Map,r=(o,s)=>{var a=UW(s,!1,!1);return n.set(o,a),a};const i=new Proxy({...t.props||{},$$events:{}},{get(o,s){return X(n.get(s)??r(s,Reflect.get(o,s)))},has(o,s){return s===mW?!0:(X(n.get(s)??r(s,Reflect.get(o,s))),Reflect.has(o,s))},set(o,s,a){return De(n.get(s)??r(s,a),a),Reflect.set(o,s,a)}});this.#e=(t.hydrate?nAt:sY)(t.component,{target:t.target,anchor:t.anchor,props:i,context:t.context,intro:t.intro??!1,recover:t.recover}),(!t?.props?.$$host||t.sync===!1)&&P3t(),this.#t=i.$$events;for(const o of Object.keys(this.#e))o==="$set"||o==="$destroy"||o==="$on"||Fx(this,o,{get(){return this.#e[o]},set(s){this.#e[o]=s},enumerable:!0});this.#e.$set=o=>{Object.assign(i,o)},this.#e.$destroy=()=>{rAt(this.#e)}}$set(t){this.#e.$set(t)}$on(t,n){this.#t[t]=this.#t[t]||[];const r=(...i)=>n.call(this,...i);return this.#t[t].push(r),()=>{this.#t[t]=this.#t[t].filter(i=>i!==r)}}$destroy(){this.#e.$destroy()}}const sAt="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(sAt);function GI(e){Vs===null&&SW(),Qc(()=>{const t=Kg(e);if(typeof t=="function")return t})}function aAt(e){Vs===null&&SW(),GI(()=>()=>Kg(e))}function Zo(e,t,n=!1){er&&C1();var r=e,i=null,o=null,s=Ci,a=n?MI:0,l=!1;const c=(h,p=!0)=>{l=!0,f(p,h)};function u(){var h=s?i:o,p=s?o:i;h&&YI(h),p&&l3(p,()=>{s?o=null:i=null})}const f=(h,p)=>{if(s===(s=h))return;let g=!1;if(er){const b=TW(r)===BI;!!s===b&&(r=q4(),hl(r),pu(!1),g=!0)}var y=NW(),v=r;s?i??=p&&Wd(()=>p(v)):o??=p&&Wd(()=>p(v)),y||u(),g&&pu(!0)};VI(()=>{l=!1,t(c),l||f(null,null)},a),er&&(r=Vn)}function lAt(e,t,n){er&&C1();var r=e,i=Ci,o,s,a=null,l=a3t;function c(){o&&l3(o),a!==null&&(a.lastChild.remove(),r.before(a),a=null),o=s}VI(()=>{if(l(i,i=t())){var u=r,f=NW();f&&(a=document.createDocumentFragment(),a.append(u=Xf())),s=Wd(()=>n(u)),f?li.add_callback(c):c()}}),er&&(r=Vn)}function dk(e,t){return t}function cAt(e,t,n){for(var r=e.items,i=[],o=t.length,s=0;s<o;s++)WI(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;CW(l),l.append(n),r.clear(),ql(e,t[0].prev,t[o-1].next)}nY(i,()=>{for(var c=0;c<o;c++){var u=t[c];a||(r.delete(u.k),ql(e,u.prev,u.next)),Nu(u.e,!a)}})}function pk(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&AW)!==0;if(l){var c=e;s=er?hl(Cu(c)):c.appendChild(Xf())}er&&C1();var u=null,f=!1,h=new Map,p=DW(()=>{var b=n();return $I(b)?b:b==null?[]:OI(b)}),g,y;function v(){uAt(y,g,a,h,s,i,t,r,n),o!==null&&(g.length===0?u?YI(u):u=Wd(()=>o(s)):u!==null&&l3(u,()=>{u=null}))}VI(()=>{y??=bn,g=X(p);var b=g.length;if(f&&b===0)return;f=b===0;let _=!1;if(er){var w=TW(s)===BI;w!==(b===0)&&(s=q4(),hl(s),pu(!1),_=!0)}if(er){for(var S=null,k,E=0;E<b;E++){if(Vn.nodeType===kv&&Vn.data===PI){s=Vn,_=!0,pu(!1);break}var T=g[E],M=r(T,E);k=lY(Vn,a,S,null,T,M,E,i,t,n),a.items.set(M,k),S=k}b>0&&hl(q4())}er?b===0&&o&&(u=Wd(()=>o(s))):v(),_&&pu(!0),X(p)}),er&&(s=Vn)}function uAt(e,t,n,r,i,o,s,a,l){var c=(s&_3t)!==0,u=(s&(LI|FI))!==0,f=t.length,h=n.items,p=n.first,g=p,y,v=null,b,_=[],w=[],S,k,E,T;if(c)for(T=0;T<f;T+=1)S=t[T],k=a(S,T),E=h.get(k),E!==void 0&&(E.a?.measure(),(b??=new Set).add(E));for(T=0;T<f;T+=1){if(S=t[T],k=a(S,T),E=h.get(k),E===void 0){var M=r.get(k);if(M!==void 0){r.delete(k),h.set(k,M);var I=v?v.next:g;ql(n,v,M),ql(n,M,I),gk(M,I,i),v=M}else{var $=g?g.e.nodes_start:i;v=lY($,n,v,v===null?n.first:v.next,S,k,T,o,s,l)}h.set(k,v),_=[],w=[],g=v.next;continue}if(u&&fAt(E,S,T,s),(E.e.f&fl)!==0&&(YI(E.e),c&&(E.a?.unfix(),(b??=new Set).delete(E))),E!==g){if(y!==void 0&&y.has(E)){if(_.length<w.length){var C=w[0],L;v=C.prev;var F=_[0],N=_[_.length-1];for(L=0;L<_.length;L+=1)gk(_[L],C,i);for(L=0;L<w.length;L+=1)y.delete(w[L]);ql(n,F.prev,N.next),ql(n,v,F),ql(n,N,C),g=C,v=N,T-=1,_=[],w=[]}else y.delete(E),gk(E,g,i),ql(n,E.prev,E.next),ql(n,E,v===null?n.first:v.next),ql(n,v,E),v=E;continue}for(_=[],w=[];g!==null&&g.k!==k;)(g.e.f&fl)===0&&(y??=new Set).add(g),w.push(g),g=g.next;if(g===null)continue;E=g}_.push(E),v=E,g=E.next}if(g!==null||y!==void 0){for(var O=y===void 0?[]:OI(y);g!==null;)(g.e.f&fl)===0&&O.push(g),g=g.next;var D=O.length;if(D>0){var B=(s&AW)!==0&&f===0?i:null;if(c){for(T=0;T<D;T+=1)O[T].a?.measure();for(T=0;T<D;T+=1)O[T].a?.fix()}cAt(n,O,B)}}c&&UI(()=>{if(b!==void 0)for(E of b)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=v&&v.e;for(var j of r.values())Nu(j.e);r.clear()}function fAt(e,t,n,r){(r&LI)!==0&&Iv(e.v,t),(r&FI)!==0?Iv(e.i,n):e.i=n}function lY(e,t,n,r,i,o,s,a,l,c,u){var f=(l&LI)!==0,h=(l&w3t)===0,p=f?h?UW(i,!1,!1):Mv(i):i,g=(l&FI)===0?s:Mv(s),y={i:g,v:p,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Xf())}return y.e=Wd(()=>a(e,p,g,c),er),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?u||(t.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function gk(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var s=Vu(o);i.before(o),o=s}}function ql(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function hAt(e,t,n){JW(()=>{var r=Kg(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};ZW(()=>{var s=n();V3t(s),i&&wW(o,s)&&(o=s,r.update(s))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function gD(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function dAt(e,t){if(t){var n="",r,i;return Array.isArray(t)?(r=t[0],i=t[1]):r=t,r&&(n+=gD(r)),i&&(n+=gD(i,!0)),n=n.trim(),n===""?null:n}return String(e)}function mk(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function An(e,t,n,r){var i=e.__style;if(er||i!==t){var o=dAt(t,r);(!er||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(mk(e,n?.[0],r[0]),mk(e,n?.[1],r[1],"important")):mk(e,n,r));return r}const pAt=Symbol("is custom element"),gAt=Symbol("is html");function Kt(e,t,n,r){var i=mAt(e);er&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[e3t]=n),n==null?e.removeAttribute(t):typeof n!="string"&&yAt(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function mAt(e){return e.__attributes??={[pAt]:e.nodeName.includes("-"),[gAt]:e.namespaceURI===M3t}}var mD=new Map;function yAt(e){var t=mD.get(e.nodeName);if(t)return t;mD.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=vW(r);for(var o in n)n[o].set&&t.push(o);r=DI(r)}return t}function yD(e,t){return e===t||e?.[dd]===t}function K4(e={},t,n,r){return JW(()=>{var i,o;return ZW(()=>{i=o,o=[],Kg(()=>{e!==n(...o)&&(t(e,...o),i&&yD(n(...i),e)&&t(null,...i))})}),()=>{UI(()=>{o&&yD(n(...o),e)&&t(null,...o)})}}),e}let p_=!1;function vAt(e){var t=p_;try{return p_=!1,[e(),p_]}finally{p_=t}}function oe(e,t,n,r){var i=(n&A3t)!==0,o=(n&E3t)!==0,s=r,a=!0,l=()=>(a&&(a=!1,s=o?Kg(r):r),s),c;if(i){var u=dd in e||mW in e;c=z0(e,t)?.set??(u&&t in e?_=>e[t]=_:void 0)}var f,h=!1;i?[f,h]=vAt(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=l(),c&&(g3t(),c(f)));var p;if(p=()=>{var _=e[t];return _===void 0?l():(a=!0,_)},(n&S3t)===0)return p;if(c){var g=e.$$legacy;return function(_,w){return arguments.length>0?((!w||g||h)&&c(w?p():_),_):p()}}var y=!1,v=((n&x3t)!==0?o3:DW)(()=>(y=!1,p()));i&&X(v);var b=bn;return function(_,w){if(arguments.length>0){const S=w?X(v):i?td(_):_;return De(v,S),y=!0,s!==void 0&&(s=S),_}return dp&&y||(b.f&up)!==0?v.v:X(v)}}var bAt=Wu('<g><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect></g>');function _At(e,t){fp(t,!0);let n=ae(()=>t.pointLocation(t.value.xMin,t.value.yMin)),r=ae(()=>t.pointLocation(t.value.xMax,t.value.yMax));const i=8;function o(I){return $=>{$.stopPropagation(),$.preventDefault(),t.preventHover(!0);let C=[X(n).x,X(n).y,X(r).x,X(r).y],L=N=>{N.preventDefault();let O=N.pageX-$.pageX,D=N.pageY-$.pageY,B=[O,D,O,D].map((U,V)=>C[V]+U*I[V]),j=t.coordinateAtPoint(B[0],B[1]),z=t.coordinateAtPoint(B[2],B[3]);t.onChange({xMin:Math.min(j.x,z.x),xMax:Math.max(j.x,z.x),yMin:Math.min(j.y,z.y),yMax:Math.max(j.y,z.y)})},F=()=>{t.preventHover(!1),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",F)};window.addEventListener("mousemove",L),window.addEventListener("mouseup",F)}}var s=bAt(),a=Oi(s),l=ae(()=>o([1,1,1,1]));a.__mousedown=function(...I){X(l)?.apply(this,I)},An(a,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)",cursor:"move"});var c=Or(a);Kt(c,"width",i);var u=ae(()=>o([1,0,0,0]));c.__mousedown=function(...I){X(u)?.apply(this,I)},An(c,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"});var f=Or(c);Kt(f,"width",i);var h=ae(()=>o([0,0,1,0]));f.__mousedown=function(...I){X(h)?.apply(this,I)},An(f,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"});var p=Or(f);Kt(p,"height",i);var g=ae(()=>o([0,1,0,0]));p.__mousedown=function(...I){X(g)?.apply(this,I)},An(p,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"});var y=Or(p);Kt(y,"height",i);var v=ae(()=>o([0,0,0,1]));y.__mousedown=function(...I){X(v)?.apply(this,I)},An(y,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"});var b=Or(y);Kt(b,"width",i),Kt(b,"height",i);var _=ae(()=>o([1,1,0,0]));b.__mousedown=function(...I){X(_)?.apply(this,I)},An(b,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"});var w=Or(b);Kt(w,"width",i),Kt(w,"height",i);var S=ae(()=>o([1,0,0,1]));w.__mousedown=function(...I){X(S)?.apply(this,I)},An(w,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"});var k=Or(w);Kt(k,"width",i),Kt(k,"height",i);var E=ae(()=>o([0,1,1,0]));k.__mousedown=function(...I){X(E)?.apply(this,I)},An(k,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"});var T=Or(k);Kt(T,"width",i),Kt(T,"height",i);var M=ae(()=>o([0,0,1,1]));T.__mousedown=function(...I){X(M)?.apply(this,I)},An(T,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),hi(s),Ds((I,$,C,L,F,N,O,D,B,j,z,U)=>{Kt(a,"x",I),Kt(a,"width",$),Kt(a,"y",C),Kt(a,"height",L),Kt(c,"x",X(n).x-i/2),Kt(c,"y",F),Kt(c,"height",N),Kt(f,"x",X(r).x-i/2),Kt(f,"y",O),Kt(f,"height",D),Kt(p,"x",B),Kt(p,"width",j),Kt(p,"y",X(n).y-i/2),Kt(y,"x",z),Kt(y,"width",U),Kt(y,"y",X(r).y-i/2),Kt(b,"x",X(n).x-i/2),Kt(b,"y",X(n).y-i/2),Kt(w,"x",X(n).x-i/2),Kt(w,"y",X(r).y-i/2),Kt(k,"x",X(r).x-i/2),Kt(k,"y",X(n).y-i/2),Kt(T,"x",X(r).x-i/2),Kt(T,"y",X(r).y-i/2)},[()=>Math.min(X(n).x,X(r).x),()=>Math.abs(X(n).x-X(r).x),()=>Math.min(X(n).y,X(r).y),()=>Math.abs(X(n).y-X(r).y),()=>Math.min(X(n).y,X(r).y),()=>Math.abs(X(n).y-X(r).y),()=>Math.min(X(n).y,X(r).y),()=>Math.abs(X(n).y-X(r).y),()=>Math.min(X(n).x,X(r).x),()=>Math.abs(X(n).x-X(r).x),()=>Math.min(X(n).x,X(r).x),()=>Math.abs(X(n).x-X(r).x)]),Xr(e,s),hp()}HI(["mousedown"]);function wAt(e,t){let n=!1,r,i,o,s=300,a=300,l=async u=>{n=!0;try{await e(u)}catch(f){console.error(f)}if(n=!1,r!==void 0){let f=r;r=void 0,c(f)}},c=async u=>{if(n){r=u;return}let f=new Date().getTime();t()&&(i=f);let h=!0;(i==null||f-i<a)&&(h=!1),h?(o&&clearTimeout(o),o=setTimeout(()=>l(u),s)):l(u)};return c}function yk(e){return{shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function xAt(e,t){let{zoom:n,click:r,drag:i,hover:o}=t,s=!1,a=!1,l=null,c=r==null?0:5;return{wheel:u=>{if(n==null)return;u.preventDefault();let f=e.getBoundingClientRect(),h=u.clientX-f.left,p=u.clientY-f.top,g=Math.exp(-u.deltaY/200);n(g,{x:h,y:p},yk(u))},mousedown:u=>{u.preventDefault();let f=e.getBoundingClientRect(),h=u.clientX-f.left,p=u.clientY-f.top,g=!1,y=null;s=!0;let v=_=>{_.preventDefault();let w=e.getBoundingClientRect(),S=_.clientX-w.left,k=_.clientY-w.top;g==!1&&i!=null&&(S-h)*(S-h)+(k-p)*(k-p)>c*c&&(g=!0,y=i({x:h,y:p},yk(u))),g&&y?.move!=null&&y.move({x:S,y:k})},b=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b),s=!1,g&&y?.release!=null&&y.release(),g||r&&r({x:h,y:p},yk(u))};window.addEventListener("mousemove",v),window.addEventListener("mouseup",b)},mousemove:u=>{if(o==null||s||a)return;let f=e.getBoundingClientRect(),h=u.clientX-f.left,p=u.clientY-f.top;l={x:h,y:p},o({x:h,y:p})},mouseleave:()=>{l!=null&&o!=null&&(l=null,o(null))},preventHover:u=>{u!=a&&(u&&l!=null&&o!=null&&(l=null,o(null)),a=u)}}}function SAt(e,t){let n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function AAt(e){return"M "+e.map(({x:t,y:n})=>`${t},${n}`).join(" L ")+" Z"}function cY(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let{x:o,y:s}of e)t=Math.min(t,o),r=Math.min(r,s),n=Math.max(n,o),i=Math.max(i,s);return{xMin:t,yMin:r,xMax:n,yMax:i}}async function EAt(e){let t=JSON.stringify(e),n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-1",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}function kf(e,t){if(e===t)return!0;if(e===null||t===null||typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(t.hasOwnProperty(n)){if(!kf(e[n],t[n]))return!1}else return!1;return!0}var kAt=Wu("<path></path>");function TAt(e,t){fp(t,!0);let n=ae(()=>t.value.map(({x:i,y:o})=>t.pointLocation(i,o)));var r=kAt();An(r,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)"}),Ds(i=>Kt(r,"d",i),[()=>AAt(X(n))]),Xr(e,r),hp()}const MAt={marquee:"M7 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m1-.25c0 .414.336.75.75.75h6.5a.75.75 0 0 0 0-1.5h-6.5a.75.75 0 0 0-.75.75M4.75 8a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5A.75.75 0 0 0 4.75 8m14.5 0a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5a.75.75 0 0 0-.75-.75M8.75 20a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5zM5 21a2 2 0 1 0 0-4a2 2 0 0 0 0 4M21 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m-2 16a2 2 0 1 0 0-4a2 2 0 0 0 0 4",lasso:"M9.703 2.265A10 10 0 0 1 12 2c.79 0 1.559.092 2.297.265a.75.75 0 1 1-.343 1.46A8.5 8.5 0 0 0 12 3.5a8.6 8.6 0 0 0-1.954.225a.75.75 0 1 1-.343-1.46m-1.93 1.47a.75.75 0 0 1-.242 1.033a8.55 8.55 0 0 0-2.763 2.763a.75.75 0 1 1-1.275-.79a10.05 10.05 0 0 1 3.248-3.248a.75.75 0 0 1 1.032.243m8.454 0a.75.75 0 0 1 1.032-.242a10.05 10.05 0 0 1 3.248 3.248a.75.75 0 1 1-1.275.79a8.55 8.55 0 0 0-2.763-2.763a.75.75 0 0 1-.242-1.032m-13.06 5.41a.75.75 0 0 1 .558.901A8.5 8.5 0 0 0 3.5 12c0 .673.078 1.327.225 1.954a.75.75 0 1 1-1.46.343A10 10 0 0 1 2 12c0-.79.092-1.559.265-2.297a.75.75 0 0 1 .902-.559m17.666 0a.75.75 0 0 1 .902.558a10.1 10.1 0 0 1 0 4.595a.75.75 0 1 1-1.46-.343a8.54 8.54 0 0 0-.001-3.908a.75.75 0 0 1 .559-.902M3.736 16.226a.75.75 0 0 1 1.032.242a8.55 8.55 0 0 0 2.763 2.763a.75.75 0 0 1-.79 1.275a10.05 10.05 0 0 1-3.248-3.248a.75.75 0 0 1 .243-1.032m16.685.858a.75.75 0 1 0-1.342-.67l-.002.004l-.015.029l-.069.123a8 8 0 0 1-.289.466a9.6 9.6 0 0 1-.965 1.219c-1.17-1.073-2.756-2.006-4.74-2.006c-2.347 0-3.99 1.203-3.99 2.875S10.653 22 13 22c1.942 0 3.495-.75 4.658-1.645a11.7 11.7 0 0 1 1.315 2.01q.05.099.073.149l.017.035l.004.009a.75.75 0 0 0 1.368-.615c-.087-.183 0-.001 0-.001v-.002l-.003-.004l-.007-.015l-.024-.052l-.091-.184a13.2 13.2 0 0 0-1.538-2.337a11 11 0 0 0 1.525-2.032l.09-.162l.024-.047l.007-.014l.002-.005zM13 17.75c1.433 0 2.644.652 3.616 1.512c-.95.7-2.155 1.238-3.616 1.238c-1.973 0-2.49-.922-2.49-1.375s.517-1.375 2.49-1.375"};var IAt=Wu('<svg width="24" height="24" viewBox="0 0 24 24"><path></path></svg>'),RAt=gh("<button><!></button>");function vD(e,t){let n=oe(t,"active",3,!1);var r=RAt();r.__click=function(...a){t.onClick?.apply(this,a)};let i;var o=Oi(r);{var s=a=>{var l=IAt();An(l,"",{},{width:"14px",height:"14px"});var c=Oi(l);An(c,"",{},{fill:"currentColor"}),hi(l),Ds(()=>Kt(c,"d",MAt[t.icon])),Xr(a,l)};Zo(o,a=>{t.icon!=null&&a(s)})}hi(r),Ds(a=>{Kt(r,"title",t.title),i=An(r,"",i,a)},[()=>({border:"none",appearance:"none",background:n()?"color-mix(in srgb, currentColor 20%, transparent)":"none","border-radius":"2px",height:"16px",width:"16px",padding:"0",margin:"0","font-family":"inherit","font-size":"1em",color:"currentColor",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"})]),Xr(e,r)}HI(["click"]);var CAt=gh('<div><div> </div> <svg height="6px"><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line></svg></div>');function NAt(e,t){function n(h,p){let g=Math.log10(p*h),y=Math.round(g),v=[.1,.2,.5,1,2,5,10],b=0,_=1e10;for(let w of v){let S=Math.abs(Math.log10(w)+y-g);S<_&&(b=w,_=S)}return b*Math.pow(10,y)}let r=ae(()=>n(t.distancePerPoint,30)),i=ae(()=>X(r)/t.distancePerPoint);var o=CAt();An(o,"",{},{display:"flex","align-items":"center"});var s=Oi(o);An(s,"",{},{"padding-right":"4px"});var a=Oi(s,!0);hi(s);var l=Or(s,2),c=Oi(l);Kt(c,"x1",1),Kt(c,"y1",3),Kt(c,"y2",3),An(c,"",{},{stroke:"currentColor","stroke-width":"2","stroke-cap":"butt"});var u=Or(c);Kt(u,"x1",1),Kt(u,"x2",1),Kt(u,"y1",0),Kt(u,"y2",6),An(u,"",{},{stroke:"currentColor"});var f=Or(u);Kt(f,"y1",0),Kt(f,"y2",6),An(f,"",{},{stroke:"currentColor"}),hi(l),hi(o),Ds(h=>{Py(a,h),Kt(l,"width",`${X(i)+2}px`),Kt(c,"x2",X(i)+1),Kt(f,"x1",X(i)+1),Kt(f,"x2",X(i)+1)},[()=>X(r).toLocaleString()]),Xr(e,o)}var $At=gh("<div> </div>"),OAt=gh('<a target="_blank"> </a> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div>',1),DAt=gh('<div><div><!></div> <div></div> <div><!> <!> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <span> </span></div></div>');function LAt(e,t){fp(t,!0);let n=oe(t,"statusMessage",3,null);var r=DAt();let i;var o=Oi(r);let s;var a=Oi(o);{var l=w=>{var S=$At();An(S,"",{},{display:"inline-block"});var k=Oi(S,!0);hi(S),Ds(()=>Py(k,n())),Xr(w,S)};Zo(a,w=>{n()!=null&&w(l)})}hi(o);var c=Or(o,2);An(c,"",{},{flex:"1 1 0%"});var u=Or(c,2);let f;var h=Oi(u);{var p=w=>{var S=OAt(),k=p0(S);An(k,"",{},{color:"currentColor","text-decoration":"underline"});var E=Oi(k,!0);hi(k),I3t(2),Ds(()=>{Kt(k,"href",t.resolvedTheme.brandingLink.href),Py(E,t.resolvedTheme.brandingLink.text)}),Xr(w,S)};Zo(h,w=>{t.resolvedTheme.brandingLink!=null&&w(p)})}var g=Or(h,2);{let w=ae(()=>t.selectionMode=="marquee");vD(g,{icon:"marquee",get active(){return X(w)},title:"Toggle rectangle selection mode. In normal mode, use shift + drag for rectangle selection.",onClick:()=>t.onSelectionMode(t.selectionMode=="marquee"?"none":"marquee")})}var y=Or(g,2);{let w=ae(()=>t.selectionMode=="lasso");vD(y,{icon:"lasso",get active(){return X(w)},title:"Toggle lasso selection mode. In normal mode, use shift + meta + drag for lasso selection.",onClick:()=>t.onSelectionMode(t.selectionMode=="lasso"?"none":"lasso")})}var v=Or(y,4);NAt(v,{get distancePerPoint(){return t.distancePerPoint}});var b=Or(v,4),_=Oi(b);hi(b),hi(u),hi(r),Ds((w,S,k,E)=>{i=An(r,"",i,w),s=An(o,"",s,S),f=An(u,"",f,k),Py(_,`${E??""} points`)},[()=>({"font-size":"12px","line-height":"20px",height:"20px",color:t.resolvedTheme.statusBarTextColor,position:"absolute",bottom:"0px",left:"0px",right:"0px","user-select":"none","font-family":t.resolvedTheme.fontFamily,display:"flex","flex-direction":"row"}),()=>({flex:"none",display:"flex","flex-direction":"row",gap:"4px",padding:"0px 4px","border-radius":"2px",background:t.resolvedTheme.statusBarBackgroundColor}),()=>({flex:"none",display:"flex","flex-direction":"row","align-items":"center",gap:"4px",padding:"0px 4px","border-radius":"2px",background:t.resolvedTheme.statusBarBackgroundColor}),()=>t.pointCount.toLocaleString()]),Xr(e,r),hp()}function FAt(e){return(t,n)=>{let r=new e(t,n);return{...r.update?{update:r.update.bind(r)}:{},...r.destroy?{destroy:r.destroy.bind(r)}:{}}}}let vk=new WeakMap;function uY(e){let t=typeof e=="function"?e:e.class;if(vk.has(t))return vk.get(t);{let n=FAt(t);return vk.set(t,n),n}}function fY(e,t){return typeof e=="function"?t:{...e.props??{},...t}}var BAt=gh("<div><div></div></div>");function PAt(e,t){fp(t,!0);let n=oe(t,"margin",3,4),r,i,o=ae(()=>uY(t.customTooltip)),s=ae(()=>fY(t.customTooltip,{tooltip:t.tooltip}));GI(()=>{Ux(()=>{let c=X(o),u=null;return Ux(()=>{i.style.left="0px",i.style.top="0px",i.style.pointerEvents=t.allowInteraction?"all":"none",u==null?u=c(i,X(s)):u.update?.(X(s));function f(v,b,_,w){let S=t.location.x,k=t.location.y,E=2,T=v/2,M=b+(t.targetHeight+n());S-T<_&&(T=S-_),S-T>w-v&&(T=S-w+v),k-M<E&&(M=-(t.targetHeight+n())),i.style.left=S-T+"px",i.style.top=k-M+"px"}let h=r.getBoundingClientRect(),{width:p,height:g}=i.getBoundingClientRect();f(p,g,2,h.width-2);let y=requestAnimationFrame(()=>{y=null;let v=i.getBoundingClientRect();(v.width!=p||v.height!=g)&&f(v.width,v.height,2,h.width-2)});return()=>{y!=null&&cancelAnimationFrame(y)}}),()=>{u?.destroy?.(),i.replaceChildren()}})});var a=BAt();An(a,"",{},{position:"absolute",width:"100%"});var l=Oi(a);An(l,"",{},{display:"flex",position:"absolute",width:"fit-content",height:"fit-content","z-index":"100"}),K4(l,c=>i=c,()=>i),hi(a),K4(a,c=>r=c,()=>r),Xr(e,a),hp()}function XI(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hY(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function N1(){}var Cv=.7,qx=1/Cv,j0="\\s*([+-]?\\d+)\\s*",Nv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zAt=/^#([0-9a-f]{3,8})$/,UAt=new RegExp(`^rgb\\(${j0},${j0},${j0}\\)$`),qAt=new RegExp(`^rgb\\(${uc},${uc},${uc}\\)$`),jAt=new RegExp(`^rgba\\(${j0},${j0},${j0},${Nv}\\)$`),VAt=new RegExp(`^rgba\\(${uc},${uc},${uc},${Nv}\\)$`),WAt=new RegExp(`^hsl\\(${Nv},${uc},${uc}\\)$`),YAt=new RegExp(`^hsla\\(${Nv},${uc},${uc},${Nv}\\)$`),bD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XI(N1,KI,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_D,formatHex:_D,formatHex8:HAt,formatHsl:GAt,formatRgb:wD,toString:wD});function _D(){return this.rgb().formatHex()}function HAt(){return this.rgb().formatHex8()}function GAt(){return pY(this).formatHsl()}function wD(){return this.rgb().formatRgb()}function KI(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zAt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xD(t):n===3?new ls(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?g_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?g_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UAt.exec(e))?new ls(t[1],t[2],t[3],1):(t=qAt.exec(e))?new ls(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jAt.exec(e))?g_(t[1],t[2],t[3],t[4]):(t=VAt.exec(e))?g_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WAt.exec(e))?ED(t[1],t[2]/100,t[3]/100,1):(t=YAt.exec(e))?ED(t[1],t[2]/100,t[3]/100,t[4]):bD.hasOwnProperty(e)?xD(bD[e]):e==="transparent"?new ls(NaN,NaN,NaN,0):null}function xD(e){return new ls(e>>16&255,e>>8&255,e&255,1)}function g_(e,t,n,r){return r<=0&&(e=t=n=NaN),new ls(e,t,n,r)}function XAt(e){return e instanceof N1||(e=KI(e)),e?(e=e.rgb(),new ls(e.r,e.g,e.b,e.opacity)):new ls}function dY(e,t,n,r){return arguments.length===1?XAt(e):new ls(e,t,n,r??1)}function ls(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}XI(ls,dY,hY(N1,{brighter(e){return e=e==null?qx:Math.pow(qx,e),new ls(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cv:Math.pow(Cv,e),new ls(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ls(md(this.r),md(this.g),md(this.b),jx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SD,formatHex:SD,formatHex8:KAt,formatRgb:AD,toString:AD}));function SD(){return`#${ed(this.r)}${ed(this.g)}${ed(this.b)}`}function KAt(){return`#${ed(this.r)}${ed(this.g)}${ed(this.b)}${ed((isNaN(this.opacity)?1:this.opacity)*255)}`}function AD(){const e=jx(this.opacity);return`${e===1?"rgb(":"rgba("}${md(this.r)}, ${md(this.g)}, ${md(this.b)}${e===1?")":`, ${e})`}`}function jx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function md(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ed(e){return e=md(e),(e<16?"0":"")+e.toString(16)}function ED(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new il(e,t,n,r)}function pY(e){if(e instanceof il)return new il(e.h,e.s,e.l,e.opacity);if(e instanceof N1||(e=KI(e)),!e)return new il;if(e instanceof il)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new il(s,a,l,e.opacity)}function JAt(e,t,n,r){return arguments.length===1?pY(e):new il(e,t,n,r??1)}function il(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}XI(il,JAt,hY(N1,{brighter(e){return e=e==null?qx:Math.pow(qx,e),new il(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cv:Math.pow(Cv,e),new il(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ls(bk(e>=240?e-240:e+120,i,r),bk(e,i,r),bk(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new il(kD(this.h),m_(this.s),m_(this.l),jx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jx(this.opacity);return`${e===1?"hsl(":"hsla("}${kD(this.h)}, ${m_(this.s)*100}%, ${m_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kD(e){return e=(e||0)%360,e<0?e+360:e}function m_(e){return Math.max(0,Math.min(1,e||0))}function bk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const TD=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],y_=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];function Jg(e){if(e<1&&(e=1),e<=TD.length)return TD.slice(0,e);if(e<=y_.length)return y_.slice(0,e);{let t=[];for(let n=0;n<e;n++)t[n]=y_[n%y_.length];return t}}function JI(e){let{r:t,g:n,b:r,opacity:i}=dY(e);return{r:t/255,g:n/255,b:r/255,a:i}}let Hm;function ZAt(){return Hm==null&&(Hm=document.createElement("canvas"),Hm.width=1,Hm.height=1),Hm.getContext("2d")}function QAt(e){let t=ZAt();t.font=`${e.fontSize??10}px ${e.fontFamily??"system-ui"}`;let n=e.text.split(`
`).map(i=>t.measureText(i).width),r=(e.fontSize??10)*(e.lineSpacing??1)*n.length;return{width:n.reduce((i,o)=>Math.max(i,o)),height:r}}function gY(){return[1,0,0,0,1,0,0,0,1]}function ZI(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8]]}function mY(e,t){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]]}function tEt(e){return e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]}function yY(e){let t=tEt(e);return[(e[4]*e[8]-e[5]*e[7])/t,(e[2]*e[7]-e[1]*e[8])/t,(e[1]*e[5]-e[2]*e[4])/t,(e[5]*e[6]-e[3]*e[8])/t,(e[0]*e[8]-e[2]*e[6])/t,(e[2]*e[3]-e[0]*e[5])/t,(e[3]*e[7]-e[4]*e[6])/t,(e[1]*e[6]-e[0]*e[7])/t,(e[0]*e[4]-e[1]*e[3])/t]}class Vx{viewport;width;height;_matrix=[0,0,0,0,0,0,0,0,0];_pixel_kx=0;_pixel_bx=0;_pixel_ky=0;_pixel_by=0;constructor(t,n,r){this.viewport=t,this.width=n,this.height=r,this.updateCoefficients()}update(t,n,r){this.viewport=t,this.width=n,this.height=r,this.updateCoefficients()}updateCoefficients(){let{x:t,y:n,scale:r}=this.viewport,i=r,o=r;this.width<this.height?i*=this.height/this.width:o*=this.width/this.height,this._matrix=[i,0,0,0,o,0,-t*i,-n*o,1],this._pixel_kx=this._matrix[0]*this.width/2,this._pixel_bx=(this._matrix[6]+1)*this.width/2,this._pixel_ky=-this._matrix[4]*this.height/2,this._pixel_by=(-this._matrix[7]+1)*this.height/2}matrix(){return this._matrix}pixelLocation(t,n){return{x:t*this._pixel_kx+this._pixel_bx,y:n*this._pixel_ky+this._pixel_by}}coordinateAtPixel(t,n){return{x:(t-this._pixel_bx)/this._pixel_kx,y:(n-this._pixel_by)/this._pixel_ky}}pixelLocationFunction(){let t=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by;return(o,s)=>({x:o*t+r,y:s*n+i})}coordinateAtPixelFunction(){let t=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by;return(o,s)=>({x:(o-r)/t,y:(s-i)/n})}}class J4{_needsRun=!0;_inputs=new Set;_targets=new Set;constructor(t=[]){this._inputs=new Set(t);for(let n of this._inputs)n._targets.add(this)}addInput(t){this._inputs.add(t),t._targets.add(this)}removeInput(t){t._targets.delete(this),this._inputs.delete(t)}run(){if(this._needsRun){for(let t of this._inputs)t.run();this.update(),this._needsRun=!1}}setNeedsRunDownstream(){for(let t of this._targets)t._needsRun||(t._needsRun=!0,t.setNeedsRunDownstream())}update(){}destroy(){for(let t of this._inputs)t._targets.delete(this)}}let Zg=class extends J4{_value=null;setValue(t){this._value!==t&&(this._value=t,this.setNeedsRunDownstream())}get value(){return this.run(),this._value}};class vY extends Zg{constructor(t){super([]),this.setValue(t)}get value(){return super.value}set value(t){this.setValue(t)}}class eEt extends Zg{fn;constructor(t,n){super(n),this.fn=t}update(){this.setValue(this.fn())}}class nEt extends Zg{fn;state;constructor(t,n){super(n),this.fn=t,this.state={}}update(){this.setValue(this.fn(this.state))}destroy(){super.destroy(),this.state.destroy&&this.state.destroy(),this.state={}}}class rEt extends Zg{parent;condition;buildTrue;buildFalse;context=null;currentCondition=null;currentNode=null;constructor(t,n,r,i){super([n]),this.parent=t,this.condition=n,this.buildTrue=r,this.buildFalse=i}update(){(this.currentNode==null||this.currentCondition!==this.condition.value)&&(this.currentNode&&this.removeInput(this.currentNode),this.context?.destroy(),this.context=new pp(this.parent),this.currentCondition=this.condition.value,this.currentCondition?this.currentNode=this.buildTrue(this.context):this.currentNode=this.buildFalse(this.context),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.context?.destroy()}}class iEt extends Zg{parent;input;build;cache;constructor(t,n,r){super([n]),this.parent=t,this.input=n,this.build=r,this.cache=new Map}update(){let t=new Set,n=this.input.value.map(r=>{if(t.add(r),this.cache.has(r)){let i=this.cache.get(r);return i.input.value=r,i.output.value}else{let i=new pp(this.parent),o=new vY(r),s=this.build(i,o);return this.cache.set(r,{context:i,input:o,output:s}),this.addInput(s),s.value}});for(let[r,i]of this.cache)t.has(r)||(this.cache.delete(r),this.removeInput(i.output),i.context.destroy());this.setValue(n)}destroy(){super.destroy();for(let t of this.cache.values())t.context.destroy()}}class oEt extends Zg{parent;input;cases;currentCase=null;currentNode=null;currentContext=null;constructor(t,n,r){super([n]),this.parent=t,this.input=n,this.cases=r}update(){(this.currentNode==null||this.input.value!==this.currentCase)&&(this.currentNode&&this.removeInput(this.currentNode),this.currentContext?.destroy(),this.currentContext=new pp(this.parent),this.currentCase=this.input.value,this.currentNode=this.cases[this.currentCase](this.currentContext),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.currentContext?.destroy()}}class pp{_children;_nodes;constructor(t=null){this._children=new Set,this._nodes=new Set,t?._children.add(this)}destroy(){for(let t of this._children)t.destroy();for(let t of this._nodes)t.destroy();this._children.clear(),this._nodes.clear()}value(t){let n=new vY(t);return this._nodes.add(n),n}derive(t,n){let r=t.map(o=>o instanceof J4?o:this.value(o)),i=new eEt(()=>n(...r.map(o=>o.value)),r);return this._nodes.add(i),i}statefulDerive(t,n){let r=t.map(o=>o instanceof J4?o:this.value(o)),i=new nEt(o=>n(o,...r.map(s=>s.value)),r);return this._nodes.add(i),i}if(t,n,r){let i=new rEt(this,t,n,r);return this._nodes.add(i),i}switch(t,n){let r=new oEt(this,t,n);return this._nodes.add(r),r}map(t,n){let r=new iEt(this,t,n);return this._nodes.add(r),r}assertNotNull(t){return t}subgraph(){return new pp(this)}}function _c(e,t,n,r){if(e.program==null||e.vsSource!=n||e.fsSource!=r){e.destroy&&e.destroy();let o=MD(t,t.VERTEX_SHADER,n),s=MD(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var i=t.getProgramInfoLog(a);throw new Error(`failed to link program: ${i}, vertex source: ${n}, fragment source: ${r}`)}e.program=a,e.vsSource=n,e.fsSource=r,e.destroy=()=>{t.deleteProgram(a),t.deleteShader(o),t.deleteShader(s)},e.uniforms={};for(let l of(n+r).matchAll(/uniform +[0-9a-zA-Z_]+ +([0-9a-zA-Z_]+) *(;|\[)/g)){let c=l[1];e.uniforms[c]=t.getUniformLocation(a,c)}}return{program:e.program,uniforms:e.uniforms??{}}}function MD(e,t,n){let r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);throw new Error(`failed to compile shader: ${i}, source: ${n}`)}return r}function fc(e,t,n,r){if(e.buffer==null){let i=t.createBuffer();e.buffer=i,e.destroy=()=>{t.deleteBuffer(i)}}if(e.data!==n){if(e.data=n,t.bindBuffer(t.ARRAY_BUFFER,e.buffer),n instanceof Array)switch(r??"f32"){case"f32":t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW);break;case"i32":t.bufferData(t.ARRAY_BUFFER,new Int32Array(n),t.STATIC_DRAW);break;case"u32":t.bufferData(t.ARRAY_BUFFER,new Uint32Array(n),t.STATIC_DRAW);break;case"i16":t.bufferData(t.ARRAY_BUFFER,new Int16Array(n),t.STATIC_DRAW);break;case"u16":t.bufferData(t.ARRAY_BUFFER,new Uint16Array(n),t.STATIC_DRAW);break;case"i8":t.bufferData(t.ARRAY_BUFFER,new Int8Array(n),t.STATIC_DRAW);break;case"u8":t.bufferData(t.ARRAY_BUFFER,new Uint8Array(n),t.STATIC_DRAW);break;default:throw new Error("invalid type")}else t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW);t.bindBuffer(t.ARRAY_BUFFER,null)}return e.buffer}function sEt(e,t,n,r,i){const o={u8:{1:[e.R8,e.RED,e.UNSIGNED_BYTE],2:[e.RG8,e.RG,e.UNSIGNED_BYTE],3:[e.RGB8,e.RGB,e.UNSIGNED_BYTE],4:[e.RGBA8,e.RGBA,e.UNSIGNED_BYTE]},u16:{1:[e.R8,e.RED,e.UNSIGNED_SHORT],2:[e.RG8,e.RG,e.UNSIGNED_SHORT],3:[e.RGB8,e.RGB,e.UNSIGNED_SHORT],4:[e.RGBA8,e.RGBA,e.UNSIGNED_SHORT]},u32:{1:[e.R8,e.RED,e.UNSIGNED_INT],2:[e.RG8,e.RG,e.UNSIGNED_INT],3:[e.RGB8,e.RGB,e.UNSIGNED_INT],4:[e.RGBA8,e.RGBA,e.UNSIGNED_INT]},f32:{1:[e.R32F,e.RED,e.FLOAT],2:[e.RG32F,e.RG,e.FLOAT],3:[e.RGB32F,e.RGB,e.FLOAT],4:[e.RGBA32F,e.RGBA,e.FLOAT]}};let[s,a,l]=o[i][r];e.texImage2D(e.TEXTURE_2D,0,s,t,n,0,a,l,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}function Tf(e,t,n,r,i,o){if(e.framebuffer==null||e.texture==null){let a=t.createFramebuffer(),l=t.createTexture();t.bindFramebuffer(t.FRAMEBUFFER,a),t.bindTexture(t.TEXTURE_2D,l),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l,0),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),e.framebuffer=a,e.texture=l,e.destroy=()=>{t.deleteFramebuffer(a),t.deleteTexture(l)}}let s=`${n},${r},${i},${o}`;return e.cacheKey!=s&&(e.cacheKey=s,t.bindTexture(t.TEXTURE_2D,e.texture),sEt(t,n,r,i,o),t.bindTexture(t.TEXTURE_2D,null)),{framebuffer:e.framebuffer,texture:e.texture,width:n,height:r}}function aEt(e){let t=e.squareMaxSize,n=e.samples,r=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,i=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = vec4(0.0);
      const int count = ${t};
      int i = -count;
      while(i + 1 <= count) {
        color += texture(image, uv + direction * (float(i) + 0.5) / resolution) * 2.0;
        i += 2;
      }
      if (i <= count) {
        color += texture(image, uv + direction * float(count) / resolution);
      }
      outColor = color;
    }
  `,o=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform sampler2D imageBox;
    uniform vec2 resolution;
    uniform float scaler;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = texture(imageBox, uv);
      if (color != vec4(0.0)) {
        ${n.map(({x:s,y:a,w:l})=>`color -= texture(image, uv + vec2(${s.toFixed(8)}, ${a.toFixed(8)}) / resolution) * (${l.toFixed(8)})`).join(";")};
      }
      outColor = color * scaler;
    }
  `;return{vertex:r,fragment1:i,fragment2:o}}function lEt(e,t,n){let r=e.derive([n],cEt),i=e.derive([r],aEt),o=e.statefulDerive([t,e.derive([i],l=>l.vertex),e.derive([i],l=>l.fragment1)],_c),s=e.statefulDerive([t,e.derive([i],l=>l.vertex),e.derive([i],l=>l.fragment2)],_c),a=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,a,o,s,n,r],(l,c,u,f,h,p)=>(g,y,v)=>{let{width:b,height:_}=y;l.disable(l.BLEND),l.enableVertexAttribArray(0),l.bindBuffer(l.ARRAY_BUFFER,c),l.vertexAttribPointer(0,2,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,null),l.useProgram(u.program),l.uniform2f(u.uniforms.resolution,b,_),l.uniform1i(u.uniforms.image,0),l.bindFramebuffer(l.FRAMEBUFFER,y.framebuffer),l.bindTexture(l.TEXTURE_2D,g),l.uniform2f(u.uniforms.direction,0,1),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,v.framebuffer),l.bindTexture(l.TEXTURE_2D,y.texture),l.uniform2f(u.uniforms.direction,1,0),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,y.framebuffer),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,v.texture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,g),l.useProgram(f.program),l.uniform2f(f.uniforms.resolution,b,_),l.uniform1i(f.uniforms.image,0),l.uniform1i(f.uniforms.imageBox,1);let w=1/p.totalWeight*h*h*Math.PI;l.uniform1f(f.uniforms.scaler,w),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,null),l.useProgram(null),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,null),l.disableVertexAttribArray(0)})}function ID(e,t,n){let r=Math.sqrt(t*t+n*n);if(r<e-Math.sqrt(2)/2)return 1;if(r>e+Math.sqrt(2)/2)return 0;let i=2,o=0;for(let s=0;s<i;s++)for(let a=0;a<i;a++){let l=t+(s+.5)/i-.5,c=n+(a+.5)/i-.5;Math.sqrt(l*l+c*c)<e&&(o+=1)}return o/i/i}function cEt(e){let t=Math.floor(e+.5),n=t,r=ID(e,0,0),i=[];for(let a=-t;a<=t;a++)for(let l=-t;l<=t;l++){let c=r-ID(e,a,l);if(!(c<=0))if(i.length>0&&a==i[i.length-1].x&&l==i[i.length-1].y+1){let u=i[i.length-1].w,f=c;i[i.length-1].y+=1-u/(u+f),i[i.length-1].w=u+f}else i.push({x:a,y:l,w:c})}i=i.sort((a,l)=>a.y!=l.y?a.y-l.y:a.x-l.x);let o=[];for(let{x:a,y:l,w:c}of i)if(o.length>0&&l==o[o.length-1].y&&a==o[o.length-1].x+1){let u=o[o.length-1].w,f=c;o[o.length-1].x+=1-u/(u+f),o[o.length-1].w=u+f}else o.push({x:a,y:l,w:c});let s=-o.reduce((a,l)=>a+l.w,0);return s+=r*(1+n*2)*(1+n*2),{squareMaxSize:n,squareWeight:r,samples:o,totalWeight:s}}function uEt(e){let t;return e?t=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category == 0) {
          color = vec4(1, 0, 0, 0);
        } else if (category == 1) {
          color = vec4(0, 1, 0, 0);
        } else if (category == 2) {
          color = vec4(0, 0, 1, 0);
        } else if (category == 3) {
          color = vec4(0, 0, 0, 1);
        }
        gl_PointSize = 1.0;
      }
    `:t=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = vec4(1, 0, 0, 0);
        gl_PointSize = 1.0;
      }
    `,{vertex:t,fragment:`#version 300 es
    precision highp float;
    in vec4 color;
    out vec4 outColor;
    void main() {
      outColor = color;
    }
  `}}function Z4(e,t,n,r,i,o){let s=i!=null,a=uEt(s),l=e.statefulDerive([t,a.vertex,a.fragment],_c);return e.derive([t,l,n,r,i,o],(c,u,f,h,p,g)=>y=>{c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE),c.useProgram(u.program),c.enableVertexAttribArray(0),c.bindBuffer(c.ARRAY_BUFFER,f),c.vertexAttribPointer(0,1,c.FLOAT,!1,0,0),c.enableVertexAttribArray(1),c.bindBuffer(c.ARRAY_BUFFER,h),c.vertexAttribPointer(1,1,c.FLOAT,!1,0,0),p!=null&&(c.enableVertexAttribArray(2),c.bindBuffer(c.ARRAY_BUFFER,p),c.vertexAttribIPointer(2,1,c.BYTE,0,0)),c.bindBuffer(c.ARRAY_BUFFER,null),c.uniformMatrix3fv(u.uniforms.matrix,!1,y),c.drawArrays(c.POINTS,0,g),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),p!=null&&c.disableVertexAttribArray(2),c.useProgram(null)})}function fEt(){return{vertex:`#version 300 es
    precision highp float;
    uniform vec2 xyScaler;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy * xyScaler, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform float gamma;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = texture(source, uv);
      color.rgb = pow(color.rgb, vec3(1.0 / gamma));
      outColor = color;
    }
  `}}function bY(e,t){let{vertex:n,fragment:r}=fEt(),i=e.statefulDerive([t,n,r],_c),o=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,i,o],(s,a,l)=>(c,u,f,h)=>{s.disable(s.BLEND),s.enableVertexAttribArray(0),s.bindBuffer(s.ARRAY_BUFFER,l),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindTexture(s.TEXTURE_2D,c),s.useProgram(a.program),s.uniform1i(a.uniforms.source,0),s.uniform2f(a.uniforms.xyScaler,f??1,h??1),s.uniform1f(a.uniforms.gamma,u??2.2),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.useProgram(null),s.bindTexture(s.TEXTURE_2D,null),s.disableVertexAttribArray(0)})}function _Y(e){return Math.ceil(e*3)}function hEt(e){let t=_Y(e),n=[];for(let a=-t;a<=t;a++)n.push(Math.exp(-a*a/e/e/2));let r=n.reduce((a,l)=>a+l,0);n=n.map(a=>a/r);let i=pEt(n).map(([a,l])=>[a-t,l]),o=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,s=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = vec4(0.0);
      ${i.map(([a,l])=>`color += texture(image, uv + direction * vec2(${a.toFixed(10)}) / resolution) * ${l.toFixed(10)};`).join(`
`)}
      outColor = color;
    }
  `;return{vertex:o,fragment:s}}function dEt(e,t,n){let r=e.derive([n],hEt),i=e.statefulDerive([t,e.derive([r],s=>s.vertex),e.derive([r],s=>s.fragment)],_c),o=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,o,i,n],(s,a,l,c)=>(u,f,h)=>{let{width:p,height:g}=f;s.disable(s.BLEND),s.enableVertexAttribArray(0),s.bindBuffer(s.ARRAY_BUFFER,a),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(l.program),s.uniform2f(l.uniforms.resolution,p,g),s.uniform1i(l.uniforms.image,0),s.bindFramebuffer(s.FRAMEBUFFER,h.framebuffer),s.bindTexture(s.TEXTURE_2D,u),s.uniform2f(l.uniforms.direction,0,1),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.bindFramebuffer(s.FRAMEBUFFER,f.framebuffer),s.bindTexture(s.TEXTURE_2D,h.texture),s.uniform2f(l.uniforms.direction,1,0),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.bindFramebuffer(s.FRAMEBUFFER,null),s.useProgram(null),s.bindTexture(s.TEXTURE_2D,null),s.disableVertexAttribArray(0)})}function pEt(e){let t=[];for(let n=0;n<e.length;n+=2)if(n+1<e.length){let r=e[n],i=e[n+1],o=1-r/(r+i);if(o>=0&&o<=1){let s=r+i;s!=0&&t.push([n+o,s])}else t.push([n,e[n]]),t.push([n+1,e[n+1]])}else t.push([n,e[n]]);return t}function gEt(e){return Math.ceil(e*3)}function mEt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    uniform float weight0;
    uniform vec3 distances;
    uniform vec3 weights;

    void main() {
      vec4 color = texture(image, uv) * weight0;
      if (weights.x != 0.0) {
        color += texture(image, uv + direction * vec2(distances.x) / resolution) * weights.x;
        color += texture(image, uv - direction * vec2(distances.x) / resolution) * weights.x;
      }
      if (weights.y != 0.0) {
        color += texture(image, uv + direction * vec2(distances.y) / resolution) * weights.y;
        color += texture(image, uv - direction * vec2(distances.y) / resolution) * weights.y;
      }
      if (weights.z != 0.0) {
        color += texture(image, uv + direction * vec2(distances.z) / resolution) * weights.z;
        color += texture(image, uv - direction * vec2(distances.z) / resolution) * weights.z;
      }
      outColor = color;
    }
  `}}function yEt(e,t,n){let{vertex:r,fragment:i}=mEt(),o=e.statefulDerive([t,r,i],_c),s=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,s,o],(a,l,c)=>(u,f,h)=>{let{width:p,height:g}=f;a.disable(a.BLEND),a.enableVertexAttribArray(0),a.bindBuffer(a.ARRAY_BUFFER,l),a.vertexAttribPointer(0,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(c.program),a.uniform2f(c.uniforms.resolution,p,g),a.uniform1i(c.uniforms.image,0);let y=u,v=h,b=f;for(let _=0;_<2;_++){a.uniform2f(c.uniforms.direction,_,1-_);for(let[w,S,k]of vEt){a.bindFramebuffer(a.FRAMEBUFFER,v.framebuffer),a.bindTexture(a.TEXTURE_2D,y),a.uniform1fv(c.uniforms.weight0,S),a.uniform3fv(c.uniforms.distances,w),a.uniform3fv(c.uniforms.weights,k),a.drawArrays(a.TRIANGLE_STRIP,0,4),y=v.texture;let E=v;v=b,b=E}}a.bindFramebuffer(a.FRAMEBUFFER,null),a.useProgram(null),a.bindTexture(a.TEXTURE_2D,null),a.disableVertexAttribArray(0)})}const vEt=[[[1,2,3],[.2288468365182578],[.18230006506971572,.1356122230111784,.06766429365997693]],[[2,6,10],[.09116254014100238],[.23317759354726447,.18385867277788717,.03738246360434722]],[[3,10,20],[.2950645715317288],[.010918865853671198,.23773695670296047,.10381189167750389]],[[4,16,30],[.20085957073474772],[.14463019087130788,.17934533765938643,.07559468610193185]]];function bEt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;
    uniform vec4 channelMask;
    uniform vec4 color;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    float sample_density(vec2 uv) {
      float d = dot(texture(source, uv), channelMask) * densityScaler;
      d = min(1.0, max(0.0, d));
      d = floor(d / quantizationStep);
      return d;
    }

    void main() {
      // Run the Sobel operator.
      float v = sample_density(uv);
      float v11 = sample_density(uv + vec2(-1, -1) / resolution);
      float v12 = sample_density(uv + vec2(-1,  0) / resolution);
      float v13 = sample_density(uv + vec2(-1, +1) / resolution);
      float v21 = sample_density(uv + vec2( 0, -1) / resolution);
      float v23 = sample_density(uv + vec2( 0, +1) / resolution);
      float v31 = sample_density(uv + vec2(+1, -1) / resolution);
      float v32 = sample_density(uv + vec2(+1,  0) / resolution);
      float v33 = sample_density(uv + vec2(+1, +1) / resolution);
      float gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
      float gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
      // Derive alpha value from the result.
      float alpha = length(vec2(gx, gy)) * 0.2;
      alpha = min(1.0, max(0.0, alpha));
      outColor = color * alpha * globalAlpha;
    }
  `}}function _Et(e,t){let{vertex:n,fragment:r}=bEt(),i=e.statefulDerive([t,n,r],_c),o=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,i,o],(s,a,l)=>(c,u,f,h,p,g)=>{s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enableVertexAttribArray(0),s.bindBuffer(s.ARRAY_BUFFER,l),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindTexture(s.TEXTURE_2D,c.texture),s.useProgram(a.program),s.uniform1i(a.uniforms.source,0),s.uniform2f(a.uniforms.resolution,c.width,c.height),s.uniform1f(a.uniforms.densityScaler,u),s.uniform1f(a.uniforms.quantizationStep,f),s.uniform1f(a.uniforms.globalAlpha,h),s.uniform4fv(a.uniforms.channelMask,p),s.uniform4fv(a.uniforms.color,g),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.useProgram(null),s.bindTexture(s.TEXTURE_2D,null),s.disableVertexAttribArray(0)})}function wEt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
    `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;

    uniform mat4 colorMatrix;
    uniform int isDarkMode;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 density = texture(source, uv) * densityScaler;

      if (density.x > 1.0 || density.y > 1.0 || density.z > 1.0 || density.w > 1.0) {
        density = density / max(max(max(density.x, density.y), density.z), density.w);
      } else {
        density = floor(density / quantizationStep) * quantizationStep;
      }

      if (density.x + density.y + density.z + density.w == 0.0) {
        discard;
      }

      float alpha = combine_alphas(density);

      density *= alpha / (density.x + density.y + density.z + density.w);

      vec3 c1 = colorMatrix[0].rgb * density.x;
      vec3 c2 = colorMatrix[1].rgb * density.y;
      vec3 c3 = colorMatrix[2].rgb * density.z;
      vec3 c4 = colorMatrix[3].rgb * density.w;
      vec3 c;

      if (isDarkMode == 0) {
        c = vec3(1.0) - alpha + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }

      outColor = vec4(c, 1.0) * alpha * globalAlpha;
    }
  `}}function xEt(e,t){let{vertex:n,fragment:r}=wEt(),i=e.statefulDerive([t,n,r],_c),o=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,i,o],(s,a,l)=>(c,u,f,h,p,g)=>{s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enableVertexAttribArray(0),s.bindBuffer(s.ARRAY_BUFFER,l),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindTexture(s.TEXTURE_2D,c.texture),s.useProgram(a.program),s.uniform1i(a.uniforms.source,0),s.uniform2f(a.uniforms.resolution,c.width,c.height),s.uniform1f(a.uniforms.densityScaler,u),s.uniform1f(a.uniforms.quantizationStep,f),s.uniform1f(a.uniforms.globalAlpha,h),s.uniform1i(a.uniforms.isDarkMode,g=="dark"?1:0),s.uniformMatrix4fv(a.uniforms.colorMatrix,!1,p),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.useProgram(null),s.bindTexture(s.TEXTURE_2D,null),s.disableVertexAttribArray(0)})}function SEt(e){let t;return e?t=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform float alpha;
      uniform vec4 colorScheme[64];

      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category < 64) {
          color = colorScheme[category];
        } else {
          color = vec4(0.5, 0.5, 0.5, 1);
        }
        color *= alpha;
        gl_PointSize = point_size;
      }
    `:t=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform vec4 colorScheme;
      uniform float alpha;

      layout(location=0) in float x;
      layout(location=1) in float y;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = colorScheme;
        color *= alpha;
        gl_PointSize = point_size;
      }
    `,{vertex:t,fragment:`#version 300 es
    precision highp float;
    uniform float point_size;
    in vec4 color;
    out vec4 outColor;
    void main() {
      float r = length(gl_PointCoord.xy - vec2(0.5, 0.5)) * point_size;
      float a = max(0.0, min(1.0, point_size / 2.0 - r));
      outColor = color * a;
    }
  `}}function RD(e,t,n,r,i,o){let s=i!=null,a=SEt(s),l=e.statefulDerive([t,a.vertex,a.fragment],_c);return e.derive([t,l,n,r,i,o],(c,u,f,h,p,g)=>(y,v,b,_)=>{c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.useProgram(u.program),c.enableVertexAttribArray(0),c.bindBuffer(c.ARRAY_BUFFER,f),c.vertexAttribPointer(0,1,c.FLOAT,!1,0,0),c.enableVertexAttribArray(1),c.bindBuffer(c.ARRAY_BUFFER,h),c.vertexAttribPointer(1,1,c.FLOAT,!1,0,0),p!=null&&(c.enableVertexAttribArray(2),c.bindBuffer(c.ARRAY_BUFFER,p),c.vertexAttribIPointer(2,1,c.BYTE,0,0)),c.bindBuffer(c.ARRAY_BUFFER,null),c.uniformMatrix3fv(u.uniforms.matrix,!1,y),c.uniform1f(u.uniforms.point_size,v*2),c.uniform1f(u.uniforms.alpha,b),s?c.uniform4fv(u.uniforms.colorScheme,_):c.uniform4fv(u.uniforms.colorScheme,_.slice(0,4)),c.drawArrays(c.POINTS,0,g),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),p!=null&&c.disableVertexAttribArray(2),c.useProgram(null)})}function AEt(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform mat4 colorMatrix;
    uniform float pointAlpha;
    uniform float globalAlpha;
    uniform int isDarkMode;
    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 count = texture(source, uv);
      vec4 alphas = pointAlpha >= 0.999
        ? vec4(count.x > 0.0 ? 1.0 : 0.0, count.y > 0.0 ? 1.0 : 0.0, count.z > 0.0 ? 1.0 : 0.0, count.w > 0.0 ? 1.0 : 0.0)
        : vec4(1.0) - pow(vec4(1.0 - pointAlpha), count);
      float a = combine_alphas(alphas);
      if (a <= 0.0) { discard; }
      alphas *= a / (alphas.x + alphas.y + alphas.z + alphas.w);

      vec3 c1 = colorMatrix[0].rgb * alphas.x;
      vec3 c2 = colorMatrix[1].rgb * alphas.y;
      vec3 c3 = colorMatrix[2].rgb * alphas.z;
      vec3 c4 = colorMatrix[3].rgb * alphas.w;
      vec3 c;
      if (isDarkMode == 0) {
        c = vec3(1.0) - a + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }
      outColor = vec4(c, 1.0) * a * globalAlpha;
    }
  `}}function EEt(e,t){let{vertex:n,fragment:r}=AEt(),i=e.statefulDerive([t,n,r],_c),o=e.statefulDerive([t,[-1,-1,-1,1,1,-1,1,1],"f32"],fc);return e.derive([t,i,o],(s,a,l)=>(c,u,f,h,p)=>{s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enableVertexAttribArray(0),s.bindBuffer(s.ARRAY_BUFFER,l),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,null),s.bindTexture(s.TEXTURE_2D,c.texture),s.useProgram(a.program),s.uniform1i(a.uniforms.source,0),s.uniform2f(a.uniforms.resolution,c.width,c.height),s.uniform1f(a.uniforms.pointAlpha,u),s.uniform1f(a.uniforms.globalAlpha,f),s.uniform1i(a.uniforms.isDarkMode,p=="dark"?1:0),s.uniformMatrix4fv(a.uniforms.colorMatrix,!1,h),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.useProgram(null),s.bindTexture(s.TEXTURE_2D,null),s.disableVertexAttribArray(0)})}class kEt{props;viewport;df;gl;renderInputs;dataBuffers;renderer;constructor(t,n,r){this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:n,height:r},this.viewport=new Vx({x:0,y:0,scale:1},n,r);let i=new pp,o=i.value(t);this.df=i,this.gl=o,this.renderInputs={mode:i.value(this.props.mode),colorScheme:i.value(this.props.colorScheme),xData:i.value(this.props.x),yData:i.value(this.props.y),categoryData:i.value(this.props.category),categoryCount:i.value(this.props.categoryCount),matrix:i.value(gY()),width:i.value(n),height:i.value(r),pointSize:i.value(this.props.pointSize),densityBandwidth:i.value(this.props.densityBandwidth)},this.dataBuffers=TEt(i,o,this.renderInputs),this.renderer=MEt(i,o,this.renderInputs,this.dataBuffers)}setProps(t){let n=!1,r;for(r in t)t[r]!==this.props[r]&&(this.props[r]=t[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,n}render(){this.renderer.value(this.props)}destroy(){this.df.destroy()}async densityMap(t,n,r,i){let o=this.df.subgraph(),s=CEt(o,this.gl,this.dataBuffers,o.value(t),o.value(n),o.value(r)),{x:a,y:l,scale:c}=i,u=[c,0,0,0,c,0,-a*c,-l*c,1],f=s.value(u),h=yY(u);return o.destroy(),{data:f,width:t,height:n,coordinateAtPixel:(p,g)=>{let y=p/t*2-1,v=g/n*2-1,b=mY([y,v,1],h);return{x:b[0],y:b[1]}}}}}function TEt(e,t,n){const r=e.statefulDerive([t,n.xData,"f32"],fc),i=e.statefulDerive([t,n.yData,"f32"],fc),o=e.if(e.derive([n.categoryData],a=>a!=null),a=>a.statefulDerive([t,a.assertNotNull(n.categoryData),"u8"],fc),a=>a.value(null)),s=e.derive([n.xData],a=>a.length);return{x:r,y:i,category:o,count:s}}function MEt(e,t,n,r){return e.switch(n.mode,{points:i=>IEt(i,t,n,r),density:i=>REt(i,t,n,r)})}function IEt(e,t,n,r){const i=e.derive([n.categoryCount],l=>l>1),o=e.statefulDerive([t,n.width,n.height,4,"f32"],Tf);let s=e.if(i,l=>RD(l,t,r.x,r.y,l.assertNotNull(r.category),r.count),l=>RD(l,t,r.x,r.y,null,r.count)),a=bY(e,t);return e.derive([t,o,s,a,n.colorScheme,n.matrix,n.categoryCount],(l,c,u,f,h,p,g)=>y=>{let v=[],b=y.categoryColors??Jg(y.categoryCount);for(let _=0;_<g;_++)if(_<b.length){let{r:w,g:S,b:k}=JI(b[_]);w=Math.pow(w,y.gamma),S=Math.pow(S,y.gamma),k=Math.pow(k,y.gamma),v=v.concat([w,S,k,1])}else v=v.concat([.5,.5,.5,1]);l.bindFramebuffer(l.FRAMEBUFFER,c.framebuffer),l.viewport(0,0,c.width,c.height),h=="light"?l.clearColor(1,1,1,1):l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),u(p,Math.max(3,y.pointSize),y.pointAlpha*y.pointsAlpha,v),l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,y.width,y.height),f(c.texture,y.gamma)})}function REt(e,t,n,r){let i=e.derive([n.densityBandwidth],w=>gEt(w)+1),o=e.derive([n.width,i],(w,S)=>w+S*2),s=e.derive([n.height,i],(w,S)=>w+S*2);const a=e.derive([n.categoryCount],w=>w>1),l=e.statefulDerive([t,o,s,4,"f32"],Tf),c=e.statefulDerive([t,o,s,4,"f32"],Tf),u=e.statefulDerive([t,o,s,4,"f32"],Tf),f=e.statefulDerive([t,o,s,4,"f32"],Tf);let h=e.if(a,w=>Z4(w,t,r.x,r.y,w.assertNotNull(r.category),r.count),w=>Z4(w,t,r.x,r.y,null,r.count)),p=lEt(e,t,n.pointSize),g=yEt(e,t,n.densityBandwidth),y=EEt(e,t),v=xEt(e,t),b=_Et(e,t),_=bY(e,t);return e.derive([t,l,c,u,f,n.colorScheme,n.matrix,h,p,g,y,v,b,_],(w,S,k,E,T,M,I,$,C,L,F,N,O,D)=>B=>{let j=B.categoryColors??Jg(B.categoryCount),z=[];for(let Z=0;Z<4;Z++)if(Z<j.length){let{r:ct,g:gt,b:pt}=JI(j[Z]);ct=Math.pow(ct,B.gamma),gt=Math.pow(gt,B.gamma),pt=Math.pow(pt,B.gamma),z=z.concat([ct,gt,pt,1])}else z=z.concat([.5,.5,.5,1]);let U=B.width/k.width,V=B.height/k.height,Y=ZI([U,0,0,0,V,0,0,0,1],I);if(w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer),w.viewport(0,0,S.width,S.height),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),$(Y),w.bindFramebuffer(w.FRAMEBUFFER,k.framebuffer),w.viewport(0,0,k.width,k.height),M=="light"?w.clearColor(1,1,1,1):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),B.pointAlpha>0&&B.pointsAlpha>0&&(C(S.texture,E,T),w.bindFramebuffer(w.FRAMEBUFFER,k.framebuffer),F(E,B.pointAlpha,B.pointsAlpha,z,M)),B.densityScaler>0&&(B.densityAlpha>0||B.contoursAlpha>0)&&(L(S.texture,E,T),w.bindFramebuffer(w.FRAMEBUFFER,k.framebuffer),B.densityAlpha>0&&N(E,B.densityScaler,B.densityQuantizationStep,B.densityAlpha,z,M),B.contoursAlpha>0))for(let Z=0;Z<j.length;Z++){let ct=[0,0,0,0];ct[Z]=1,O(E,B.densityScaler,B.densityQuantizationStep,B.contoursAlpha,ct,z.slice(Z*4,Z*4+4))}w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,B.width,B.height),D(k.texture,B.gamma,1/U,1/V)})}function CEt(e,t,n,r,i,o){let s=e.derive([o],g=>_Y(g)+1),a=e.derive([r,s],(g,y)=>g+y*2),l=e.derive([i,s],(g,y)=>g+y*2);const c=e.statefulDerive([t,a,l,1,"f32"],Tf),u=e.statefulDerive([t,a,l,1,"f32"],Tf),f=e.statefulDerive([t,a,l,1,"f32"],Tf);let h=Z4(e,t,n.x,n.y,null,n.count),p=dEt(e,t,o);return e.derive([t,s,r,i,c,u,f,h,p],(g,y,v,b,_,w,S,k,E)=>T=>{let M=v/_.width,I=b/_.height,$=ZI([M,0,0,0,I,0,0,0,1],T);g.bindFramebuffer(g.FRAMEBUFFER,_.framebuffer),g.viewport(0,0,_.width,_.height),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),k($),E(_.texture,w,S),g.bindFramebuffer(g.FRAMEBUFFER,w.framebuffer);let C=new Float32Array(v*b);return g.readPixels(y,y,v,b,g.RED,g.FLOAT,C),g.bindFramebuffer(g.FRAMEBUFFER,null),C})}class NEt{i32View;u32View;f32View;offset;constructor(t){this.i32View=new Int32Array(t),this.u32View=new Uint32Array(t),this.f32View=new Float32Array(t),this.offset=0}align2(){this.offset%2!=0&&(this.offset+=2-this.offset%2)}align4(){this.offset%4!=0&&(this.offset+=4-this.offset%4)}f32(t){this.f32View[this.offset++]=t}u32(t){this.u32View[this.offset++]=t}i32(t){this.i32View[this.offset++]=t}vec2f(t,n){this.align2(),this.f32View[this.offset++]=t,this.f32View[this.offset++]=n}vec3f(t,n,r){this.align4(),this.f32View[this.offset++]=t,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r}vec4f(t,n,r,i){this.align4(),this.f32View[this.offset++]=t,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r,this.f32View[this.offset++]=i}mat3x3f(t){this.vec3f(t[0],t[1],t[2]),this.vec3f(t[3],t[4],t[5]),this.vec3f(t[6],t[7],t[8])}byteOffset(){return this.offset*4}}function $Et(e,t){let n=new ArrayBuffer(4288),r=e.statefulDerive([t,4288,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX],P0);return{buffer:r,update:e.derive([t,r],(i,o)=>s=>{let a=new NEt(n);a.u32(s.count),a.u32(s.category_count),a.i32(s.framebuffer_width),a.i32(s.framebuffer_height),a.i32(s.density_width),a.i32(s.density_height),a.f32(s.gamma),a.f32(s.point_size),a.f32(s.point_alpha),a.f32(s.points_alpha),a.f32(s.density_scaler),a.f32(s.quantization_step),a.f32(s.density_alpha),a.f32(s.contours_alpha),a.mat3x3f(s.matrix),a.vec2f(...s.view_xy_scaler),a.vec4f(...s.kde_causal),a.vec4f(...s.kde_anticausal),a.vec4f(...s.kde_a),a.vec4f(...s.background_color);let l=s.gamma;for(let c=0;c<Math.min(s.category_colors.length,256);c++){let{r:u,g:f,b:h,a:p}=s.category_colors[c];u=Math.pow(u,l),f=Math.pow(f,l),h=Math.pow(h,l),a.vec4f(u,f,h,p)}i.queue.writeBuffer(o,0,n,0,a.byteOffset())})}}const _k=64,wk=64;function wY(e,t,n,r,i,o){let s=e.derive([t,n,r.layouts],(a,l,c)=>a.createComputePipeline({layout:a.createPipelineLayout({bindGroupLayouts:[c.group0,c.group1,c.group2A]}),compute:{module:l,entryPoint:"accumulate"}}));return e.derive([s,r.group0,r.group1,r.group2A,o.countBuffer,i.count],(a,l,c,u,f,h)=>p=>{if(p.clearBuffer(f),h==0)return;let g=p.beginComputePass();g.setPipeline(a),g.setBindGroup(0,l),g.setBindGroup(1,c),g.setBindGroup(2,u),h<=_k*wk?g.dispatchWorkgroups(Math.ceil(h/_k)):g.dispatchWorkgroups(wk,Math.ceil(h/(_k*wk))),g.end()})}function OEt(e){const{COMPUTE:t,VERTEX:n,FRAGMENT:r}=GPUShaderStage;return{group0:e.createBindGroupLayout({entries:[{binding:0,visibility:t|n|r,buffer:{type:"uniform"}}]}),group1:e.createBindGroupLayout({entries:[{binding:0,visibility:t|n,buffer:{type:"read-only-storage"}},{binding:1,visibility:t|n,buffer:{type:"read-only-storage"}},{binding:2,visibility:t|n,buffer:{type:"read-only-storage"}}]}),group2A:e.createBindGroupLayout({entries:[{binding:0,visibility:t|r,buffer:{type:"storage"}}]}),group2B:e.createBindGroupLayout({entries:[{binding:1,visibility:t|r,buffer:{type:"storage"}},{binding:2,visibility:t|r,buffer:{type:"storage"}}]}),group3:e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}]})}}function xY(e,t,n,r,i){let o=e.derive([t],f=>OEt(f)),s=e.derive([t,o,n],(f,h,p)=>f.createBindGroup({layout:h.group0,entries:[{binding:0,resource:{buffer:p}}]})),a=e.derive([t,o,r.x,r.y,r.category],(f,h,p,g,y)=>f.createBindGroup({layout:h.group1,entries:[{binding:0,resource:{buffer:p}},{binding:1,resource:{buffer:g}},{binding:2,resource:{buffer:y??p}}]})),l=e.derive([t,o,i.countBuffer,i.blurBuffer],(f,h,p,g)=>f.createBindGroup({layout:h.group2A,entries:[{binding:0,resource:{buffer:p}}]})),c=e.derive([t,o,i.countBuffer,i.blurBuffer],(f,h,p,g)=>f.createBindGroup({layout:h.group2B,entries:[{binding:1,resource:{buffer:p}},{binding:2,resource:{buffer:g}}]})),u=e.derive([t,o,i.colorTexture,i.alphaTexture],(f,h,p,g)=>f.createBindGroup({layout:h.group3,entries:[{binding:0,resource:f.createSampler({})},{binding:1,resource:p.createView()},{binding:2,resource:g.createView()}]}));return{layouts:o,group0:s,group1:a,group2A:l,group2B:c,group3:u}}function DEt(e,t,n,r,i){const o=e.derive([t,n,r.layouts],(s,a,l)=>s.createRenderPipeline({layout:s.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B]}),vertex:{entryPoint:"draw_density_map_vs",module:a},fragment:{entryPoint:"draw_density_map_fs",module:a,targets:[{format:i.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:i.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return e.derive([o,r.group0,r.group1,r.group2B,i.colorTexture,i.alphaTexture],(s,a,l,c,u,f)=>h=>{let p=h.beginRenderPass({colorAttachments:[{loadOp:"load",storeOp:"store",view:u.createView()},{loadOp:"load",storeOp:"store",view:f.createView()}]});p.setPipeline(s),p.setBindGroup(0,a),p.setBindGroup(1,l),p.setBindGroup(2,c),p.draw(4),p.end()})}function LEt(e,t,n,r,i,o){const s=e.derive([t,n,r.layouts],(a,l,c)=>a.createRenderPipeline({layout:a.createPipelineLayout({bindGroupLayouts:[c.group0,c.group1]}),vertex:{entryPoint:"points_vs",module:l},fragment:{entryPoint:"points_fs",module:l,targets:[{format:o.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:o.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return e.derive([s,r.group0,r.group1,i.count,o.colorTexture,o.alphaTexture],(a,l,c,u,f,h)=>p=>{let g=p.beginRenderPass({colorAttachments:[{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:f.createView()},{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:h.createView()}]});g.setPipeline(a),g.setBindGroup(0,l),g.setBindGroup(1,c),u>0&&g.draw(4,u),g.end()})}function FEt(e,t,n,r,i){const o=e.derive([t,n,i.layouts],(s,a,l)=>s.createRenderPipeline({layout:s.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B,l.group3]}),vertex:{entryPoint:"gamma_correction_vs",module:a},fragment:{entryPoint:"gamma_correction_fs",module:a,targets:[{format:r}]},primitive:{topology:"triangle-strip"}}));return e.derive([o,i.group0,i.group1,i.group2B,i.group3],(s,a,l,c,u)=>(f,h)=>{let p=f.beginRenderPass({colorAttachments:[{clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store",view:h}]});p.setPipeline(s),p.setBindGroup(0,a),p.setBindGroup(1,l),p.setBindGroup(2,c),p.setBindGroup(3,u),p.draw(4),p.end()})}const CD=64;function SY(e,t,n,r,i,o,s){let a=e.derive([t,n,r.layouts],(c,u,f)=>c.createComputePipeline({layout:c.createPipelineLayout({bindGroupLayouts:[f.group0,f.group1,f.group2B,f.group3]}),compute:{module:u,entryPoint:"gaussian_blur_stage_1"}})),l=e.derive([t,n,r.layouts],(c,u,f)=>c.createComputePipeline({layout:c.createPipelineLayout({bindGroupLayouts:[f.group0,f.group1,f.group2B,f.group3]}),compute:{module:u,entryPoint:"gaussian_blur_stage_2"}}));return e.derive([a,l,r.group0,r.group1,r.group2B,r.group3,i,o,s],(c,u,f,h,p,g,y,v,b)=>_=>{let w=_.beginComputePass();w.setBindGroup(0,f),w.setBindGroup(1,h),w.setBindGroup(2,p),w.setBindGroup(3,g),w.setPipeline(c),w.dispatchWorkgroups(Math.ceil(y/CD),b),w.setPipeline(u),w.dispatchWorkgroups(Math.ceil(v/CD),b),w.end()})}function BEt(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);PEt(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),o=1+n[1]+n[2]+n[3]+n[4],s=(r[0]+r[1]+r[2]+r[3])/o,a=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:s,sum_anticausal:a}}function PEt(e,t,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),i=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,a=1.997/n,l=Float64Array.of(-i*Math.cos(s),i*Math.sin(s),-i*Math.cos(-s),i*Math.sin(-s),-o*Math.cos(a),o*Math.sin(a),-o*Math.cos(-a),o*Math.sin(-a)),c=n*2.5066282746310007,u=Float64Array.of(r[0],r[1],0,0,0,0,0,0),f=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let h,p;for(p=2;p<8;p+=2){for(u[p]=l[p]*u[p-2]-l[p+1]*u[p-1],u[p+1]=l[p]*u[p-1]+l[p+1]*u[p-2],h=p-2;h>0;h-=2)u[h]+=l[p]*u[h-2]-l[p+1]*u[h-1],u[h+1]+=l[p]*u[h-1]+l[p+1]*u[h-2];for(h=0;h<=p;h+=2)u[h]+=r[p]*f[h]-r[p+1]*f[h+1],u[h+1]+=r[p]*f[h+1]+r[p+1]*f[h];for(f[p+2]=l[p]*f[p]-l[p+1]*f[p+1],f[p+3]=l[p]*f[p+1]+l[p+1]*f[p],h=p;h>0;h-=2)f[h]+=l[p]*f[h-2]-l[p+1]*f[h-1],f[h+1]+=l[p]*f[h-1]+l[p+1]*f[h-2]}for(p=0;p<4;++p)h=p<<1,t[p]=u[h]/c,e[p+1]=f[h+2]}function AY(e){let t=BEt(e);return{kde_causal:[t.b_causal[0],t.b_causal[1],t.b_causal[2],t.b_causal[3]],kde_anticausal:[t.b_anticausal[1],t.b_anticausal[2],t.b_anticausal[3],t.b_anticausal[4]],kde_a:[t.a[1],t.a[2],t.a[3],t.a[4]]}}const zEt=`// Copyright (c) 2025 Apple Inc. Licensed under MIT License.

enable f16;

struct Uniforms {
  count: u32,
  category_count: u32,
  framebuffer_width: i32,
  framebuffer_height: i32,
  density_width: i32,
  density_height: i32,
  gamma: f32,
  point_size: f32,
  point_alpha: f32,
  points_alpha: f32,
  density_scaler: f32,
  quantization_step: f32,
  density_alpha: f32,
  contours_alpha: f32,
  matrix: mat3x3<f32>,
  view_xy_scaler: vec2<f32>,
  kde_causal: vec4<f32>,
  kde_anticausal: vec4<f32>,
  kde_a: vec4<f32>,
  background_color: vec4<f32>,
  category_colors: array<vec4<f32>, 256>,
}

struct PointData {
  position: vec3<f32>,
  category: u32,
}

struct FragmentOutput {
  @location(0) color: vec4<f32>,
  @location(1) log1malpha: f32, // log(1 - alpha)
}

@group(0) @binding(0) var<uniform> uniforms: Uniforms;

@group(1) @binding(0) var<storage, read> x_buffer: array<f32>;
@group(1) @binding(1) var<storage, read> y_buffer: array<f32>;
@group(1) @binding(2) var<storage, read> category_buffer: array<u32>;

@group(2) @binding(0) var<storage, read_write> count_buffer: array<atomic<u32>>;
@group(2) @binding(1) var<storage, read_write> blur_buffer: array<f16>;
@group(2) @binding(2) var<storage, read_write> blur_swap_buffer: array<f16>;

@group(3) @binding(0) var framebuffer_sampler: sampler;
@group(3) @binding(1) var color_texture: texture_2d<f32>;
@group(3) @binding(2) var log1malpha_texture: texture_2d<f32>;

fn get_point(index: u32) -> PointData {
  var result: PointData;
  result.position = vec3(x_buffer[index], y_buffer[index], 1.0);
  if (uniforms.category_count > 1) {
    result.category = (category_buffer[index >> 2] >> ((index & 3) << 3)) & 0xff;
  } else {
    result.category = 0;
  }
  return result;
}

const ACCUMULATE_UNIT: u32 = 4096;

fn increment_count(x: i32, y: i32, category: u32, value: u32) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  if (x < 0 || x >= width || y < 0 || y >= height || category >= uniforms.category_count || value == 0) {
    return;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  atomicAdd(&count_buffer[offset], value);
}

@compute @workgroup_size(64, 1)
fn accumulate(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let index = id.y * 4096 + id.x; // 4096 = 64 * 64
  if (index >= uniforms.count) { return; }
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;
  let x = (pos.x + 1.0) / 2.0 * f32(width) - 0.5;
  let y = (pos.y + 1.0) / 2.0 * f32(height) - 0.5;
  let ix = i32(x);
  let iy = i32(y);
  let tx = x - f32(ix);
  let ty = y - f32(iy);
  let w1: u32 = u32((1 - tx) * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w2: u32 = u32(tx * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w3: u32 = u32((1 - tx) * ty * f32(ACCUMULATE_UNIT));
  let w123 = w1 + w2 + w3;
  var w4: u32 = select(0, ACCUMULATE_UNIT - w123, w123 < ACCUMULATE_UNIT);
  increment_count(ix, iy, point.category, w1);
  increment_count(ix + 1, iy, point.category, w2);
  increment_count(ix, iy + 1, point.category, w3);
  increment_count(ix + 1, iy + 1, point.category, w4);
}

// Draw Discrete Points

struct PointsVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) dp: vec3<f32>,
  @location(1) color: vec4<f32>,
}

@vertex
fn points_vs(
  @builtin(instance_index) index: u32,
  @builtin(vertex_index) part: u32,
) -> PointsVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let alpha = uniforms.point_alpha * uniforms.points_alpha;
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;

  var out: PointsVertexOutput;
  out.position = vec4<f32>(pos.xy + dp * uniforms.point_size / framebuffer_size * 2.0, 0.0, 1.0);
  out.dp = vec3(dp, uniforms.point_size);
  out.color = uniforms.category_colors[point.category] * alpha;
  return out;
}

@fragment
fn points_fs(in: PointsVertexOutput) -> FragmentOutput {
  let r = length(in.dp.xy) * in.dp.z;
  let a = max(0.0, min(1.0, in.dp.z - r));
  var out: FragmentOutput;
  out.color = in.color * a;
  out.log1malpha = log(1 - out.color.a);
  return out;
}

// Draw Density Map

struct DrawDensityMapVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn draw_density_map_vs(
  @builtin(vertex_index) part: u32,
) -> DrawDensityMapVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: DrawDensityMapVertexOutput;
  out.position = vec4(dp, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, dp.y) + 1.0) / 2.0 * framebuffer_size;
  return out;
}

fn get_density_raw(x: i32, y: i32, category: u32) -> f32 {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let density_scaler = uniforms.density_scaler;
  if (x < 0 || x >= width || y < 0 || y >= height) {
    return 0.0;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  return max(0.0, f32(blur_buffer[offset]) * density_scaler);
}

fn get_density(x: f32, y: f32, category: u32) -> f32 {
  let px = x / f32(uniforms.framebuffer_width) * f32(uniforms.density_width) - 0.5;
  let py = y / f32(uniforms.framebuffer_height) * f32(uniforms.density_height) - 0.5;
  let ix = i32(px);
  let iy = i32(py);
  let tx = px - f32(ix);
  let ty = py - f32(iy);
  let v00 = get_density_raw(ix, iy, category);
  let v10 = get_density_raw(ix + 1, iy, category);
  let v01 = get_density_raw(ix, iy + 1, category);
  let v11 = get_density_raw(ix + 1, iy + 1, category);
  return mix(mix(v00, v10, tx), mix(v01, v11, tx), ty);
}

fn get_density_quantized(x: f32, y: f32, category: u32) -> f32 {
  let v = get_density(x, y, category);
  return floor(clamp(v, 0, 1) / uniforms.quantization_step);
}

fn get_density_quantized_sobel(x: f32, y: f32, category: u32) -> vec2<f32> {
  let v11 = get_density_quantized(x - 1, y - 1, category);
  let v21 = get_density_quantized(x, y - 1, category);
  let v31 = get_density_quantized(x + 1, y - 1, category);
  let v12 = get_density_quantized(x - 1, y, category);
  let v22 = get_density_quantized(x, y, category);
  let v32 = get_density_quantized(x + 1, y, category);
  let v13 = get_density_quantized(x - 1, y + 1, category);
  let v23 = get_density_quantized(x, y + 1, category);
  let v33 = get_density_quantized(x + 1, y + 1, category);
  let gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
  let gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
  return vec2(gx, gy);
}

@fragment
fn draw_density_map_fs(in: DrawDensityMapVertexOutput) -> FragmentOutput {
  let px = in.texture_coord.x;
  let py = in.texture_coord.y;
  let quantization_step: f32 = uniforms.quantization_step;

  var sum_color: vec4<f32> = vec4(0);
  var sum_log1malpha: f32 = 0.0;

  for (var i: u32 = 0; i < uniforms.category_count; i++) {
    let density = get_density(px, py, i);
    var alpha = min(1.0, floor(density / quantization_step) * quantization_step);
    alpha *= uniforms.density_alpha;
    let color = uniforms.category_colors[i] * alpha;
    sum_color += color;
    sum_log1malpha += log(1 - color.a);
  }

  if (uniforms.contours_alpha > 0.0) {
    for (var i: u32 = 0; i < uniforms.category_count; i++) {
      let sobel = get_density_quantized_sobel(px, py, i);
      let alpha = clamp(length(sobel) * 0.2, 0.0, 1.0) * uniforms.contours_alpha;
      let color = uniforms.category_colors[i] * alpha;
      sum_color += color;
      sum_log1malpha += log(1 - color.a);
    }
  }

  var out: FragmentOutput;
  out.color = sum_color;
  out.log1malpha = sum_log1malpha;
  return out;
}

// Gamma Correction

struct GammaCorrectionVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn gamma_correction_vs(
  @builtin(vertex_index) part: u32,
) -> GammaCorrectionVertexOutput {
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: GammaCorrectionVertexOutput;
  out.position = vec4(dp * uniforms.view_xy_scaler, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, -dp.y) + 1.0) / 2.0;
  return out;
}

@fragment
fn gamma_correction_fs(in: GammaCorrectionVertexOutput) -> @location(0) vec4<f32> {
  let sum_color = textureSample(color_texture, framebuffer_sampler, in.texture_coord);
  let sum_log_one_minus_alpha = textureSample(log1malpha_texture, framebuffer_sampler, in.texture_coord).r;
  var color: vec4<f32>;
  if (sum_color.a > 0.0) {
    color = sum_color / sum_color.a * (1.0 - exp(sum_log_one_minus_alpha));
    color = color + uniforms.background_color * (1 - color.a);
  } else {
    color = uniforms.background_color;
  }
  let rgb = pow(color.rgb, vec3(1.0 / uniforms.gamma));
  return vec4(rgb, 1.0);
}

// Gaussian Blur

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_1(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let x = id.x;
  if (x >= u32(width)) { return; }
  let start = x + id.y * u32(width * height);
  let count = u32(height);
  let stride = u32(width);

  deriche_conv_1d(
    &blur_buffer, &blur_swap_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    true
  );
}

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_2(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let y = id.x;
  if (y >= u32(height)) { return; }
  let start = y * u32(width) + id.y * u32(width * height);
  let count = u32(width);
  let stride = u32(1);

  deriche_conv_1d(
    &blur_swap_buffer, &blur_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    false
  );
}

fn deriche_conv_1d(
    src: ptr<storage, array<f16>, read_write>,
    dst: ptr<storage, array<f16>, read_write>,
    start: u32, stride: u32, count: u32,
    kde_causal: vec4<f32>, kde_anticausal: vec4<f32>, kde_a: vec4<f32>,
    src_is_u32: bool
) {
  var s: vec4<f32> = vec4(0.0);
  var y0: f32 = 0.0;
  var y1234: vec4<f32> = vec4(0.0);

  var first_nonzero: u32 = count;
  var last_nonzero: u32 = 0;

  for (var i: u32 = 0; i < count; i++) {
    let offset = start + i * stride;
    var input: f32;
    if (src_is_u32) {
      input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
    } else {
      input = f32((*src)[offset]);
    }
    if (input != 0.0) {
      first_nonzero = min(i, first_nonzero);
      last_nonzero = max(i, last_nonzero);
    }
    s = vec4(input, s.xyz);
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_causal, s) - dot(kde_a, y1234);
    (*dst)[offset] = f16(y0);
  }

  if (first_nonzero > last_nonzero) {
    return;
  }

  s = vec4(0.0);
  y0 = 0.0;
  y1234 = vec4(0.0);

  for (var i: u32 = count - 1 - last_nonzero; i < count; i++) {
    let p = count - 1 - i;
    let offset = start + p * stride;
    var input: f32 = 0.0;
    if (p >= first_nonzero) {
      if (src_is_u32) {
        input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
      } else {
        input = f32((*src)[offset]);
      }
    }
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_anticausal, s) - dot(kde_a, y1234);
    s = vec4(input, s.xyz);
    if (y0 != 0.0) {
      (*dst)[offset] = f16(f32((*dst)[offset]) + y0);
    }
  }
}
`;class UEt{props;viewport;df;device;module;uniforms;context;renderInputs;dataBuffers;renderer;constructor(t,n,r,i,o){this.context=t,this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:i,height:o},this.viewport=new Vx({x:0,y:0,scale:1},i,o),this.df=new pp;let s=this.df;this.renderInputs={mode:s.value(this.props.mode),colorScheme:s.value(this.props.colorScheme),xData:s.value(this.props.x),yData:s.value(this.props.y),categoryData:s.value(this.props.category),categoryCount:s.value(this.props.categoryCount),categoryColors:s.value(this.props.categoryColors),matrix:s.value(gY()),width:s.value(i),height:s.value(o),pointSize:s.value(this.props.pointSize),densityBandwidth:s.value(this.props.densityBandwidth)},this.device=s.value(n),this.dataBuffers=qEt(s,this.device,this.renderInputs),this.module=s.derive([this.device],a=>a.createShaderModule({code:zEt})),this.uniforms=$Et(s,this.device),this.renderer=jEt(s,this.device,this.module,this.uniforms,r,this.renderInputs,this.dataBuffers)}setProps(t){let n=!1,r;for(r in t)t[r]!==this.props[r]&&(this.props[r]=t[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.renderInputs.categoryColors.value=this.props.categoryColors,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,n}render(){this.renderer.value(this.props,this.context.getCurrentTexture().createView())}destroy(){this.df.destroy()}async densityMap(t,n,r,i){let o=this.df.subgraph(),{x:s,y:a,scale:l}=i,c=[l,0,0,0,l,0,-s*l,-a*l,1],u=yY(c),f=await VEt(o,this.device,this.module,this.uniforms,o.value(t),o.value(n),o.value(r),o.value(c),this.dataBuffers).value();return o.destroy(),{data:f,width:t,height:n,coordinateAtPixel:(h,p)=>{let g=h/t*2-1,y=p/n*2-1,v=mY([g,y,1],u);return{x:v[0],y:v[1]}}}}}function qEt(e,t,n){let r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST;const i=e.derive([n.xData],u=>u.length),o=e.derive([i],u=>u*4),s=i,a=e.statefulDerive([t,e.statefulDerive([t,o,r],P0),n.xData],fk),l=e.statefulDerive([t,e.statefulDerive([t,o,r],P0),n.yData],fk),c=e.statefulDerive([t,e.statefulDerive([t,s,r],P0),n.categoryData],fk);return{x:a,y:l,category:c,count:i}}function EY(e,t,n,r,i,o,s){let a="rgba16float",l="r16float",c=GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,u=e.statefulDerive([t,n,r,a,c],iD),f=e.statefulDerive([t,n,r,l,c],iD),h=e.derive([i,o,s],(v,b,_)=>v*b*_*4),p=e.derive([i,o,s],(v,b,_)=>v*b*_*2),g=e.statefulDerive([t,h,GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC],P0),y=e.statefulDerive([t,p,GPUBufferUsage.STORAGE],P0);return{colorTexture:u,alphaTexture:f,colorTextureFormat:a,alphaTextureFormat:l,countBuffer:g,blurBuffer:y}}function jEt(e,t,n,r,i,o,s){let a=e.derive([o.densityBandwidth],k=>Math.ceil(k*3)+1),l=e.derive([o.width,a],(k,E)=>k+E*2),c=e.derive([o.height,a],(k,E)=>k+E*2),u=e.derive([l],k=>Math.ceil(k/4)),f=e.derive([c],k=>Math.ceil(k/4)),h=EY(e,t,l,c,u,f,o.categoryCount),p=xY(e,t,r.buffer,s,h),g=wY(e,t,n,p,s,h),y=LEt(e,t,n,p,s,h),v=DEt(e,t,n,p,h),b=FEt(e,t,n,i,p),_=SY(e,t,n,p,l,c,o.categoryCount),w=e.derive([o.densityBandwidth,l,u],(k,E,T)=>AY(k/E*T)),S=e.derive([o.categoryColors,o.categoryCount],(k,E)=>(k==null&&(k=Jg(E)),k.map(T=>JI(T))));return e.derive([t,l,c,u,f,r.update,s.count,o.matrix,S,y,b,g,_,v,w],(k,E,T,M,I,$,C,L,F,N,O,D,B,j,z)=>(U,V)=>{let Y=U.colorScheme=="light"?[1,1,1,1]:[0,0,0,1],Z=U.width/E,ct=U.height/T,gt=ZI([Z,0,0,0,ct,0,0,0,1],L);$({count:C,category_count:U.categoryCount,framebuffer_width:E,framebuffer_height:T,density_width:M,density_height:I,gamma:U.gamma,point_size:Math.max(U.mode=="points"?3:1,U.pointSize),point_alpha:U.pointAlpha,points_alpha:U.pointsAlpha,density_scaler:U.densityScaler/16,quantization_step:U.densityQuantizationStep,density_alpha:U.densityAlpha,contours_alpha:U.contoursAlpha,matrix:gt,view_xy_scaler:[1/Z,1/ct],kde_causal:z.kde_causal,kde_anticausal:z.kde_anticausal,kde_a:z.kde_a,background_color:Y,category_colors:F});let pt=k.createCommandEncoder();N(pt),U.mode=="density"&&(U.densityAlpha>0||U.contoursAlpha>0)&&(D(pt),B(pt),j(pt)),O(pt,V),k.queue.submit([pt.finish()])})}function VEt(e,t,n,r,i,o,s,a,l){let c=EY(e,t,i,o,i,o,e.value(1)),u=xY(e,t,r.buffer,l,c),f=wY(e,t,n,u,l,c),h=SY(e,t,n,u,i,o,e.value(1));return e.derive([t,i,o,l.count,r.update,s,a,f,h,c.countBuffer],(p,g,y,v,b,_,w,S,k,E)=>()=>{let T=p.createCommandEncoder(),M=AY(_);b({count:v,category_count:1,framebuffer_width:g,framebuffer_height:y,density_width:g,density_height:y,gamma:1,point_size:0,point_alpha:0,points_alpha:0,density_scaler:0,quantization_step:0,density_alpha:0,contours_alpha:0,matrix:w,view_xy_scaler:[1,1],kde_causal:M.kde_causal,kde_anticausal:M.kde_anticausal,kde_a:M.kde_a,background_color:[0,0,0,0],category_colors:[]}),S(T),k(T);let I=p.createBuffer({size:g*y*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return T.copyBufferToBuffer(E,0,I,0,g*y*2),p.queue.submit([T.finish()]),I.mapAsync(GPUMapMode.READ,0,g*y*2).then(()=>WEt(I.getMappedRange()))})}function WEt(e){let t=new Uint16Array(e),n=new Uint32Array(t.length);for(let r=0;r<t.length;r++){let i=t[r]&32767,o=t[r]&32768,s=t[r]&31744;i<<=13,o<<=16,i+=939524096,i=s==0?0:i,i|=o,n[r]=i}return new Float32Array(n.buffer)}function YEt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ND={exports:{}},$D;function HEt(){return $D||($D=1,function(e){(function(){function t(a,l){var c=a.x-l.x,u=a.y-l.y;return c*c+u*u}function n(a,l,c){var u=l.x,f=l.y,h=c.x-u,p=c.y-f;if(h!==0||p!==0){var g=((a.x-u)*h+(a.y-f)*p)/(h*h+p*p);g>1?(u=c.x,f=c.y):g>0&&(u+=h*g,f+=p*g)}return h=a.x-u,p=a.y-f,h*h+p*p}function r(a,l){for(var c=a[0],u=[c],f,h=1,p=a.length;h<p;h++)f=a[h],t(f,c)>l&&(u.push(f),c=f);return c!==f&&u.push(f),u}function i(a,l,c,u,f){for(var h=u,p,g=l+1;g<c;g++){var y=n(a[g],a[l],a[c]);y>h&&(p=g,h=y)}h>u&&(p-l>1&&i(a,l,p,u,f),f.push(a[p]),c-p>1&&i(a,p,c,u,f))}function o(a,l){var c=a.length-1,u=[a[0]];return i(a,0,c,l,u),u.push(a[c]),u}function s(a,l,c){if(a.length<=2)return a;var u=l!==void 0?l*l:1;return a=c?a:r(a,u),a=o(a,u),a}e.exports=s,e.exports.default=s})()}(ND)),ND.exports}var GEt=HEt();const OD=YEt(GEt);function XEt(e,t){let n=e.slice();for(let r=0;r<t;r++){const i=[],o=n.length;for(let s=0;s<o;s++){const a=n[s],l=n[(s+1)%o],c={x:.75*a.x+.25*l.x,y:.75*a.y+.25*l.y},u={x:.25*a.x+.75*l.x,y:.25*a.y+.75*l.y};i.push(c,u)}n=i}return n}function KEt(e,t){const n=XEt(e,5),r=cY(n);let i=Math.max(r.xMax-r.xMin,r.yMax-r.yMin)/100,o=OD(n,i),s=0;for(;o.length>t&&s<20;)i*=1.1,s+=1,o=OD(n,i);return o}const DD={light:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#000",clusterLabelOutlineColor:"rgba(255,255,255,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#525252",statusBarBackgroundColor:"rgba(255,255,255,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}},dark:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#ccc",clusterLabelOutlineColor:"rgba(0,0,0,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#d9d9d9",statusBarBackgroundColor:"rgba(0,0,0,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}}};function JEt(e,t){return e==null?DD[t]:{...DD[t],...e,...e[t]!=null?e[t]:{}}}let xk=null,Q4=new Map;function ZEt(){return xk==null&&(xk=new Promise((e,t)=>{let n=new Worker(new URL(""+new URL("clustering.worker-BRoH1I5B.js",import.meta.url).href,import.meta.url),{type:"module"});n.onmessage=r=>{if(r.data.ready){e(n);return}if(r.data.id!=null){let i=Q4.get(r.data.id);i!=null&&(Q4.delete(r.data.id),i(r.data))}}})),xk}function Qg(e,t,n=[]){return new Promise((r,i)=>{ZEt().then(o=>{let s=new Date().getTime().toString()+"-"+Math.random().toString();Q4.set(s,a=>{r(a.payload)}),o.postMessage({id:s,name:e,payload:t},n)})})}let QEt=(e,t,n,r)=>Qg("findClusters",[e,t,n,r],[e.buffer]),tkt=(...e)=>Qg("dynamicLabelPlacement",e),ekt=(...e)=>Qg("textSummarizerCreate",e),nkt=(...e)=>Qg("textSummarizerDestroy",e),rkt=(...e)=>Qg("textSummarizerAdd",e),ikt=(...e)=>Qg("textSummarizerSummarize",e);function okt(e,t,n,r,i,o,s){let a=Math.max(r,i)/o,l=e/(n*n)/(a*a),c=1/(l/(o*o))*.2,u=Math.sqrt(e/t/(a*a)),f=Math.log(u),h=Math.log(n),p=(Math.min(Math.max((h-f)*2,-1),1)+1)/2,g;if(s!=null)g=s*o;else{let b=.25/Math.sqrt(l);g=Math.max(.2,Math.min(5,b))*o}let y=1-p,v=.5+p*.5;return{densityScaler:c,densityAlpha:y,contoursAlpha:y,pointSize:g,pointAlpha:.7,pointsAlpha:v,densityBandwidth:20}}var skt=gh("<div></div>"),akt=Wu("<circle></circle>"),lkt=Wu("<circle></circle>"),ckt=Wu('<text dominant-baseline="middle"> </text>'),ukt=Wu("<g></g>"),fkt=Wu("<g><!></g>"),hkt=Wu("<g></g>"),dkt=gh('<div><canvas></canvas> <div><!></div> <svg role="none"><!><!><!><!></svg> <!> <!></div>');function pkt(e,t){fp(t,!0);let n=oe(t,"data",19,()=>({x:new Float32Array,y:new Float32Array,category:null})),r=oe(t,"categoryCount",3,1),i=oe(t,"categoryColors",3,null),o=oe(t,"width",3,800),s=oe(t,"height",3,800),a=oe(t,"pixelRatio",3,2),l=oe(t,"colorScheme",3,"light"),c=oe(t,"theme",3,null),u=oe(t,"mode",3,"density"),f=oe(t,"minimumDensity",3,1/16),h=oe(t,"totalCount",3,null),p=oe(t,"maxDensity",3,null),g=oe(t,"automaticLabels",3,!1),y=oe(t,"queryClusterLabels",3,null),v=oe(t,"tooltip",7,null),b=oe(t,"selection",7,null),_=oe(t,"querySelection",3,null),w=oe(t,"rangeSelection",7,null),S=oe(t,"defaultViewportState",3,null),k=oe(t,"viewportState",7,null),E=oe(t,"userPointSize",3,null),T=oe(t,"customTooltip",3,null),M=oe(t,"customOverlay",3,null),I=oe(t,"onViewportState",3,null),$=oe(t,"onTooltip",3,null),C=oe(t,"onSelection",3,null),L=oe(t,"onRangeSelection",3,null),F=ae(()=>JEt(c(),l())),N=ae(()=>i()??Jg(r())),O=ae(()=>k()??S()??{x:0,y:0,scale:1}),D=ae(()=>new Vx(X(O),o(),s())),B=ae(()=>X(D).pixelLocationFunction()),j=ae(()=>X(D).coordinateAtPixelFunction());function z(Rt,Yt){return Rt.x==Yt.x&&Rt.y==Yt.y&&Rt.category==Yt.category&&Rt.text==Yt.text}let U=ae(()=>b()?.length==1&&v()!=null&&z(b()[0],v()));function V(Rt){kf(k(),Rt)||(k(Rt),I()?.(Rt))}function Y(Rt){kf(v(),Rt)||(v(Rt),$()?.(Rt))}function Z(Rt){kf(b(),Rt)||(b(Rt),C()?.(Rt))}function ct(Rt){kf(w(),Rt)||(w(Rt),L()?.(Rt))}let gt=Ar(td([])),pt=Ar(null),lt=Ar("none"),yt=ae(()=>o()*a()),at=ae(()=>s()*a()),vt=Ar(null),st=Ar(null),Q=Ar(null),It=ae(()=>okt(p()??(h()??n().x.length)/4,f(),X(O).scale,X(yt),X(at),a(),E())),_t=ae(()=>X(It).pointSize),Dt=!0;Ux(()=>{X(st)?.setProps({mode:u(),colorScheme:l(),viewportX:X(O).x,viewportY:X(O).y,viewportScale:X(O).scale,width:X(yt),height:X(at),x:n().x,y:n().y,category:n().category,categoryCount:r(),categoryColors:X(N),...X(It)})&&(qt(),g()!==!1&&Dt&&X(st)!=null&&n().x!=null&&n().x.length>0&&S()!=null&&(Dt=!1,Ti(S())))});function Ut(){xt=null,!(!X(vt)||!X(st))&&(X(vt).width=X(st).props.width,X(vt).height=X(st).props.height,X(vt).style.width=`${X(st).props.width/a()}px`,X(vt).style.height=`${X(st).props.height/a()}px`,X(st).render())}let xt=null;function qt(){xt==null&&(xt=requestAnimationFrame(Ut))}function ue(Rt){let Yt;function Vt(){Yt=Rt.getContext("webgl2",{antialias:!1}),Yt.getExtension("EXT_color_buffer_float"),Yt.getExtension("EXT_float_blend"),Yt.getExtension("OES_texture_float_linear"),De(st,new kEt(Yt,X(yt),X(at)),!0)}Vt(),Rt.addEventListener("webglcontextlost",()=>{X(st)?.destroy(),De(st,null),Yt=null}),Rt.addEventListener("webglcontextrestored",()=>{Vt()})}function Wt(Rt){async function Yt(){let Vt=Rt.getContext("webgpu");if(Vt==null){console.error("Could not get WebGPU canvas context");return}let Gt=await navigator.gpu.requestAdapter();if(!Gt){console.error("Could not request WebGPU adapter");return}let Qt=512*1048576,$e=512*1048576;Qt=Math.min(Qt,Gt.limits.maxBufferSize),$e=Math.min($e,Gt.limits.maxStorageBufferBindingSize);let rn={requiredLimits:{maxBufferSize:Qt,maxStorageBufferBindingSize:$e},requiredFeatures:["shader-f16"]},At=await Gt.requestDevice(rn);At.lost.then(Lt=>{console.info(`WebGPU device was lost: ${Lt.message}`),Lt.reason!="destroyed"&&(X(st)?.destroy(),De(st,null),Yt())});let Ct=navigator.gpu.getPreferredCanvasFormat();Vt.configure({device:At,format:Ct,alphaMode:"premultiplied"}),De(st,new UEt(Vt,At,Ct,X(yt),X(at)),!0)}Yt()}function re(Rt){Rt!=null&&k()==null&&V(Rt)}Ux(()=>re(S())),GI(()=>{X(vt)!=null&&(pW()?Wt(X(vt)):(ue(X(vt)),De(Q,"WebGPU is unavailable. If you are using Safari, please enable the WebGPU feature flag.")))}),aAt(()=>{X(st)?.destroy(),De(st,null)});function Ke(Rt,Yt){let{x:Vt,y:Gt,scale:Qt}=X(O);Y(null);let $e=Math.min(100,Math.max(.01,Qt*Rt)),rn=X(vt).getBoundingClientRect(),At=Math.max(rn.width,rn.height),Ct=(Yt.x-rn.width/2)/At*2,Lt=(rn.height/2-Yt.y)/At*2,Ve=Vt+Ct/Qt-Ct/$e,Ge=Gt+Lt/Qt-Lt/$e;V({x:Ve,y:Ge,scale:$e})}function le(Rt,Yt){Y(null);let Vt="pan";switch(X(lt)!="none"?Yt.shift||(Vt=X(lt)):Yt.shift&&(Vt=Yt.meta?"lasso":"marquee"),Vt){case"marquee":return{move:Gt=>{if(Y(null),X(st)==null)return;let Qt=X(j)(Rt.x,Rt.y),$e=X(j)(Gt.x,Gt.y);ct({xMin:Math.min(Qt.x,$e.x),yMin:Math.min(Qt.y,$e.y),xMax:Math.max(Qt.x,$e.x),yMax:Math.max(Qt.y,$e.y)})}};case"lasso":{let Gt=[X(j)(Rt.x,Rt.y)];return{move:Qt=>{Y(null),X(st)!=null&&(Gt=[...Gt,X(j)(Qt.x,Qt.y)],Gt.length>=3&&ct(KEt(Gt,24)))}}}case"pan":{let Gt=X(j)(0,0),Qt=X(j)(1,1),$e=Gt.x-Qt.x,rn=Gt.y-Qt.y,At=X(O).x,Ct=X(O).y;return{move:Lt=>{V({x:At+(Lt.x-Rt.x)*$e,y:Ct+(Lt.y-Rt.y)*rn,scale:X(O).scale})}}}}}async function _n(Rt,Yt){if(w()!=null)ct(null);else{const Vt=await cr(Rt);if(Vt==null)Z([]),Y(null);else if(Yt.shift||Yt.ctrl||Yt.meta){let Gt=b()?.findIndex(Qt=>Qt.x==Vt.x&&Qt.y==Vt.y&&Qt.category==Vt.category);b()==null||Gt==null||Gt<0?(Z([...b()??[],Vt]),Y(Vt)):(Z([...b().slice(0,Gt),...b().slice(Gt+1)]),Y(null))}else Z([Vt]),Y(Vt)}}async function pn(Rt){if(b()!=null&&b().length==1){let Yt=X(B)(b()[0].x,b()[0].y);Rt!=null&&SAt(Rt,Yt)<10&&Y(b()[0])}else Y(await cr(Rt))}async function cr(Rt){if(X(st)==null||Rt==null||_()==null)return null;let{x:Yt,y:Vt}=X(j)(Rt.x,Rt.y),Gt=Math.abs(X(j)(Rt.x+1,Rt.y).x-Yt);return await _()(Yt,Vt,Gt)}function xr(){return v()!=null}let qe=ae(()=>X(vt)?xAt(X(vt),{zoom:Ke,drag:le,hover:wAt(pn,xr),click:_n}):null);async function nn(Rt,Yt,Vt){let Gt=await Rt.densityMap(1e3,1e3,Yt,Vt),Qt=await QEt(Gt.data,Gt.width,Gt.height),$e=[];for(let At=0;At<Qt.length;At++){let Ct=Qt[At],Lt=Gt.coordinateAtPixel(Ct.meanX,Ct.meanY),Ve=Ct.boundaryRectApproximation.map(([Ge,cn,gn,se])=>{let un=Gt.coordinateAtPixel(Ge,cn),Gn=Gt.coordinateAtPixel(gn,se);return{xMin:Math.min(un.x,Gn.x),xMax:Math.max(un.x,Gn.x),yMin:Math.min(un.y,Gn.y),yMax:Math.max(un.y,Gn.y)}});$e.push({x:Lt.x,y:Lt.y,sumDensity:Ct.sumDensity,rects:Ve,bandwidth:Yt})}let rn=$e.reduce((At,Ct)=>Math.max(At,Ct.sumDensity),0)*.005;return $e.filter(At=>At.sumDensity>rn)}async function Pn(Rt){if(X(st)==null)return[];let Yt=await EAt({generateLabels:Rt});if(typeof g()=="object"&&g().cache){let Qt=await g().cache.get(Yt);if(Qt!=null)return Qt}De(pt,"Generating clusters...");let Vt=await nn(X(st),10,Rt);if(Vt=Vt.concat(await nn(X(st),5,Rt)),De(pt,"Generating labels..."),y()){let Qt=await y()(Vt.map($e=>$e.rects));for(let $e=0;$e<Vt.length;$e++)Vt[$e].label=Qt[$e]}let Gt=Vt.filter(Qt=>Qt.label!=null).map(Qt=>({text:Qt.label,x:Qt.x,y:Qt.y,priority:Qt.sumDensity,level:Qt.bandwidth==10?0:1}));return typeof g()=="object"&&g().cache&&await g().cache.set(Yt,Gt),Gt}async function Ti(Rt){if(X(st)==null)return;let Yt=new Vx(Rt,o(),s()),Vt=await Pn(Rt),Gt=Rt.scale,Qt=Rt.scale/2,$e=Qt*4,rn=Vt.map(Ct=>{let Lt=Yt.pixelLocation(Ct.x,Ct.y),Ve=Ct.level==0?14:12,Ge=QAt({text:Ct.text,fontSize:Ve,fontFamily:X(F).fontFamily});Ge.width+=4,Ge.height+=4;let cn=Gt/$e;return{text:Ct.text,fontSize:Ve,bounds:{xMin:Lt.x-Ge.width/2,xMax:Lt.x+Ge.width/2,yMin:Lt.y-Ge.height/2,yMax:Lt.y+Ge.height/2},locationAtZero:Lt,priority:Ct.priority,minScale:Ct.level==0?cn/1.2:null,maxScale:Ct.level==0?null:cn,coordinate:{x:Ct.x,y:Ct.y},placement:null}}),At=await tkt(rn,{globalMaxScale:Gt/Qt});for(let Ct=0;Ct<At.length;Ct++){let Lt=At[Ct];if(Lt!=null){let Ve=Gt/Lt.minScale,Ge=Gt/Lt.maxScale;rn[Ct].placement={minScale:Ge,maxScale:Ve}}}De(gt,rn,!0),De(pt,null)}class Yo{content;constructor(Yt,Vt){let Gt=document.createElement("div");this.content=Gt,this.update(Vt),Yt.appendChild(Gt)}update(Yt){let Vt=this.content;Vt.style.fontFamily=Yt.fontFamily,l()=="light"?(Vt.style.color="#000",Vt.style.background="#fff",Vt.style.border="1px solid #000"):(Vt.style.color="#ccc",Vt.style.background="#000",Vt.style.border="1px solid #ccc"),Vt.style.borderRadius="2px",Vt.style.padding="5px",Vt.style.fontSize="12px",Vt.style.maxWidth="300px",Vt.innerText=Yt.tooltip.text??JSON.stringify(Yt.tooltip)}}var yo=dkt();let mi;var yi=Oi(yo);An(yi,"",{},{position:"absolute",top:"0",left:"0"}),K4(yi,Rt=>De(vt,Rt),()=>X(vt));var ws=Or(yi,2);let Qu;var pm=Oi(ws);{var tf=Rt=>{var Yt=Ym();const Vt=ae(()=>uY(M())),Gt=ae(()=>({location:X(B),width:o(),height:s()}));var Qt=p0(Yt);lAt(Qt,()=>X(Vt),$e=>{var rn=skt();hAt(rn,(At,Ct)=>X(Vt)?.(At,Ct),()=>fY(M(),{proxy:X(Gt)})),Xr($e,rn)}),Xr(Rt,Yt)};Zo(pm,Rt=>{M()&&Rt(tf)})}hi(ws);var vo=Or(ws,2);vo.__mousedown=function(...Rt){X(qe)?.mousedown?.apply(this,Rt)},vo.__mousemove=function(...Rt){X(qe)?.mousemove?.apply(this,Rt)},An(vo,"",{},{position:"absolute",left:"0",top:"0"});var Lc=Oi(vo);{var kh=Rt=>{var Yt=Ym();const Vt=ae(()=>{const{x:rn,y:At}=X(B)(v().x,v().y);return{x:rn,y:At}}),Gt=ae(()=>Math.max(3,X(_t)/a())+1);var Qt=p0(Yt);{var $e=rn=>{var At=akt();let Ct;Ds(Lt=>{Kt(At,"cx",X(Vt).x),Kt(At,"cy",X(Vt).y),Kt(At,"r",X(Gt)),Ct=An(At,"",Ct,Lt)},[()=>({stroke:l()=="light"?"#000":"#fff","stroke-width":1,fill:"none"})]),Xr(rn,At)};Zo(Qt,rn=>{isFinite(X(Vt).x)&&isFinite(X(Vt).y)&&isFinite(X(Gt))&&rn($e)})}Xr(Rt,Yt)};Zo(Lc,Rt=>{v()!=null&&X(st)!=null&&Rt(kh)})}var Th=Or(Lc);{var Sp=Rt=>{var Yt=Ym(),Vt=p0(Yt);pk(Vt,17,b,dk,(Gt,Qt)=>{var $e=Ym();const rn=ae(()=>{const{x:Ge,y:cn}=X(B)(X(Qt).x,X(Qt).y);return{x:Ge,y:cn}}),At=ae(()=>X(Qt).category!=null?X(N)[X(Qt).category]:X(N)[0]),Ct=ae(()=>Math.max(3,X(_t)/a())+1);var Lt=p0($e);{var Ve=Ge=>{var cn=lkt();let gn;Ds(se=>{Kt(cn,"cx",X(rn).x),Kt(cn,"cy",X(rn).y),Kt(cn,"r",X(Ct)),gn=An(cn,"",gn,se)},[()=>({stroke:l()=="light"?"#000":"#fff","stroke-width":2,fill:X(At)})]),Xr(Ge,cn)};Zo(Lt,Ge=>{isFinite(X(rn).x)&&isFinite(X(rn).y)&&isFinite(X(Ct))&&Ge(Ve)})}Xr(Gt,$e)}),Xr(Rt,Yt)};Zo(Th,Rt=>{b()!=null&&X(st)!=null&&Rt(Sp)})}var Mh=Or(Th);{var gm=Rt=>{var Yt=hkt();pk(Yt,21,()=>X(gt),dk,(Vt,Gt)=>{var Qt=fkt();const $e=ae(()=>X(Gt).text.split(`
`)),rn=ae(()=>X(B)(X(Gt).coordinate.x,X(Gt).coordinate.y)),At=ae(()=>X(Gt).placement!=null&&X(Gt).placement.minScale<=X(O).scale&&X(O).scale<=X(Gt).placement.maxScale);var Ct=Oi(Qt);{var Lt=Ve=>{var Ge=ukt();pk(Ge,21,()=>X($e),dk,(cn,gn,se)=>{var un=ckt();Kt(un,"x",0);let Gn;var Bi=Oi(un,!0);hi(un),Ds(Cr=>{Kt(un,"y",(se-(X($e).length-1)/2)*X(Gt).fontSize),Kt(un,"font-size",X(Gt).fontSize),Gn=An(un,"",Gn,Cr),Py(Bi,X(gn))},[()=>({"paint-order":"stroke","stroke-width":"4","stroke-linejoin":"round","stroke-linecap":"round","text-anchor":"middle",fill:X(F).clusterLabelColor,stroke:X(F).clusterLabelOutlineColor,opacity:X(F).clusterLabelOpacity,"user-select":"none","-webkit-user-select":"none","font-family":X(F).fontFamily})]),Xr(cn,un)}),hi(Ge),Xr(Ve,Ge)};Zo(Ct,Ve=>{X(At)&&Ve(Lt)})}hi(Qt),Ds(()=>Kt(Qt,"transform",`translate(${X(rn).x??""},${X(rn).y??""})`)),Xr(Vt,Qt)}),hi(Yt),Xr(Rt,Yt)};Zo(Mh,Rt=>{Rt(gm)})}var Ih=Or(Mh);{var Ap=Rt=>{var Yt=Ym(),Vt=p0(Yt);{var Gt=$e=>{TAt($e,{get value(){return w()},get pointLocation(){return X(B)}})},Qt=$e=>{{let rn=ae(()=>X(qe)?.preventHover??(()=>{}));_At($e,{get value(){return w()},onChange:ct,get pointLocation(){return X(B)},get coordinateAtPoint(){return X(j)},get preventHover(){return X(rn)}})}};Zo(Vt,$e=>{w()instanceof Array?$e(Gt):$e(Qt,!1)})}Xr(Rt,Yt)};Zo(Ih,Rt=>{w()!=null&&X(st)!=null&&Rt(Ap)})}hi(vo);var Rh=Or(vo,2);{var mm=Rt=>{const Yt=ae(()=>X(B)(v().x,v().y));{let Vt=ae(()=>Math.max(3,X(_t)/a())),Gt=ae(()=>T()??{class:Yo,props:{colorScheme:l(),fontFamily:X(F).fontFamily}});PAt(Rt,{get location(){return X(Yt)},get allowInteraction(){return X(U)},get targetHeight(){return X(Vt)},get customTooltip(){return X(Gt)},get tooltip(){return v()}})}};Zo(Rh,Rt=>{v()!=null&&X(st)!=null&&Rt(mm)})}var ef=Or(Rh,2);{var ym=Rt=>{{let Yt=ae(()=>X(pt)??X(Q)),Vt=ae(()=>1/(X(B)(1,0).x-X(B)(0,0).x));LAt(Rt,{get resolvedTheme(){return X(F)},get statusMessage(){return X(Yt)},get distancePerPoint(){return X(Vt)},get pointCount(){return n().x.length},get selectionMode(){return X(lt)},onSelectionMode:Gt=>De(lt,Gt,!0)})}};Zo(ef,Rt=>{X(F).statusBar&&Rt(ym)})}return hi(yo),Ds((Rt,Yt)=>{mi=An(yo,"",mi,Rt),Qu=An(ws,"",Qu,Yt),Kt(vo,"width",o()),Kt(vo,"height",s())},[()=>({width:`${o()??""}px`,height:`${s()??""}px`,position:"relative"}),()=>({width:`${o()??""}px`,height:`${s()??""}px`,position:"absolute",top:"0",left:"0"})]),dD("wheel",vo,function(...Rt){X(qe)?.wheel?.apply(this,Rt)}),dD("mouseleave",vo,function(...Rt){X(qe)?.mouseleave?.apply(this,Rt)}),Xr(e,yo),hp({updateLabels:Ti})}HI(["mousedown","mousemove"]);function LD(e,t){if(t.length==0)return Zt(!1);if(e.identifier!=null){let n=e.identifier;return Oo(...t.map(r=>Ns(Mt(n),Zt(r.identifier))))}else{let n=e.x,r=e.y,i=e.category;return i!=null?Oo(...t.map(o=>Li(Ns(Kr(Mt(n),"DOUBLE"),Zt(o.x)),Ns(Kr(Mt(r),"DOUBLE"),Zt(o.y)),Ns(Kr(Mt(i),"INTEGER"),Zt(o.category))))):Oo(...t.map(o=>Li(Ns(Kr(Mt(n),"DOUBLE"),Zt(o.x)),Ns(Kr(Mt(r),"DOUBLE"),Zt(o.y)))))}}function gkt(e,t,n){let r=[];for(let o=0;o<n.length;o++){let s=(o+1)%n.length,{x:a,y:l}=n[o],{x:c,y:u}=n[s],f=l<u?Li(sc(Zt(l),t),fi(t,Zt(u))):Li(sc(Zt(u),t),fi(t,Zt(l))),h=(l<u?fi:ba)(Be(Pe(Zt(c-a),t),Pe(Zt(u-l),e)),Zt((c-a)*l-(u-l)*a));r.push(Kr(Li(f,h),"INT"))}let i=r.reduce((o,s)=>tr(o,s));return Ns(pyt(i,Zt(2)),Zt(1))}function mkt(e,t){if(t instanceof Array){if(t.length<3)return Zt(!1);let n=cY(t);return Li(Do(Mt(e.x),[n.xMin,n.xMax]),Do(Mt(e.y),[n.yMin,n.yMax]),gkt(Mt(e.x),Mt(e.y),t))}else return Li(Do(Mt(e.x),[t.xMin,t.xMax]),Do(Mt(e.y),[t.yMin,t.yMax]))}async function ykt(e,t){let{x:n,y:r,table:i}=t,o=await e.query(zt.from(i).select({centerX:ee`MEDIAN(${Mt(n)})`,centerY:ee`MEDIAN(${Mt(r)})`,stdX:ee`STDDEV(${Mt(n)})`,stdY:ee`STDDEV(${Mt(r)})`,...t.category!=null?{maxCategory:ee`MAX(${Mt(t.category)}::UTINYINT)`}:{}})),{centerX:s,centerY:a,stdX:l,stdY:c,maxCategory:u}=o.get(0),f=1/(Math.max(l,c,.001)*3),h=.1/f,p=ee`FLOOR((${Mt(n)} - ${s}) / ${h})`,g=ee`FLOOR((${Mt(r)} - ${a}) / ${h})`,y=t.category!=null?Mt(t.category):null,v=y!=null?[p,g,y]:[p,g],b=zt.from(zt.from(i).select({count:ee`COUNT(*)`}).groupby(...v)).select({totalCount:ee`SUM(count)::INT`,maxCount:ee`MAX(count)::INT`});o=await e.query(b);let{maxCount:_,totalCount:w}=o.get(0),S=_/(h*h);return{centerX:s,centerY:a,scaler:f,totalCount:w,categoryCount:(u??0)+1,maxDensity:S}}let vkt=class{coordinator;source;lastDistance;selectParams;constructor(t,n){this.coordinator=t,this.source=n,this.lastDistance=0;let{x:r,y:i,category:o,text:s,identifier:a}=this.source,l={},c=n.additionalFields??{};for(let u in c){let f=c[u];typeof f=="string"?l["field_"+u]=Mt(f):l["field_"+u]=ee`${f.sql}`}this.selectParams={x:ee`${Mt(r)}::DOUBLE`,y:ee`${Mt(i)}::DOUBLE`,...o!=null?{category:ee`${Mt(o)}::INT`}:{},...s!=null?{text:ee`${Mt(s)}`}:{},...a!=null?{identifier:ee`${Mt(a)}`}:{},...l}}_convertToDataPoint(t){let n={};for(let r in t)r.startsWith("field_")&&(n[r.slice(6)]=t[r]);return{x:t.x,y:t.y,category:t.category,text:t.text,identifier:t.identifier,fields:n}}async queryClosestPoint(t,n,r,i){let o=i*12,{x:s,y:a}=this.source;for(let l of[this.lastDistance,o]){if(l==0||l>o)continue;let c=zt.from(this.source.table).select(this.selectParams);c=c.where(ee`${Mt(s)} BETWEEN ${n-l} AND ${n+l}`),c=c.where(ee`${Mt(a)} BETWEEN ${r-l} AND ${r+l}`),t&&(c=c.where(t)),c=c.orderby(ee`(x - (${n}))**2 + (y - (${r}))**2`).limit(1);let u=(await this.coordinator.query(c)).get(0);if(u)return this.lastDistance=Math.max(Math.abs(u.x-n),Math.abs(u.y-r))*4,this._convertToDataPoint(u)}return null}async queryPoints(t){let{table:n,identifier:r}=this.source;if(r==null)return[];let i=zt.from(n).select(this.selectParams);return i=i.where(Nd(Mt(r),t.map(o=>Zt(o)))),Array.from(await this.coordinator.query(i)).map(o=>this._convertToDataPoint(o))}};function bkt(e){let t=e.coordinator??Ya(),n=new _kt({...e,coordinator:t});return t.connect(n),n.destroy=()=>{t.disconnect(n)},n}let _kt=class extends ch{_spec;constructor(t){super(t.selection??void 0),this._spec={...t}}query(t){return this._spec.query(t)}queryResult(t){return this._spec.queryResult?.(t),this}queryPending(){return this._spec.queryPending?.(),this}queryError(t){return this._spec.queryError?.(t),this}};function wkt(e,t){fp(t,!0);let n=oe(t,"coordinator",19,Ya),r=oe(t,"category",3,null),i=oe(t,"text",3,null),o=oe(t,"identifier",3,null),s=oe(t,"filter",3,null),a=oe(t,"categoryColors",3,null),l=oe(t,"tooltip",3,null),c=oe(t,"additionalFields",3,null),u=oe(t,"selection",3,null),f=oe(t,"rangeSelection",3,null),h=oe(t,"rangeSelectionValue",3,null),p=oe(t,"width",3,null),g=oe(t,"height",3,null),y=oe(t,"pixelRatio",3,null),v=oe(t,"colorScheme",3,"light"),b=oe(t,"theme",3,null),_=oe(t,"viewportState",3,null),w=oe(t,"automaticLabels",3,!1),S=oe(t,"mode",3,"density"),k=oe(t,"minimumDensity",3,1/16),E=oe(t,"pointSize",3,null),T=oe(t,"customTooltip",3,null),M=oe(t,"customOverlay",3,null),I=oe(t,"onViewportState",3,null),$=oe(t,"onTooltip",3,null),C=oe(t,"onSelection",3,null),L=oe(t,"onRangeSelection",3,null),F=Ar(new Float32Array),N=Ar(new Float32Array),O=Ar(null),D=Ar(1),B=Ar(1),j=Ar(1),z=Ar(null),U=Ar(null),V=Ar(null),Y=Ar(null),Z=Ar(null);Qc(()=>{let st={coordinator:n(),source:{table:t.table,x:t.x,y:t.y,category:r()}},Q=null,It=!1;async function _t(){let Dt=st.source,Ut=await ykt(st.coordinator,Dt);if(It)return;let xt=Ut.scaler*.95;De(z,{x:Ut.centerX,y:Ut.centerY,scale:xt}),De(B,Ut.totalCount),De(j,Ut.maxDensity),De(D,Ut.categoryCount),Q=bkt({coordinator:st.coordinator,selection:s(),query:qt=>zt.from(Dt.table).select({x:ee`${Mt(Dt.x)}::FLOAT`,y:ee`${Mt(Dt.y)}::FLOAT`,...Dt.category!=null?{c:ee`${Mt(Dt.category)}::UTINYINT`}:{}}).where(qt),queryResult:qt=>{let ue=qt.getChild("x").toArray(),Wt=qt.getChild("y").toArray(),re=qt.getChild("c")?.toArray()??null;ue!=null&&!(ue instanceof Float32Array)&&(ue=new Float32Array(ue)),Wt!=null&&!(Wt instanceof Float32Array)&&(Wt=new Float32Array(Wt)),re!=null&&!(re instanceof Uint8Array)&&(re=new Uint8Array(re)),De(F,ue),De(N,Wt),De(O,re),ct(null),gt(null)}}),Q.reset=()=>{pt()},De(Z,Q)}return _t(),()=>{De(Z,null),It=!0,Q?.destroy()}}),Qc(()=>{if(Lo(l())){let st=X(Z);if(st==null)return;let Q=l();De(U,Q.value);let It=()=>{De(U,Q.value)};return Qc(()=>{let _t=X(U),Dt={x:t.x,y:t.y,category:r(),identifier:o()};Q.update({source:st,clients:new Set().add(st),predicate:_t!=null?LD(Dt,[_t]):null,value:_t})}),Q.addEventListener("value",It),()=>{Q.removeEventListener("value",It),Q.update({source:st,clients:new Set().add(st),value:null,predicate:null})}}else if(l()==null||typeof l()=="object")De(U,l());else{if(X(U)?.identifier==l())return;let st=!1;return at([l()]).then(Q=>{st||(Q.length>0?De(U,Q[0]):De(U,null))}),()=>{st=!0}}});function ct(st){kf(l(),st)||(De(U,st),$()?.(st))}Qc(()=>{if(Lo(u())){let st=X(Z);if(st==null)return;let Q=u();De(V,Q.value);let It=()=>{De(V,Q.value)};return Qc(()=>{let _t=X(V),Dt={x:t.x,y:t.y,category:r(),identifier:o()};Q.update({source:st,clients:new Set().add(st),predicate:_t!=null?LD(Dt,_t):null,value:_t})}),Q.addEventListener("value",It),()=>{Q.removeEventListener("value",It),Q.update({source:st,clients:new Set().add(st),value:null,predicate:null})}}else if(u()==null)De(V,null);else if(u().length==0)De(V,[]);else if(u().every(st=>typeof st=="object"))De(V,u());else{let st=!1;return at(u()).then(Q=>{st||De(V,Q)}),()=>{st=!0}}});function gt(st){kf(u(),st)||(De(V,st),C()?.(st))}Qc(()=>{let st=X(Z);if(st==null)return;let Q=f();if(Q!=null)return Qc(()=>{let It=X(Y),_t={x:t.x,y:t.y},Dt={source:st,clients:new Set().add(st),predicate:It!=null?mkt(_t,It):null,value:It};Q.update(Dt),Q.activate(Dt)}),()=>{Q.update({source:st,clients:new Set().add(st),value:null,predicate:null})}}),Qc(()=>{kf(Kg(()=>X(Y)),h())||De(Y,h())});function pt(){gt(null),ct(null),L()?.(null),De(Y,null)}let lt=ae(()=>new vkt(n(),{table:t.table,x:t.x,y:t.y,category:r(),text:i(),identifier:o(),additionalFields:c()}));async function yt(st,Q,It){return await X(lt).queryClosestPoint(s()?.predicate?.(X(Z)),st,Q,It)}async function at(st){return await X(lt).queryPoints(st)}async function vt(st){if(i()==null)return st.map(()=>null);let Q=await ekt({regions:st}),It=0,_t=1e4,Dt=null;for(;;){let xt=await n().query(zt.from(t.table).select({x:Mt(t.x),y:Mt(t.y),text:Mt(i())}).offset(It).limit(_t)),qt={x:xt.getChild("x").toArray(),y:xt.getChild("y").toArray(),text:xt.getChild("text").toArray()};if(Dt!=null&&await Dt,Dt=rkt(Q,qt),xt.getChild("text").length<_t)break;It+=_t}Dt!=null&&await Dt;let Ut=await ikt(Q);return await nkt(Q),Ut.map(xt=>xt.length==0?null:xt.length>2?xt.slice(0,2).join("-")+`-
`+xt.slice(2).join("-"):xt.join("-"))}{let st=ae(()=>S()??"points"),Q=ae(()=>p()??800),It=ae(()=>g()??800),_t=ae(()=>y()??2),Dt=ae(()=>v()??"light"),Ut=ae(()=>({x:X(F),y:X(N),category:X(O)})),xt=ae(()=>i()!=null?w()??!1:!1),qt=ae(()=>k()??1/16);pkt(e,{get mode(){return X(st)},get width(){return X(Q)},get height(){return X(It)},get pixelRatio(){return X(_t)},get colorScheme(){return X(Dt)},get theme(){return b()},get data(){return X(Ut)},get totalCount(){return X(B)},get maxDensity(){return X(j)},get categoryCount(){return X(D)},get categoryColors(){return a()},get defaultViewportState(){return X(z)},querySelection:yt,queryClusterLabels:vt,get automaticLabels(){return X(xt)},get minimumDensity(){return X(qt)},get customTooltip(){return T()},get customOverlay(){return M()},get tooltip(){return X(U)},onTooltip:ct,get selection(){return X(V)},onSelection:gt,get viewportState(){return _()},get onViewportState(){return I()},get rangeSelection(){return X(Y)},onRangeSelection:ue=>{De(Y,ue),L()?.(ue)},get userPointSize(){return E()}})}hp()}let xkt=class{component;currentProps;constructor(t,n){this.currentProps={...n},this.component=iAt({component:wkt,target:t,props:n})}update(t){let n={};for(let r in t)t[r]!==this.currentProps[r]&&(n[r]=t[r],this.currentProps[r]=t[r]);this.component.$set(n)}destroy(){this.component.$destroy()}};function Skt(){return pW()?32:4}function kY(e){let t=[];for(let n=0;n<e;n++)t.push(EI((n+.5)/e));return t}const Akt=""+new URL("duckdb-browser-mvp.worker-CM-L3bpJ.js",import.meta.url).href,Ekt=""+new URL("duckdb-mvp-DuKjbjvP.wasm",import.meta.url).href,kkt=""+new URL("duckdb-browser-eh.worker-D6ypKDsm.js",import.meta.url).href,Tkt=""+new URL("duckdb-eh-DrTJ_0hP.wasm",import.meta.url).href;function Mkt(){let e=window.location.href;return e=e.replace(/#.*$/,""),e=e.replace(/\/[^/]*$/,"/"),e.endsWith("/")||(e+="/"),e+"duckdb-wasm"}async function Ikt({log:e=!1}={}){const n=await rj({mvp:{mainModule:Ekt,mainWorker:Akt},eh:{mainModule:Tkt,mainWorker:kkt}}),r=new Worker(n.mainWorker),i=e?new tj:new Qq,o=new nj(i,r);await o.instantiate(n.mainModule,n.pthreadWorker);const s=await o.connect();return await s.query(`SET custom_extension_repository = '${Mkt()}';`),{duckdb:o,connection:s}}function Hh(){return iI(14)}function TY(e){return{component:"Histogram",props:{field:e.name,binCount:20}}}function pw(e){return e.type=="discrete[]"?{component:"ListCountPlot",props:{field:e.name}}:{component:"CountPlot",props:{field:e.name}}}function Rkt(e,t){return{component:"HistogramStack",props:{xField:e.name,groupField:t.name,xBinCount:20,groupBinCount:5}}}function Ckt(e,t){return{component:"Histogram2D",props:{xField:e.name,yField:t.name,xBinCount:20,yBinCount:20}}}function Nkt(e,t){return{component:"BoxPlot",props:{xField:e.name,yField:t.name,xBinCount:20}}}async function QI(e,t,n=void 0){const r=await Ikt();if(t=="wasm"){const i=await gwt({duckdb:r.duckdb,connection:r.connection});e.databaseConnector(i)}else if(t=="socket"){const i=await qgt({uri:n??""});e.databaseConnector(i)}else if(t=="rest"){const i=await a1t({uri:n??""});e.databaseConnector(i)}}class $kt{table;coordinator;constructor(t,n){this.table=n,this.coordinator=t}async exec(t){await this.coordinator.exec(t)}async query(t){return(await this.coordinator.query(t)).toArray().map(r=>({...r}))}async queryOne(t){return{...(await this.coordinator.query(t)).get(0)}}async describe(){return await this.query(ee`DESCRIBE ${this.table}`)}async distinctCount(t){return(await this.queryOne(ee`SELECT COUNT(DISTINCT ${Mt(t)}) AS count FROM ${this.table}`)).count}async columnDescriptions(){let t=await this.describe(),n=[];for(let r of t)n.push({name:r.column_name,type:r.column_type,jsType:Wx(r.column_type),distinctCount:await this.distinctCount(r.column_name)});return n}async defaultViewportScale(t,n){let{stdX:r,stdY:i}=await this.queryOne(zt.from(this.table).select({stdX:ee`STDDEV(${Mt(t)})::FLOAT`,stdY:ee`STDDEV(${Mt(n)})::FLOAT`}));return 1/(Math.max(r,i,.001)*3)}defaultPlots(t){let n=[{id:Hh(),title:"Named Selections",spec:{component:"SelectionList",props:{}}}];for(let r of t)if(r.jsType!=null&&!(r.distinctCount<=1))switch(r.jsType){case"string":r.distinctCount<=1e3&&n.push({id:Hh(),title:r.name,spec:pw({name:r.name,type:"discrete"})});break;case"string[]":n.push({id:Hh(),title:r.name,spec:pw({name:r.name,type:"discrete[]"})});break;case"number":r.distinctCount<=10?n.push({id:Hh(),title:r.name,spec:pw({name:r.name,type:"discrete"})}):n.push({id:Hh(),title:r.name,spec:TY({name:r.name})});break}return n}async makeCategoryColumn(t,n){let r=`_ev_${t}_id`,i=Array.from(await this.query(zt.from(this.table).select({value:Kr(Mt(t),"TEXT"),count:sr()}).where(og(cl(Kr(Mt(t),"TEXT")))).groupby(Kr(Mt(t),"TEXT")).orderby(jg(sr())).limit(n))),o=i.length,s=i.length+1;await this.exec(ee`
      ALTER TABLE ${this.table} ADD COLUMN IF NOT EXISTS ${Mt(r)} INTEGER DEFAULT 0;
      UPDATE ${this.table}
      SET ${Mt(r)} = CASE ${Mt(t)}::TEXT
        ${i.map(({value:p},g)=>ee`WHEN ${Zt(p)} THEN ${Zt(g)}`).join(" ")}
      ELSE (CASE WHEN ${Mt(t)} IS NULL THEN ${Zt(s)} ELSE ${Zt(o)} END) END
    `);let a=await this.query(ee`
      SELECT ${Mt(r)} AS index, COUNT(*)::INT AS count
      FROM ${this.table}
      GROUP BY ${Mt(r)}
    `),l=new Map;for(let p of a)l.set(p.index,p.count);let c=l.get(o)??0,u=l.get(s)??0,f=Jg(i.length),h=i.map(({value:p},g)=>({label:p,color:f[g],predicate:Ns(Kr(Mt(t),"TEXT"),Zt(p)),count:l.get(g)??0}));if(c>0){let{otherCategoryCount:p}=await this.queryOne(ee`
        SELECT COUNT(DISTINCT(${Mt(t)}::TEXT)) AS otherCategoryCount
        FROM ${this.table}
        WHERE ${Mt(r)} = ${Zt(o)} AND ${Mt(t)} IS NOT NULL
      `);h.push({label:`(other ${p.toLocaleString()})`,color:"#9eabc2",predicate:i.length>0?ee`${Mt(t)} IS NOT NULL AND ${Mt(t)}::TEXT NOT IN (${i.map(g=>Zt(g.value)).join(",")})`:ee`${Mt(t)} IS NOT NULL`,count:c})}return u>0&&(c<=0&&(await this.exec(`
          UPDATE ${this.table}
          SET ${Mt(r)} = ${Mt(r)} - 1 WHERE ${Mt(r)} = ${Zt(s)}
        `),s-=1),h.push({label:"(null)",color:"#aaaaaa",predicate:cl(Mt(t)),count:u})),{indexColumn:r,legend:h}}async makeBinnedNumericColumn(t){let n=await this.queryOne(zt.from(this.table).select({count:sr(),min:ml(Mt(t)),max:Ba(Mt(t)),mean:CS(Mt(t)),median:NS(Mt(t))}).where(Df(Mt(t)))),r=uV(n),i=`_ev_${t}_id`,o=Kr(Mt(t),"DOUBLE");o=r.scale.expr(o,r.scale.constant??0);let s=rs(Df(Kr(Mt(t),"DOUBLE")),Us(Pe(Be(o,r.binStart),1/r.binSize)),Zt(null));await this.exec(ee`
      ALTER TABLE ${this.table} ADD COLUMN IF NOT EXISTS ${Mt(i)} INTEGER DEFAULT 0;
      UPDATE ${this.table}
      SET ${Mt(i)} = ${s}
    `);let a=await this.query(ee`
      SELECT ${Mt(i)} AS index, COUNT(*)::INT AS count
      FROM ${this.table}
      GROUP BY ${Mt(i)}
      ORDER BY ${Mt(i)} ASC
    `),l=null,c=null,u=new Map,f=g=>r.scale.reverse(g,r.scale.constant??0);for(let{index:g,count:y}of Array.from(a))g!=null&&((l==null||g<l)&&(l=g),(c==null||g>c)&&(c=g)),u.set(g,y);let h=[],p=Ha(".6");if(l!=null&&c!=null){let g=kY(c-l+1);for(let y=l;y<=c;y++){let v=f(y*r.binSize+r.binStart),b=f((y+1)*r.binSize+r.binStart);h.push({label:`[${p(v)}, ${p(b)})`,color:g[y-l],predicate:Ns(s,Zt(y)),count:u.get(y)??0})}}if(u.has(null)){let g=h.length;await this.exec(`
        UPDATE ${this.table}
        SET ${Mt(i)} = ${Zt(g)}
        WHERE ${Mt(i)} IS NULL
      `),h.push({label:"(null / nan / inf)",color:"#aaaaaa",predicate:cl(s),count:u.get(null)??0})}return{indexColumn:i,legend:h}}}function Wx(e){return Okt.has(e)?"number":Dkt.has(e)?"string":e.match(/^(VARCHAR|TEXT)\[\d*\]$/)?"string[]":null}const Okt=new Set(["REAL","FLOAT4","FLOAT8","FLOAT","DOUBLE","INT","TINYINT","INT1","SMALLINT","INT2","SHORT","INTEGER","INT4","INT","SIGNED","INT8","LONG","BIGINT","UTINYINT","USMALLINT","UINTEGER","UBIGINT","UHUGEINT"]),Dkt=new Set(["BOOLEAN","DATE","VARCHAR","CHAR","BPCHAR","TEXT","STRING"]);var Lkt=(e,t,n)=>H(t,n(),!0),Fkt=Et("<button> </button>"),Bkt=Et('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">X</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Y</div> <!></div>',1),Pkt=Et('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Text</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while.</p>',1),zkt=Et('<div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Image</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while.</p>',1),Ukt=Et(`<div class="flex flex-col p-4 w-[40rem] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"><div class="flex flex-col gap-2 pb-4"><h2 class="text-slate-500 dark:text-slate-500">Search and Tooltip (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">The selected column, if any, will be used for full-text search and tooltips. Choose a column with freeform text,
      such as a description, chat messages, or a summary.</p> <div class="w-full flex flex-row items-center"><div class="w-[4rem] dark:text-slate-400">Text</div> <!></div> <div class="my-2"></div> <h2 class="text-slate-500 dark:text-slate-500">Embedding View (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">To enable the embedding view, you can either (a) pick a pair of pre-computed X and Y columns; or (b) pick a text
      column and compute the embedding projection in browser. For large data, it's recommended to pre-compute the
      embedding and its 2D projection.</p> <div class="flex rounded overflow-hidden size-fit gap-[1px] bg-slate-100 dark:bg-slate-800 mb-2"></div> <!></div> <div class="w-full flex flex-row items-center mt-4"><div class="flex-1"></div> <!></div></div>`);function qkt(e,t){Re(t,!0);const n=["Xenova/all-MiniLM-L6-v2","Xenova/multilingual-e5-small","Xenova/multilingual-e5-base","Xenova/multilingual-e5-large"],r=["Xenova/dinov2-small","Xenova/dinov2-base","Xenova/dinov2-large","Xenova/dino-vitb8","Xenova/dino-vits8","Xenova/dino-vitb16","Xenova/dino-vits16"];let i=wt("precomputed"),o=wt(null),s=wt(null),a=wt(null),l=wt(null),c=wt(null),u=wt(null),f=wt(null),h=dt(()=>t.columns.filter(I=>Wx(I.column_type)=="number")),p=dt(()=>t.columns.filter(I=>Wx(I.column_type)=="string"));fe(()=>{let I=x(f);bs(()=>x(a)==null)&&H(a,I,!0)});function g(){let I={text:x(f),embedding:null};if(x(i)=="precomputed"&&x(o)!=null&&x(s)!=null&&(I.embedding={precomputed:{x:x(o),y:x(s)}}),x(i)=="from-text"&&x(a)!=null){let $=x(l)?.trim()??"";($==null||$=="")&&($=n[0]),I.embedding={compute:{column:x(a),type:"text",model:$}}}if(x(i)=="from-image"&&x(c)!=null){let $=x(u)?.trim()??"";($==null||$=="")&&($=r[0]),I.embedding={compute:{column:x(c),type:"image",model:$}}}t.onConfirm?.(I)}var y=Ukt(),v=ot(y),b=mt(ot(v),4),_=mt(ot(b),2);{let I=dt(()=>[{value:null,label:"(none)"},...x(p).map($=>({value:$.column_name,label:`${$.column_name} (${$.column_type})`}))]);xa(_,{class:"flex-1",get value(){return x(f)},onChange:$=>H(f,$,!0),get options(){return x(I)}})}et(b);var w=mt(b,8);En(w,20,()=>[["precomputed","Precomputed"],["from-text","From Text"],["from-image","From Image"],["none","Disabled"]],Un,(I,$)=>{var C=dt(()=>qT($,2));let L=()=>x(C)[0],F=()=>x(C)[1];var N=Fkt();let O;N.__click=[Lkt,i,L];var D=ot(N,!0);et(N),Pt(B=>{O=ar(N,1,"bg-slate-200 dark:bg-slate-700 dark:text-slate-400 px-2 py-1",null,O,B),ce(D,F())},[()=>({"!bg-slate-500":L()==x(i),"!text-slate-100":L()==x(i)})]),rt(I,N)}),et(w);var S=mt(w,2);{var k=I=>{var $=Bkt(),C=Ht($),L=mt(ot(C),2);{let O=dt(()=>[{value:null,label:"(none)"},...x(h).map(D=>({value:D.column_name,label:`${D.column_name} (${D.column_type})`}))]);xa(L,{class:"flex-1",get value(){return x(o)},onChange:D=>H(o,D,!0),get options(){return x(O)}})}et(C);var F=mt(C,2),N=mt(ot(F),2);{let O=dt(()=>[{value:null,label:"(none)"},...x(h).map(D=>({value:D.column_name,label:`${D.column_name} (${D.column_type})`}))]);xa(N,{class:"flex-1",get value(){return x(s)},onChange:D=>H(s,D,!0),get options(){return x(O)}})}et(F),rt(I,$)},E=I=>{var $=Mn(),C=Ht($);{var L=N=>{var O=Pkt(),D=Ht(O),B=mt(ot(D),2);{let U=dt(()=>[{value:null,label:"(none)"},...x(p).map(V=>({value:V.column_name,label:`${V.column_name} (${V.column_type})`}))]);xa(B,{class:"flex-1",get value(){return x(a)},onChange:V=>H(a,V,!0),get options(){return x(U)}})}et(D);var j=mt(D,2),z=mt(ot(j),2);_O(z,{className:"flex-1",get value(){return x(l)},get placeholder(){return`(default ${n[0]??""})`},onChange:U=>H(l,U,!0),get options(){return n}}),et(j),Td(2),rt(N,O)},F=N=>{var O=Mn(),D=Ht(O);{var B=j=>{var z=zkt(),U=Ht(z),V=mt(ot(U),2);{let ct=dt(()=>[{value:null,label:"(none)"},...t.columns.map(gt=>({value:gt.column_name,label:`${gt.column_name} (${gt.column_type})`}))]);xa(V,{class:"flex-1",get value(){return x(c)},onChange:gt=>H(c,gt,!0),get options(){return x(ct)}})}et(U);var Y=mt(U,2),Z=mt(ot(Y),2);_O(Z,{className:"flex-1",get value(){return x(u)},get placeholder(){return`(default ${r[0]??""})`},onChange:ct=>H(u,ct,!0),get options(){return r}}),et(Y),Td(2),rt(j,z)};Ft(D,j=>{x(i)=="from-image"&&j(B)},!0)}rt(N,O)};Ft(C,N=>{x(i)=="from-text"?N(L):N(F,!1)},!0)}rt(I,$)};Ft(S,I=>{x(i)=="precomputed"?I(k):I(E,!1)})}et(v);var T=mt(v,2),M=mt(ot(T),2);wa(M,{label:"Confirm",class:"w-40 justify-center",onClick:()=>{g()}}),et(T),et(y),rt(e,y),Ce()}Br(["click"]);function jkt(e,t,n){const r=Array.from(e.target.files);r.length==1&&t(r[0])&&n.onUpload(r[0])}var Vkt=Et('<button><div class="text-center space-y-2"><p class="text-slate-500 dark:text-slate-500"> </p> <p class="text-sm text-slate-400 dark:text-slate-600">Accepted file types: JSON, CSV, Parquet</p></div> <input type="file" class="hidden"/></button>');function Wkt(e,t){Re(t,!0);let n=wt(!1),r;function i(p){p.preventDefault(),H(n,!0)}function o(){H(n,!1)}function s(p){if(p.preventDefault(),H(n,!1),p.dataTransfer.files&&p.dataTransfer.files.length==1){let g=p.dataTransfer.files[0];a(g)&&t.onUpload(g)}}function a(p){if(t.extensions==null)return!0;for(let g of t.extensions)if(p.name.toLowerCase().endsWith(g.toLowerCase()))return!0;return!1}var l=Vkt();l.__click=()=>{r.click()};var c=ot(l),u=ot(c),f=ot(u,!0);et(u),Td(2),et(c);var h=mt(c,2);h.__change=[jkt,a,t],ds(h,p=>r=p,()=>r),et(l),Pt(p=>{ar(l,1,`flex flex-col items-center w-[40rem] justify-center py-20 border-2 border-dashed rounded-md transition-all
    ${x(n)?"bg-slate-50 border-slate-500 dark:bg-slate-900 dark:border-slate-500":"bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"}`),ce(f,x(n)?"Drop your files here":"Drag & drop files here or click to select"),ut(h,"accept",p)},[()=>t.extensions?.join(",")]),I0("dragover",l,i),I0("dragleave",l,o),I0("drop",l,s),rt(e,l),Ce()}Br(["click","change"]);function Ykt(e){return e}function tR(e){const t=e-1;return t*t*t+1}function FD(e){return Object.prototype.toString.call(e)==="[object Date]"}function tM(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((i,o)=>tM(e[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(FD(e)&&FD(t)){const o=e.getTime(),a=t.getTime()-o;return l=>new Date(o+l*a)}const r=Object.keys(t),i={};return r.forEach(o=>{i[o]=tM(e[o],t[o])}),o=>{const s={};return r.forEach(a=>{s[a]=i[a](o)}),s}}if(n==="number"){const r=t-e;return i=>e+i*r}return()=>t}class eR{#t;#e;#n;#r=null;constructor(t,n={}){this.#t=wt(t),this.#e=wt(t),this.#n=n}static of(t,n){const r=new eR(t(),n);return rp(()=>{r.set(t())}),r}set(t,n){H(this.#e,t);let{delay:r=0,duration:i=400,easing:o=Ykt,interpolate:s=tM}={...this.#n,...n};if(i===0)return this.#r?.abort(),H(this.#t,t),Promise.resolve();const a=Hl.now()+r;let l,c=!1,u=this.#r;return this.#r=uP(f=>{if(f<a)return!0;if(!c){c=!0;const p=this.#t.v;l=s(p,t),typeof i=="function"&&(i=i(p,t)),u?.abort()}const h=f-a;return h>i?(H(this.#t,t),!1):(H(this.#t,l(o(h/i))),!0)}),this.#r.promise}get current(){return x(this.#t)}get target(){return x(this.#e)}set target(t){this.set(t)}}function Hkt(e){const t=e-1;return t*t*t+1}function Yx(e,{delay:t=0,duration:n=400,easing:r=Hkt,axis:i="y"}={}){const o=getComputedStyle(e),s=+o.opacity,a=i==="y"?"height":"width",l=parseFloat(o[a]),c=i==="y"?["top","bottom"]:["left","right"],u=c.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),f=parseFloat(o[`padding${u[0]}`]),h=parseFloat(o[`padding${u[1]}`]),p=parseFloat(o[`margin${u[0]}`]),g=parseFloat(o[`margin${u[1]}`]),y=parseFloat(o[`border${u[0]}Width`]),v=parseFloat(o[`border${u[1]}Width`]);return{delay:t,duration:n,easing:r,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*s};${a}: ${b*l}px;padding-${c[0]}: ${b*f}px;padding-${c[1]}: ${b*h}px;margin-${c[0]}: ${b*p}px;margin-${c[1]}: ${b*g}px;border-${c[0]}-width: ${b*y}px;border-${c[1]}-width: ${b*v}px;min-${a}: 0`}}const Ws=2,nR=4,rR=8,$1=16,Yu=32,gp=64,MY=128,Da=256,Hx=512,oo=1024,qa=2048,mh=4096,dl=8192,mp=16384,iR=32768,c3=65536,BD=1<<17,Gkt=1<<18,oR=1<<19,IY=1<<20,eM=1<<21,sR=1<<22,yd=1<<23,vd=Symbol("$state"),RY=Symbol("legacy props"),Xkt=Symbol(""),aR=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},CY=3,$v=8,Kkt=!1;var u3=Array.isArray,Jkt=Array.prototype.indexOf,lR=Array.from,Gx=Object.defineProperty,V0=Object.getOwnPropertyDescriptor,NY=Object.getOwnPropertyDescriptors,$Y=Object.prototype,Zkt=Array.prototype,f3=Object.getPrototypeOf,PD=Object.isExtensible;const Qkt=()=>{};function OY(e){for(var t=0;t<e.length;t++)e[t]()}function tTt(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function DY(e){return e===this.v}function cR(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function eTt(e,t){return e!==t}function LY(e){return!cR(e,this.v)}function nTt(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function FY(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function rTt(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function iTt(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function oTt(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function sTt(e){throw new Error("https://svelte.dev/e/effect_orphan")}function aTt(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function lTt(){throw new Error("https://svelte.dev/e/hydration_failed")}function cTt(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function uTt(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fTt(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let O1=!1,hTt=!1;function dTt(){O1=!0}const uR=1,fR=2,BY=4,pTt=8,gTt=16,mTt=1,yTt=2,PY="[",hR="[!",dR="]",W0={},Ni=Symbol(),vTt="http://www.w3.org/1999/xhtml",bTt=[];function zY(e,t=!1){return gw(e,new Map,"",bTt)}function gw(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(u3(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var a=0;a<e.length;a+=1){var l=e[a];a in e&&(s[a]=gw(l,t,n,r))}return s}if(f3(e)===$Y){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=gw(e[c],t,n,r);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return gw(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let Zr=null;function Xx(e){Zr=e}function is(e){return UY().get(e)}function pa(e,t){return UY().set(e,t),t}function si(e,t=!1,n){Zr={p:Zr,c:null,e:null,s:e,x:null,l:O1&&!t?{s:null,u:null,$:[]}:null}}function ai(e){var t=Zr,n=t.e;if(n!==null){t.e=null;for(var r of n)fH(r)}return Zr=t.p,{}}function tm(){return!O1||Zr!==null&&Zr.l===null}function UY(e){return Zr===null&&FY(),Zr.c??=new Map(_Tt(Zr)||void 0)}function _Tt(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function h3(e){console.warn("https://svelte.dev/e/hydration_mismatch")}let Dn=!1;function gu(e){Dn=e}let fr;function pl(e){if(e===null)throw h3(),W0;return fr=e}function D1(){return pl(yh(fr))}function On(e){if(Dn){if(yh(fr)!==null)throw h3(),W0;fr=e}}function nM(){for(var e=0,t=fr;;){if(t.nodeType===$v){var n=t.data;if(n===dR){if(e===0)return t;e-=1}else(n===PY||n===hR)&&(e+=1)}var r=yh(t);t.remove(),t=r}}function qY(e){if(!e||e.nodeType!==$v)throw h3(),W0;return e.data}function lo(e){if(typeof e!="object"||e===null||vd in e)return e;const t=f3(e);if(t!==$Y&&t!==Zkt)return e;var n=new Map,r=u3(e),i=Jt(0),o=_d,s=a=>{if(_d===o)return a();var l=Tn,c=_d;wc(null),VD(o);var u=a();return wc(l),VD(c),u};return r&&n.set("length",Jt(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&cTt();var u=n.get(l);return u===void 0?u=s(()=>{var f=Jt(c.value);return n.set(l,f),f}):Nt(u,c.value,!0),!0},deleteProperty(a,l){var c=n.get(l);if(c===void 0){if(l in a){const u=s(()=>Jt(Ni));n.set(l,u),Sk(i)}}else Nt(c,Ni),Sk(i);return!0},get(a,l,c){if(l===vd)return e;var u=n.get(l),f=l in a;if(u===void 0&&(!f||V0(a,l)?.writable)&&(u=s(()=>{var p=lo(f?a[l]:Ni),g=Jt(p);return g}),n.set(l,u)),u!==void 0){var h=G(u);return h===Ni?void 0:h}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=G(u))}else if(c===void 0){var f=n.get(l),h=f?.v;if(f!==void 0&&h!==Ni)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(a,l){if(l===vd)return!0;var c=n.get(l),u=c!==void 0&&c.v!==Ni||Reflect.has(a,l);if(c!==void 0||dn!==null&&(!u||V0(a,l)?.writable)){c===void 0&&(c=s(()=>{var h=u?lo(a[l]):Ni,p=Jt(h);return p}),n.set(l,c));var f=G(c);if(f===Ni)return!1}return u},set(a,l,c,u){var f=n.get(l),h=l in a;if(r&&l==="length")for(var p=c;p<f.v;p+=1){var g=n.get(p+"");g!==void 0?Nt(g,Ni):p in a&&(g=s(()=>Jt(Ni)),n.set(p+"",g))}if(f===void 0)(!h||V0(a,l)?.writable)&&(f=s(()=>Jt(void 0)),Nt(f,lo(c)),n.set(l,f));else{h=f.v!==Ni;var y=s(()=>lo(c));Nt(f,y)}var v=Reflect.getOwnPropertyDescriptor(a,l);if(v?.set&&v.set.call(u,c),!h){if(r&&typeof l=="string"){var b=n.get("length"),_=Number(l);Number.isInteger(_)&&_>=b.v&&Nt(b,_+1)}Sk(i)}return!0},ownKeys(a){G(i);var l=Reflect.ownKeys(a).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Ni});for(var[c,u]of n)u.v!==Ni&&!(c in a)&&l.push(c);return l},setPrototypeOf(){uTt()}})}var rM,jY,VY,WY;function iM(){if(rM===void 0){rM=window,jY=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;VY=V0(t,"firstChild").get,WY=V0(t,"nextSibling").get,PD(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),PD(n)&&(n.__t=void 0)}}function Jf(e=""){return document.createTextNode(e)}function Yd(e){return VY.call(e)}function yh(e){return WY.call(e)}function jn(e,t){if(!Dn)return Yd(e);var n=Yd(fr);if(n===null)n=fr.appendChild(Jf());else if(t&&n.nodeType!==CY){var r=Jf();return n?.before(r),pl(r),r}return pl(n),n}function Ta(e,t){if(!Dn){var n=Yd(e);return n instanceof Comment&&n.data===""?yh(n):n}return fr}function Ma(e,t=1,n=!1){let r=Dn?fr:e;for(var i;t--;)i=r,r=yh(r);if(!Dn)return r;if(n&&r?.nodeType!==CY){var o=Jf();return r===null?i?.after(o):r.before(o),pl(o),o}return pl(r),r}function YY(e){e.textContent=""}function HY(){return!1}const wTt=new WeakMap;function xTt(e){var t=dn;if(t===null)return Tn.f|=yd,e;if((t.f&iR)===0){if((t.f&MY)===0)throw!t.parent&&e instanceof Error&&GY(e),e;t.b.error(e)}else pR(e,t)}function pR(e,t){for(;t!==null;){if((t.f&MY)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&GY(e),e}function GY(e){const t=wTt.get(e);t&&(Gx(e,"message",{value:t.message}),Gx(e,"stack",{value:t.stack}))}const STt=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let Ov=[],Dv=[];function XY(){var e=Ov;Ov=[],OY(e)}function KY(){var e=Dv;Dv=[],OY(e)}function gR(e){Ov.length===0&&queueMicrotask(XY),Ov.push(e)}function ATt(e){Dv.length===0&&STt(KY),Dv.push(e)}function ETt(){Ov.length>0&&XY(),Dv.length>0&&KY()}function kTt(){for(var e=dn.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&nTt(),e}function d3(e){var t=Ws|qa,n=Tn!==null&&(Tn.f&Ws)!==0?Tn:null;return dn===null||n!==null&&(n.f&Da)!==0?t|=Da:dn.f|=oR,{ctx:Zr,deps:null,effects:null,equals:DY,f:t,fn:e,reactions:null,rv:0,v:Ni,wv:0,parent:n??dn,ac:null}}function TTt(e,t){let n=dn;n===null&&rTt();var r=n.b,i=void 0,o=Lv(Ni),s=null,a=!Tn;return UTt(()=>{try{var l=e()}catch(p){l=Promise.reject(p)}var c=()=>l;i=s?.then(c,c)??Promise.resolve(l),s=i;var u=ci,f=r.pending;a&&(r.update_pending_count(1),f||u.increment());const h=(p,g=void 0)=>{s=null,f||u.activate(),g?g!==aR&&(o.f|=yd,Fv(o,g)):((o.f&yd)!==0&&(o.f^=yd),Fv(o,p)),a&&(r.update_pending_count(-1),f||u.decrement()),tH()};if(i.then(h,p=>h(null,p||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(l=>{function c(u){function f(){u===i?l(o):c(i)}u.then(f,f)}c(i)})}function Bt(e){const t=d3(e);return oH(t),t}function JY(e){const t=d3(e);return t.equals=LY,t}function ZY(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)xc(t[n])}}function MTt(e){for(var t=e.parent;t!==null;){if((t.f&Ws)===0)return t;t=t.parent}return null}function mR(e){var t,n=dn;Zf(MTt(e));try{ZY(e),t=cH(e)}finally{Zf(n)}return t}function QY(e){var t=mR(e);if(e.equals(t)||(e.v=t,e.wv=aH()),!yp)if(vg!==null)vg.set(e,e.v);else{var n=(Mf||(e.f&Da)!==0)&&e.deps!==null?mh:oo;fs(e,n)}}function ITt(e,t,n){const r=tm()?d3:JY;if(t.length===0){n(e.map(r));return}var i=ci,o=dn,s=RTt(),a=kTt();Promise.all(t.map(l=>TTt(l))).then(l=>{i?.activate(),s();try{n([...e.map(r),...l])}catch(c){(o.f&mp)===0&&pR(c,o)}i?.deactivate(),tH()}).catch(l=>{a.error(l)})}function RTt(){var e=dn,t=Tn,n=Zr;return function(){Zf(e),wc(t),Xx(n)}}function tH(){Zf(null),wc(null),Xx(null)}const Gm=new Set;let ci=null,vg=null,zD=new Set,Kx=[];function eH(){const e=Kx.shift();Kx.length>0&&queueMicrotask(eH),e()}let Hd=[],p3=null,oM=!1,mw=!1;class bg{current=new Map;#t=new Map;#e=new Set;#n=0;#r=null;#c=!1;#i=[];#o=[];#a=[];#s=[];#l=[];#f=[];#u=[];skipped_effects=new Set;process(t){Hd=[];var n=null;if(Gm.size>1){n=new Map,vg=new Map;for(const[o,s]of this.current)n.set(o,{v:o.v,wv:o.wv}),o.v=s;for(const o of Gm)if(o!==this)for(const[s,a]of o.#t)n.has(s)||(n.set(s,{v:s.v,wv:s.wv}),s.v=a)}for(const o of t)this.#p(o);if(this.#i.length===0&&this.#n===0){this.#d();var r=this.#a,i=this.#s;this.#a=[],this.#s=[],this.#l=[],ci=null,UD(r),UD(i),ci===null?ci=this:Gm.delete(this),this.#r?.resolve()}else this.#h(this.#a),this.#h(this.#s),this.#h(this.#l);if(n){for(const[o,{v:s,wv:a}]of n)o.wv<=a&&(o.v=s);vg=null}for(const o of this.#i)zy(o);for(const o of this.#o)zy(o);this.#i=[],this.#o=[]}#p(t){t.f^=oo;for(var n=t.first;n!==null;){var r=n.f,i=(r&(Yu|gp))!==0,o=i&&(r&oo)!==0,s=o||(r&dl)!==0||this.skipped_effects.has(n);if(!s&&n.fn!==null){if(i)n.f^=oo;else if((r&oo)===0)if((r&nR)!==0)this.#s.push(n);else if((r&sR)!==0){var a=n.b?.pending?this.#o:this.#i;a.push(n)}else g3(n)&&((n.f&$1)!==0&&this.#l.push(n),zy(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#h(t){for(const n of t)((n.f&qa)!==0?this.#f:this.#u).push(n),fs(n,oo);t.length=0}capture(t,n){this.#t.has(t)||this.#t.set(t,n),this.current.set(t,t.v)}activate(){ci=this}deactivate(){ci=null;for(const t of zD)if(zD.delete(t),t(),ci!==null)break}neuter(){this.#c=!0}flush(){Hd.length>0?nH():this.#d(),ci===this&&(this.#n===0&&Gm.delete(this),this.deactivate())}#d(){if(!this.#c)for(const t of this.#e)t();this.#e.clear()}increment(){this.#n+=1}decrement(){if(this.#n-=1,this.#n===0){for(const t of this.#f)fs(t,qa),Gd(t);for(const t of this.#u)fs(t,mh),Gd(t);this.#a=[],this.#s=[],this.flush()}else this.deactivate()}add_callback(t){this.#e.add(t)}settled(){return(this.#r??=tTt()).promise}static ensure(){if(ci===null){const t=ci=new bg;Gm.add(ci),mw||bg.enqueue(()=>{ci===t&&t.flush()})}return ci}static enqueue(t){Kx.length===0&&queueMicrotask(eH),Kx.unshift(t)}}function CTt(e){var t=mw;mw=!0;try{for(var n;;){if(ETt(),Hd.length===0&&(ci?.flush(),Hd.length===0))return p3=null,n;nH()}}finally{mw=t}}function nH(){var e=Y0;oM=!0;try{var t=0;for(qD(!0);Hd.length>0;){var n=bg.ensure();if(t++>1e3){var r,i;NTt()}n.process(Hd),bd.clear()}}finally{oM=!1,qD(e),p3=null}}function NTt(){try{aTt()}catch(e){pR(e,p3)}}function UD(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(mp|dl))===0&&g3(r)){var i=ci?ci.current.size:0;if(zy(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?gH(r):r.fn=null),ci!==null&&ci.current.size>i&&(r.f&IY)!==0)break}}for(;n<t;)Gd(e[n++])}}function Gd(e){for(var t=p3=e;t.parent!==null;){t=t.parent;var n=t.f;if(oM&&t===dn&&(n&$1)!==0)return;if((n&(gp|Yu))!==0){if((n&oo)===0)return;t.f^=oo}}Hd.push(t)}const bd=new Map;function Lv(e,t){var n={f:0,v:e,reactions:null,equals:DY,rv:0,wv:0};return n}function Jt(e,t){const n=Lv(e);return oH(n),n}function rH(e,t=!1,n=!0){const r=Lv(e);return t||(r.equals=LY),O1&&n&&Zr!==null&&Zr.l!==null&&(Zr.l.s??=[]).push(r),r}function Nt(e,t,n=!1){Tn!==null&&(!Zl||(Tn.f&BD)!==0)&&tm()&&(Tn.f&(Ws|$1|sR|BD))!==0&&!Su?.includes(e)&&fTt();let r=n?lo(t):t;return Fv(e,r)}function Fv(e,t){if(!e.equals(t)){var n=e.v;yp?bd.set(e,t):bd.set(e,n),e.v=t;var r=bg.ensure();r.capture(e,n),(e.f&Ws)!==0&&((e.f&qa)!==0&&mR(e),fs(e,(e.f&Da)===0?oo:mh)),e.wv=aH(),iH(e,qa),tm()&&dn!==null&&(dn.f&oo)!==0&&(dn.f&(Yu|gp))===0&&(ua===null?$Tt([e]):ua.push(e))}return t}function Sk(e){Nt(e,e.v+1)}function iH(e,t){var n=e.reactions;if(n!==null)for(var r=tm(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===dn)){var l=(a&qa)===0;l&&fs(s,t),(a&Ws)!==0?iH(s,mh):l&&Gd(s)}}}let Y0=!1;function qD(e){Y0=e}let yp=!1;function jD(e){yp=e}let Tn=null,Zl=!1;function wc(e){Tn=e}let dn=null;function Zf(e){dn=e}let Su=null;function oH(e){Tn!==null&&(Su===null?Su=[e]:Su.push(e))}let ko=null,Rs=0,ua=null;function $Tt(e){ua=e}let sH=1,Bv=0,_d=Bv;function VD(e){_d=e}let Mf=!1;function aH(){return++sH}function g3(e){var t=e.f;if((t&qa)!==0)return!0;if((t&mh)!==0){var n=e.deps,r=(t&Da)!==0;if(n!==null){var i,o,s=(t&Hx)!==0,a=r&&dn!==null&&!Mf,l=n.length;if((s||a)&&(dn===null||(dn.f&mp)===0)){var c=e,u=c.parent;for(i=0;i<l;i++)o=n[i],(s||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);s&&(c.f^=Hx),a&&u!==null&&(u.f&Da)===0&&(c.f^=Da)}for(i=0;i<l;i++)if(o=n[i],g3(o)&&QY(o),o.wv>e.wv)return!0}(!r||dn!==null&&!Mf)&&fs(e,oo)}return!1}function lH(e,t,n=!0){var r=e.reactions;if(r!==null&&!Su?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];(o.f&Ws)!==0?lH(o,t,!1):t===o&&(n?fs(o,qa):(o.f&oo)!==0&&fs(o,mh),Gd(o))}}function cH(e){var t=ko,n=Rs,r=ua,i=Tn,o=Mf,s=Su,a=Zr,l=Zl,c=_d,u=e.f;ko=null,Rs=0,ua=null,Mf=(u&Da)!==0&&(Zl||!Y0||Tn===null),Tn=(u&(Yu|gp))===0?e:null,Su=null,Xx(e.ctx),Zl=!1,_d=++Bv,e.ac!==null&&(e.ac.abort(aR),e.ac=null);try{e.f|=eM;var f=(0,e.fn)(),h=e.deps;if(ko!==null){var p;if(Jx(e,Rs),h!==null&&Rs>0)for(h.length=Rs+ko.length,p=0;p<ko.length;p++)h[Rs+p]=ko[p];else e.deps=h=ko;if(!Mf||(u&Ws)!==0&&e.reactions!==null)for(p=Rs;p<h.length;p++)(h[p].reactions??=[]).push(e)}else h!==null&&Rs<h.length&&(Jx(e,Rs),h.length=Rs);if(tm()&&ua!==null&&!Zl&&h!==null&&(e.f&(Ws|mh|qa))===0)for(p=0;p<ua.length;p++)lH(ua[p],e);return i!==null&&i!==e&&(Bv++,ua!==null&&(r===null?r=ua:r.push(...ua))),(e.f&yd)!==0&&(e.f^=yd),f}catch(g){return xTt(g)}finally{e.f^=eM,ko=t,Rs=n,ua=r,Tn=i,Mf=o,Su=s,Xx(a),Zl=l,_d=c}}function OTt(e,t){let n=t.reactions;if(n!==null){var r=Jkt.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ws)!==0&&(ko===null||!ko.includes(t))&&(fs(t,mh),(t.f&(Da|Hx))===0&&(t.f^=Hx),ZY(t),Jx(t,0))}function Jx(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)OTt(e,n[r])}function zy(e){var t=e.f;if((t&mp)===0){fs(e,oo);var n=dn,r=Y0;dn=e,Y0=!0;try{(t&$1)!==0?qTt(e):pH(e),dH(e);var i=cH(e);e.teardown=typeof i=="function"?i:null,e.wv=sH;var o;Kkt&&hTt&&(e.f&qa)!==0&&e.deps}finally{Y0=r,dn=n}}}function G(e){var t=e.f,n=(t&Ws)!==0;if(Tn!==null&&!Zl){var r=dn!==null&&(dn.f&mp)!==0;if(!r&&!Su?.includes(e)){var i=Tn.deps;if((Tn.f&eM)!==0)e.rv<Bv&&(e.rv=Bv,ko===null&&i!==null&&i[Rs]===e?Rs++:ko===null?ko=[e]:(!Mf||!ko.includes(e))&&ko.push(e));else{(Tn.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[Tn]:o.includes(Tn)||o.push(Tn)}}}else if(n&&e.deps===null&&e.effects===null){var s=e,a=s.parent;a!==null&&(a.f&Da)===0&&(s.f^=Da)}if(yp){if(bd.has(e))return bd.get(e);if(n){s=e;var l=s.v;return((s.f&oo)===0&&s.reactions!==null||uH(s))&&(l=mR(s)),bd.set(s,l),l}}else if(n){if(s=e,vg?.has(s))return vg.get(s);g3(s)&&QY(s)}if((e.f&yd)!==0)throw e.v;return e.v}function uH(e){if(e.v===Ni)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(bd.has(t)||(t.f&Ws)!==0&&uH(t))return!0;return!1}function m3(e){var t=Zl;try{return Zl=!0,e()}finally{Zl=t}}const DTt=-7169;function fs(e,t){e.f=e.f&DTt|t}function LTt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(vd in e)sM(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&vd in n&&sM(n)}}}function sM(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{sM(e[r],t)}catch{}const n=f3(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=NY(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function FTt(e){dn===null&&Tn===null&&sTt(),Tn!==null&&(Tn.f&Da)!==0&&dn===null&&oTt(),yp&&iTt()}function BTt(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Hu(e,t,n,r=!0){var i=dn;i!==null&&(i.f&dl)!==0&&(e|=dl);var o={ctx:Zr,deps:null,nodes_start:null,nodes_end:null,f:e|qa,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{zy(o),o.f|=iR}catch(l){throw xc(o),l}else t!==null&&Gd(o);var s=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&oR)===0;if(!s&&r&&(i!==null&&BTt(o,i),Tn!==null&&(Tn.f&Ws)!==0&&(e&gp)===0)){var a=Tn;(a.effects??=[]).push(o)}return o}function PTt(e){const t=Hu(rR,null,!1);return fs(t,oo),t.teardown=e,t}function zr(e){FTt();var t=dn.f,n=!Tn&&(t&Yu)!==0&&(t&iR)===0;if(n){var r=Zr;(r.e??=[]).push(e)}else return fH(e)}function fH(e){return Hu(nR|IY,e,!1)}function zTt(e){bg.ensure();const t=Hu(gp,e,!0);return(n={})=>new Promise(r=>{n.outro?v3(t,()=>{xc(t),r(void 0)}):(xc(t),r(void 0))})}function L1(e){return Hu(nR,e,!1)}function UTt(e){return Hu(sR|oR,e,!0)}function hH(e,t=0){return Hu(rR|t,e,!0)}function pi(e,t=[],n=[]){ITt(t,n,r=>{Hu(rR,()=>e(...r.map(G)),!0)})}function y3(e,t=0){var n=Hu($1|t,e,!0);return n}function Qf(e,t=!0){return Hu(Yu,e,!0,t)}function dH(e){var t=e.teardown;if(t!==null){const n=yp,r=Tn;jD(!0),wc(null);try{t.call(null)}finally{jD(n),wc(r)}}}function pH(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(aR);var r=n.next;(n.f&gp)!==0?n.parent=null:xc(n,t),n=r}}function qTt(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Yu)===0&&xc(t),t=n}}function xc(e,t=!0){var n=!1;(t||(e.f&Gkt)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(jTt(e.nodes_start,e.nodes_end),n=!0),pH(e,t&&!n),Jx(e,0),fs(e,mp);var r=e.transitions;if(r!==null)for(const o of r)o.stop();dH(e);var i=e.parent;i!==null&&i.first!==null&&gH(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function jTt(e,t){for(;e!==null;){var n=e===t?null:yh(e);e.remove(),e=n}}function gH(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function v3(e,t){var n=[];yR(e,n,!0),mH(n,()=>{xc(e),t&&t()})}function mH(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function yR(e,t,n){if((e.f&dl)===0){if(e.f^=dl,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&c3)!==0||(r.f&Yu)!==0;yR(r,t,o?n:!1),r=i}}}function vR(e){yH(e,!0)}function yH(e,t){if((e.f&dl)!==0){e.f^=dl,(e.f&oo)===0&&(fs(e,qa),Gd(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&c3)!==0||(n.f&Yu)!==0;yH(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let WD=!1;function VTt(){WD||(WD=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function WTt(e){var t=Tn,n=dn;wc(null),Zf(null);try{return e()}finally{wc(t),Zf(n)}}const vH=new Set,aM=new Set;function YTt(e,t,n,r={}){function i(o){if(r.capture||wy.call(t,o),!o.cancelBubble)return WTt(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?gR(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Pv(e,t,n,r,i){var o={capture:r,passive:i},s=YTt(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&PTt(()=>{t.removeEventListener(e,s,o)})}function Gu(e){for(var t=0;t<e.length;t++)vH.add(e[t]);for(var n of aM)n(e)}let YD=null;function wy(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;YD=e;var s=0,a=YD===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){Gx(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=Tn,f=dn;wc(null),Zf(null);try{for(var h,p=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var y=o["__"+r];if(y!=null&&(!o.disabled||e.target===o))if(u3(y)){var[v,...b]=y;v.apply(o,[e,...b])}else y.call(o,e)}catch(_){h?p.push(_):h=_}if(e.cancelBubble||g===t||g===null)break;o=g}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{e.__root=t,delete e.currentTarget,wc(u),Zf(f)}}}function HTt(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function H0(e,t){var n=dn;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Bn(e,t){var n=(t&mTt)!==0,r=(t&yTt)!==0,i,o=!e.startsWith("<!>");return()=>{if(Dn)return H0(fr,null),fr;i===void 0&&(i=HTt(o?e:"<!>"+e),n||(i=Yd(i)));var s=r||jY?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Yd(s),l=s.lastChild;H0(a,l)}else H0(s,s);return s}}function b0(){if(Dn)return H0(fr,null),fr;var e=document.createDocumentFragment(),t=document.createComment(""),n=Jf();return e.append(t,n),H0(t,n),e}function sn(e,t){if(Dn){dn.nodes_end=fr,D1();return}e!==null&&e.before(t)}const GTt=["touchstart","touchmove"];function XTt(e){return GTt.includes(e)}function Rc(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function bH(e,t){return _H(e,t)}function KTt(e,t){iM(),t.intro=t.intro??!1;const n=t.target,r=Dn,i=fr;try{for(var o=Yd(n);o&&(o.nodeType!==$v||o.data!==PY);)o=yh(o);if(!o)throw W0;gu(!0),pl(o),D1();const s=_H(e,{...t,anchor:o});if(fr===null||fr.nodeType!==$v||fr.data!==dR)throw h3(),W0;return gu(!1),s}catch(s){if(s===W0)return t.recover===!1&&lTt(),iM(),YY(n),gu(!1),bH(e,t);throw s}finally{gu(r),pl(i)}}const Hp=new Map;function _H(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){iM();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var p=f[h];if(!a.has(p)){a.add(p);var g=XTt(p);t.addEventListener(p,wy,{passive:g});var y=Hp.get(p);y===void 0?(document.addEventListener(p,wy,{passive:g}),Hp.set(p,1)):Hp.set(p,y+1)}}};l(lR(vH)),aM.add(l);var c=void 0,u=zTt(()=>{var f=n??t.appendChild(Jf());return Qf(()=>{if(o){si({});var h=Zr;h.c=o}i&&(r.$$events=i),Dn&&H0(f,null),c=e(f,r)||{},Dn&&(dn.nodes_end=fr),o&&ai()}),()=>{for(var h of a){t.removeEventListener(h,wy);var p=Hp.get(h);--p===0?(document.removeEventListener(h,wy),Hp.delete(h)):Hp.set(h,p)}aM.delete(l),f!==n&&f.parentNode?.removeChild(f)}});return lM.set(c,u),c}let lM=new WeakMap;function JTt(e,t){const n=lM.get(e);return n?(lM.delete(e),n(t)):Promise.resolve()}function ZTt(e){return new QTt(e)}class QTt{#t;#e;constructor(t){var n=new Map,r=(o,s)=>{var a=rH(s,!1,!1);return n.set(o,a),a};const i=new Proxy({...t.props||{},$$events:{}},{get(o,s){return G(n.get(s)??r(s,Reflect.get(o,s)))},has(o,s){return s===RY?!0:(G(n.get(s)??r(s,Reflect.get(o,s))),Reflect.has(o,s))},set(o,s,a){return Nt(n.get(s)??r(s,a),a),Reflect.set(o,s,a)}});this.#e=(t.hydrate?KTt:bH)(t.component,{target:t.target,anchor:t.anchor,props:i,context:t.context,intro:t.intro??!1,recover:t.recover}),(!t?.props?.$$host||t.sync===!1)&&CTt(),this.#t=i.$$events;for(const o of Object.keys(this.#e))o==="$set"||o==="$destroy"||o==="$on"||Gx(this,o,{get(){return this.#e[o]},set(s){this.#e[o]=s},enumerable:!0});this.#e.$set=o=>{Object.assign(i,o)},this.#e.$destroy=()=>{JTt(this.#e)}}$set(t){this.#e.$set(t)}$on(t,n){this.#t[t]=this.#t[t]||[];const r=(...i)=>n.call(this,...i);return this.#t[t].push(r),()=>{this.#t[t]=this.#t[t].filter(i=>i!==r)}}$destroy(){this.#e.$destroy()}}const t4t="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(t4t);function bR(e,t,...n){var r=e,i=Qkt,o;y3(()=>{i!==(i=t())&&(o&&(xc(o),o=null),o=Qf(()=>i(r,...n)))},c3),Dn&&(r=fr)}function em(e){Zr===null&&FY(),O1&&Zr.l!==null?e4t(Zr).m.push(e):zr(()=>{const t=m3(e);if(typeof t=="function")return t})}function e4t(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function Os(e,t,n=!1){Dn&&D1();var r=e,i=null,o=null,s=Ni,a=n?c3:0,l=!1;const c=(h,p=!0)=>{l=!0,f(p,h)};function u(){var h=s?i:o,p=s?o:i;h&&vR(h),p&&v3(p,()=>{s?o=null:i=null})}const f=(h,p)=>{if(s===(s=h))return;let g=!1;if(Dn){const b=qY(r)===hR;!!s===b&&(r=nM(),pl(r),gu(!1),g=!0)}var y=HY(),v=r;s?i??=p&&Qf(()=>p(v)):o??=p&&Qf(()=>p(v)),y||u(),g&&gu(!0)};y3(()=>{l=!1,t(c),l||f(null,null)},a),Dn&&(r=fr)}function n4t(e,t,n){Dn&&D1();var r=e,i=Ni,o,s,a=null,l=tm()?eTt:cR;function c(){o&&v3(o),a!==null&&(a.lastChild.remove(),r.before(a),a=null),o=s}y3(()=>{if(l(i,i=t())){var u=r,f=HY();f&&(a=document.createDocumentFragment(),a.append(u=Jf())),s=Qf(()=>n(u)),f?ci.add_callback(c):c()}}),Dn&&(r=fr)}function r4t(e,t){return t}function i4t(e,t,n){for(var r=e.items,i=[],o=t.length,s=0;s<o;s++)yR(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;YY(l),l.append(n),r.clear(),jl(e,t[0].prev,t[o-1].next)}mH(i,()=>{for(var c=0;c<o;c++){var u=t[c];a||(r.delete(u.k),jl(e,u.prev,u.next)),xc(u.e,!a)}})}function Uy(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&BY)!==0;if(l){var c=e;s=Dn?pl(Yd(c)):c.appendChild(Jf())}Dn&&D1();var u=null,f=!1,h=new Map,p=JY(()=>{var b=n();return u3(b)?b:b==null?[]:lR(b)}),g,y;function v(){o4t(y,g,a,h,s,i,t,r,n),o!==null&&(g.length===0?u?vR(u):u=Qf(()=>o(s)):u!==null&&v3(u,()=>{u=null}))}y3(()=>{y??=dn,g=G(p);var b=g.length;if(f&&b===0)return;f=b===0;let _=!1;if(Dn){var w=qY(s)===hR;w!==(b===0)&&(s=nM(),pl(s),gu(!1),_=!0)}if(Dn){for(var S=null,k,E=0;E<b;E++){if(fr.nodeType===$v&&fr.data===dR){s=fr,_=!0,gu(!1);break}var T=g[E],M=r(T,E);k=wH(fr,a,S,null,T,M,E,i,t,n),a.items.set(M,k),S=k}b>0&&pl(nM())}Dn?b===0&&o&&(u=Qf(()=>o(s))):v(),_&&gu(!0),G(p)}),Dn&&(s=fr)}function o4t(e,t,n,r,i,o,s,a,l){var c=(s&pTt)!==0,u=(s&(uR|fR))!==0,f=t.length,h=n.items,p=n.first,g=p,y,v=null,b,_=[],w=[],S,k,E,T;if(c)for(T=0;T<f;T+=1)S=t[T],k=a(S,T),E=h.get(k),E!==void 0&&(E.a?.measure(),(b??=new Set).add(E));for(T=0;T<f;T+=1){if(S=t[T],k=a(S,T),E=h.get(k),E===void 0){var M=r.get(k);if(M!==void 0){r.delete(k),h.set(k,M);var I=v?v.next:g;jl(n,v,M),jl(n,M,I),Ak(M,I,i),v=M}else{var $=g?g.e.nodes_start:i;v=wH($,n,v,v===null?n.first:v.next,S,k,T,o,s,l)}h.set(k,v),_=[],w=[],g=v.next;continue}if(u&&s4t(E,S,T,s),(E.e.f&dl)!==0&&(vR(E.e),c&&(E.a?.unfix(),(b??=new Set).delete(E))),E!==g){if(y!==void 0&&y.has(E)){if(_.length<w.length){var C=w[0],L;v=C.prev;var F=_[0],N=_[_.length-1];for(L=0;L<_.length;L+=1)Ak(_[L],C,i);for(L=0;L<w.length;L+=1)y.delete(w[L]);jl(n,F.prev,N.next),jl(n,v,F),jl(n,N,C),g=C,v=N,T-=1,_=[],w=[]}else y.delete(E),Ak(E,g,i),jl(n,E.prev,E.next),jl(n,E,v===null?n.first:v.next),jl(n,v,E),v=E;continue}for(_=[],w=[];g!==null&&g.k!==k;)(g.e.f&dl)===0&&(y??=new Set).add(g),w.push(g),g=g.next;if(g===null)continue;E=g}_.push(E),v=E,g=E.next}if(g!==null||y!==void 0){for(var O=y===void 0?[]:lR(y);g!==null;)(g.e.f&dl)===0&&O.push(g),g=g.next;var D=O.length;if(D>0){var B=(s&BY)!==0&&f===0?i:null;if(c){for(T=0;T<D;T+=1)O[T].a?.measure();for(T=0;T<D;T+=1)O[T].a?.fix()}i4t(n,O,B)}}c&&gR(()=>{if(b!==void 0)for(E of b)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=v&&v.e;for(var j of r.values())xc(j.e);r.clear()}function s4t(e,t,n,r){(r&uR)!==0&&Fv(e.v,t),(r&fR)!==0?Fv(e.i,n):e.i=n}function wH(e,t,n,r,i,o,s,a,l,c,u){var f=(l&uR)!==0,h=(l&gTt)===0,p=f?h?rH(i,!1,!1):Lv(i):i,g=(l&fR)===0?s:Lv(s),y={i:g,v:p,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Jf())}return y.e=Qf(()=>a(e,p,g,c),Dn),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?u||(t.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function Ak(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var s=yh(o);i.before(o),o=s}}function jl(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ti(e,t){L1(()=>{var n=e.getRootNode(),r=n.host?n:n.head??n.ownerDocument.head;if(!r.querySelector("#"+t.hash)){const i=document.createElement("style");i.id=t.hash,i.textContent=t.code,r.appendChild(i)}})}function _R(e,t,n){L1(()=>{var r=m3(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};hH(()=>{var s=n();LTt(s),i&&cR(o,s)&&(o=s,r.update(s))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function a4t(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function HD(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function l4t(e,t){if(t){var n="",r,i;return Array.isArray(t)?(r=t[0],i=t[1]):r=t,r&&(n+=HD(r)),i&&(n+=HD(i,!0)),n=n.trim(),n===""?null:n}return String(e)}function th(e,t,n,r,i,o){var s=e.__className;if(Dn||s!==n||s===void 0){var a=a4t(n,r);(!Dn||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):e.className=a),e.__className=n}return o}function Ek(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function ys(e,t,n,r){var i=e.__style;if(Dn||i!==t){var o=l4t(t,r);(!Dn||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else r&&(Array.isArray(r)?(Ek(e,n?.[0],r[0]),Ek(e,n?.[1],r[1],"important")):Ek(e,n,r));return r}const c4t=Symbol("is custom element"),u4t=Symbol("is html");function f4t(e){if(Dn){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Zx(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;Zx(e,"checked",null),e.checked=i}}};e.__on_r=n,ATt(n),VTt()}}function h4t(e,t){var n=xH(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Zx(e,t,n,r){var i=xH(e);Dn&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[Xkt]=n),n==null?e.removeAttribute(t):typeof n!="string"&&d4t(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function xH(e){return e.__attributes??={[c4t]:e.nodeName.includes("-"),[u4t]:e.namespaceURI===vTt}}var GD=new Map;function d4t(e){var t=GD.get(e.nodeName);if(t)return t;GD.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=NY(r);for(var o in n)n[o].set&&t.push(o);r=f3(r)}return t}class wR{#t=new WeakMap;#e;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#t.get(t)||new Set;return r.add(n),this.#t.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#t.get(t);i.delete(n),i.size===0&&(this.#t.delete(t),this.#e.unobserve(t))}}#r(){return this.#e??(this.#e=new ResizeObserver(t=>{for(var n of t){wR.entries.set(n.target,n);for(var r of this.#t.get(n.target)||[])r(n)}}))}}var p4t=new wR({box:"border-box"});function wl(e,t,n){var r=p4t.observe(e,()=>n(e[t]));L1(()=>(m3(()=>n(e[t])),r))}function XD(e,t){return e===t||e?.[vd]===t}function hs(e={},t,n,r){return L1(()=>{var i,o;return hH(()=>{i=o,o=[],m3(()=>{e!==n(...o)&&(t(e,...o),i&&XD(n(...i),e)&&t(null,...i))})}),()=>{gR(()=>{o&&XD(n(...o),e)&&t(null,...o)})}}),e}let v_=!1;function g4t(e){var t=v_;try{return v_=!1,[e(),v_]}finally{v_=t}}function F1(e,t,n,r){var i=r,o=!0,s=()=>(o&&(o=!1,i=r),i),a;{var l=vd in e||RY in e;a=V0(e,t)?.set??(l&&t in e?v=>e[t]=v:void 0)}var c,u=!1;[c,u]=g4t(()=>e[t]);var f;if(f=()=>{var v=e[t];return v===void 0?s():(o=!0,v)},a){var h=e.$$legacy;return function(v,b){return arguments.length>0?((!b||h||u)&&a(b?f():v),v):f()}}var p=!1,g=d3(()=>(p=!1,f()));G(g);var y=dn;return function(v,b){if(arguments.length>0){const _=b?G(g):lo(v);return Nt(g,_),p=!0,i!==void 0&&(i=_),v}return yp&&p||(y.f&mp)!==0?g.v:G(g)}}var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var m4t=yw.exports,KD;function y4t(){return KD||(KD=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",f=1,h=2,p=4,g=1,y=2,v=1,b=2,_=4,w=8,S=16,k=32,E=64,T=128,M=256,I=512,$=30,C="...",L=800,F=16,N=1,O=2,D=3,B=1/0,j=9007199254740991,z=17976931348623157e292,U=NaN,V=4294967295,Y=V-1,Z=V>>>1,ct=[["ary",T],["bind",v],["bindKey",b],["curry",w],["curryRight",S],["flip",I],["partial",k],["partialRight",E],["rearg",M]],gt="[object Arguments]",pt="[object Array]",lt="[object AsyncFunction]",yt="[object Boolean]",at="[object Date]",vt="[object DOMException]",st="[object Error]",Q="[object Function]",It="[object GeneratorFunction]",_t="[object Map]",Dt="[object Number]",Ut="[object Null]",xt="[object Object]",qt="[object Promise]",ue="[object Proxy]",Wt="[object RegExp]",re="[object Set]",Ke="[object String]",le="[object Symbol]",_n="[object Undefined]",pn="[object WeakMap]",cr="[object WeakSet]",xr="[object ArrayBuffer]",qe="[object DataView]",nn="[object Float32Array]",Pn="[object Float64Array]",Ti="[object Int8Array]",Yo="[object Int16Array]",yo="[object Int32Array]",mi="[object Uint8Array]",yi="[object Uint8ClampedArray]",ws="[object Uint16Array]",Qu="[object Uint32Array]",pm=/\b__p \+= '';/g,tf=/\b(__p \+=) '' \+/g,vo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lc=/&(?:amp|lt|gt|quot|#39);/g,kh=/[&<>"']/g,Th=RegExp(Lc.source),Sp=RegExp(kh.source),Mh=/<%-([\s\S]+?)%>/g,gm=/<%([\s\S]+?)%>/g,Ih=/<%=([\s\S]+?)%>/g,Ap=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rh=/^\w*$/,mm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ef=/[\\^$.*+?()[\]{}|]/g,ym=RegExp(ef.source),Rt=/^\s+/,Yt=/\s/,Vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Qt=/,? & /,$e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rn=/[()=,{}\[\]\/\s]/,At=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,cn=/^\[object .+?Constructor\]$/,gn=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gn=/($^)/,Bi=/['\n\r\u2028\u2029\\]/g,Cr="\\ud800-\\udfff",vr="\\u0300-\\u036f",ir="\\ufe20-\\ufe2f",Pi="\\u20d0-\\u20ff",vi=vr+ir+Pi,Mi="\\u2700-\\u27bf",$l="a-z\\xdf-\\xf6\\xf8-\\xff",vm="\\xac\\xb1\\xd7\\xf7",SA="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",AA="\\u2000-\\u206f",Ep=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",U8="A-Z\\xc0-\\xd6\\xd8-\\xde",q8="\\ufe0e\\ufe0f",j8=vm+SA+AA+Ep,EA="['’]",ist="["+Cr+"]",V8="["+j8+"]",ub="["+vi+"]",W8="\\d+",ost="["+Mi+"]",Y8="["+$l+"]",H8="[^"+Cr+j8+W8+Mi+$l+U8+"]",kA="\\ud83c[\\udffb-\\udfff]",sst="(?:"+ub+"|"+kA+")",G8="[^"+Cr+"]",TA="(?:\\ud83c[\\udde6-\\uddff]){2}",MA="[\\ud800-\\udbff][\\udc00-\\udfff]",kp="["+U8+"]",X8="\\u200d",K8="(?:"+Y8+"|"+H8+")",ast="(?:"+kp+"|"+H8+")",J8="(?:"+EA+"(?:d|ll|m|re|s|t|ve))?",Z8="(?:"+EA+"(?:D|LL|M|RE|S|T|VE))?",Q8=sst+"?",tN="["+q8+"]?",lst="(?:"+X8+"(?:"+[G8,TA,MA].join("|")+")"+tN+Q8+")*",cst="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ust="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",eN=tN+Q8+lst,fst="(?:"+[ost,TA,MA].join("|")+")"+eN,hst="(?:"+[G8+ub+"?",ub,TA,MA,ist].join("|")+")",dst=RegExp(EA,"g"),pst=RegExp(ub,"g"),IA=RegExp(kA+"(?="+kA+")|"+hst+eN,"g"),gst=RegExp([kp+"?"+Y8+"+"+J8+"(?="+[V8,kp,"$"].join("|")+")",ast+"+"+Z8+"(?="+[V8,kp+K8,"$"].join("|")+")",kp+"?"+K8+"+"+J8,kp+"+"+Z8,ust,cst,W8,fst].join("|"),"g"),mst=RegExp("["+X8+Cr+vi+q8+"]"),yst=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vst=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bst=-1,Sr={};Sr[nn]=Sr[Pn]=Sr[Ti]=Sr[Yo]=Sr[yo]=Sr[mi]=Sr[yi]=Sr[ws]=Sr[Qu]=!0,Sr[gt]=Sr[pt]=Sr[xr]=Sr[yt]=Sr[qe]=Sr[at]=Sr[st]=Sr[Q]=Sr[_t]=Sr[Dt]=Sr[xt]=Sr[Wt]=Sr[re]=Sr[Ke]=Sr[pn]=!1;var br={};br[gt]=br[pt]=br[xr]=br[qe]=br[yt]=br[at]=br[nn]=br[Pn]=br[Ti]=br[Yo]=br[yo]=br[_t]=br[Dt]=br[xt]=br[Wt]=br[re]=br[Ke]=br[le]=br[mi]=br[yi]=br[ws]=br[Qu]=!0,br[st]=br[Q]=br[pn]=!1;var _st={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},wst={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xst={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sst={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ast=parseFloat,Est=parseInt,nN=typeof If=="object"&&If&&If.Object===Object&&If,kst=typeof self=="object"&&self&&self.Object===Object&&self,zi=nN||kst||Function("return this")(),RA=t&&!t.nodeType&&t,Ch=RA&&!0&&e&&!e.nodeType&&e,rN=Ch&&Ch.exports===RA,CA=rN&&nN.process,Js=function(){try{var ft=Ch&&Ch.require&&Ch.require("util").types;return ft||CA&&CA.binding&&CA.binding("util")}catch{}}(),iN=Js&&Js.isArrayBuffer,oN=Js&&Js.isDate,sN=Js&&Js.isMap,aN=Js&&Js.isRegExp,lN=Js&&Js.isSet,cN=Js&&Js.isTypedArray;function xs(ft,St,bt){switch(bt.length){case 0:return ft.call(St);case 1:return ft.call(St,bt[0]);case 2:return ft.call(St,bt[0],bt[1]);case 3:return ft.call(St,bt[0],bt[1],bt[2])}return ft.apply(St,bt)}function Tst(ft,St,bt,Xt){for(var Fe=-1,$n=ft==null?0:ft.length;++Fe<$n;){var bi=ft[Fe];St(Xt,bi,bt(bi),ft)}return Xt}function Zs(ft,St){for(var bt=-1,Xt=ft==null?0:ft.length;++bt<Xt&&St(ft[bt],bt,ft)!==!1;);return ft}function Mst(ft,St){for(var bt=ft==null?0:ft.length;bt--&&St(ft[bt],bt,ft)!==!1;);return ft}function uN(ft,St){for(var bt=-1,Xt=ft==null?0:ft.length;++bt<Xt;)if(!St(ft[bt],bt,ft))return!1;return!0}function nf(ft,St){for(var bt=-1,Xt=ft==null?0:ft.length,Fe=0,$n=[];++bt<Xt;){var bi=ft[bt];St(bi,bt,ft)&&($n[Fe++]=bi)}return $n}function fb(ft,St){var bt=ft==null?0:ft.length;return!!bt&&Tp(ft,St,0)>-1}function NA(ft,St,bt){for(var Xt=-1,Fe=ft==null?0:ft.length;++Xt<Fe;)if(bt(St,ft[Xt]))return!0;return!1}function Nr(ft,St){for(var bt=-1,Xt=ft==null?0:ft.length,Fe=Array(Xt);++bt<Xt;)Fe[bt]=St(ft[bt],bt,ft);return Fe}function rf(ft,St){for(var bt=-1,Xt=St.length,Fe=ft.length;++bt<Xt;)ft[Fe+bt]=St[bt];return ft}function $A(ft,St,bt,Xt){var Fe=-1,$n=ft==null?0:ft.length;for(Xt&&$n&&(bt=ft[++Fe]);++Fe<$n;)bt=St(bt,ft[Fe],Fe,ft);return bt}function Ist(ft,St,bt,Xt){var Fe=ft==null?0:ft.length;for(Xt&&Fe&&(bt=ft[--Fe]);Fe--;)bt=St(bt,ft[Fe],Fe,ft);return bt}function OA(ft,St){for(var bt=-1,Xt=ft==null?0:ft.length;++bt<Xt;)if(St(ft[bt],bt,ft))return!0;return!1}var Rst=DA("length");function Cst(ft){return ft.split("")}function Nst(ft){return ft.match($e)||[]}function fN(ft,St,bt){var Xt;return bt(ft,function(Fe,$n,bi){if(St(Fe,$n,bi))return Xt=$n,!1}),Xt}function hb(ft,St,bt,Xt){for(var Fe=ft.length,$n=bt+(Xt?1:-1);Xt?$n--:++$n<Fe;)if(St(ft[$n],$n,ft))return $n;return-1}function Tp(ft,St,bt){return St===St?Vst(ft,St,bt):hb(ft,hN,bt)}function $st(ft,St,bt,Xt){for(var Fe=bt-1,$n=ft.length;++Fe<$n;)if(Xt(ft[Fe],St))return Fe;return-1}function hN(ft){return ft!==ft}function dN(ft,St){var bt=ft==null?0:ft.length;return bt?FA(ft,St)/bt:U}function DA(ft){return function(St){return St==null?n:St[ft]}}function LA(ft){return function(St){return ft==null?n:ft[St]}}function pN(ft,St,bt,Xt,Fe){return Fe(ft,function($n,bi,ur){bt=Xt?(Xt=!1,$n):St(bt,$n,bi,ur)}),bt}function Ost(ft,St){var bt=ft.length;for(ft.sort(St);bt--;)ft[bt]=ft[bt].value;return ft}function FA(ft,St){for(var bt,Xt=-1,Fe=ft.length;++Xt<Fe;){var $n=St(ft[Xt]);$n!==n&&(bt=bt===n?$n:bt+$n)}return bt}function BA(ft,St){for(var bt=-1,Xt=Array(ft);++bt<ft;)Xt[bt]=St(bt);return Xt}function Dst(ft,St){return Nr(St,function(bt){return[bt,ft[bt]]})}function gN(ft){return ft&&ft.slice(0,bN(ft)+1).replace(Rt,"")}function Ss(ft){return function(St){return ft(St)}}function PA(ft,St){return Nr(St,function(bt){return ft[bt]})}function bm(ft,St){return ft.has(St)}function mN(ft,St){for(var bt=-1,Xt=ft.length;++bt<Xt&&Tp(St,ft[bt],0)>-1;);return bt}function yN(ft,St){for(var bt=ft.length;bt--&&Tp(St,ft[bt],0)>-1;);return bt}function Lst(ft,St){for(var bt=ft.length,Xt=0;bt--;)ft[bt]===St&&++Xt;return Xt}var Fst=LA(_st),Bst=LA(wst);function Pst(ft){return"\\"+Sst[ft]}function zst(ft,St){return ft==null?n:ft[St]}function Mp(ft){return mst.test(ft)}function Ust(ft){return yst.test(ft)}function qst(ft){for(var St,bt=[];!(St=ft.next()).done;)bt.push(St.value);return bt}function zA(ft){var St=-1,bt=Array(ft.size);return ft.forEach(function(Xt,Fe){bt[++St]=[Fe,Xt]}),bt}function vN(ft,St){return function(bt){return ft(St(bt))}}function of(ft,St){for(var bt=-1,Xt=ft.length,Fe=0,$n=[];++bt<Xt;){var bi=ft[bt];(bi===St||bi===u)&&(ft[bt]=u,$n[Fe++]=bt)}return $n}function db(ft){var St=-1,bt=Array(ft.size);return ft.forEach(function(Xt){bt[++St]=Xt}),bt}function jst(ft){var St=-1,bt=Array(ft.size);return ft.forEach(function(Xt){bt[++St]=[Xt,Xt]}),bt}function Vst(ft,St,bt){for(var Xt=bt-1,Fe=ft.length;++Xt<Fe;)if(ft[Xt]===St)return Xt;return-1}function Wst(ft,St,bt){for(var Xt=bt+1;Xt--;)if(ft[Xt]===St)return Xt;return Xt}function Ip(ft){return Mp(ft)?Hst(ft):Rst(ft)}function Ga(ft){return Mp(ft)?Gst(ft):Cst(ft)}function bN(ft){for(var St=ft.length;St--&&Yt.test(ft.charAt(St)););return St}var Yst=LA(xst);function Hst(ft){for(var St=IA.lastIndex=0;IA.test(ft);)++St;return St}function Gst(ft){return ft.match(IA)||[]}function Xst(ft){return ft.match(gst)||[]}var Kst=function ft(St){St=St==null?zi:Rp.defaults(zi.Object(),St,Rp.pick(zi,vst));var bt=St.Array,Xt=St.Date,Fe=St.Error,$n=St.Function,bi=St.Math,ur=St.Object,UA=St.RegExp,Jst=St.String,Qs=St.TypeError,pb=bt.prototype,Zst=$n.prototype,Cp=ur.prototype,gb=St["__core-js_shared__"],mb=Zst.toString,Xn=Cp.hasOwnProperty,Qst=0,_N=function(){var d=/[^.]+$/.exec(gb&&gb.keys&&gb.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),yb=Cp.toString,tat=mb.call(ur),eat=zi._,nat=UA("^"+mb.call(Xn).replace(ef,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vb=rN?St.Buffer:n,sf=St.Symbol,bb=St.Uint8Array,wN=vb?vb.allocUnsafe:n,_b=vN(ur.getPrototypeOf,ur),xN=ur.create,SN=Cp.propertyIsEnumerable,wb=pb.splice,AN=sf?sf.isConcatSpreadable:n,_m=sf?sf.iterator:n,Nh=sf?sf.toStringTag:n,xb=function(){try{var d=Fh(ur,"defineProperty");return d({},"",{}),d}catch{}}(),rat=St.clearTimeout!==zi.clearTimeout&&St.clearTimeout,iat=Xt&&Xt.now!==zi.Date.now&&Xt.now,oat=St.setTimeout!==zi.setTimeout&&St.setTimeout,Sb=bi.ceil,Ab=bi.floor,qA=ur.getOwnPropertySymbols,sat=vb?vb.isBuffer:n,EN=St.isFinite,aat=pb.join,lat=vN(ur.keys,ur),_i=bi.max,Ki=bi.min,cat=Xt.now,uat=St.parseInt,kN=bi.random,fat=pb.reverse,jA=Fh(St,"DataView"),wm=Fh(St,"Map"),VA=Fh(St,"Promise"),Np=Fh(St,"Set"),xm=Fh(St,"WeakMap"),Sm=Fh(ur,"create"),Eb=xm&&new xm,$p={},hat=Bh(jA),dat=Bh(wm),pat=Bh(VA),gat=Bh(Np),mat=Bh(xm),kb=sf?sf.prototype:n,Am=kb?kb.valueOf:n,TN=kb?kb.toString:n;function q(d){if(Hr(d)&&!Ue(d)&&!(d instanceof fn)){if(d instanceof ta)return d;if(Xn.call(d,"__wrapped__"))return M$(d)}return new ta(d)}var Op=function(){function d(){}return function(m){if(!Pr(m))return{};if(xN)return xN(m);d.prototype=m;var A=new d;return d.prototype=n,A}}();function Tb(){}function ta(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=n}q.templateSettings={escape:Mh,evaluate:gm,interpolate:Ih,variable:"",imports:{_:q}},q.prototype=Tb.prototype,q.prototype.constructor=q,ta.prototype=Op(Tb.prototype),ta.prototype.constructor=ta;function fn(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function yat(){var d=new fn(this.__wrapped__);return d.__actions__=Ho(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Ho(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Ho(this.__views__),d}function vat(){if(this.__filtered__){var d=new fn(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function bat(){var d=this.__wrapped__.value(),m=this.__dir__,A=Ue(d),R=m<0,P=A?d.length:0,W=Clt(0,P,this.__views__),K=W.start,nt=W.end,ht=nt-K,kt=R?nt:K-1,Tt=this.__iteratees__,Ot=Tt.length,jt=0,te=Ki(ht,this.__takeCount__);if(!A||!R&&P==ht&&te==ht)return JN(d,this.__actions__);var we=[];t:for(;ht--&&jt<te;){kt+=m;for(var Xe=-1,xe=d[kt];++Xe<Ot;){var on=Tt[Xe],mn=on.iteratee,ks=on.type,wo=mn(xe);if(ks==O)xe=wo;else if(!wo){if(ks==N)continue t;break t}}we[jt++]=xe}return we}fn.prototype=Op(Tb.prototype),fn.prototype.constructor=fn;function $h(d){var m=-1,A=d==null?0:d.length;for(this.clear();++m<A;){var R=d[m];this.set(R[0],R[1])}}function _at(){this.__data__=Sm?Sm(null):{},this.size=0}function wat(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}function xat(d){var m=this.__data__;if(Sm){var A=m[d];return A===l?n:A}return Xn.call(m,d)?m[d]:n}function Sat(d){var m=this.__data__;return Sm?m[d]!==n:Xn.call(m,d)}function Aat(d,m){var A=this.__data__;return this.size+=this.has(d)?0:1,A[d]=Sm&&m===n?l:m,this}$h.prototype.clear=_at,$h.prototype.delete=wat,$h.prototype.get=xat,$h.prototype.has=Sat,$h.prototype.set=Aat;function Fc(d){var m=-1,A=d==null?0:d.length;for(this.clear();++m<A;){var R=d[m];this.set(R[0],R[1])}}function Eat(){this.__data__=[],this.size=0}function kat(d){var m=this.__data__,A=Mb(m,d);if(A<0)return!1;var R=m.length-1;return A==R?m.pop():wb.call(m,A,1),--this.size,!0}function Tat(d){var m=this.__data__,A=Mb(m,d);return A<0?n:m[A][1]}function Mat(d){return Mb(this.__data__,d)>-1}function Iat(d,m){var A=this.__data__,R=Mb(A,d);return R<0?(++this.size,A.push([d,m])):A[R][1]=m,this}Fc.prototype.clear=Eat,Fc.prototype.delete=kat,Fc.prototype.get=Tat,Fc.prototype.has=Mat,Fc.prototype.set=Iat;function Bc(d){var m=-1,A=d==null?0:d.length;for(this.clear();++m<A;){var R=d[m];this.set(R[0],R[1])}}function Rat(){this.size=0,this.__data__={hash:new $h,map:new(wm||Fc),string:new $h}}function Cat(d){var m=zb(this,d).delete(d);return this.size-=m?1:0,m}function Nat(d){return zb(this,d).get(d)}function $at(d){return zb(this,d).has(d)}function Oat(d,m){var A=zb(this,d),R=A.size;return A.set(d,m),this.size+=A.size==R?0:1,this}Bc.prototype.clear=Rat,Bc.prototype.delete=Cat,Bc.prototype.get=Nat,Bc.prototype.has=$at,Bc.prototype.set=Oat;function Oh(d){var m=-1,A=d==null?0:d.length;for(this.__data__=new Bc;++m<A;)this.add(d[m])}function Dat(d){return this.__data__.set(d,l),this}function Lat(d){return this.__data__.has(d)}Oh.prototype.add=Oh.prototype.push=Dat,Oh.prototype.has=Lat;function Xa(d){var m=this.__data__=new Fc(d);this.size=m.size}function Fat(){this.__data__=new Fc,this.size=0}function Bat(d){var m=this.__data__,A=m.delete(d);return this.size=m.size,A}function Pat(d){return this.__data__.get(d)}function zat(d){return this.__data__.has(d)}function Uat(d,m){var A=this.__data__;if(A instanceof Fc){var R=A.__data__;if(!wm||R.length<i-1)return R.push([d,m]),this.size=++A.size,this;A=this.__data__=new Bc(R)}return A.set(d,m),this.size=A.size,this}Xa.prototype.clear=Fat,Xa.prototype.delete=Bat,Xa.prototype.get=Pat,Xa.prototype.has=zat,Xa.prototype.set=Uat;function MN(d,m){var A=Ue(d),R=!A&&Ph(d),P=!A&&!R&&ff(d),W=!A&&!R&&!P&&Bp(d),K=A||R||P||W,nt=K?BA(d.length,Jst):[],ht=nt.length;for(var kt in d)(m||Xn.call(d,kt))&&!(K&&(kt=="length"||P&&(kt=="offset"||kt=="parent")||W&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||qc(kt,ht)))&&nt.push(kt);return nt}function IN(d){var m=d.length;return m?d[eE(0,m-1)]:n}function qat(d,m){return Ub(Ho(d),Dh(m,0,d.length))}function jat(d){return Ub(Ho(d))}function WA(d,m,A){(A!==n&&!Ka(d[m],A)||A===n&&!(m in d))&&Pc(d,m,A)}function Em(d,m,A){var R=d[m];(!(Xn.call(d,m)&&Ka(R,A))||A===n&&!(m in d))&&Pc(d,m,A)}function Mb(d,m){for(var A=d.length;A--;)if(Ka(d[A][0],m))return A;return-1}function Vat(d,m,A,R){return af(d,function(P,W,K){m(R,P,A(P),K)}),R}function RN(d,m){return d&&Dl(m,Ii(m),d)}function Wat(d,m){return d&&Dl(m,Xo(m),d)}function Pc(d,m,A){m=="__proto__"&&xb?xb(d,m,{configurable:!0,enumerable:!0,value:A,writable:!0}):d[m]=A}function YA(d,m){for(var A=-1,R=m.length,P=bt(R),W=d==null;++A<R;)P[A]=W?n:kE(d,m[A]);return P}function Dh(d,m,A){return d===d&&(A!==n&&(d=d<=A?d:A),m!==n&&(d=d>=m?d:m)),d}function ea(d,m,A,R,P,W){var K,nt=m&f,ht=m&h,kt=m&p;if(A&&(K=P?A(d,R,P,W):A(d)),K!==n)return K;if(!Pr(d))return d;var Tt=Ue(d);if(Tt){if(K=$lt(d),!nt)return Ho(d,K)}else{var Ot=Ji(d),jt=Ot==Q||Ot==It;if(ff(d))return t$(d,nt);if(Ot==xt||Ot==gt||jt&&!P){if(K=ht||jt?{}:b$(d),!nt)return ht?xlt(d,Wat(K,d)):wlt(d,RN(K,d))}else{if(!br[Ot])return P?d:{};K=Olt(d,Ot,nt)}}W||(W=new Xa);var te=W.get(d);if(te)return te;W.set(d,K),G$(d)?d.forEach(function(xe){K.add(ea(xe,m,A,xe,d,W))}):Y$(d)&&d.forEach(function(xe,on){K.set(on,ea(xe,m,A,on,d,W))});var we=kt?ht?hE:fE:ht?Xo:Ii,Xe=Tt?n:we(d);return Zs(Xe||d,function(xe,on){Xe&&(on=xe,xe=d[on]),Em(K,on,ea(xe,m,A,on,d,W))}),K}function Yat(d){var m=Ii(d);return function(A){return CN(A,d,m)}}function CN(d,m,A){var R=A.length;if(d==null)return!R;for(d=ur(d);R--;){var P=A[R],W=m[P],K=d[P];if(K===n&&!(P in d)||!W(K))return!1}return!0}function NN(d,m,A){if(typeof d!="function")throw new Qs(s);return Nm(function(){d.apply(n,A)},m)}function km(d,m,A,R){var P=-1,W=fb,K=!0,nt=d.length,ht=[],kt=m.length;if(!nt)return ht;A&&(m=Nr(m,Ss(A))),R?(W=NA,K=!1):m.length>=i&&(W=bm,K=!1,m=new Oh(m));t:for(;++P<nt;){var Tt=d[P],Ot=A==null?Tt:A(Tt);if(Tt=R||Tt!==0?Tt:0,K&&Ot===Ot){for(var jt=kt;jt--;)if(m[jt]===Ot)continue t;ht.push(Tt)}else W(m,Ot,R)||ht.push(Tt)}return ht}var af=o$(Ol),$N=o$(GA,!0);function Hat(d,m){var A=!0;return af(d,function(R,P,W){return A=!!m(R,P,W),A}),A}function Ib(d,m,A){for(var R=-1,P=d.length;++R<P;){var W=d[R],K=m(W);if(K!=null&&(nt===n?K===K&&!Es(K):A(K,nt)))var nt=K,ht=W}return ht}function Gat(d,m,A,R){var P=d.length;for(A=We(A),A<0&&(A=-A>P?0:P+A),R=R===n||R>P?P:We(R),R<0&&(R+=P),R=A>R?0:K$(R);A<R;)d[A++]=m;return d}function ON(d,m){var A=[];return af(d,function(R,P,W){m(R,P,W)&&A.push(R)}),A}function Ui(d,m,A,R,P){var W=-1,K=d.length;for(A||(A=Llt),P||(P=[]);++W<K;){var nt=d[W];m>0&&A(nt)?m>1?Ui(nt,m-1,A,R,P):rf(P,nt):R||(P[P.length]=nt)}return P}var HA=s$(),DN=s$(!0);function Ol(d,m){return d&&HA(d,m,Ii)}function GA(d,m){return d&&DN(d,m,Ii)}function Rb(d,m){return nf(m,function(A){return jc(d[A])})}function Lh(d,m){m=cf(m,d);for(var A=0,R=m.length;d!=null&&A<R;)d=d[Ll(m[A++])];return A&&A==R?d:n}function LN(d,m,A){var R=m(d);return Ue(d)?R:rf(R,A(d))}function bo(d){return d==null?d===n?_n:Ut:Nh&&Nh in ur(d)?Rlt(d):jlt(d)}function XA(d,m){return d>m}function Xat(d,m){return d!=null&&Xn.call(d,m)}function Kat(d,m){return d!=null&&m in ur(d)}function Jat(d,m,A){return d>=Ki(m,A)&&d<_i(m,A)}function KA(d,m,A){for(var R=A?NA:fb,P=d[0].length,W=d.length,K=W,nt=bt(W),ht=1/0,kt=[];K--;){var Tt=d[K];K&&m&&(Tt=Nr(Tt,Ss(m))),ht=Ki(Tt.length,ht),nt[K]=!A&&(m||P>=120&&Tt.length>=120)?new Oh(K&&Tt):n}Tt=d[0];var Ot=-1,jt=nt[0];t:for(;++Ot<P&&kt.length<ht;){var te=Tt[Ot],we=m?m(te):te;if(te=A||te!==0?te:0,!(jt?bm(jt,we):R(kt,we,A))){for(K=W;--K;){var Xe=nt[K];if(!(Xe?bm(Xe,we):R(d[K],we,A)))continue t}jt&&jt.push(we),kt.push(te)}}return kt}function Zat(d,m,A,R){return Ol(d,function(P,W,K){m(R,A(P),W,K)}),R}function Tm(d,m,A){m=cf(m,d),d=S$(d,m);var R=d==null?d:d[Ll(ra(m))];return R==null?n:xs(R,d,A)}function FN(d){return Hr(d)&&bo(d)==gt}function Qat(d){return Hr(d)&&bo(d)==xr}function tlt(d){return Hr(d)&&bo(d)==at}function Mm(d,m,A,R,P){return d===m?!0:d==null||m==null||!Hr(d)&&!Hr(m)?d!==d&&m!==m:elt(d,m,A,R,Mm,P)}function elt(d,m,A,R,P,W){var K=Ue(d),nt=Ue(m),ht=K?pt:Ji(d),kt=nt?pt:Ji(m);ht=ht==gt?xt:ht,kt=kt==gt?xt:kt;var Tt=ht==xt,Ot=kt==xt,jt=ht==kt;if(jt&&ff(d)){if(!ff(m))return!1;K=!0,Tt=!1}if(jt&&!Tt)return W||(W=new Xa),K||Bp(d)?m$(d,m,A,R,P,W):Mlt(d,m,ht,A,R,P,W);if(!(A&g)){var te=Tt&&Xn.call(d,"__wrapped__"),we=Ot&&Xn.call(m,"__wrapped__");if(te||we){var Xe=te?d.value():d,xe=we?m.value():m;return W||(W=new Xa),P(Xe,xe,A,R,W)}}return jt?(W||(W=new Xa),Ilt(d,m,A,R,P,W)):!1}function nlt(d){return Hr(d)&&Ji(d)==_t}function JA(d,m,A,R){var P=A.length,W=P,K=!R;if(d==null)return!W;for(d=ur(d);P--;){var nt=A[P];if(K&&nt[2]?nt[1]!==d[nt[0]]:!(nt[0]in d))return!1}for(;++P<W;){nt=A[P];var ht=nt[0],kt=d[ht],Tt=nt[1];if(K&&nt[2]){if(kt===n&&!(ht in d))return!1}else{var Ot=new Xa;if(R)var jt=R(kt,Tt,ht,d,m,Ot);if(!(jt===n?Mm(Tt,kt,g|y,R,Ot):jt))return!1}}return!0}function BN(d){if(!Pr(d)||Blt(d))return!1;var m=jc(d)?nat:cn;return m.test(Bh(d))}function rlt(d){return Hr(d)&&bo(d)==Wt}function ilt(d){return Hr(d)&&Ji(d)==re}function olt(d){return Hr(d)&&Hb(d.length)&&!!Sr[bo(d)]}function PN(d){return typeof d=="function"?d:d==null?Ko:typeof d=="object"?Ue(d)?qN(d[0],d[1]):UN(d):a7(d)}function ZA(d){if(!Cm(d))return lat(d);var m=[];for(var A in ur(d))Xn.call(d,A)&&A!="constructor"&&m.push(A);return m}function slt(d){if(!Pr(d))return qlt(d);var m=Cm(d),A=[];for(var R in d)R=="constructor"&&(m||!Xn.call(d,R))||A.push(R);return A}function QA(d,m){return d<m}function zN(d,m){var A=-1,R=Go(d)?bt(d.length):[];return af(d,function(P,W,K){R[++A]=m(P,W,K)}),R}function UN(d){var m=pE(d);return m.length==1&&m[0][2]?w$(m[0][0],m[0][1]):function(A){return A===d||JA(A,d,m)}}function qN(d,m){return mE(d)&&_$(m)?w$(Ll(d),m):function(A){var R=kE(A,d);return R===n&&R===m?TE(A,d):Mm(m,R,g|y)}}function Cb(d,m,A,R,P){d!==m&&HA(m,function(W,K){if(P||(P=new Xa),Pr(W))alt(d,m,K,A,Cb,R,P);else{var nt=R?R(vE(d,K),W,K+"",d,m,P):n;nt===n&&(nt=W),WA(d,K,nt)}},Xo)}function alt(d,m,A,R,P,W,K){var nt=vE(d,A),ht=vE(m,A),kt=K.get(ht);if(kt){WA(d,A,kt);return}var Tt=W?W(nt,ht,A+"",d,m,K):n,Ot=Tt===n;if(Ot){var jt=Ue(ht),te=!jt&&ff(ht),we=!jt&&!te&&Bp(ht);Tt=ht,jt||te||we?Ue(nt)?Tt=nt:ei(nt)?Tt=Ho(nt):te?(Ot=!1,Tt=t$(ht,!0)):we?(Ot=!1,Tt=e$(ht,!0)):Tt=[]:$m(ht)||Ph(ht)?(Tt=nt,Ph(nt)?Tt=J$(nt):(!Pr(nt)||jc(nt))&&(Tt=b$(ht))):Ot=!1}Ot&&(K.set(ht,Tt),P(Tt,ht,R,W,K),K.delete(ht)),WA(d,A,Tt)}function jN(d,m){var A=d.length;if(A)return m+=m<0?A:0,qc(m,A)?d[m]:n}function VN(d,m,A){m.length?m=Nr(m,function(W){return Ue(W)?function(K){return Lh(K,W.length===1?W[0]:W)}:W}):m=[Ko];var R=-1;m=Nr(m,Ss(ge()));var P=zN(d,function(W,K,nt){var ht=Nr(m,function(kt){return kt(W)});return{criteria:ht,index:++R,value:W}});return Ost(P,function(W,K){return _lt(W,K,A)})}function llt(d,m){return WN(d,m,function(A,R){return TE(d,R)})}function WN(d,m,A){for(var R=-1,P=m.length,W={};++R<P;){var K=m[R],nt=Lh(d,K);A(nt,K)&&Im(W,cf(K,d),nt)}return W}function clt(d){return function(m){return Lh(m,d)}}function tE(d,m,A,R){var P=R?$st:Tp,W=-1,K=m.length,nt=d;for(d===m&&(m=Ho(m)),A&&(nt=Nr(d,Ss(A)));++W<K;)for(var ht=0,kt=m[W],Tt=A?A(kt):kt;(ht=P(nt,Tt,ht,R))>-1;)nt!==d&&wb.call(nt,ht,1),wb.call(d,ht,1);return d}function YN(d,m){for(var A=d?m.length:0,R=A-1;A--;){var P=m[A];if(A==R||P!==W){var W=P;qc(P)?wb.call(d,P,1):iE(d,P)}}return d}function eE(d,m){return d+Ab(kN()*(m-d+1))}function ult(d,m,A,R){for(var P=-1,W=_i(Sb((m-d)/(A||1)),0),K=bt(W);W--;)K[R?W:++P]=d,d+=A;return K}function nE(d,m){var A="";if(!d||m<1||m>j)return A;do m%2&&(A+=d),m=Ab(m/2),m&&(d+=d);while(m);return A}function Je(d,m){return bE(x$(d,m,Ko),d+"")}function flt(d){return IN(Pp(d))}function hlt(d,m){var A=Pp(d);return Ub(A,Dh(m,0,A.length))}function Im(d,m,A,R){if(!Pr(d))return d;m=cf(m,d);for(var P=-1,W=m.length,K=W-1,nt=d;nt!=null&&++P<W;){var ht=Ll(m[P]),kt=A;if(ht==="__proto__"||ht==="constructor"||ht==="prototype")return d;if(P!=K){var Tt=nt[ht];kt=R?R(Tt,ht,nt):n,kt===n&&(kt=Pr(Tt)?Tt:qc(m[P+1])?[]:{})}Em(nt,ht,kt),nt=nt[ht]}return d}var HN=Eb?function(d,m){return Eb.set(d,m),d}:Ko,dlt=xb?function(d,m){return xb(d,"toString",{configurable:!0,enumerable:!1,value:IE(m),writable:!0})}:Ko;function plt(d){return Ub(Pp(d))}function na(d,m,A){var R=-1,P=d.length;m<0&&(m=-m>P?0:P+m),A=A>P?P:A,A<0&&(A+=P),P=m>A?0:A-m>>>0,m>>>=0;for(var W=bt(P);++R<P;)W[R]=d[R+m];return W}function glt(d,m){var A;return af(d,function(R,P,W){return A=m(R,P,W),!A}),!!A}function Nb(d,m,A){var R=0,P=d==null?R:d.length;if(typeof m=="number"&&m===m&&P<=Z){for(;R<P;){var W=R+P>>>1,K=d[W];K!==null&&!Es(K)&&(A?K<=m:K<m)?R=W+1:P=W}return P}return rE(d,m,Ko,A)}function rE(d,m,A,R){var P=0,W=d==null?0:d.length;if(W===0)return 0;m=A(m);for(var K=m!==m,nt=m===null,ht=Es(m),kt=m===n;P<W;){var Tt=Ab((P+W)/2),Ot=A(d[Tt]),jt=Ot!==n,te=Ot===null,we=Ot===Ot,Xe=Es(Ot);if(K)var xe=R||we;else kt?xe=we&&(R||jt):nt?xe=we&&jt&&(R||!te):ht?xe=we&&jt&&!te&&(R||!Xe):te||Xe?xe=!1:xe=R?Ot<=m:Ot<m;xe?P=Tt+1:W=Tt}return Ki(W,Y)}function GN(d,m){for(var A=-1,R=d.length,P=0,W=[];++A<R;){var K=d[A],nt=m?m(K):K;if(!A||!Ka(nt,ht)){var ht=nt;W[P++]=K===0?0:K}}return W}function XN(d){return typeof d=="number"?d:Es(d)?U:+d}function As(d){if(typeof d=="string")return d;if(Ue(d))return Nr(d,As)+"";if(Es(d))return TN?TN.call(d):"";var m=d+"";return m=="0"&&1/d==-B?"-0":m}function lf(d,m,A){var R=-1,P=fb,W=d.length,K=!0,nt=[],ht=nt;if(A)K=!1,P=NA;else if(W>=i){var kt=m?null:klt(d);if(kt)return db(kt);K=!1,P=bm,ht=new Oh}else ht=m?[]:nt;t:for(;++R<W;){var Tt=d[R],Ot=m?m(Tt):Tt;if(Tt=A||Tt!==0?Tt:0,K&&Ot===Ot){for(var jt=ht.length;jt--;)if(ht[jt]===Ot)continue t;m&&ht.push(Ot),nt.push(Tt)}else P(ht,Ot,A)||(ht!==nt&&ht.push(Ot),nt.push(Tt))}return nt}function iE(d,m){return m=cf(m,d),d=S$(d,m),d==null||delete d[Ll(ra(m))]}function KN(d,m,A,R){return Im(d,m,A(Lh(d,m)),R)}function $b(d,m,A,R){for(var P=d.length,W=R?P:-1;(R?W--:++W<P)&&m(d[W],W,d););return A?na(d,R?0:W,R?W+1:P):na(d,R?W+1:0,R?P:W)}function JN(d,m){var A=d;return A instanceof fn&&(A=A.value()),$A(m,function(R,P){return P.func.apply(P.thisArg,rf([R],P.args))},A)}function oE(d,m,A){var R=d.length;if(R<2)return R?lf(d[0]):[];for(var P=-1,W=bt(R);++P<R;)for(var K=d[P],nt=-1;++nt<R;)nt!=P&&(W[P]=km(W[P]||K,d[nt],m,A));return lf(Ui(W,1),m,A)}function ZN(d,m,A){for(var R=-1,P=d.length,W=m.length,K={};++R<P;){var nt=R<W?m[R]:n;A(K,d[R],nt)}return K}function sE(d){return ei(d)?d:[]}function aE(d){return typeof d=="function"?d:Ko}function cf(d,m){return Ue(d)?d:mE(d,m)?[d]:T$(zn(d))}var mlt=Je;function uf(d,m,A){var R=d.length;return A=A===n?R:A,!m&&A>=R?d:na(d,m,A)}var QN=rat||function(d){return zi.clearTimeout(d)};function t$(d,m){if(m)return d.slice();var A=d.length,R=wN?wN(A):new d.constructor(A);return d.copy(R),R}function lE(d){var m=new d.constructor(d.byteLength);return new bb(m).set(new bb(d)),m}function ylt(d,m){var A=m?lE(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.byteLength)}function vlt(d){var m=new d.constructor(d.source,Lt.exec(d));return m.lastIndex=d.lastIndex,m}function blt(d){return Am?ur(Am.call(d)):{}}function e$(d,m){var A=m?lE(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.length)}function n$(d,m){if(d!==m){var A=d!==n,R=d===null,P=d===d,W=Es(d),K=m!==n,nt=m===null,ht=m===m,kt=Es(m);if(!nt&&!kt&&!W&&d>m||W&&K&&ht&&!nt&&!kt||R&&K&&ht||!A&&ht||!P)return 1;if(!R&&!W&&!kt&&d<m||kt&&A&&P&&!R&&!W||nt&&A&&P||!K&&P||!ht)return-1}return 0}function _lt(d,m,A){for(var R=-1,P=d.criteria,W=m.criteria,K=P.length,nt=A.length;++R<K;){var ht=n$(P[R],W[R]);if(ht){if(R>=nt)return ht;var kt=A[R];return ht*(kt=="desc"?-1:1)}}return d.index-m.index}function r$(d,m,A,R){for(var P=-1,W=d.length,K=A.length,nt=-1,ht=m.length,kt=_i(W-K,0),Tt=bt(ht+kt),Ot=!R;++nt<ht;)Tt[nt]=m[nt];for(;++P<K;)(Ot||P<W)&&(Tt[A[P]]=d[P]);for(;kt--;)Tt[nt++]=d[P++];return Tt}function i$(d,m,A,R){for(var P=-1,W=d.length,K=-1,nt=A.length,ht=-1,kt=m.length,Tt=_i(W-nt,0),Ot=bt(Tt+kt),jt=!R;++P<Tt;)Ot[P]=d[P];for(var te=P;++ht<kt;)Ot[te+ht]=m[ht];for(;++K<nt;)(jt||P<W)&&(Ot[te+A[K]]=d[P++]);return Ot}function Ho(d,m){var A=-1,R=d.length;for(m||(m=bt(R));++A<R;)m[A]=d[A];return m}function Dl(d,m,A,R){var P=!A;A||(A={});for(var W=-1,K=m.length;++W<K;){var nt=m[W],ht=R?R(A[nt],d[nt],nt,A,d):n;ht===n&&(ht=d[nt]),P?Pc(A,nt,ht):Em(A,nt,ht)}return A}function wlt(d,m){return Dl(d,gE(d),m)}function xlt(d,m){return Dl(d,y$(d),m)}function Ob(d,m){return function(A,R){var P=Ue(A)?Tst:Vat,W=m?m():{};return P(A,d,ge(R,2),W)}}function Dp(d){return Je(function(m,A){var R=-1,P=A.length,W=P>1?A[P-1]:n,K=P>2?A[2]:n;for(W=d.length>3&&typeof W=="function"?(P--,W):n,K&&_o(A[0],A[1],K)&&(W=P<3?n:W,P=1),m=ur(m);++R<P;){var nt=A[R];nt&&d(m,nt,R,W)}return m})}function o$(d,m){return function(A,R){if(A==null)return A;if(!Go(A))return d(A,R);for(var P=A.length,W=m?P:-1,K=ur(A);(m?W--:++W<P)&&R(K[W],W,K)!==!1;);return A}}function s$(d){return function(m,A,R){for(var P=-1,W=ur(m),K=R(m),nt=K.length;nt--;){var ht=K[d?nt:++P];if(A(W[ht],ht,W)===!1)break}return m}}function Slt(d,m,A){var R=m&v,P=Rm(d);function W(){var K=this&&this!==zi&&this instanceof W?P:d;return K.apply(R?A:this,arguments)}return W}function a$(d){return function(m){m=zn(m);var A=Mp(m)?Ga(m):n,R=A?A[0]:m.charAt(0),P=A?uf(A,1).join(""):m.slice(1);return R[d]()+P}}function Lp(d){return function(m){return $A(o7(i7(m).replace(dst,"")),d,"")}}function Rm(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var A=Op(d.prototype),R=d.apply(A,m);return Pr(R)?R:A}}function Alt(d,m,A){var R=Rm(d);function P(){for(var W=arguments.length,K=bt(W),nt=W,ht=Fp(P);nt--;)K[nt]=arguments[nt];var kt=W<3&&K[0]!==ht&&K[W-1]!==ht?[]:of(K,ht);if(W-=kt.length,W<A)return h$(d,m,Db,P.placeholder,n,K,kt,n,n,A-W);var Tt=this&&this!==zi&&this instanceof P?R:d;return xs(Tt,this,K)}return P}function l$(d){return function(m,A,R){var P=ur(m);if(!Go(m)){var W=ge(A,3);m=Ii(m),A=function(nt){return W(P[nt],nt,P)}}var K=d(m,A,R);return K>-1?P[W?m[K]:K]:n}}function c$(d){return Uc(function(m){var A=m.length,R=A,P=ta.prototype.thru;for(d&&m.reverse();R--;){var W=m[R];if(typeof W!="function")throw new Qs(s);if(P&&!K&&Pb(W)=="wrapper")var K=new ta([],!0)}for(R=K?R:A;++R<A;){W=m[R];var nt=Pb(W),ht=nt=="wrapper"?dE(W):n;ht&&yE(ht[0])&&ht[1]==(T|w|k|M)&&!ht[4].length&&ht[9]==1?K=K[Pb(ht[0])].apply(K,ht[3]):K=W.length==1&&yE(W)?K[nt]():K.thru(W)}return function(){var kt=arguments,Tt=kt[0];if(K&&kt.length==1&&Ue(Tt))return K.plant(Tt).value();for(var Ot=0,jt=A?m[Ot].apply(this,kt):Tt;++Ot<A;)jt=m[Ot].call(this,jt);return jt}})}function Db(d,m,A,R,P,W,K,nt,ht,kt){var Tt=m&T,Ot=m&v,jt=m&b,te=m&(w|S),we=m&I,Xe=jt?n:Rm(d);function xe(){for(var on=arguments.length,mn=bt(on),ks=on;ks--;)mn[ks]=arguments[ks];if(te)var wo=Fp(xe),Ts=Lst(mn,wo);if(R&&(mn=r$(mn,R,P,te)),W&&(mn=i$(mn,W,K,te)),on-=Ts,te&&on<kt){var ni=of(mn,wo);return h$(d,m,Db,xe.placeholder,A,mn,ni,nt,ht,kt-on)}var Ja=Ot?A:this,Wc=jt?Ja[d]:d;return on=mn.length,nt?mn=Vlt(mn,nt):we&&on>1&&mn.reverse(),Tt&&ht<on&&(mn.length=ht),this&&this!==zi&&this instanceof xe&&(Wc=Xe||Rm(Wc)),Wc.apply(Ja,mn)}return xe}function u$(d,m){return function(A,R){return Zat(A,d,m(R),{})}}function Lb(d,m){return function(A,R){var P;if(A===n&&R===n)return m;if(A!==n&&(P=A),R!==n){if(P===n)return R;typeof A=="string"||typeof R=="string"?(A=As(A),R=As(R)):(A=XN(A),R=XN(R)),P=d(A,R)}return P}}function cE(d){return Uc(function(m){return m=Nr(m,Ss(ge())),Je(function(A){var R=this;return d(m,function(P){return xs(P,R,A)})})})}function Fb(d,m){m=m===n?" ":As(m);var A=m.length;if(A<2)return A?nE(m,d):m;var R=nE(m,Sb(d/Ip(m)));return Mp(m)?uf(Ga(R),0,d).join(""):R.slice(0,d)}function Elt(d,m,A,R){var P=m&v,W=Rm(d);function K(){for(var nt=-1,ht=arguments.length,kt=-1,Tt=R.length,Ot=bt(Tt+ht),jt=this&&this!==zi&&this instanceof K?W:d;++kt<Tt;)Ot[kt]=R[kt];for(;ht--;)Ot[kt++]=arguments[++nt];return xs(jt,P?A:this,Ot)}return K}function f$(d){return function(m,A,R){return R&&typeof R!="number"&&_o(m,A,R)&&(A=R=n),m=Vc(m),A===n?(A=m,m=0):A=Vc(A),R=R===n?m<A?1:-1:Vc(R),ult(m,A,R,d)}}function Bb(d){return function(m,A){return typeof m=="string"&&typeof A=="string"||(m=ia(m),A=ia(A)),d(m,A)}}function h$(d,m,A,R,P,W,K,nt,ht,kt){var Tt=m&w,Ot=Tt?K:n,jt=Tt?n:K,te=Tt?W:n,we=Tt?n:W;m|=Tt?k:E,m&=~(Tt?E:k),m&_||(m&=-4);var Xe=[d,m,P,te,Ot,we,jt,nt,ht,kt],xe=A.apply(n,Xe);return yE(d)&&A$(xe,Xe),xe.placeholder=R,E$(xe,d,m)}function uE(d){var m=bi[d];return function(A,R){if(A=ia(A),R=R==null?0:Ki(We(R),292),R&&EN(A)){var P=(zn(A)+"e").split("e"),W=m(P[0]+"e"+(+P[1]+R));return P=(zn(W)+"e").split("e"),+(P[0]+"e"+(+P[1]-R))}return m(A)}}var klt=Np&&1/db(new Np([,-0]))[1]==B?function(d){return new Np(d)}:NE;function d$(d){return function(m){var A=Ji(m);return A==_t?zA(m):A==re?jst(m):Dst(m,d(m))}}function zc(d,m,A,R,P,W,K,nt){var ht=m&b;if(!ht&&typeof d!="function")throw new Qs(s);var kt=R?R.length:0;if(kt||(m&=-97,R=P=n),K=K===n?K:_i(We(K),0),nt=nt===n?nt:We(nt),kt-=P?P.length:0,m&E){var Tt=R,Ot=P;R=P=n}var jt=ht?n:dE(d),te=[d,m,A,R,P,Tt,Ot,W,K,nt];if(jt&&Ult(te,jt),d=te[0],m=te[1],A=te[2],R=te[3],P=te[4],nt=te[9]=te[9]===n?ht?0:d.length:_i(te[9]-kt,0),!nt&&m&(w|S)&&(m&=-25),!m||m==v)var we=Slt(d,m,A);else m==w||m==S?we=Alt(d,m,nt):(m==k||m==(v|k))&&!P.length?we=Elt(d,m,A,R):we=Db.apply(n,te);var Xe=jt?HN:A$;return E$(Xe(we,te),d,m)}function p$(d,m,A,R){return d===n||Ka(d,Cp[A])&&!Xn.call(R,A)?m:d}function g$(d,m,A,R,P,W){return Pr(d)&&Pr(m)&&(W.set(m,d),Cb(d,m,n,g$,W),W.delete(m)),d}function Tlt(d){return $m(d)?n:d}function m$(d,m,A,R,P,W){var K=A&g,nt=d.length,ht=m.length;if(nt!=ht&&!(K&&ht>nt))return!1;var kt=W.get(d),Tt=W.get(m);if(kt&&Tt)return kt==m&&Tt==d;var Ot=-1,jt=!0,te=A&y?new Oh:n;for(W.set(d,m),W.set(m,d);++Ot<nt;){var we=d[Ot],Xe=m[Ot];if(R)var xe=K?R(Xe,we,Ot,m,d,W):R(we,Xe,Ot,d,m,W);if(xe!==n){if(xe)continue;jt=!1;break}if(te){if(!OA(m,function(on,mn){if(!bm(te,mn)&&(we===on||P(we,on,A,R,W)))return te.push(mn)})){jt=!1;break}}else if(!(we===Xe||P(we,Xe,A,R,W))){jt=!1;break}}return W.delete(d),W.delete(m),jt}function Mlt(d,m,A,R,P,W,K){switch(A){case qe:if(d.byteLength!=m.byteLength||d.byteOffset!=m.byteOffset)return!1;d=d.buffer,m=m.buffer;case xr:return!(d.byteLength!=m.byteLength||!W(new bb(d),new bb(m)));case yt:case at:case Dt:return Ka(+d,+m);case st:return d.name==m.name&&d.message==m.message;case Wt:case Ke:return d==m+"";case _t:var nt=zA;case re:var ht=R&g;if(nt||(nt=db),d.size!=m.size&&!ht)return!1;var kt=K.get(d);if(kt)return kt==m;R|=y,K.set(d,m);var Tt=m$(nt(d),nt(m),R,P,W,K);return K.delete(d),Tt;case le:if(Am)return Am.call(d)==Am.call(m)}return!1}function Ilt(d,m,A,R,P,W){var K=A&g,nt=fE(d),ht=nt.length,kt=fE(m),Tt=kt.length;if(ht!=Tt&&!K)return!1;for(var Ot=ht;Ot--;){var jt=nt[Ot];if(!(K?jt in m:Xn.call(m,jt)))return!1}var te=W.get(d),we=W.get(m);if(te&&we)return te==m&&we==d;var Xe=!0;W.set(d,m),W.set(m,d);for(var xe=K;++Ot<ht;){jt=nt[Ot];var on=d[jt],mn=m[jt];if(R)var ks=K?R(mn,on,jt,m,d,W):R(on,mn,jt,d,m,W);if(!(ks===n?on===mn||P(on,mn,A,R,W):ks)){Xe=!1;break}xe||(xe=jt=="constructor")}if(Xe&&!xe){var wo=d.constructor,Ts=m.constructor;wo!=Ts&&"constructor"in d&&"constructor"in m&&!(typeof wo=="function"&&wo instanceof wo&&typeof Ts=="function"&&Ts instanceof Ts)&&(Xe=!1)}return W.delete(d),W.delete(m),Xe}function Uc(d){return bE(x$(d,n,C$),d+"")}function fE(d){return LN(d,Ii,gE)}function hE(d){return LN(d,Xo,y$)}var dE=Eb?function(d){return Eb.get(d)}:NE;function Pb(d){for(var m=d.name+"",A=$p[m],R=Xn.call($p,m)?A.length:0;R--;){var P=A[R],W=P.func;if(W==null||W==d)return P.name}return m}function Fp(d){var m=Xn.call(q,"placeholder")?q:d;return m.placeholder}function ge(){var d=q.iteratee||RE;return d=d===RE?PN:d,arguments.length?d(arguments[0],arguments[1]):d}function zb(d,m){var A=d.__data__;return Flt(m)?A[typeof m=="string"?"string":"hash"]:A.map}function pE(d){for(var m=Ii(d),A=m.length;A--;){var R=m[A],P=d[R];m[A]=[R,P,_$(P)]}return m}function Fh(d,m){var A=zst(d,m);return BN(A)?A:n}function Rlt(d){var m=Xn.call(d,Nh),A=d[Nh];try{d[Nh]=n;var R=!0}catch{}var P=yb.call(d);return R&&(m?d[Nh]=A:delete d[Nh]),P}var gE=qA?function(d){return d==null?[]:(d=ur(d),nf(qA(d),function(m){return SN.call(d,m)}))}:$E,y$=qA?function(d){for(var m=[];d;)rf(m,gE(d)),d=_b(d);return m}:$E,Ji=bo;(jA&&Ji(new jA(new ArrayBuffer(1)))!=qe||wm&&Ji(new wm)!=_t||VA&&Ji(VA.resolve())!=qt||Np&&Ji(new Np)!=re||xm&&Ji(new xm)!=pn)&&(Ji=function(d){var m=bo(d),A=m==xt?d.constructor:n,R=A?Bh(A):"";if(R)switch(R){case hat:return qe;case dat:return _t;case pat:return qt;case gat:return re;case mat:return pn}return m});function Clt(d,m,A){for(var R=-1,P=A.length;++R<P;){var W=A[R],K=W.size;switch(W.type){case"drop":d+=K;break;case"dropRight":m-=K;break;case"take":m=Ki(m,d+K);break;case"takeRight":d=_i(d,m-K);break}}return{start:d,end:m}}function Nlt(d){var m=d.match(Gt);return m?m[1].split(Qt):[]}function v$(d,m,A){m=cf(m,d);for(var R=-1,P=m.length,W=!1;++R<P;){var K=Ll(m[R]);if(!(W=d!=null&&A(d,K)))break;d=d[K]}return W||++R!=P?W:(P=d==null?0:d.length,!!P&&Hb(P)&&qc(K,P)&&(Ue(d)||Ph(d)))}function $lt(d){var m=d.length,A=new d.constructor(m);return m&&typeof d[0]=="string"&&Xn.call(d,"index")&&(A.index=d.index,A.input=d.input),A}function b$(d){return typeof d.constructor=="function"&&!Cm(d)?Op(_b(d)):{}}function Olt(d,m,A){var R=d.constructor;switch(m){case xr:return lE(d);case yt:case at:return new R(+d);case qe:return ylt(d,A);case nn:case Pn:case Ti:case Yo:case yo:case mi:case yi:case ws:case Qu:return e$(d,A);case _t:return new R;case Dt:case Ke:return new R(d);case Wt:return vlt(d);case re:return new R;case le:return blt(d)}}function Dlt(d,m){var A=m.length;if(!A)return d;var R=A-1;return m[R]=(A>1?"& ":"")+m[R],m=m.join(A>2?", ":" "),d.replace(Vt,`{
/* [wrapped with `+m+`] */
`)}function Llt(d){return Ue(d)||Ph(d)||!!(AN&&d&&d[AN])}function qc(d,m){var A=typeof d;return m=m??j,!!m&&(A=="number"||A!="symbol"&&se.test(d))&&d>-1&&d%1==0&&d<m}function _o(d,m,A){if(!Pr(A))return!1;var R=typeof m;return(R=="number"?Go(A)&&qc(m,A.length):R=="string"&&m in A)?Ka(A[m],d):!1}function mE(d,m){if(Ue(d))return!1;var A=typeof d;return A=="number"||A=="symbol"||A=="boolean"||d==null||Es(d)?!0:Rh.test(d)||!Ap.test(d)||m!=null&&d in ur(m)}function Flt(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function yE(d){var m=Pb(d),A=q[m];if(typeof A!="function"||!(m in fn.prototype))return!1;if(d===A)return!0;var R=dE(A);return!!R&&d===R[0]}function Blt(d){return!!_N&&_N in d}var Plt=gb?jc:OE;function Cm(d){var m=d&&d.constructor,A=typeof m=="function"&&m.prototype||Cp;return d===A}function _$(d){return d===d&&!Pr(d)}function w$(d,m){return function(A){return A==null?!1:A[d]===m&&(m!==n||d in ur(A))}}function zlt(d){var m=Wb(d,function(R){return A.size===c&&A.clear(),R}),A=m.cache;return m}function Ult(d,m){var A=d[1],R=m[1],P=A|R,W=P<(v|b|T),K=R==T&&A==w||R==T&&A==M&&d[7].length<=m[8]||R==(T|M)&&m[7].length<=m[8]&&A==w;if(!(W||K))return d;R&v&&(d[2]=m[2],P|=A&v?0:_);var nt=m[3];if(nt){var ht=d[3];d[3]=ht?r$(ht,nt,m[4]):nt,d[4]=ht?of(d[3],u):m[4]}return nt=m[5],nt&&(ht=d[5],d[5]=ht?i$(ht,nt,m[6]):nt,d[6]=ht?of(d[5],u):m[6]),nt=m[7],nt&&(d[7]=nt),R&T&&(d[8]=d[8]==null?m[8]:Ki(d[8],m[8])),d[9]==null&&(d[9]=m[9]),d[0]=m[0],d[1]=P,d}function qlt(d){var m=[];if(d!=null)for(var A in ur(d))m.push(A);return m}function jlt(d){return yb.call(d)}function x$(d,m,A){return m=_i(m===n?d.length-1:m,0),function(){for(var R=arguments,P=-1,W=_i(R.length-m,0),K=bt(W);++P<W;)K[P]=R[m+P];P=-1;for(var nt=bt(m+1);++P<m;)nt[P]=R[P];return nt[m]=A(K),xs(d,this,nt)}}function S$(d,m){return m.length<2?d:Lh(d,na(m,0,-1))}function Vlt(d,m){for(var A=d.length,R=Ki(m.length,A),P=Ho(d);R--;){var W=m[R];d[R]=qc(W,A)?P[W]:n}return d}function vE(d,m){if(!(m==="constructor"&&typeof d[m]=="function")&&m!="__proto__")return d[m]}var A$=k$(HN),Nm=oat||function(d,m){return zi.setTimeout(d,m)},bE=k$(dlt);function E$(d,m,A){var R=m+"";return bE(d,Dlt(R,Wlt(Nlt(R),A)))}function k$(d){var m=0,A=0;return function(){var R=cat(),P=F-(R-A);if(A=R,P>0){if(++m>=L)return arguments[0]}else m=0;return d.apply(n,arguments)}}function Ub(d,m){var A=-1,R=d.length,P=R-1;for(m=m===n?R:m;++A<m;){var W=eE(A,P),K=d[W];d[W]=d[A],d[A]=K}return d.length=m,d}var T$=zlt(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(mm,function(A,R,P,W){m.push(P?W.replace(At,"$1"):R||A)}),m});function Ll(d){if(typeof d=="string"||Es(d))return d;var m=d+"";return m=="0"&&1/d==-B?"-0":m}function Bh(d){if(d!=null){try{return mb.call(d)}catch{}try{return d+""}catch{}}return""}function Wlt(d,m){return Zs(ct,function(A){var R="_."+A[0];m&A[1]&&!fb(d,R)&&d.push(R)}),d.sort()}function M$(d){if(d instanceof fn)return d.clone();var m=new ta(d.__wrapped__,d.__chain__);return m.__actions__=Ho(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}function Ylt(d,m,A){(A?_o(d,m,A):m===n)?m=1:m=_i(We(m),0);var R=d==null?0:d.length;if(!R||m<1)return[];for(var P=0,W=0,K=bt(Sb(R/m));P<R;)K[W++]=na(d,P,P+=m);return K}function Hlt(d){for(var m=-1,A=d==null?0:d.length,R=0,P=[];++m<A;){var W=d[m];W&&(P[R++]=W)}return P}function Glt(){var d=arguments.length;if(!d)return[];for(var m=bt(d-1),A=arguments[0],R=d;R--;)m[R-1]=arguments[R];return rf(Ue(A)?Ho(A):[A],Ui(m,1))}var Xlt=Je(function(d,m){return ei(d)?km(d,Ui(m,1,ei,!0)):[]}),Klt=Je(function(d,m){var A=ra(m);return ei(A)&&(A=n),ei(d)?km(d,Ui(m,1,ei,!0),ge(A,2)):[]}),Jlt=Je(function(d,m){var A=ra(m);return ei(A)&&(A=n),ei(d)?km(d,Ui(m,1,ei,!0),n,A):[]});function Zlt(d,m,A){var R=d==null?0:d.length;return R?(m=A||m===n?1:We(m),na(d,m<0?0:m,R)):[]}function Qlt(d,m,A){var R=d==null?0:d.length;return R?(m=A||m===n?1:We(m),m=R-m,na(d,0,m<0?0:m)):[]}function tct(d,m){return d&&d.length?$b(d,ge(m,3),!0,!0):[]}function ect(d,m){return d&&d.length?$b(d,ge(m,3),!0):[]}function nct(d,m,A,R){var P=d==null?0:d.length;return P?(A&&typeof A!="number"&&_o(d,m,A)&&(A=0,R=P),Gat(d,m,A,R)):[]}function I$(d,m,A){var R=d==null?0:d.length;if(!R)return-1;var P=A==null?0:We(A);return P<0&&(P=_i(R+P,0)),hb(d,ge(m,3),P)}function R$(d,m,A){var R=d==null?0:d.length;if(!R)return-1;var P=R-1;return A!==n&&(P=We(A),P=A<0?_i(R+P,0):Ki(P,R-1)),hb(d,ge(m,3),P,!0)}function C$(d){var m=d==null?0:d.length;return m?Ui(d,1):[]}function rct(d){var m=d==null?0:d.length;return m?Ui(d,B):[]}function ict(d,m){var A=d==null?0:d.length;return A?(m=m===n?1:We(m),Ui(d,m)):[]}function oct(d){for(var m=-1,A=d==null?0:d.length,R={};++m<A;){var P=d[m];R[P[0]]=P[1]}return R}function N$(d){return d&&d.length?d[0]:n}function sct(d,m,A){var R=d==null?0:d.length;if(!R)return-1;var P=A==null?0:We(A);return P<0&&(P=_i(R+P,0)),Tp(d,m,P)}function act(d){var m=d==null?0:d.length;return m?na(d,0,-1):[]}var lct=Je(function(d){var m=Nr(d,sE);return m.length&&m[0]===d[0]?KA(m):[]}),cct=Je(function(d){var m=ra(d),A=Nr(d,sE);return m===ra(A)?m=n:A.pop(),A.length&&A[0]===d[0]?KA(A,ge(m,2)):[]}),uct=Je(function(d){var m=ra(d),A=Nr(d,sE);return m=typeof m=="function"?m:n,m&&A.pop(),A.length&&A[0]===d[0]?KA(A,n,m):[]});function fct(d,m){return d==null?"":aat.call(d,m)}function ra(d){var m=d==null?0:d.length;return m?d[m-1]:n}function hct(d,m,A){var R=d==null?0:d.length;if(!R)return-1;var P=R;return A!==n&&(P=We(A),P=P<0?_i(R+P,0):Ki(P,R-1)),m===m?Wst(d,m,P):hb(d,hN,P,!0)}function dct(d,m){return d&&d.length?jN(d,We(m)):n}var pct=Je($$);function $$(d,m){return d&&d.length&&m&&m.length?tE(d,m):d}function gct(d,m,A){return d&&d.length&&m&&m.length?tE(d,m,ge(A,2)):d}function mct(d,m,A){return d&&d.length&&m&&m.length?tE(d,m,n,A):d}var yct=Uc(function(d,m){var A=d==null?0:d.length,R=YA(d,m);return YN(d,Nr(m,function(P){return qc(P,A)?+P:P}).sort(n$)),R});function vct(d,m){var A=[];if(!(d&&d.length))return A;var R=-1,P=[],W=d.length;for(m=ge(m,3);++R<W;){var K=d[R];m(K,R,d)&&(A.push(K),P.push(R))}return YN(d,P),A}function _E(d){return d==null?d:fat.call(d)}function bct(d,m,A){var R=d==null?0:d.length;return R?(A&&typeof A!="number"&&_o(d,m,A)?(m=0,A=R):(m=m==null?0:We(m),A=A===n?R:We(A)),na(d,m,A)):[]}function _ct(d,m){return Nb(d,m)}function wct(d,m,A){return rE(d,m,ge(A,2))}function xct(d,m){var A=d==null?0:d.length;if(A){var R=Nb(d,m);if(R<A&&Ka(d[R],m))return R}return-1}function Sct(d,m){return Nb(d,m,!0)}function Act(d,m,A){return rE(d,m,ge(A,2),!0)}function Ect(d,m){var A=d==null?0:d.length;if(A){var R=Nb(d,m,!0)-1;if(Ka(d[R],m))return R}return-1}function kct(d){return d&&d.length?GN(d):[]}function Tct(d,m){return d&&d.length?GN(d,ge(m,2)):[]}function Mct(d){var m=d==null?0:d.length;return m?na(d,1,m):[]}function Ict(d,m,A){return d&&d.length?(m=A||m===n?1:We(m),na(d,0,m<0?0:m)):[]}function Rct(d,m,A){var R=d==null?0:d.length;return R?(m=A||m===n?1:We(m),m=R-m,na(d,m<0?0:m,R)):[]}function Cct(d,m){return d&&d.length?$b(d,ge(m,3),!1,!0):[]}function Nct(d,m){return d&&d.length?$b(d,ge(m,3)):[]}var $ct=Je(function(d){return lf(Ui(d,1,ei,!0))}),Oct=Je(function(d){var m=ra(d);return ei(m)&&(m=n),lf(Ui(d,1,ei,!0),ge(m,2))}),Dct=Je(function(d){var m=ra(d);return m=typeof m=="function"?m:n,lf(Ui(d,1,ei,!0),n,m)});function Lct(d){return d&&d.length?lf(d):[]}function Fct(d,m){return d&&d.length?lf(d,ge(m,2)):[]}function Bct(d,m){return m=typeof m=="function"?m:n,d&&d.length?lf(d,n,m):[]}function wE(d){if(!(d&&d.length))return[];var m=0;return d=nf(d,function(A){if(ei(A))return m=_i(A.length,m),!0}),BA(m,function(A){return Nr(d,DA(A))})}function O$(d,m){if(!(d&&d.length))return[];var A=wE(d);return m==null?A:Nr(A,function(R){return xs(m,n,R)})}var Pct=Je(function(d,m){return ei(d)?km(d,m):[]}),zct=Je(function(d){return oE(nf(d,ei))}),Uct=Je(function(d){var m=ra(d);return ei(m)&&(m=n),oE(nf(d,ei),ge(m,2))}),qct=Je(function(d){var m=ra(d);return m=typeof m=="function"?m:n,oE(nf(d,ei),n,m)}),jct=Je(wE);function Vct(d,m){return ZN(d||[],m||[],Em)}function Wct(d,m){return ZN(d||[],m||[],Im)}var Yct=Je(function(d){var m=d.length,A=m>1?d[m-1]:n;return A=typeof A=="function"?(d.pop(),A):n,O$(d,A)});function D$(d){var m=q(d);return m.__chain__=!0,m}function Hct(d,m){return m(d),d}function qb(d,m){return m(d)}var Gct=Uc(function(d){var m=d.length,A=m?d[0]:0,R=this.__wrapped__,P=function(W){return YA(W,d)};return m>1||this.__actions__.length||!(R instanceof fn)||!qc(A)?this.thru(P):(R=R.slice(A,+A+(m?1:0)),R.__actions__.push({func:qb,args:[P],thisArg:n}),new ta(R,this.__chain__).thru(function(W){return m&&!W.length&&W.push(n),W}))});function Xct(){return D$(this)}function Kct(){return new ta(this.value(),this.__chain__)}function Jct(){this.__values__===n&&(this.__values__=X$(this.value()));var d=this.__index__>=this.__values__.length,m=d?n:this.__values__[this.__index__++];return{done:d,value:m}}function Zct(){return this}function Qct(d){for(var m,A=this;A instanceof Tb;){var R=M$(A);R.__index__=0,R.__values__=n,m?P.__wrapped__=R:m=R;var P=R;A=A.__wrapped__}return P.__wrapped__=d,m}function tut(){var d=this.__wrapped__;if(d instanceof fn){var m=d;return this.__actions__.length&&(m=new fn(this)),m=m.reverse(),m.__actions__.push({func:qb,args:[_E],thisArg:n}),new ta(m,this.__chain__)}return this.thru(_E)}function eut(){return JN(this.__wrapped__,this.__actions__)}var nut=Ob(function(d,m,A){Xn.call(d,A)?++d[A]:Pc(d,A,1)});function rut(d,m,A){var R=Ue(d)?uN:Hat;return A&&_o(d,m,A)&&(m=n),R(d,ge(m,3))}function iut(d,m){var A=Ue(d)?nf:ON;return A(d,ge(m,3))}var out=l$(I$),sut=l$(R$);function aut(d,m){return Ui(jb(d,m),1)}function lut(d,m){return Ui(jb(d,m),B)}function cut(d,m,A){return A=A===n?1:We(A),Ui(jb(d,m),A)}function L$(d,m){var A=Ue(d)?Zs:af;return A(d,ge(m,3))}function F$(d,m){var A=Ue(d)?Mst:$N;return A(d,ge(m,3))}var uut=Ob(function(d,m,A){Xn.call(d,A)?d[A].push(m):Pc(d,A,[m])});function fut(d,m,A,R){d=Go(d)?d:Pp(d),A=A&&!R?We(A):0;var P=d.length;return A<0&&(A=_i(P+A,0)),Gb(d)?A<=P&&d.indexOf(m,A)>-1:!!P&&Tp(d,m,A)>-1}var hut=Je(function(d,m,A){var R=-1,P=typeof m=="function",W=Go(d)?bt(d.length):[];return af(d,function(K){W[++R]=P?xs(m,K,A):Tm(K,m,A)}),W}),dut=Ob(function(d,m,A){Pc(d,A,m)});function jb(d,m){var A=Ue(d)?Nr:zN;return A(d,ge(m,3))}function put(d,m,A,R){return d==null?[]:(Ue(m)||(m=m==null?[]:[m]),A=R?n:A,Ue(A)||(A=A==null?[]:[A]),VN(d,m,A))}var gut=Ob(function(d,m,A){d[A?0:1].push(m)},function(){return[[],[]]});function mut(d,m,A){var R=Ue(d)?$A:pN,P=arguments.length<3;return R(d,ge(m,4),A,P,af)}function yut(d,m,A){var R=Ue(d)?Ist:pN,P=arguments.length<3;return R(d,ge(m,4),A,P,$N)}function vut(d,m){var A=Ue(d)?nf:ON;return A(d,Yb(ge(m,3)))}function but(d){var m=Ue(d)?IN:flt;return m(d)}function _ut(d,m,A){(A?_o(d,m,A):m===n)?m=1:m=We(m);var R=Ue(d)?qat:hlt;return R(d,m)}function wut(d){var m=Ue(d)?jat:plt;return m(d)}function xut(d){if(d==null)return 0;if(Go(d))return Gb(d)?Ip(d):d.length;var m=Ji(d);return m==_t||m==re?d.size:ZA(d).length}function Sut(d,m,A){var R=Ue(d)?OA:glt;return A&&_o(d,m,A)&&(m=n),R(d,ge(m,3))}var Aut=Je(function(d,m){if(d==null)return[];var A=m.length;return A>1&&_o(d,m[0],m[1])?m=[]:A>2&&_o(m[0],m[1],m[2])&&(m=[m[0]]),VN(d,Ui(m,1),[])}),Vb=iat||function(){return zi.Date.now()};function Eut(d,m){if(typeof m!="function")throw new Qs(s);return d=We(d),function(){if(--d<1)return m.apply(this,arguments)}}function B$(d,m,A){return m=A?n:m,m=d&&m==null?d.length:m,zc(d,T,n,n,n,n,m)}function P$(d,m){var A;if(typeof m!="function")throw new Qs(s);return d=We(d),function(){return--d>0&&(A=m.apply(this,arguments)),d<=1&&(m=n),A}}var xE=Je(function(d,m,A){var R=v;if(A.length){var P=of(A,Fp(xE));R|=k}return zc(d,R,m,A,P)}),z$=Je(function(d,m,A){var R=v|b;if(A.length){var P=of(A,Fp(z$));R|=k}return zc(m,R,d,A,P)});function U$(d,m,A){m=A?n:m;var R=zc(d,w,n,n,n,n,n,m);return R.placeholder=U$.placeholder,R}function q$(d,m,A){m=A?n:m;var R=zc(d,S,n,n,n,n,n,m);return R.placeholder=q$.placeholder,R}function j$(d,m,A){var R,P,W,K,nt,ht,kt=0,Tt=!1,Ot=!1,jt=!0;if(typeof d!="function")throw new Qs(s);m=ia(m)||0,Pr(A)&&(Tt=!!A.leading,Ot="maxWait"in A,W=Ot?_i(ia(A.maxWait)||0,m):W,jt="trailing"in A?!!A.trailing:jt);function te(ni){var Ja=R,Wc=P;return R=P=n,kt=ni,K=d.apply(Wc,Ja),K}function we(ni){return kt=ni,nt=Nm(on,m),Tt?te(ni):K}function Xe(ni){var Ja=ni-ht,Wc=ni-kt,l7=m-Ja;return Ot?Ki(l7,W-Wc):l7}function xe(ni){var Ja=ni-ht,Wc=ni-kt;return ht===n||Ja>=m||Ja<0||Ot&&Wc>=W}function on(){var ni=Vb();if(xe(ni))return mn(ni);nt=Nm(on,Xe(ni))}function mn(ni){return nt=n,jt&&R?te(ni):(R=P=n,K)}function ks(){nt!==n&&QN(nt),kt=0,R=ht=P=nt=n}function wo(){return nt===n?K:mn(Vb())}function Ts(){var ni=Vb(),Ja=xe(ni);if(R=arguments,P=this,ht=ni,Ja){if(nt===n)return we(ht);if(Ot)return QN(nt),nt=Nm(on,m),te(ht)}return nt===n&&(nt=Nm(on,m)),K}return Ts.cancel=ks,Ts.flush=wo,Ts}var kut=Je(function(d,m){return NN(d,1,m)}),Tut=Je(function(d,m,A){return NN(d,ia(m)||0,A)});function Mut(d){return zc(d,I)}function Wb(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new Qs(s);var A=function(){var R=arguments,P=m?m.apply(this,R):R[0],W=A.cache;if(W.has(P))return W.get(P);var K=d.apply(this,R);return A.cache=W.set(P,K)||W,K};return A.cache=new(Wb.Cache||Bc),A}Wb.Cache=Bc;function Yb(d){if(typeof d!="function")throw new Qs(s);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}function Iut(d){return P$(2,d)}var Rut=mlt(function(d,m){m=m.length==1&&Ue(m[0])?Nr(m[0],Ss(ge())):Nr(Ui(m,1),Ss(ge()));var A=m.length;return Je(function(R){for(var P=-1,W=Ki(R.length,A);++P<W;)R[P]=m[P].call(this,R[P]);return xs(d,this,R)})}),SE=Je(function(d,m){var A=of(m,Fp(SE));return zc(d,k,n,m,A)}),V$=Je(function(d,m){var A=of(m,Fp(V$));return zc(d,E,n,m,A)}),Cut=Uc(function(d,m){return zc(d,M,n,n,n,m)});function Nut(d,m){if(typeof d!="function")throw new Qs(s);return m=m===n?m:We(m),Je(d,m)}function $ut(d,m){if(typeof d!="function")throw new Qs(s);return m=m==null?0:_i(We(m),0),Je(function(A){var R=A[m],P=uf(A,0,m);return R&&rf(P,R),xs(d,this,P)})}function Out(d,m,A){var R=!0,P=!0;if(typeof d!="function")throw new Qs(s);return Pr(A)&&(R="leading"in A?!!A.leading:R,P="trailing"in A?!!A.trailing:P),j$(d,m,{leading:R,maxWait:m,trailing:P})}function Dut(d){return B$(d,1)}function Lut(d,m){return SE(aE(m),d)}function Fut(){if(!arguments.length)return[];var d=arguments[0];return Ue(d)?d:[d]}function But(d){return ea(d,p)}function Put(d,m){return m=typeof m=="function"?m:n,ea(d,p,m)}function zut(d){return ea(d,f|p)}function Uut(d,m){return m=typeof m=="function"?m:n,ea(d,f|p,m)}function qut(d,m){return m==null||CN(d,m,Ii(m))}function Ka(d,m){return d===m||d!==d&&m!==m}var jut=Bb(XA),Vut=Bb(function(d,m){return d>=m}),Ph=FN(function(){return arguments}())?FN:function(d){return Hr(d)&&Xn.call(d,"callee")&&!SN.call(d,"callee")},Ue=bt.isArray,Wut=iN?Ss(iN):Qat;function Go(d){return d!=null&&Hb(d.length)&&!jc(d)}function ei(d){return Hr(d)&&Go(d)}function Yut(d){return d===!0||d===!1||Hr(d)&&bo(d)==yt}var ff=sat||OE,Hut=oN?Ss(oN):tlt;function Gut(d){return Hr(d)&&d.nodeType===1&&!$m(d)}function Xut(d){if(d==null)return!0;if(Go(d)&&(Ue(d)||typeof d=="string"||typeof d.splice=="function"||ff(d)||Bp(d)||Ph(d)))return!d.length;var m=Ji(d);if(m==_t||m==re)return!d.size;if(Cm(d))return!ZA(d).length;for(var A in d)if(Xn.call(d,A))return!1;return!0}function Kut(d,m){return Mm(d,m)}function Jut(d,m,A){A=typeof A=="function"?A:n;var R=A?A(d,m):n;return R===n?Mm(d,m,n,A):!!R}function AE(d){if(!Hr(d))return!1;var m=bo(d);return m==st||m==vt||typeof d.message=="string"&&typeof d.name=="string"&&!$m(d)}function Zut(d){return typeof d=="number"&&EN(d)}function jc(d){if(!Pr(d))return!1;var m=bo(d);return m==Q||m==It||m==lt||m==ue}function W$(d){return typeof d=="number"&&d==We(d)}function Hb(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=j}function Pr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function Hr(d){return d!=null&&typeof d=="object"}var Y$=sN?Ss(sN):nlt;function Qut(d,m){return d===m||JA(d,m,pE(m))}function tft(d,m,A){return A=typeof A=="function"?A:n,JA(d,m,pE(m),A)}function eft(d){return H$(d)&&d!=+d}function nft(d){if(Plt(d))throw new Fe(o);return BN(d)}function rft(d){return d===null}function ift(d){return d==null}function H$(d){return typeof d=="number"||Hr(d)&&bo(d)==Dt}function $m(d){if(!Hr(d)||bo(d)!=xt)return!1;var m=_b(d);if(m===null)return!0;var A=Xn.call(m,"constructor")&&m.constructor;return typeof A=="function"&&A instanceof A&&mb.call(A)==tat}var EE=aN?Ss(aN):rlt;function oft(d){return W$(d)&&d>=-j&&d<=j}var G$=lN?Ss(lN):ilt;function Gb(d){return typeof d=="string"||!Ue(d)&&Hr(d)&&bo(d)==Ke}function Es(d){return typeof d=="symbol"||Hr(d)&&bo(d)==le}var Bp=cN?Ss(cN):olt;function sft(d){return d===n}function aft(d){return Hr(d)&&Ji(d)==pn}function lft(d){return Hr(d)&&bo(d)==cr}var cft=Bb(QA),uft=Bb(function(d,m){return d<=m});function X$(d){if(!d)return[];if(Go(d))return Gb(d)?Ga(d):Ho(d);if(_m&&d[_m])return qst(d[_m]());var m=Ji(d),A=m==_t?zA:m==re?db:Pp;return A(d)}function Vc(d){if(!d)return d===0?d:0;if(d=ia(d),d===B||d===-B){var m=d<0?-1:1;return m*z}return d===d?d:0}function We(d){var m=Vc(d),A=m%1;return m===m?A?m-A:m:0}function K$(d){return d?Dh(We(d),0,V):0}function ia(d){if(typeof d=="number")return d;if(Es(d))return U;if(Pr(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Pr(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=gN(d);var A=Ge.test(d);return A||gn.test(d)?Est(d.slice(2),A?2:8):Ve.test(d)?U:+d}function J$(d){return Dl(d,Xo(d))}function fft(d){return d?Dh(We(d),-j,j):d===0?d:0}function zn(d){return d==null?"":As(d)}var hft=Dp(function(d,m){if(Cm(m)||Go(m)){Dl(m,Ii(m),d);return}for(var A in m)Xn.call(m,A)&&Em(d,A,m[A])}),Z$=Dp(function(d,m){Dl(m,Xo(m),d)}),Xb=Dp(function(d,m,A,R){Dl(m,Xo(m),d,R)}),dft=Dp(function(d,m,A,R){Dl(m,Ii(m),d,R)}),pft=Uc(YA);function gft(d,m){var A=Op(d);return m==null?A:RN(A,m)}var mft=Je(function(d,m){d=ur(d);var A=-1,R=m.length,P=R>2?m[2]:n;for(P&&_o(m[0],m[1],P)&&(R=1);++A<R;)for(var W=m[A],K=Xo(W),nt=-1,ht=K.length;++nt<ht;){var kt=K[nt],Tt=d[kt];(Tt===n||Ka(Tt,Cp[kt])&&!Xn.call(d,kt))&&(d[kt]=W[kt])}return d}),yft=Je(function(d){return d.push(n,g$),xs(Q$,n,d)});function vft(d,m){return fN(d,ge(m,3),Ol)}function bft(d,m){return fN(d,ge(m,3),GA)}function _ft(d,m){return d==null?d:HA(d,ge(m,3),Xo)}function wft(d,m){return d==null?d:DN(d,ge(m,3),Xo)}function xft(d,m){return d&&Ol(d,ge(m,3))}function Sft(d,m){return d&&GA(d,ge(m,3))}function Aft(d){return d==null?[]:Rb(d,Ii(d))}function Eft(d){return d==null?[]:Rb(d,Xo(d))}function kE(d,m,A){var R=d==null?n:Lh(d,m);return R===n?A:R}function kft(d,m){return d!=null&&v$(d,m,Xat)}function TE(d,m){return d!=null&&v$(d,m,Kat)}var Tft=u$(function(d,m,A){m!=null&&typeof m.toString!="function"&&(m=yb.call(m)),d[m]=A},IE(Ko)),Mft=u$(function(d,m,A){m!=null&&typeof m.toString!="function"&&(m=yb.call(m)),Xn.call(d,m)?d[m].push(A):d[m]=[A]},ge),Ift=Je(Tm);function Ii(d){return Go(d)?MN(d):ZA(d)}function Xo(d){return Go(d)?MN(d,!0):slt(d)}function Rft(d,m){var A={};return m=ge(m,3),Ol(d,function(R,P,W){Pc(A,m(R,P,W),R)}),A}function Cft(d,m){var A={};return m=ge(m,3),Ol(d,function(R,P,W){Pc(A,P,m(R,P,W))}),A}var Nft=Dp(function(d,m,A){Cb(d,m,A)}),Q$=Dp(function(d,m,A,R){Cb(d,m,A,R)}),$ft=Uc(function(d,m){var A={};if(d==null)return A;var R=!1;m=Nr(m,function(W){return W=cf(W,d),R||(R=W.length>1),W}),Dl(d,hE(d),A),R&&(A=ea(A,f|h|p,Tlt));for(var P=m.length;P--;)iE(A,m[P]);return A});function Oft(d,m){return t7(d,Yb(ge(m)))}var Dft=Uc(function(d,m){return d==null?{}:llt(d,m)});function t7(d,m){if(d==null)return{};var A=Nr(hE(d),function(R){return[R]});return m=ge(m),WN(d,A,function(R,P){return m(R,P[0])})}function Lft(d,m,A){m=cf(m,d);var R=-1,P=m.length;for(P||(P=1,d=n);++R<P;){var W=d==null?n:d[Ll(m[R])];W===n&&(R=P,W=A),d=jc(W)?W.call(d):W}return d}function Fft(d,m,A){return d==null?d:Im(d,m,A)}function Bft(d,m,A,R){return R=typeof R=="function"?R:n,d==null?d:Im(d,m,A,R)}var e7=d$(Ii),n7=d$(Xo);function Pft(d,m,A){var R=Ue(d),P=R||ff(d)||Bp(d);if(m=ge(m,4),A==null){var W=d&&d.constructor;P?A=R?new W:[]:Pr(d)?A=jc(W)?Op(_b(d)):{}:A={}}return(P?Zs:Ol)(d,function(K,nt,ht){return m(A,K,nt,ht)}),A}function zft(d,m){return d==null?!0:iE(d,m)}function Uft(d,m,A){return d==null?d:KN(d,m,aE(A))}function qft(d,m,A,R){return R=typeof R=="function"?R:n,d==null?d:KN(d,m,aE(A),R)}function Pp(d){return d==null?[]:PA(d,Ii(d))}function jft(d){return d==null?[]:PA(d,Xo(d))}function Vft(d,m,A){return A===n&&(A=m,m=n),A!==n&&(A=ia(A),A=A===A?A:0),m!==n&&(m=ia(m),m=m===m?m:0),Dh(ia(d),m,A)}function Wft(d,m,A){return m=Vc(m),A===n?(A=m,m=0):A=Vc(A),d=ia(d),Jat(d,m,A)}function Yft(d,m,A){if(A&&typeof A!="boolean"&&_o(d,m,A)&&(m=A=n),A===n&&(typeof m=="boolean"?(A=m,m=n):typeof d=="boolean"&&(A=d,d=n)),d===n&&m===n?(d=0,m=1):(d=Vc(d),m===n?(m=d,d=0):m=Vc(m)),d>m){var R=d;d=m,m=R}if(A||d%1||m%1){var P=kN();return Ki(d+P*(m-d+Ast("1e-"+((P+"").length-1))),m)}return eE(d,m)}var Hft=Lp(function(d,m,A){return m=m.toLowerCase(),d+(A?r7(m):m)});function r7(d){return ME(zn(d).toLowerCase())}function i7(d){return d=zn(d),d&&d.replace(un,Fst).replace(pst,"")}function Gft(d,m,A){d=zn(d),m=As(m);var R=d.length;A=A===n?R:Dh(We(A),0,R);var P=A;return A-=m.length,A>=0&&d.slice(A,P)==m}function Xft(d){return d=zn(d),d&&Sp.test(d)?d.replace(kh,Bst):d}function Kft(d){return d=zn(d),d&&ym.test(d)?d.replace(ef,"\\$&"):d}var Jft=Lp(function(d,m,A){return d+(A?"-":"")+m.toLowerCase()}),Zft=Lp(function(d,m,A){return d+(A?" ":"")+m.toLowerCase()}),Qft=a$("toLowerCase");function tht(d,m,A){d=zn(d),m=We(m);var R=m?Ip(d):0;if(!m||R>=m)return d;var P=(m-R)/2;return Fb(Ab(P),A)+d+Fb(Sb(P),A)}function eht(d,m,A){d=zn(d),m=We(m);var R=m?Ip(d):0;return m&&R<m?d+Fb(m-R,A):d}function nht(d,m,A){d=zn(d),m=We(m);var R=m?Ip(d):0;return m&&R<m?Fb(m-R,A)+d:d}function rht(d,m,A){return A||m==null?m=0:m&&(m=+m),uat(zn(d).replace(Rt,""),m||0)}function iht(d,m,A){return(A?_o(d,m,A):m===n)?m=1:m=We(m),nE(zn(d),m)}function oht(){var d=arguments,m=zn(d[0]);return d.length<3?m:m.replace(d[1],d[2])}var sht=Lp(function(d,m,A){return d+(A?"_":"")+m.toLowerCase()});function aht(d,m,A){return A&&typeof A!="number"&&_o(d,m,A)&&(m=A=n),A=A===n?V:A>>>0,A?(d=zn(d),d&&(typeof m=="string"||m!=null&&!EE(m))&&(m=As(m),!m&&Mp(d))?uf(Ga(d),0,A):d.split(m,A)):[]}var lht=Lp(function(d,m,A){return d+(A?" ":"")+ME(m)});function cht(d,m,A){return d=zn(d),A=A==null?0:Dh(We(A),0,d.length),m=As(m),d.slice(A,A+m.length)==m}function uht(d,m,A){var R=q.templateSettings;A&&_o(d,m,A)&&(m=n),d=zn(d),m=Xb({},m,R,p$);var P=Xb({},m.imports,R.imports,p$),W=Ii(P),K=PA(P,W),nt,ht,kt=0,Tt=m.interpolate||Gn,Ot="__p += '",jt=UA((m.escape||Gn).source+"|"+Tt.source+"|"+(Tt===Ih?Ct:Gn).source+"|"+(m.evaluate||Gn).source+"|$","g"),te="//# sourceURL="+(Xn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bst+"]")+`
`;d.replace(jt,function(xe,on,mn,ks,wo,Ts){return mn||(mn=ks),Ot+=d.slice(kt,Ts).replace(Bi,Pst),on&&(nt=!0,Ot+=`' +
__e(`+on+`) +
'`),wo&&(ht=!0,Ot+=`';
`+wo+`;
__p += '`),mn&&(Ot+=`' +
((__t = (`+mn+`)) == null ? '' : __t) +
'`),kt=Ts+xe.length,xe}),Ot+=`';
`;var we=Xn.call(m,"variable")&&m.variable;if(!we)Ot=`with (obj) {
`+Ot+`
}
`;else if(rn.test(we))throw new Fe(a);Ot=(ht?Ot.replace(pm,""):Ot).replace(tf,"$1").replace(vo,"$1;"),Ot="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(nt?", __e = _.escape":"")+(ht?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ot+`return __p
}`;var Xe=s7(function(){return $n(W,te+"return "+Ot).apply(n,K)});if(Xe.source=Ot,AE(Xe))throw Xe;return Xe}function fht(d){return zn(d).toLowerCase()}function hht(d){return zn(d).toUpperCase()}function dht(d,m,A){if(d=zn(d),d&&(A||m===n))return gN(d);if(!d||!(m=As(m)))return d;var R=Ga(d),P=Ga(m),W=mN(R,P),K=yN(R,P)+1;return uf(R,W,K).join("")}function pht(d,m,A){if(d=zn(d),d&&(A||m===n))return d.slice(0,bN(d)+1);if(!d||!(m=As(m)))return d;var R=Ga(d),P=yN(R,Ga(m))+1;return uf(R,0,P).join("")}function ght(d,m,A){if(d=zn(d),d&&(A||m===n))return d.replace(Rt,"");if(!d||!(m=As(m)))return d;var R=Ga(d),P=mN(R,Ga(m));return uf(R,P).join("")}function mht(d,m){var A=$,R=C;if(Pr(m)){var P="separator"in m?m.separator:P;A="length"in m?We(m.length):A,R="omission"in m?As(m.omission):R}d=zn(d);var W=d.length;if(Mp(d)){var K=Ga(d);W=K.length}if(A>=W)return d;var nt=A-Ip(R);if(nt<1)return R;var ht=K?uf(K,0,nt).join(""):d.slice(0,nt);if(P===n)return ht+R;if(K&&(nt+=ht.length-nt),EE(P)){if(d.slice(nt).search(P)){var kt,Tt=ht;for(P.global||(P=UA(P.source,zn(Lt.exec(P))+"g")),P.lastIndex=0;kt=P.exec(Tt);)var Ot=kt.index;ht=ht.slice(0,Ot===n?nt:Ot)}}else if(d.indexOf(As(P),nt)!=nt){var jt=ht.lastIndexOf(P);jt>-1&&(ht=ht.slice(0,jt))}return ht+R}function yht(d){return d=zn(d),d&&Th.test(d)?d.replace(Lc,Yst):d}var vht=Lp(function(d,m,A){return d+(A?" ":"")+m.toUpperCase()}),ME=a$("toUpperCase");function o7(d,m,A){return d=zn(d),m=A?n:m,m===n?Ust(d)?Xst(d):Nst(d):d.match(m)||[]}var s7=Je(function(d,m){try{return xs(d,n,m)}catch(A){return AE(A)?A:new Fe(A)}}),bht=Uc(function(d,m){return Zs(m,function(A){A=Ll(A),Pc(d,A,xE(d[A],d))}),d});function _ht(d){var m=d==null?0:d.length,A=ge();return d=m?Nr(d,function(R){if(typeof R[1]!="function")throw new Qs(s);return[A(R[0]),R[1]]}):[],Je(function(R){for(var P=-1;++P<m;){var W=d[P];if(xs(W[0],this,R))return xs(W[1],this,R)}})}function wht(d){return Yat(ea(d,f))}function IE(d){return function(){return d}}function xht(d,m){return d==null||d!==d?m:d}var Sht=c$(),Aht=c$(!0);function Ko(d){return d}function RE(d){return PN(typeof d=="function"?d:ea(d,f))}function Eht(d){return UN(ea(d,f))}function kht(d,m){return qN(d,ea(m,f))}var Tht=Je(function(d,m){return function(A){return Tm(A,d,m)}}),Mht=Je(function(d,m){return function(A){return Tm(d,A,m)}});function CE(d,m,A){var R=Ii(m),P=Rb(m,R);A==null&&!(Pr(m)&&(P.length||!R.length))&&(A=m,m=d,d=this,P=Rb(m,Ii(m)));var W=!(Pr(A)&&"chain"in A)||!!A.chain,K=jc(d);return Zs(P,function(nt){var ht=m[nt];d[nt]=ht,K&&(d.prototype[nt]=function(){var kt=this.__chain__;if(W||kt){var Tt=d(this.__wrapped__),Ot=Tt.__actions__=Ho(this.__actions__);return Ot.push({func:ht,args:arguments,thisArg:d}),Tt.__chain__=kt,Tt}return ht.apply(d,rf([this.value()],arguments))})}),d}function Iht(){return zi._===this&&(zi._=eat),this}function NE(){}function Rht(d){return d=We(d),Je(function(m){return jN(m,d)})}var Cht=cE(Nr),Nht=cE(uN),$ht=cE(OA);function a7(d){return mE(d)?DA(Ll(d)):clt(d)}function Oht(d){return function(m){return d==null?n:Lh(d,m)}}var Dht=f$(),Lht=f$(!0);function $E(){return[]}function OE(){return!1}function Fht(){return{}}function Bht(){return""}function Pht(){return!0}function zht(d,m){if(d=We(d),d<1||d>j)return[];var A=V,R=Ki(d,V);m=ge(m),d-=V;for(var P=BA(R,m);++A<d;)m(A);return P}function Uht(d){return Ue(d)?Nr(d,Ll):Es(d)?[d]:Ho(T$(zn(d)))}function qht(d){var m=++Qst;return zn(d)+m}var jht=Lb(function(d,m){return d+m},0),Vht=uE("ceil"),Wht=Lb(function(d,m){return d/m},1),Yht=uE("floor");function Hht(d){return d&&d.length?Ib(d,Ko,XA):n}function Ght(d,m){return d&&d.length?Ib(d,ge(m,2),XA):n}function Xht(d){return dN(d,Ko)}function Kht(d,m){return dN(d,ge(m,2))}function Jht(d){return d&&d.length?Ib(d,Ko,QA):n}function Zht(d,m){return d&&d.length?Ib(d,ge(m,2),QA):n}var Qht=Lb(function(d,m){return d*m},1),tdt=uE("round"),edt=Lb(function(d,m){return d-m},0);function ndt(d){return d&&d.length?FA(d,Ko):0}function rdt(d,m){return d&&d.length?FA(d,ge(m,2)):0}return q.after=Eut,q.ary=B$,q.assign=hft,q.assignIn=Z$,q.assignInWith=Xb,q.assignWith=dft,q.at=pft,q.before=P$,q.bind=xE,q.bindAll=bht,q.bindKey=z$,q.castArray=Fut,q.chain=D$,q.chunk=Ylt,q.compact=Hlt,q.concat=Glt,q.cond=_ht,q.conforms=wht,q.constant=IE,q.countBy=nut,q.create=gft,q.curry=U$,q.curryRight=q$,q.debounce=j$,q.defaults=mft,q.defaultsDeep=yft,q.defer=kut,q.delay=Tut,q.difference=Xlt,q.differenceBy=Klt,q.differenceWith=Jlt,q.drop=Zlt,q.dropRight=Qlt,q.dropRightWhile=tct,q.dropWhile=ect,q.fill=nct,q.filter=iut,q.flatMap=aut,q.flatMapDeep=lut,q.flatMapDepth=cut,q.flatten=C$,q.flattenDeep=rct,q.flattenDepth=ict,q.flip=Mut,q.flow=Sht,q.flowRight=Aht,q.fromPairs=oct,q.functions=Aft,q.functionsIn=Eft,q.groupBy=uut,q.initial=act,q.intersection=lct,q.intersectionBy=cct,q.intersectionWith=uct,q.invert=Tft,q.invertBy=Mft,q.invokeMap=hut,q.iteratee=RE,q.keyBy=dut,q.keys=Ii,q.keysIn=Xo,q.map=jb,q.mapKeys=Rft,q.mapValues=Cft,q.matches=Eht,q.matchesProperty=kht,q.memoize=Wb,q.merge=Nft,q.mergeWith=Q$,q.method=Tht,q.methodOf=Mht,q.mixin=CE,q.negate=Yb,q.nthArg=Rht,q.omit=$ft,q.omitBy=Oft,q.once=Iut,q.orderBy=put,q.over=Cht,q.overArgs=Rut,q.overEvery=Nht,q.overSome=$ht,q.partial=SE,q.partialRight=V$,q.partition=gut,q.pick=Dft,q.pickBy=t7,q.property=a7,q.propertyOf=Oht,q.pull=pct,q.pullAll=$$,q.pullAllBy=gct,q.pullAllWith=mct,q.pullAt=yct,q.range=Dht,q.rangeRight=Lht,q.rearg=Cut,q.reject=vut,q.remove=vct,q.rest=Nut,q.reverse=_E,q.sampleSize=_ut,q.set=Fft,q.setWith=Bft,q.shuffle=wut,q.slice=bct,q.sortBy=Aut,q.sortedUniq=kct,q.sortedUniqBy=Tct,q.split=aht,q.spread=$ut,q.tail=Mct,q.take=Ict,q.takeRight=Rct,q.takeRightWhile=Cct,q.takeWhile=Nct,q.tap=Hct,q.throttle=Out,q.thru=qb,q.toArray=X$,q.toPairs=e7,q.toPairsIn=n7,q.toPath=Uht,q.toPlainObject=J$,q.transform=Pft,q.unary=Dut,q.union=$ct,q.unionBy=Oct,q.unionWith=Dct,q.uniq=Lct,q.uniqBy=Fct,q.uniqWith=Bct,q.unset=zft,q.unzip=wE,q.unzipWith=O$,q.update=Uft,q.updateWith=qft,q.values=Pp,q.valuesIn=jft,q.without=Pct,q.words=o7,q.wrap=Lut,q.xor=zct,q.xorBy=Uct,q.xorWith=qct,q.zip=jct,q.zipObject=Vct,q.zipObjectDeep=Wct,q.zipWith=Yct,q.entries=e7,q.entriesIn=n7,q.extend=Z$,q.extendWith=Xb,CE(q,q),q.add=jht,q.attempt=s7,q.camelCase=Hft,q.capitalize=r7,q.ceil=Vht,q.clamp=Vft,q.clone=But,q.cloneDeep=zut,q.cloneDeepWith=Uut,q.cloneWith=Put,q.conformsTo=qut,q.deburr=i7,q.defaultTo=xht,q.divide=Wht,q.endsWith=Gft,q.eq=Ka,q.escape=Xft,q.escapeRegExp=Kft,q.every=rut,q.find=out,q.findIndex=I$,q.findKey=vft,q.findLast=sut,q.findLastIndex=R$,q.findLastKey=bft,q.floor=Yht,q.forEach=L$,q.forEachRight=F$,q.forIn=_ft,q.forInRight=wft,q.forOwn=xft,q.forOwnRight=Sft,q.get=kE,q.gt=jut,q.gte=Vut,q.has=kft,q.hasIn=TE,q.head=N$,q.identity=Ko,q.includes=fut,q.indexOf=sct,q.inRange=Wft,q.invoke=Ift,q.isArguments=Ph,q.isArray=Ue,q.isArrayBuffer=Wut,q.isArrayLike=Go,q.isArrayLikeObject=ei,q.isBoolean=Yut,q.isBuffer=ff,q.isDate=Hut,q.isElement=Gut,q.isEmpty=Xut,q.isEqual=Kut,q.isEqualWith=Jut,q.isError=AE,q.isFinite=Zut,q.isFunction=jc,q.isInteger=W$,q.isLength=Hb,q.isMap=Y$,q.isMatch=Qut,q.isMatchWith=tft,q.isNaN=eft,q.isNative=nft,q.isNil=ift,q.isNull=rft,q.isNumber=H$,q.isObject=Pr,q.isObjectLike=Hr,q.isPlainObject=$m,q.isRegExp=EE,q.isSafeInteger=oft,q.isSet=G$,q.isString=Gb,q.isSymbol=Es,q.isTypedArray=Bp,q.isUndefined=sft,q.isWeakMap=aft,q.isWeakSet=lft,q.join=fct,q.kebabCase=Jft,q.last=ra,q.lastIndexOf=hct,q.lowerCase=Zft,q.lowerFirst=Qft,q.lt=cft,q.lte=uft,q.max=Hht,q.maxBy=Ght,q.mean=Xht,q.meanBy=Kht,q.min=Jht,q.minBy=Zht,q.stubArray=$E,q.stubFalse=OE,q.stubObject=Fht,q.stubString=Bht,q.stubTrue=Pht,q.multiply=Qht,q.nth=dct,q.noConflict=Iht,q.noop=NE,q.now=Vb,q.pad=tht,q.padEnd=eht,q.padStart=nht,q.parseInt=rht,q.random=Yft,q.reduce=mut,q.reduceRight=yut,q.repeat=iht,q.replace=oht,q.result=Lft,q.round=tdt,q.runInContext=ft,q.sample=but,q.size=xut,q.snakeCase=sht,q.some=Sut,q.sortedIndex=_ct,q.sortedIndexBy=wct,q.sortedIndexOf=xct,q.sortedLastIndex=Sct,q.sortedLastIndexBy=Act,q.sortedLastIndexOf=Ect,q.startCase=lht,q.startsWith=cht,q.subtract=edt,q.sum=ndt,q.sumBy=rdt,q.template=uht,q.times=zht,q.toFinite=Vc,q.toInteger=We,q.toLength=K$,q.toLower=fht,q.toNumber=ia,q.toSafeInteger=fft,q.toString=zn,q.toUpper=hht,q.trim=dht,q.trimEnd=pht,q.trimStart=ght,q.truncate=mht,q.unescape=yht,q.uniqueId=qht,q.upperCase=vht,q.upperFirst=ME,q.each=L$,q.eachRight=F$,q.first=N$,CE(q,function(){var d={};return Ol(q,function(m,A){Xn.call(q.prototype,A)||(d[A]=m)}),d}(),{chain:!1}),q.VERSION=r,Zs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){q[d].placeholder=q}),Zs(["drop","take"],function(d,m){fn.prototype[d]=function(A){A=A===n?1:_i(We(A),0);var R=this.__filtered__&&!m?new fn(this):this.clone();return R.__filtered__?R.__takeCount__=Ki(A,R.__takeCount__):R.__views__.push({size:Ki(A,V),type:d+(R.__dir__<0?"Right":"")}),R},fn.prototype[d+"Right"]=function(A){return this.reverse()[d](A).reverse()}}),Zs(["filter","map","takeWhile"],function(d,m){var A=m+1,R=A==N||A==D;fn.prototype[d]=function(P){var W=this.clone();return W.__iteratees__.push({iteratee:ge(P,3),type:A}),W.__filtered__=W.__filtered__||R,W}}),Zs(["head","last"],function(d,m){var A="take"+(m?"Right":"");fn.prototype[d]=function(){return this[A](1).value()[0]}}),Zs(["initial","tail"],function(d,m){var A="drop"+(m?"":"Right");fn.prototype[d]=function(){return this.__filtered__?new fn(this):this[A](1)}}),fn.prototype.compact=function(){return this.filter(Ko)},fn.prototype.find=function(d){return this.filter(d).head()},fn.prototype.findLast=function(d){return this.reverse().find(d)},fn.prototype.invokeMap=Je(function(d,m){return typeof d=="function"?new fn(this):this.map(function(A){return Tm(A,d,m)})}),fn.prototype.reject=function(d){return this.filter(Yb(ge(d)))},fn.prototype.slice=function(d,m){d=We(d);var A=this;return A.__filtered__&&(d>0||m<0)?new fn(A):(d<0?A=A.takeRight(-d):d&&(A=A.drop(d)),m!==n&&(m=We(m),A=m<0?A.dropRight(-m):A.take(m-d)),A)},fn.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},fn.prototype.toArray=function(){return this.take(V)},Ol(fn.prototype,function(d,m){var A=/^(?:filter|find|map|reject)|While$/.test(m),R=/^(?:head|last)$/.test(m),P=q[R?"take"+(m=="last"?"Right":""):m],W=R||/^find/.test(m);P&&(q.prototype[m]=function(){var K=this.__wrapped__,nt=R?[1]:arguments,ht=K instanceof fn,kt=nt[0],Tt=ht||Ue(K),Ot=function(on){var mn=P.apply(q,rf([on],nt));return R&&jt?mn[0]:mn};Tt&&A&&typeof kt=="function"&&kt.length!=1&&(ht=Tt=!1);var jt=this.__chain__,te=!!this.__actions__.length,we=W&&!jt,Xe=ht&&!te;if(!W&&Tt){K=Xe?K:new fn(this);var xe=d.apply(K,nt);return xe.__actions__.push({func:qb,args:[Ot],thisArg:n}),new ta(xe,jt)}return we&&Xe?d.apply(this,nt):(xe=this.thru(Ot),we?R?xe.value()[0]:xe.value():xe)})}),Zs(["pop","push","shift","sort","splice","unshift"],function(d){var m=pb[d],A=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",R=/^(?:pop|shift)$/.test(d);q.prototype[d]=function(){var P=arguments;if(R&&!this.__chain__){var W=this.value();return m.apply(Ue(W)?W:[],P)}return this[A](function(K){return m.apply(Ue(K)?K:[],P)})}}),Ol(fn.prototype,function(d,m){var A=q[m];if(A){var R=A.name+"";Xn.call($p,R)||($p[R]=[]),$p[R].push({name:m,func:A})}}),$p[Db(n,b).name]=[{name:"wrapper",func:n}],fn.prototype.clone=yat,fn.prototype.reverse=vat,fn.prototype.value=bat,q.prototype.at=Gct,q.prototype.chain=Xct,q.prototype.commit=Kct,q.prototype.next=Jct,q.prototype.plant=Qct,q.prototype.reverse=tut,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=eut,q.prototype.first=q.prototype.head,_m&&(q.prototype[_m]=Zct),q},Rp=Kst();Ch?((Ch.exports=Rp)._=Rp,RA._=Rp):zi._=Rp}).call(m4t)}(yw,yw.exports)),yw.exports}var cM=y4t();const SH=xR(cM),v4t={headerHeight:null,columnConfigs:{},onColumnConfigsChange:()=>{},minColumnWidths:{},rowRenderBatchSize:4,minFetchSize:1,renderWindowOffset:400,verticalScrollbarPillHeight:4,verticalScrollbarWidth:24,horizontalScrollbarHeight:16,lineHeight:20,textMaxLines:3,betweenRowPadding:8,betweenColPadding:24,scrollOverflowValue:1e6,onRowClick:null,highlightedRows:null,firstColLeftPadding:8,showRowNumber:!0,onShowRowNumberChange:()=>{},highlightHoveredRow:!1,get rowHeight(){return this.textMaxLines*this.lineHeight+this.betweenRowPadding},DEFAULT_TEXT_MAX_LINES:3,DEFAULT_LINE_HEIGHT:20,DEFAULT_ROW_NUMBER_COL_WIDTH:60};class b4t{#t=Jt(lo(v4t));get config(){return G(this.#t)}set config(t){Nt(this.#t,t,!0)}}const JD=Symbol("config");let or=class{static initialize(){pa(JD,new b4t)}static get config(){const t=is(JD);if(t==null)throw new Error("config context not yet set");return t.config}};class _4t{tableModel;tableController;margin=2;isDragging=!1;lastDragX=0;#t=Jt(0);get elementWidth(){return G(this.#t)}set elementWidth(t){Nt(this.#t,t,!0)}#e=Bt(()=>this.elementWidth-this.margin*2);get scrollbarWidth(){return G(this.#e)}set scrollbarWidth(t){Nt(this.#e,t)}#n=Bt(()=>this.tableController.viewWidth/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillWidth(){return G(this.#n)}set pillWidth(t){Nt(this.#n,t)}#r=Bt(()=>-this.tableController.xScroll/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillLeft(){return G(this.#r)}set pillLeft(t){Nt(this.#r,t)}constructor({tableModel:t,tableController:n}){this.tableModel=t,this.tableController=n}handlePointerDown=t=>{t.preventDefault(),t.target.setPointerCapture(t.pointerId),this.isDragging=!0,this.lastDragX=t.offsetX};handlePointerMove=t=>{this.isDragging&&this.lastDragX!==null&&this.tableController.scroll({deltaX:t.offsetX-this.lastDragX,deltaY:0})};handlePointerUp=t=>{t.target.releasePointerCapture(t.pointerId),this.isDragging=!1,this.lastDragX=null}}const ZD="mosaic-coordinator";class uM{static get coordinator(){return is(ZD)??Ya()}static set coordinator(t){pa(ZD,t)}}const ts="__oid",w4t=120;class x4t{schema;#t=Jt(lo({}));get data(){return G(this.#t)}set data(t){Nt(this.#t,t,!0)}#e=Jt(lo({}));get defaultColWidths(){return G(this.#e)}set defaultColWidths(t){Nt(this.#e,t,!0)}#n=Jt(lo([]));get columns(){return G(this.#n)}set columns(t){Nt(this.#n,t,!0)}#r=Jt(0);get numRows(){return G(this.#r)}set numRows(t){Nt(this.#r,t,!0)}#c=Jt(0);get renderOffset(){return G(this.#c)}set renderOffset(t){Nt(this.#c,t,!0)}#i=Jt(lo({}));get rowHeightAddition(){return G(this.#i)}set rowHeightAddition(t){Nt(this.#i,t,!0)}#o=Bt(()=>this.columns.reduce((t,n)=>(or.config.columnConfigs[n]?.hidden&&t.add(n),n===ts&&or.config.showRowNumber===!1&&t.add(ts),t),new Set));get hiddenColumns(){return G(this.#o)}set hiddenColumns(t){Nt(this.#o,t)}rowKeyColumn=null;constructor(t){this.schema=t}#a=Bt(()=>Object.keys(this.data).sort((t,n)=>this.data[t][ts]-this.data[n][ts]));get renderableRows(){return G(this.#a)}set renderableRows(t){Nt(this.#a,t)}#s=Bt(()=>this.columns.filter(t=>!this.hiddenColumns.has(t)));get renderableCols(){return G(this.#s)}set renderableCols(t){Nt(this.#s,t)}#l=Bt(()=>this.renderableRows.length===0?this.zeroRowPosition:Math.min(...this.renderableRows.map(t=>this.rowPositions[t])));get minRowPosition(){return G(this.#l)}set minRowPosition(t){Nt(this.#l,t)}#f=Bt(()=>this.renderableRows.length===0?this.finalRowPosition:Math.max(...this.renderableRows.map(t=>this.rowPositions[t])));get maxRowPosition(){return G(this.#f)}set maxRowPosition(t){Nt(this.#f,t)}#u=Bt(()=>{const t=Math.min(...this.renderableRows.map(n=>this.data[n][ts]));return Number.isSafeInteger(t)?t:0});get minRowOID(){return G(this.#u)}set minRowOID(t){Nt(this.#u,t)}#p=Bt(()=>{const t=Math.max(...this.renderableRows.map(n=>this.data[n][ts]));return Number.isSafeInteger(t)?t:0});get maxRowOID(){return G(this.#p)}set maxRowOID(t){Nt(this.#p,t)}#h=Bt(()=>0);get zeroRowPosition(){return G(this.#h)}set zeroRowPosition(t){Nt(this.#h,t)}#d=Bt(()=>(this.numRows-1)*or.config.rowHeight+this.rowPositionOffsets.cumulative);get finalRowPosition(){return G(this.#d)}set finalRowPosition(t){Nt(this.#d,t)}colsLeftmostPosition=0;#g=Bt(()=>{const t=this.renderableCols[this.renderableCols.length-1];return this.colPositions[t]+this.colWidths[t]});get colsRightmostPosition(){return G(this.#g)}set colsRightmostPosition(t){Nt(this.#g,t)}#m=Bt(()=>this.renderableRows.reduce(({offsets:t,cumulative:n},r)=>{t[r]=n;const i=this.rowHeightAddition[r]??0;return{offsets:t,cumulative:n+i}},{offsets:{},cumulative:0}));get rowPositionOffsets(){return G(this.#m)}set rowPositionOffsets(t){Nt(this.#m,t)}#y=Bt(()=>this.renderableRows.reduce((t,n)=>{const r=(this.data[n][ts]-1)*or.config.rowHeight+this.rowPositionOffsets.offsets[n];return t[n]=r,t},{}));get rowPositions(){return G(this.#y)}set rowPositions(t){Nt(this.#y,t)}#v=Bt(()=>{let t=0;return this.columns.reduce((n,r,i)=>(this.hiddenColumns.has(r)||(n[r]=t,t+=this.colWidths[r]),n),{})});get colPositions(){return G(this.#v)}set colPositions(t){Nt(this.#v,t)}#b=Bt(()=>this.renderableRows.reduce((t,n)=>(t[n]=or.config.rowHeight+(this.rowHeightAddition[n]??0),t),{}));get rowHeights(){return G(this.#b)}set rowHeights(t){Nt(this.#b,t)}#_=Bt(()=>this.columns.reduce((t,n,r)=>(t[n]=Math.max(or.config.columnConfigs[n]?.width??this.defaultColWidths[n]??w4t,or.config.minColumnWidths[n]??0),this.isFirstCol(n)&&(t[n]+=or.config.firstColLeftPadding),this.isLastCol(n)&&(t[n]+=or.config.verticalScrollbarWidth),t),{}));get colWidths(){return G(this.#_)}set colWidths(t){Nt(this.#_,t)}getContent({row:t,col:n}){return this.data[t]?this.data[t][n]:null}getRowData(t){return this.data[t]?this.data[t]:null}getPosition({row:t,col:n}){const r=this.colPositions[n],i=this.rowPositions[t];return{x:r,y:i}}getDimensions({row:t,col:n}){const r=this.colWidths[n],i=this.rowHeights[t];return{width:r,height:i}}getRowParity(t){return this.data[t]&&this.data[t][ts]%2===0?"even":"odd"}isFirstCol(t){return this.renderableCols.indexOf(t)===0}isLastCol(t){return this.renderableCols.indexOf(t)===this.renderableCols.length-1}deleteRow(t){delete this.data[t];const n=this.rowHeightAddition[t]??0;return delete this.rowHeightAddition[t],n}collapseRow(t){const n=this.rowHeightAddition[t]??0;return delete this.rowHeightAddition[t],n}reset(){this.data={},this.rowHeightAddition={}}teardown(){this.reset()}}class S4t extends ch{tableName;onResult;constructor(t,n,r){super(n??void 0),this.tableName=t,this.onResult=r}queryResult(t){const n=t.toArray()[0].count;return this.onResult(n),this}query(t=[]){return zt.from(this.tableName).select({count:sr()}).where(t)}}const es="__oid";class A4t extends ch{tableName;columns;onResult;onColumnInfo;limit=20;offset=0;sort=null;info=null;columnInfo=null;isReady=!1;constructor(t,n,r,i,o){super(r??void 0),this.tableName=t,this.columns=n,this.onResult=i,this.onColumnInfo=o}async prepare(){if(this.coordinator==null)return;const t=(await rI(this.coordinator,[{table:this.tableName,column:"*"}])).reduce((n,r)=>(n[r.column]=r,n),{});this.columnInfo=t,this.onColumnInfo(t),this.isReady=!0}getSelect({includeRowNumber:t}={includeRowNumber:!0}){const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=Kr(Mt(i),"TEXT"):r[i]=Mt(i),r),{});return t||delete n[es],n}queryResult(t){return this.onResult(t),this}query(t=[]){if(!this.isReady)return null;const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=Kr(Mt(i),"TEXT"):r[i]=Mt(i),r),{});if(n[es]=Dz(),this.sort){const r=this.sort.direction==="ascending"?this.sort.column:jg(this.sort.column);n[es]=n[es].orderby(r)}return zt.from(this.tableName).select(n).where(t).limit(this.limit).offset(this.offset)}fetchRows(t,n){this.offset=t,this.limit=n,this.requestUpdate()}}class E4t{model;schema;config;#t=Bt(()=>uM.coordinator);get coordinator(){return G(this.#t)}set coordinator(t){Nt(this.#t,t)}filterBy=null;rowsClient=null;numRowsClient=null;rowKeyColumn=null;#e=Jt(null);get element(){return G(this.#e)}set element(t){Nt(this.#e,t,!0)}#n=Jt(0);get viewHeight(){return G(this.#n)}set viewHeight(t){Nt(this.#n,t,!0)}#r=Jt(0);get viewWidth(){return G(this.#r)}set viewWidth(t){Nt(this.#r,t,!0)}#c=Jt(0);get yScroll(){return G(this.#c)}set yScroll(t){Nt(this.#c,t,!0)}#i=Jt(0);get xScroll(){return G(this.#i)}set xScroll(t){Nt(this.#i,t,!0)}#o=Jt(!1);get isFetching(){return G(this.#o)}set isFetching(t){Nt(this.#o,t,!0)}#a=Jt(!1);get isJumping(){return G(this.#a)}set isJumping(t){Nt(this.#a,t,!0)}#s=Jt(null);get sort(){return G(this.#s)}set sort(t){Nt(this.#s,t,!0)}#l=Jt(!1);get isReady(){return G(this.#l)}set isReady(t){Nt(this.#l,t,!0)}#f=Jt(0);get updateKey(){return G(this.#f)}set updateKey(t){Nt(this.#f,t,!0)}#u=Jt(!1);get isStale(){return G(this.#u)}set isStale(t){Nt(this.#u,t,!0)}#p=Jt(null);get flashedRowId(){return G(this.#p)}set flashedRowId(t){Nt(this.#p,t,!0)}#h=Jt(null);get hoveredRowId(){return G(this.#h)}set hoveredRowId(t){Nt(this.#h,t,!0)}#d=Bt(()=>Math.ceil(this.viewHeight/or.config.rowHeight));get rowsOnScreen(){return G(this.#d)}set rowsOnScreen(t){Nt(this.#d,t)}#g=Bt(()=>this.isJumping?0:or.config.renderWindowOffset);get renderWindowOffset(){return G(this.#g)}set renderWindowOffset(t){Nt(this.#g,t)}#m=Bt(()=>{if(this.model.renderableRows.length===0)return null;const t=this.model.renderableRows.filter(r=>{const i=this.model.rowPositions[r]+this.yScroll;return i+this.model.rowHeights[r]>0&&i<this.viewHeight});if(t.length===0)return null;const n=t[0];return this.model.data[n][es]});get firstVisibleRowOID(){return G(this.#m)}set firstVisibleRowOID(t){Nt(this.#m,t)}#y=Bt(()=>Math.max(0,Math.floor(-this.yScroll/or.config.rowHeight)));get offset(){return G(this.#y)}set offset(t){Nt(this.#y,t)}onFetchResolveBegin=null;onFetchResolveEnd=null;constructor(t,n){this.model=t,this.schema=n,this.config=or.config}handleFilterBy=()=>{this.rowsClient&&(this.rowsClient.offset=0,this.rowsClient.limit=this.rowsOnScreen,this.isJumping=!0,this.markStale())};updateData=t=>{if(!this.model||!this.rowKeyColumn)return;this.onFetchResolveBegin&&(this.onFetchResolveBegin(),this.onFetchResolveBegin=null);const n=t.toArray(),r={};for(const i of n){const o=i[this.rowKeyColumn];r[o]=i}this.model.data={...this.model.data,...r},this.onFetchResolveEnd&&(this.onFetchResolveEnd(),this.onFetchResolveEnd=null),this.isFetching=!1};initialize({tableName:t,rowKey:n,columns:r,filterBy:i}){if(this.model.columns=r,this.model.rowKeyColumn=n,this.rowKeyColumn=n,i&&(this.filterBy=i,this.filterBy.addEventListener("value",this.handleFilterBy)),!this.rowKeyColumn)throw new Error("rowkey cannot be null");let o=r.includes(this.rowKeyColumn)?r:[...r,this.rowKeyColumn];this.rowsClient=new A4t(t,o,i,s=>{this.updateData(s)},s=>{this.schema.columnInfo=s,this.computeColWidths(t,r),this.isReady=!0}),this.coordinator.connect(this.rowsClient),this.numRowsClient=new S4t(t,i,s=>{this.model&&(this.model.numRows=s)}),this.coordinator.connect(this.numRowsClient),zr(()=>{if(!this.rowsClient||this.isFetching||!this.isReady)return;const s=-this.renderWindowOffset,a=this.viewHeight+this.renderWindowOffset,l=this.model.maxRowPosition+this.yScroll+this.config.rowHeight,c=this.model.minRowPosition+this.yScroll;if(c<0&&l<0||c>this.viewHeight&&l>this.viewHeight){const y=this.rowsOnScreen;this.isFetching=!0,this.rowsClient.fetchRows(this.offset,y)}else{if(l<a){const v=cM.clamp(Math.ceil((a-l)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);v>0&&this.model.maxRowOID!==this.model.numRows&&(this.isFetching=!0,this.rowsClient.fetchRows(this.model.maxRowOID,v))}const y=this.model.minRowPosition+this.yScroll;if(y>s&&this.model.minRowOID!==1){const v=cM.clamp(Math.ceil((y-s)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);v>0&&(this.isFetching=!0,this.rowsClient.fetchRows(Math.max(0,this.model.minRowOID-1-v),v))}}const u=zY(this.model.renderableRows);let f=0;for(;this.model.rowPositions[u[f]]+this.yScroll+this.model.rowHeights[u[f]]<0;)this.yScroll+=this.model.collapseRow(u[f]),f+=1;let h=u.length-1;for(;this.model.rowPositions[u[h]]+this.yScroll>this.viewHeight;)this.model.collapseRow(u[h]),h-=1;let p=0;for(;this.model.rowPositions[u[p]]+this.yScroll+this.model.rowHeights[u[p]]<s;)this.model.deleteRow(u[p]),p+=1;let g=u.length-1;for(;this.model.rowPositions[u[g]]+this.yScroll>a;)this.model.deleteRow(u[g]),g-=1})}teardown(){this.filterBy&&this.filterBy.removeEventListener("value",this.handleFilterBy)}cellIsVisible(t){const{x:n,y:r}=this.model.getPosition(t),{width:i,height:o}=this.model.getDimensions(t),s=n+this.xScroll,a=r+this.yScroll;return s+i>=0&&s<=this.viewWidth&&a+o>=0&&a<=this.viewHeight}rowIsVisible(t){const n=this.model.rowPositions[t],r=this.model.rowHeights[t],i=n+this.yScroll;return i+r>=0&&i<=this.viewHeight}rowStillExists(t){return this.model.data[t]!=null}colIsVisible(t){const n=this.model.colPositions[t],r=this.model.colWidths[t],i=n+this.xScroll;return i+r>=0&&i<=this.viewWidth}scroll({deltaX:t,deltaY:n}){if(Math.abs(n)>Math.abs(t)){const r=this.yScroll-n;this.model.zeroRowPosition+r>0?this.yScroll=-this.model.zeroRowPosition:this.model.finalRowPosition+r<0?this.yScroll=-this.model.finalRowPosition:this.yScroll=r}else{const r=this.xScroll-t;-r<0?this.xScroll=0:-r>Math.max(this.model.colsRightmostPosition,this.viewWidth)-this.viewWidth?this.xScroll=-Math.max(this.model.colsRightmostPosition,this.viewWidth)+this.viewWidth:this.xScroll=r}}handleWheel=t=>{t.preventDefault(),this.isJumping=!1,this.scroll({deltaX:t.deltaX,deltaY:t.deltaY})};jumpToOffset(t){if(!this.rowsClient)return;this.isFetching=!0;const n=this.rowsOnScreen,r=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{r&&r(),this.yScroll=-(t*this.config.rowHeight)},this.markStale(),this.rowsClient.fetchRows(t,n)}handleSort=t=>{this.rowsClient&&(this.sort=t,this.rowsClient.sort=t,this.resetRows())};resetRows(){this.model.reset(),this.yScroll=0}flashRow(t){this.flashedRowId=t,setTimeout(()=>{this.flashedRowId=null},400)}async scrollToRow(t,n=!0){if(!this.rowsClient)return;this.isFetching=!0;const r=zt.with({original:this.rowsClient.query(this.rowsClient.filterBy?.predicate(this.rowsClient)).offset(0).limit(this.model.numRows)}).select([es]).from("original").where(Ns(Mt(this.rowKeyColumn),Zt(t))),i=(await this.coordinator.query(r)).toArray();if(i.length>0){const o=i[0][es]-1;this.onFetchResolveEnd=()=>{n&&this.flashRow(t)},this.jumpToOffset(o)}else this.isFetching=!1,console.error("no row",t,"found")}addHeightToRow(t,n){this.model.rowHeightAddition[t]=(this.model.rowHeightAddition[t]??0)+n}hideColumn(t){t===es?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!1):this.config.showRowNumber=!1:(this.config.columnConfigs[t]||(this.config.columnConfigs[t]={}),this.config.columnConfigs[t].hidden=!0)}showColumn(t){t===es?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!0):this.config.showRowNumber=!0:(this.config.columnConfigs[t]||(this.config.columnConfigs[t]={}),this.config.columnConfigs[t].hidden=!1)}markStale(){this.isStale=!0;const t=this.onFetchResolveBegin;this.onFetchResolveBegin=()=>{t&&t(),this.resetRows()};const n=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{n&&n(),this.updateKey+=1,this.isStale=!1}}async computeColWidths(t,n){const r=n.filter(l=>l!==es),i=this.rowsClient?.getSelect({includeRowNumber:!1}),o=r.reduce((l,c)=>(l[c]=0,l),{}),s=zt.from(t).select(i).offset(0).limit(10),a=(await this.coordinator.query(s)).toArray();for(const l of a)for(const c of r)o[c]=Math.max(o[c],k4t(l[c]));n.includes(es)&&(o[es]=this.config.DEFAULT_ROW_NUMBER_COL_WIDTH),this.model.defaultColWidths=o}}function k4t(e){const t=String(e).length;return t>200?600:t>100?300:t>20?200:t>10?150:120}class T4t{tableController;#t=Bt(()=>this.tableController.element);get tableElement(){return G(this.#t)}set tableElement(t){Nt(this.#t,t)}constructor(t){this.tableController=t}mount(t,n,r,i,o){if(!this.tableElement)return;const s=n.getBoundingClientRect(),a=this.tableElement.getBoundingClientRect(),l=a.top,c=a.left;switch(r){case"inside":switch(o){case"top":t.style.top=s.top-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+o)}switch(i){case"left":t.style.left=s.left-c+"px";case"center":case"right":throw new Error("not yet implemented"+r+i)}break;case"outside":switch(o){case"top":t.style.top=s.bottom-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+o)}switch(i){case"left":t.style.left=s.left-c+"px";break;case"center":case"right":throw new Error("not yet implemented"+r+i)}break}this.tableElement.appendChild(t)}destroy(t){this.tableElement&&this.tableElement.contains(t)&&this.tableElement.removeChild(t)}}var kk,QD;function M4t(){if(QD)return kk;QD=1;function e(t,n,r){return t===t&&(r!==void 0&&(t=t<=r?t:r),n!==void 0&&(t=t>=n?t:n)),t}return kk=e,kk}var Tk,tL;function I4t(){if(tL)return Tk;tL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Tk=t,Tk}var Mk,eL;function R4t(){if(eL)return Mk;eL=1;var e=I4t(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Mk=n,Mk}var Ik,nL;function SR(){if(nL)return Ik;nL=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Ik=e,Ik}var Rk,rL;function C4t(){if(rL)return Rk;rL=1;var e=typeof If=="object"&&If&&If.Object===Object&&If;return Rk=e,Rk}var Ck,iL;function AH(){if(iL)return Ck;iL=1;var e=C4t(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Ck=n,Ck}var Nk,oL;function EH(){if(oL)return Nk;oL=1;var e=AH(),t=e.Symbol;return Nk=t,Nk}var $k,sL;function N4t(){if(sL)return $k;sL=1;var e=EH(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var a=n.call(s,i),l=s[i];try{s[i]=void 0;var c=!0}catch{}var u=r.call(s);return c&&(a?s[i]=l:delete s[i]),u}return $k=o,$k}var Ok,aL;function $4t(){if(aL)return Ok;aL=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Ok=n,Ok}var Dk,lL;function O4t(){if(lL)return Dk;lL=1;var e=EH(),t=N4t(),n=$4t(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?t(a):n(a)}return Dk=s,Dk}var Lk,cL;function D4t(){if(cL)return Lk;cL=1;function e(t){return t!=null&&typeof t=="object"}return Lk=e,Lk}var Fk,uL;function L4t(){if(uL)return Fk;uL=1;var e=O4t(),t=D4t(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Fk=r,Fk}var Bk,fL;function kH(){if(fL)return Bk;fL=1;var e=R4t(),t=SR(),n=L4t(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(t(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=t(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=e(c);var f=o.test(c);return f||s.test(c)?a(c.slice(2),f?2:8):i.test(c)?r:+c}return Bk=l,Bk}var Pk,hL;function F4t(){if(hL)return Pk;hL=1;var e=M4t(),t=kH();function n(r,i,o){return o===void 0&&(o=i,i=void 0),o!==void 0&&(o=t(o),o=o===o?o:0),i!==void 0&&(i=t(i),i=i===i?i:0),e(t(r),i,o)}return Pk=n,Pk}var B4t=F4t();const P4t=xR(B4t);var zk,dL;function z4t(){if(dL)return zk;dL=1;var e=AH(),t=function(){return e.Date.now()};return zk=t,zk}var Uk,pL;function U4t(){if(pL)return Uk;pL=1;var e=SR(),t=z4t(),n=kH(),r="Expected a function",i=Math.max,o=Math.min;function s(a,l,c){var u,f,h,p,g,y,v=0,b=!1,_=!1,w=!0;if(typeof a!="function")throw new TypeError(r);l=n(l)||0,e(c)&&(b=!!c.leading,_="maxWait"in c,h=_?i(n(c.maxWait)||0,l):h,w="trailing"in c?!!c.trailing:w);function S(F){var N=u,O=f;return u=f=void 0,v=F,p=a.apply(O,N),p}function k(F){return v=F,g=setTimeout(M,l),b?S(F):p}function E(F){var N=F-y,O=F-v,D=l-N;return _?o(D,h-O):D}function T(F){var N=F-y,O=F-v;return y===void 0||N>=l||N<0||_&&O>=h}function M(){var F=t();if(T(F))return I(F);g=setTimeout(M,E(F))}function I(F){return g=void 0,w&&u?S(F):(u=f=void 0,p)}function $(){g!==void 0&&clearTimeout(g),v=0,u=y=f=g=void 0}function C(){return g===void 0?p:I(t())}function L(){var F=t(),N=T(F);if(u=arguments,f=this,y=F,N){if(g===void 0)return k(y);if(_)return clearTimeout(g),g=setTimeout(M,l),S(y)}return g===void 0&&(g=setTimeout(M,l)),p}return L.cancel=$,L.flush=C,L}return Uk=s,Uk}var qk,gL;function q4t(){if(gL)return qk;gL=1;var e=U4t(),t=SR(),n="Expected a function";function r(i,o,s){var a=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(a="leading"in s?!!s.leading:a,l="trailing"in s?!!s.trailing:l),e(i,o,{leading:a,maxWait:o,trailing:l})}return qk=r,qk}var j4t=q4t();const mL=xR(j4t);class V4t{tableModel;tableController;isDragging=!1;#t=Jt(0);get elementHeight(){return G(this.#t)}set elementHeight(t){Nt(this.#t,t,!0)}#e=Jt(0);get labelHeight(){return G(this.#e)}set labelHeight(t){Nt(this.#e,t,!0)}#n=Bt(()=>or.config.verticalScrollbarPillHeight);get pillHeight(){return G(this.#n)}set pillHeight(t){Nt(this.#n,t)}#r=Bt(()=>this.elementHeight-this.pillHeight);get scrollbarHeight(){return G(this.#r)}set scrollbarHeight(t){Nt(this.#r,t)}#c=Bt(()=>this.tableController.firstVisibleRowOID?this.tableController.firstVisibleRowOID:this.tableController.offset+1);get displayRow(){return G(this.#c)}set displayRow(t){Nt(this.#c,t)}#i=Bt(()=>(this.displayRow-1)/(this.tableModel.numRows-1)*this.scrollbarHeight);get pillPosition(){return G(this.#i)}set pillPosition(t){Nt(this.#i,t)}#o=Bt(()=>{if(this.pillPosition===null)return 0;const t=this.pillPosition+this.pillHeight/2-this.labelHeight/2;if(t<0)return t;const n=this.pillPosition+this.pillHeight/2+this.labelHeight/2;return n>this.elementHeight?n-this.elementHeight:0});get labelOffset(){return G(this.#o)}set labelOffset(t){Nt(this.#o,t)}constructor({tableModel:t,tableController:n}){this.tableModel=t,this.tableController=n}computeOffsetFromPointer=t=>{this.isDragging=!0;let n=Math.round(t.offsetY/this.scrollbarHeight*(this.tableModel.numRows-1));return P4t(n,0,this.tableModel.numRows-1)};pointerDown=t=>{t.preventDefault(),t.target.setPointerCapture(t.pointerId),this.isDragging=!0;const n=this.computeOffsetFromPointer(t);this.tableController.isJumping=!0,this.tableController.jumpToOffset(n)};handlePointerDown=mL(this.pointerDown,50);pointerMove=t=>{if(this.isDragging){const n=this.computeOffsetFromPointer(t);this.tableController.jumpToOffset(n)}};handlePointerMove=mL(this.pointerMove,50);handlePointerUp=t=>{t.target.releasePointerCapture(t.pointerId),this.isDragging=!1,this.tableController.isJumping=!1}}class W4t{#t=Jt(null);get columnInfo(){return G(this.#t)}set columnInfo(t){Nt(this.#t,t,!0)}#e=Bt(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((t,n)=>(t[n]=this.columnInfo[n].type,t),{}):{});get dataType(){return G(this.#e)}set dataType(t){Nt(this.#e,t)}#n=Bt(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((t,n)=>(t[n]=this.columnInfo[n].sqlType,t),{}):{});get sqlType(){return G(this.#n)}set sqlType(t){Nt(this.#n,t)}}class Y4t{tableController;#t=Bt(()=>Math.floor(-this.tableController.yScroll/or.config.scrollOverflowValue)*or.config.scrollOverflowValue);get offset(){return G(this.#t)}set offset(t){Nt(this.#t,t)}constructor(t){this.tableController=t}y(t){return t-this.offset}yScroll(t){return t+this.offset}}const yL=Symbol("schema"),vL=Symbol("model"),bL=Symbol("controller"),_L=Symbol("vertical-scrollbar-controller"),wL=Symbol("horizontal-scrollbar-controller"),xL=Symbol("table-portal-controller"),SL=Symbol("overscroll-modifier");let rr=class{static initialize(){const t=new W4t,n=new x4t(t),r=new E4t(n,t),i=new V4t({tableModel:n,tableController:r}),o=new _4t({tableModel:n,tableController:r}),s=new T4t(r),a=new Y4t(r);pa(yL,t),pa(vL,n),pa(bL,r),pa(_L,i),pa(wL,o),pa(xL,s),pa(SL,a)}static get schema(){return is(yL)}static get model(){return is(vL)}static get controller(){return is(bL)}static get verticalScrollbarController(){return is(_L)}static get horizontalScrollbarController(){return is(wL)}static get tablePortalController(){return is(xL)}static get overscrollModifier(){return is(SL)}};var H4t=Bn('<div class="horizontal-scrollbar svelte-1poinb5"><div class="pill svelte-1poinb5"></div></div>');const G4t={hash:"svelte-1poinb5",code:".horizontal-scrollbar.svelte-1poinb5 {position:absolute;bottom:0;left:0;width:100%;height:var(--height);transition:opacity 200ms linear;background-color:var(--scrollbar-bg);}.horizontal-scrollbar.svelte-1poinb5:hover {opacity:1 !important;}.pill.svelte-1poinb5 {width:var(--width);height:calc(var(--height) - var(--margin) * 2);margin:var(--margin);border-radius:2px;background-color:var(--scrollbar-pill-bg);}"};function X4t(e,t){si(t,!0),ti(e,G4t);const n=rr.horizontalScrollbarController,r=rr.controller,i=or.config;let o=Jt(0),s=Jt(null),a=Jt(null),l=0;em(()=>(l=requestAnimationFrame(f),()=>{cancelAnimationFrame(l)}));function c(){G(s)&&(G(s).style.opacity="0")}const u=SH.debounce(c,1e3);zr(()=>{G(s)&&(r.xScroll,G(s).style.opacity="1",u())});function f(){Nt(o,n.pillWidth,!0),G(a)&&(G(a).style.transform=`translate(${n.pillLeft}px, 0)`),l=requestAnimationFrame(f)}var h=H4t();let p;var g=jn(h);g.__pointerdown=function(...v){n.handlePointerDown?.apply(this,v)},g.__pointermove=function(...v){n.handlePointerMove?.apply(this,v)},g.__pointerup=function(...v){n.handlePointerUp?.apply(this,v)};let y;hs(g,v=>Nt(a,v),()=>G(a)),On(h),hs(h,v=>Nt(s,v),()=>G(s)),pi((v,b)=>{p=ys(h,"",p,v),y=ys(g,"",y,b)},[()=>({"--height":i.horizontalScrollbarHeight+"px"}),()=>({"--width":G(o)+"px","--margin":n.margin+"px"})]),wl(h,"clientWidth",v=>n.elementWidth=v),sn(e,h),ai()}Gu(["pointerdown","pointermove","pointerup"]);var K4t=Bn('<div class="vertical-scrollbar svelte-15rl9bf"><div class="pill svelte-15rl9bf"><div class="label svelte-15rl9bf"> </div></div></div>');const J4t={hash:"svelte-15rl9bf",code:".vertical-scrollbar.svelte-15rl9bf {position:absolute;right:0;top:0;width:var(--width);height:calc(100% - var(--offset-bottom));contain:layout;cursor:row-resize;transition:opacity 200ms linear;user-select:none;background-color:var(--scrollbar-bg);}.vertical-scrollbar.svelte-15rl9bf:hover {opacity:1 !important;}.pill.svelte-15rl9bf {--pill-height: 4px;position:relative;pointer-events:none; /* let the container respond to pointer events */top:0;left:0;width:calc(var(--width) - 2px);margin-left:1px;margin-right:1px;height:var(--pill-height);border-radius:2px;will-change:transform;background-color:var(--scrollbar-pill-bg);}.label.svelte-15rl9bf {--offset: 0;position:absolute;pointer-events:none;top:0;left:-4px;font-family:var(--font-family);font-size:14px;white-space:nowrap;padding:2px 4px;box-shadow:var(--shadow);transform:translate(-100%, calc(-50% + var(--pill-height) / 2 - var(--offset)));border-radius:2px;color:var(--secondary-text-color);background-color:var(--scrollbar-label-bg);border:var(--outline);}"};function Z4t(e,t){si(t,!0),ti(e,J4t);const n=rr.verticalScrollbarController,r=rr.controller,i=or.config;let o=Jt(0),s=Jt(0),a=Jt(null),l=Jt(null),c=Jt(null),u=Bt(()=>new Intl.NumberFormat().format(G(s))),f=0;em(()=>(f=requestAnimationFrame(g),()=>{cancelAnimationFrame(f)}));function h(){G(a)&&(G(a).style.opacity="0")}const p=SH.debounce(h,1e3);zr(()=>{G(a)&&(r.yScroll,G(a).style.opacity="1",p())});function g(){Nt(o,n.pillPosition??G(o),!0),Nt(s,n.displayRow??G(s),!0),G(l)&&(G(l).style.transform=`translate3d(0, ${G(o)}px, 0)`),G(c)&&G(c).style.setProperty("--offset",n.labelOffset-1+"px"),f=requestAnimationFrame(g)}var y=K4t();y.__pointerdown=function(...k){n.handlePointerDown?.apply(this,k)},y.__pointermove=function(...k){n.handlePointerMove?.apply(this,k)},y.__pointerup=function(...k){n.handlePointerUp?.apply(this,k)};let v;var b=jn(y);let _;var w=jn(b),S=jn(w,!0);On(w),hs(w,k=>Nt(c,k),()=>G(c)),On(b),hs(b,k=>Nt(l,k),()=>G(l)),On(y),hs(y,k=>Nt(a,k),()=>G(a)),pi((k,E)=>{v=ys(y,"",v,k),_=ys(b,"",_,E),Rc(S,G(u))},[()=>({"--offset-bottom":i.horizontalScrollbarHeight+"px","--width":i.verticalScrollbarWidth+"px"}),()=>({"--pill-height":n.pillHeight+"px"})]),wl(w,"clientHeight",k=>n.labelHeight=k),wl(y,"clientHeight",k=>n.elementHeight=k),sn(e,y),ai()}Gu(["pointerdown","pointermove","pointerup"]);var Q4t=Bn('<a target="_blank"> </a>'),tMt=Bn('<div class="link-content"><!></div>');const eMt={hash:"svelte-3kpd",code:""};function nMt(e,t){si(t,!0),ti(e,eMt);let n=F1(t,"height");var r=tMt(),i=jn(r);{var o=s=>{var a=Q4t(),l=jn(a,!0);On(a),pi(()=>{Zx(a,"href",t.url),Rc(l,t.url)}),sn(s,a)};Os(i,s=>{t.url&&s(o)})}On(r),wl(r,"clientHeight",n),sn(e,r),ai()}var rMt=Bn('<div class="number-content svelte-rqpfez"> </div>');const iMt={hash:"svelte-rqpfez",code:".number-content.svelte-rqpfez {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function oMt(e,t){si(t,!0),ti(e,iMt);let n=F1(t,"height");function r(s){return s===null?null:Number.isInteger(s)?s.toString():s.toPrecision(4).toString()}var i=rMt(),o=jn(i,!0);On(i),pi(s=>Rc(o,s),[()=>r(t.number)]),wl(i,"clientHeight",n),sn(e,i),ai()}var sMt=Bn("<div> </div>");const aMt={hash:"svelte-122k9kr",code:".clamped.svelte-122k9kr {display:-webkit-box;-webkit-box-orient:vertical;line-clamp:var(--lines, var(--num-lines)); /* fallback to numlines from parent */-webkit-line-clamp:var(--lines, var(--num-lines));overflow:hidden;text-overflow:ellipsis;}"};function AL(e,t){si(t,!0),ti(e,aMt);let n=F1(t,"height");const r=or.config;let i=Jt(null),o=Jt(null);zr(()=>{G(i)&&(n(G(i).scrollHeight),Nt(o,Math.floor(t.parentHeight/r.lineHeight),!0))});var s=sMt();let a;var l=jn(s,!0);On(s),hs(s,c=>Nt(i,c),()=>G(i)),pi(c=>{th(s,1,`text-content ${(t.clamped?"clamped":null)??""}`,"svelte-122k9kr"),a=ys(s,"",a,c),Rc(l,t.text)},[()=>({"--lines":G(o)})]),sn(e,s),ai()}class lMt{#t=Jt(lo({}));get config(){return G(this.#t)}set config(t){Nt(this.#t,t,!0)}}const jk="custom-cells";class vw{static initialize(){pa(jk,new lMt)}static set config(t){const n=is(jk);n.config=t}static get config(){return is(jk).config}}var cMt=Bn('<div class="bigint-content svelte-35i9ld"> </div>');const uMt={hash:"svelte-35i9ld",code:".bigint-content.svelte-35i9ld {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function fMt(e,t){si(t,!0),ti(e,uMt);let n=F1(t,"height");function r(s){return s===null?null:s.toLocaleString()}var i=cMt(),o=jn(i,!0);On(i),pi(s=>Rc(o,s),[()=>r(t.bigint)]),wl(i,"clientHeight",n),sn(e,i),ai()}var hMt=Bn("<div></div>");const dMt={hash:"svelte-3kpd",code:""};function pMt(e,t){si(t,!0),ti(e,dMt);let n=F1(t,"height");const r=rr.model,i=c=>typeof c=="function"?(u,f)=>{let h=new c(u,f);return{...h.update?{update:h.update.bind(h)}:{},...h.destroy?{destroy:h.destroy.bind(h)}:{}}}:(u,f)=>{let h=new c.class(u,f);return{...h.update?{update:h.update.bind(h)}:{},...h.destroy?{destroy:h.destroy.bind(h)}:{}}};let o=Bt(()=>i(t.customCell)),s=Bt(()=>r.getContent({row:t.row,col:t.col})),a=Bt(()=>r.getRowData(t.row));var l=hMt();_R(l,(c,u)=>G(o)?.(c,u),()=>({value:G(s),rowData:G(a)})),L1(()=>wl(l,"clientHeight",n)),sn(e,l),ai()}var gMt=(e,t,n,r,i)=>{t.addHeightToRow(n.row,G(r)-G(i))},mMt=Bn("<button>↘</button>"),yMt=Bn('<div class="cell-content clamp svelte-ix87lc"><!> <!></div>');const vMt={hash:"svelte-ix87lc",code:".cell-content.svelte-ix87lc {position:relative;flex-grow:1;line-height:var(--lineHeight);overflow-wrap:anywhere;overflow:hidden;}.expand-button.svelte-ix87lc {all:unset;visibility:hidden;position:absolute;bottom:0;right:0;cursor:pointer;font-size:12px;line-height:18px;padding-left:4px;padding-right:4px;border-radius:2px;color:var(--secondary-text-color);background-color:var(--background-color);border:var(--outline);}.expand-button.show.svelte-ix87lc {visibility:visible;}"};function bMt(e,t){si(t,!0),ti(e,vMt);const n=rr.model,r=rr.controller,i=rr.schema,o=or.config,s=vw.config;let a=Jt(0),l=Jt(0),c=Bt(()=>G(l)>G(a));const u=n.getContent({row:t.row,col:t.col}),f=i.dataType[t.col]??"string",h=i.sqlType[t.col]??"TEXT";var p=yMt();let g;var y=jn(p);{var v=S=>{pMt(S,{get row(){return t.row},get col(){return t.col},get customCell(){return s[t.col]},get height(){return G(l)},set height(k){Nt(l,k,!0)}})},b=S=>{var k=b0(),E=Ta(k);{var T=I=>{var $=b0(),C=Ta($);{var L=N=>{nMt(N,{get url(){return u},get height(){return G(l)},set height(O){Nt(l,O,!0)}})},F=N=>{AL(N,{get text(){return u},get clamped(){return G(c)},get parentHeight(){return G(a)},get height(){return G(l)},set height(O){Nt(l,O,!0)}})};Os(C,N=>{u&&u.startsWith("http")?N(L):N(F,!1)})}sn(I,$)},M=I=>{var $=b0(),C=Ta($);{var L=N=>{var O=b0(),D=Ta(O);{var B=z=>{{let U=Bt(()=>BigInt(u??""));fMt(z,{get bigint(){return G(U)},get height(){return G(l)},set height(V){Nt(l,V,!0)}})}},j=z=>{oMt(z,{get number(){return u},get height(){return G(l)},set height(U){Nt(l,U,!0)}})};Os(D,z=>{h==="BIGINT"?z(B):z(j,!1)})}sn(N,O)},F=N=>{AL(N,{get text(){return u},get clamped(){return G(c)},get parentHeight(){return G(a)},get height(){return G(l)},set height(O){Nt(l,O,!0)}})};Os(C,N=>{f==="number"?N(L):N(F,!1)},!0)}sn(I,$)};Os(E,I=>{f==="string"?I(T):I(M,!1)},!0)}sn(S,k)};Os(y,S=>{s[t.col]?S(v):S(b,!1)})}var _=Ma(y,2);{var w=S=>{var k=mMt();k.__click=[gMt,r,t,l,a],pi(()=>th(k,1,`expand-button ${t.hovered?"show":"hide"}`,"svelte-ix87lc")),sn(S,k)};Os(_,S=>{G(c)&&S(w)})}On(p),pi(S=>g=ys(p,"",g,S),[()=>({"--lineHeight":o.lineHeight+"px","--num-lines":o.textMaxLines})]),wl(p,"clientHeight",S=>Nt(a,S)),sn(e,p),ai()}Gu(["click"]);var _Mt=Bn('<div class="row-number svelte-er2yqb"> </div>');const wMt={hash:"svelte-er2yqb",code:".row-number.svelte-er2yqb {flex-grow:1;text-align:right;color:var(--secondary-text-color);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function xMt(e,t){si(t,!0),ti(e,wMt);const n=rr.model.getContent({row:t.row,col:t.col}),r=Bt(()=>new Intl.NumberFormat().format(n??0));var i=_Mt(),o=jn(i,!0);On(i),pi(()=>Rc(o,G(r))),sn(e,i),ai()}var SMt=(e,t)=>{e.key==="Enter"&&t()},AMt=Bn('<div class="cell svelte-1e1vbvn"><!></div>');const EMt={hash:"svelte-1e1vbvn",code:".cell.svelte-1e1vbvn {--x: 0px;--y: 0px;--width: 0px;--height: 0px;display:flex;box-sizing:border-box;padding-top:calc(var(--padding-y) / 2);padding-bottom:calc(var(--padding-y) / 2);padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-right-padding));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-left-padding));position:absolute;left:0;top:0;width:var(--width);height:var(--height);transform:translate(var(--x), var(--y));contain:layout paint;color:var(--primary-text-color);font-family:var(--cell-font-family);font-size:var(--cell-font-size);}"};function kMt(e,t){si(t,!0),ti(e,EMt);const n=rr.model,r=rr.controller,i=rr.overscrollModifier,o=or.config;let s=Bt(()=>n.getPosition({row:t.row,col:t.col})),a=Bt(()=>G(s).x),l=Bt(()=>G(s).y),c=Bt(()=>i.y(G(l))),u=Bt(()=>n.getDimensions({row:t.row,col:t.col})),f=Bt(()=>G(u).width),h=Bt(()=>G(u).height),p=Bt(()=>n.isFirstCol(t.col)),g=Bt(()=>n.isLastCol(t.col)),y=Bt(()=>n.getRowParity(t.row)==="even"?"var(--primary-bg)":"var(--secondary-bg)"),v=()=>{o.onRowClick&&o.onRowClick(t.row)},b=Jt(!1);var _=AMt();_.__click=v,_.__keydown=[SMt,v];let w;var S=jn(_);{var k=T=>{bMt(T,{get row(){return t.row},get col(){return t.col},get hovered(){return G(b)}})},E=T=>{xMt(T,{get row(){return t.row},get col(){return t.col}})};Os(S,T=>{t.col!==ts?T(k):T(E,!1)})}On(_),pi(T=>w=ys(_,"",w,T),[()=>({"--x":G(a)+"px","--y":G(c)+"px","--width":G(f)+"px","--height":G(h)+"px","--padding-x":o.betweenColPadding+"px","--padding-y":o.betweenRowPadding+"px","--extra-right-padding":(G(g)?o.verticalScrollbarWidth:0)+"px","--extra-left-padding":(G(p)?o.firstColLeftPadding:0)+"px","--background-color":G(y)})]),Pv("pointerenter",_,()=>{Nt(b,!0),r.hoveredRowId=t.row}),Pv("pointerleave",_,()=>{Nt(b,!1),r.hoveredRowId=null}),sn(e,_),ai()}Gu(["click","keydown"]);var TMt=Bn('<div class="header-title svelte-1wng68q"> </div>');const MMt={hash:"svelte-1wng68q",code:".header-title.svelte-1wng68q {flex-shrink:1;margin-right:2px;}"};function IMt(e,t){si(t,!0),ti(e,MMt);const n=or.config;var r=TMt(),i=jn(r,!0);On(r),pi(()=>Rc(i,n.columnConfigs[t.col]?.title??t.col)),sn(e,r),ai()}dTt();var RMt=Bn('<div class="row-number-header svelte-1cjtpqh">#</div>');const CMt={hash:"svelte-1cjtpqh",code:".row-number-header.svelte-1cjtpqh {flex-grow:1;text-align:right;margin-right:4px;box-sizing:border-box;color:var(--secondary-text-color);}"};function NMt(e){ti(e,CMt);var t=RMt();sn(e,t)}var $Mt=(e,t,n,r,i)=>{const o=G(t)?G(n)==="ascending"?"descending":null:"ascending";o?r.handleSort({column:i.col,direction:o}):r.handleSort(null)},OMt=Bn('<button class="sort-buttons svelte-3f09kb"><div> </div></button>');const DMt={hash:"svelte-3f09kb",code:".sort-buttons.svelte-3f09kb {all:unset;flex-shrink:0;width:16px;cursor:pointer;display:flex;justify-content:center;flex-direction:row;margin-left:4px;border-radius:2px;padding-left:4px;padding-right:4px;color:var(--tertiary-text-color);}.sort-buttons.svelte-3f09kb:hover {--placeholder: 0;background-color:var(--hover-bg);}.sort-glyph.svelte-3f09kb {color:var(--tertiary-text-color);}.sort-buttons.svelte-3f09kb:hover .sort-glyph:where(.svelte-3f09kb) {color:var(--tertiary-text-color);}.selected.svelte-3f09kb {color:var(--primary-text-color) !important;}"};function LMt(e,t){si(t,!0),ti(e,DMt);const n=rr.controller;let r=Bt(()=>n.sort?n.sort.column===t.col:!1),i=Bt(()=>n.sort?n.sort.direction:null),o=Bt(()=>G(r)?G(i)==="ascending"?"↑":"↓":"⇅");var s=OMt();s.__click=[$Mt,r,i,n,t];var a=jn(s),l=jn(a,!0);On(a),On(s),pi(()=>{th(a,1,`sort-button ${(G(r)?"selected":null)??""} sort-glyph`,"svelte-3f09kb"),Rc(l,G(o))}),sn(e,s),ai()}Gu(["click"]);class FMt{#t=Jt(lo({}));get config(){return G(this.#t)}set config(t){Nt(this.#t,t,!0)}}const Vk="custom-cells";class fM{static initialize(){pa(Vk,new FMt)}static set config(t){const n=is(Vk);n.config=t}static get config(){return is(Vk).config}}var BMt=Bn("<div></div>");const PMt={hash:"svelte-3kpd",code:""};function zMt(e,t){si(t,!0),ti(e,PMt),rr.model;const n=o=>typeof o=="function"?(s,a)=>{let l=new o(s,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}}:(s,a)=>{let l=new o.class(s,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}};let r=Bt(()=>n(t.customHeader));var i=BMt();_R(i,(o,s)=>G(r)?.(o,s),()=>({column:t.col})),sn(e,i),ai()}var UMt=Bn("<!> <!>",1),qMt=Bn('<div><div class="header-content svelte-12avjxu"><!> <div class="header-title svelte-12avjxu"><!></div></div></div>');const jMt={hash:"svelte-12avjxu",code:".header-cell.svelte-12avjxu {position:relative;display:flex;flex-direction:row;align-items:end;width:var(--width);min-height:var(--height);flex-shrink:0;box-sizing:border-box;padding:0.25em;padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-padding-right));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-padding-left));color:var(--secondary-text-color);font-family:var(--header-font-family);font-size:var(--header-font-size);}.header-cell.number.svelte-12avjxu {justify-content:end;}.header-content.svelte-12avjxu {display:flex;flex-direction:column;flex-shrink:0;}.header-title.svelte-12avjxu {height:1.5em;align-items:center;display:flex;flex-direction:row;flex-shrink:0;}"};function VMt(e,t){si(t,!0),ti(e,jMt);const n=rr.model,r=rr.schema,i=or.config,o=fM.config;let s=Jt(null),a=Jt(0);zr(()=>{i.minColumnWidths[t.col]=G(a)+i.betweenColPadding});const l=Bt(()=>n.colWidths[t.col]),c=Bt(()=>(r.dataType[t.col]??"string")==="number"),u=Bt(()=>G(c)||t.col===ts?"number":""),f=Bt(()=>n.isFirstCol(t.col)),h=Bt(()=>n.isLastCol(t.col));let p=Bt(()=>i.headerHeight?i.headerHeight+"px":"auto");var g=qMt();let y;var v=jn(g),b=jn(v);{var _=T=>{zMt(T,{get col(){return t.col},get customHeader(){return o[t.col]}})};Os(b,T=>{o[t.col]&&T(_)})}var w=Ma(b,2),S=jn(w);{var k=T=>{var M=UMt(),I=Ta(M);IMt(I,{get col(){return t.col}});var $=Ma(I,2);LMt($,{get col(){return t.col}}),sn(T,M)},E=T=>{NMt(T)};Os(S,T=>{t.col!==ts?T(k):T(E,!1)})}On(w),On(v),On(g),hs(g,T=>Nt(s,T),()=>G(s)),pi(T=>{th(g,1,`header-cell ${G(u)??""}`,"svelte-12avjxu"),y=ys(g,"",y,T)},[()=>({"--width":G(l)+"px","--height":G(p),"--padding-x":i.betweenColPadding+"px","--extra-padding-right":(G(h)?i.verticalScrollbarWidth:0)+"px","--extra-padding-left":(G(f)?i.firstColLeftPadding:0)+"px"})]),wl(v,"clientWidth",T=>Nt(a,T)),sn(e,g),ai()}class WMt{tableModel;tableController;col;config;isDragging=!1;startDragX=0;constructor({tableModel:t,tableController:n,col:r}){this.tableModel=t,this.tableController=n,this.col=r,this.config=or.config}handlePointerDown=t=>{t.preventDefault(),t.target.setPointerCapture(t.pointerId),this.isDragging=!0,this.startDragX=t.offsetX};handlePointerMove=t=>{if(this.isDragging&&this.startDragX!==null){const n=t.offsetX-this.startDragX,r=this.tableModel.colWidths[this.col],i=Math.max(0,Math.round(r+n));this.config.columnConfigs[this.col]||(this.config.columnConfigs[this.col]={}),this.config.columnConfigs[this.col].width=i,this.config.onColumnConfigsChange(this.col,zY(this.config.columnConfigs))}};handlePointerUp=t=>{t.target.releasePointerCapture(t.pointerId),this.isDragging=!1,this.startDragX=null}}var YMt=Bn('<div class="header-resize-indicator svelte-1v734te"><div class="pill svelte-1v734te"></div></div>');const HMt={hash:"svelte-1v734te",code:".header-resize-indicator.svelte-1v734te {position:absolute;z-index:2;box-sizing:border-box;width:12px;height:calc(100% - 0.25rem);margin:2px;cursor:col-resize;justify-content:center;display:flex;align-items:center;justify-content:center;transform:translateX(calc(var(--x) - 4px - 50%));}.pill.svelte-1v734te {width:2px;height:calc(100% - 4px);margin-top:2px;margin-bottom:2px;background-color:var(--secondary-text-color);opacity:0.2;border-radius:2px;}"};function GMt(e,t){si(t,!0),ti(e,HMt);const n=rr.model;let r=new WMt({tableModel:n,tableController:rr.controller,col:t.col});const i=Bt(()=>n.colPositions[t.col]+n.colWidths[t.col]);var o=YMt();o.__pointerdown=function(...a){r.handlePointerDown?.apply(this,a)},o.__pointermove=function(...a){r.handlePointerMove?.apply(this,a)},o.__pointerup=function(...a){r.handlePointerUp?.apply(this,a)};let s;pi(a=>s=ys(o,"",s,a),[()=>({"--x":G(i)+"px"})]),sn(e,o),ai()}Gu(["pointerdown","pointermove","pointerup"]);var XMt=e=>{e.stopPropagation()},KMt=Bn('<div class="table-portal svelte-1qnjihj" tabindex="-1"><!></div>');const JMt={hash:"svelte-1qnjihj",code:".table-portal.svelte-1qnjihj {position:absolute;}"};function ZMt(e,t){si(t,!0),ti(e,JMt);const n=rr.controller,r=rr.tablePortalController;let i=Jt(null);const o=u=>{zr(()=>(r.mount(u,t.relativeTo,t.anchor,t.horizontalAlign,t.verticalAlign),u.focus(),()=>{r.destroy(u)}))};let s=0;em(()=>{s=n.xScroll,requestAnimationFrame(a)});function a(){G(i)&&t.stickyX&&(G(i).style.transform=`translateX(${n.xScroll-s}px)`),requestAnimationFrame(a)}var l=KMt();l.__click=[XMt];var c=jn(l);bR(c,()=>t.children),On(l),hs(l,u=>Nt(i,u),()=>G(i)),_R(l,u=>o?.(u)),Pv("wheel",l,u=>{u.stopPropagation()}),sn(e,l),ai()}Gu(["click"]);var QMt=(e,t)=>{Nt(t,!0)},t5t=Bn("<button> </button> <!>",1);const e5t={hash:"svelte-8ns8fr",code:'.dropdown.svelte-8ns8fr {all:unset;padding-left:8px;padding-right:8px;border-radius:2px;cursor:pointer;color:var(--secondary-text-color);position:relative;user-select:none;}.dropdown.svelte-8ns8fr::before {content:"";position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--primary-bg);z-index:-1;}.dropdown.svelte-8ns8fr:hover {background-color:var(--hover-bg);}.unclickable.svelte-8ns8fr {pointer-events:none;}'};function n5t(e,t){ti(e,e5t);let n=Jt(!1),r=Jt(null),i=Jt(null);var o=t5t();Pv("click",rM,u=>{G(n)&&u.target!==G(r)&&Nt(n,!1)});var s=Ta(o);s.__click=[QMt,n];var a=jn(s,!0);On(s),hs(s,u=>Nt(r,u),()=>G(r));var l=Ma(s,2);{var c=u=>{ZMt(u,{get relativeTo(){return t.relativeTo},anchor:"outside",horizontalAlign:"left",verticalAlign:"top",stickyX:!1,get element(){return G(i)},set element(f){Nt(i,f,!0)},children:(f,h)=>{var p=b0(),g=Ta(p);bR(g,()=>t.children),sn(f,p)},$$slots:{default:!0}})};Os(l,u=>{G(n)&&u(c)})}pi(()=>{th(s,1,`dropdown ${G(n)?"unclickable":"clickable"}`,"svelte-8ns8fr"),Rc(a,t.label)}),sn(e,o)}Gu(["click"]);var r5t=(e,t,n)=>{e.target.checked?t.showColumn(G(n)):t.hideColumn(G(n))},i5t=Bn('<li class="column-entry svelte-def7zm"><label class="column-label svelte-def7zm"> <input type="checkbox"/></label></li>'),o5t=Bn('<ul class="column-toggle svelte-def7zm"></ul>'),s5t=Bn("<!> <!>",1),a5t=Bn('<div class="header-row svelte-def7zm"><div class="scroll-container svelte-def7zm"><div class="dropdown-label-container svelte-def7zm"><div class="dropdown-label svelte-def7zm"><!></div></div> <!></div></div>');const l5t={hash:"svelte-def7zm",code:".header-row.svelte-def7zm {flex-shrink:0;border-bottom:1px solid var(--secondary-bg);background-color:var(--primary-bg);}.scroll-container.svelte-def7zm {display:flex;flex-direction:row;}.dropdown-label-container.svelte-def7zm {position:absolute;z-index:20;left:0px;box-sizing:border-box;height:100%;padding:0.25em;display:flex;flex-direction:row;align-items:end;}.dropdown-label.svelte-def7zm {height:1.5em;align-items:center;display:flex;}.column-toggle.svelte-def7zm {margin:0;margin-top:4px;margin-left:8px;padding:12px;background-color:var(--primary-bg);border-radius:4px;box-shadow:var(--shadow);border:var(--outline);max-height:var(--max-height);max-width:var(--max-width);overflow:scroll;}.column-entry.svelte-def7zm {list-style-type:none;padding:4px;user-select:none;}.column-label.svelte-def7zm {display:flex;align-items:center;justify-content:space-between;gap:16px;color:var(--secondary-text-color);}"};function c5t(e,t){si(t,!0),ti(e,l5t);const n=rr.model,r=rr.controller,i=or.config;let o=Jt(null),s=Jt(null),a=Jt(null),l=Bt(()=>n.renderableCols),c=0;em(()=>(c=requestAnimationFrame(u),()=>{cancelAnimationFrame(c)}));function u(){G(s)&&(G(s).style.transform=`translate3d(${r.xScroll}px, 0, 0)`),G(a)&&(G(a).style.transform=`translate3d(${-r.xScroll}px, 0, 0)`),c=requestAnimationFrame(u)}var f=a5t(),h=jn(f),p=jn(h),g=jn(p),y=jn(g);n5t(y,{label:"⋮",get relativeTo(){return G(o)},children:(b,_)=>{var w=o5t();let S;Uy(w,21,()=>n.columns,r4t,(k,E)=>{var T=i5t(),M=jn(T),I=jn(M),$=Ma(I);f4t($),$.__change=[r5t,r,E],ys($,"",{},{float:"right"}),On(M),On(T),pi(()=>{Rc(I,`${(G(E)===ts?"row #":i.columnConfigs[G(E)]?.title??G(E))??""} `),Zx($,"id",`${G(E)??""}-checkbox`),h4t($,G(E)===ts?i.showRowNumber!==!1:!i.columnConfigs[G(E)]?.hidden)}),sn(k,T)}),On(w),pi(k=>S=ys(w,"",S,k),[()=>({"--max-height":r.viewHeight-48+"px","--max-width":r.viewWidth-48+"px"})]),sn(b,w)}}),On(g),hs(g,b=>Nt(a,b),()=>G(a)),On(p);var v=Ma(p,2);Uy(v,16,()=>G(l),b=>b,(b,_)=>{var w=s5t(),S=Ta(w);VMt(S,{get col(){return _}});var k=Ma(S,2);GMt(k,{get col(){return _}}),sn(b,w)}),On(h),hs(h,b=>Nt(s,b),()=>G(s)),On(f),hs(f,b=>Nt(o,b),()=>G(o)),sn(e,f),ai()}Gu(["change"]);function u5t(e,t){return{...e,...e[t]!=null?e[t]:{}}}class f5t{#t=Jt(null);get colorScheme(){return G(this.#t)}set colorScheme(t){Nt(this.#t,t,!0)}#e=Jt(lo({}));get theme(){return G(this.#e)}set theme(t){Nt(this.#e,t,!0)}}const EL=Symbol("style");class hM{static initialize(){pa(EL,new f5t)}static get style(){return is(EL)}}var h5t=Bn("<div><!></div>");const d5t={hash:"svelte-vahitw",code:".table-defaults.light.svelte-vahitw {--default-primary-text-color: black;--default-secondary-text-color: gray;--default-tertiary-text-color: lightgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: white;--default-secondary-bg: rgb(246, 246, 247);--default-tertiary-bg: rgb(234, 234, 235);--default-hover-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-pill-bg: rgba(0, 0, 0, 0.5);--default-scrollbar-label-bg: rgba(255, 255, 255, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(0 0 0 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.2);--default-row-scroll-to-color: rgb(202 225 255);--default-row-hover-color: rgb(220, 235, 255);}.table-defaults.dark.svelte-vahitw {--default-primary-text-color: lightgray;--default-secondary-text-color: gray;--default-tertiary-text-color: dimgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: #060607;--default-secondary-bg: #161617;--default-hover-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-pill-bg: rgba(255, 255, 255, 0.5);--default-scrollbar-label-bg: rgba(0, 0, 0, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(255 255 255 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.6);--default-row-scroll-to-color: rgb(1, 24, 106);--default-row-hover-color: rgb(0, 6, 35);}.style-wrapper.svelte-vahitw {width:100%;height:100%;--primary-text-color: var(--user-primary-text-color, var(--default-primary-text-color));--secondary-text-color: var(--user-secondary-text-color, var(--default-secondary-text-color));--tertiary-text-color: var(--user-tertiary-text-color, var(--default-tertiary-text-color));--font-family: var(--user-font-family, var(--default-font-family));--font-size: var(--user-font-size, var(--default-font-size));--primary-bg: var(--user-primary-bg, var(--default-primary-bg));--secondary-bg: var(--user-secondary-bg, var(--default-secondary-bg));--tertiary-bg: var(--user-tertiarty-bg, var(--default-tertiary-bg));--hover-bg: var(--user-hover-bg, var(--default-hover-bg));--header-font-family: var(--user-header-font-family, var(--font-family));--header-font-size: var(--user-header-font-size, var(--font-size));--cell-font-family: var(--user-cell-font-family, var(--font-family));--cell-font-size: var(--user-cell-font-size, var(--font-size));--scrollbar-bg: var(--user-scrollbar-bg, var(--default-scrollbar-bg));--scrollbar-pill-bg: var(--user-scrollbar-pill-bg, var(--default-scrollbar-pill-bg));--scrollbar-label-bg: var(--user-scrollbar-label-bg, var(--default-scrollbar-label-bg));--shadow: var(--user-shadow, var(--default-shadow));--outline-color: var(--user-outline-color, var(--default-outline-color));--outline: 0.5px solid var(--outline-color);--dimmed-row-color: var(--user-dimmed-row-color, var(--default-dimmed-row-color));--row-scroll-to-color: var(--user-row-scroll-to-color, var(--default-row-scroll-to-color));--row-hover-color: var(--user-row-hover-color, var(--default-row-hover-color));}"};function p5t(e,t){si(t,!0),ti(e,d5t);const n=hM.style;let r=Bt(()=>n.colorScheme),i=Bt(()=>n.theme),o=Jt(null),s=Bt(()=>G(r)??G(o)??"light");const a=B=>{B.matches?Nt(o,"dark"):Nt(o,"light")},l="(prefers-color-scheme: dark";em(()=>(Nt(o,window.matchMedia(l).matches?"dark":"light",!0),window.matchMedia(l).addEventListener("change",a),()=>{window.matchMedia(l).removeEventListener("change",a)}));let c=Bt(()=>u5t(G(i),G(s))),u=Bt(()=>G(c).primaryTextColor),f=Bt(()=>G(c).secondaryTextColor),h=Bt(()=>G(c).tertiaryTextColor),p=Bt(()=>G(c).fontFamily),g=Bt(()=>G(c).fontSize),y=Bt(()=>G(c).primaryBackgroundColor),v=Bt(()=>G(c).secondaryBackgroundColor),b=Bt(()=>G(c).hoverBackgroundColor),_=Bt(()=>G(c).headerFontFamily),w=Bt(()=>G(c).headerFontSize),S=Bt(()=>G(c).cellFontFamily),k=Bt(()=>G(c).cellFontSize),E=Bt(()=>G(c).scrollbarBackgroundColor),T=Bt(()=>G(c).scrollbarPillColor),M=Bt(()=>G(c).scrollbarLabelBackgroundColor),I=Bt(()=>G(c).shadow),$=Bt(()=>G(c).outlineColor),C=Bt(()=>G(c).dimmedRowColor),L=Bt(()=>G(c).rowScrollToColor),F=Bt(()=>G(c).rowHoverColor);zr(()=>{});var N=h5t();let O;var D=jn(N);bR(D,()=>t.children),On(N),pi(B=>{th(N,1,`style-wrapper table-defaults ${G(s)??""}`,"svelte-vahitw"),O=ys(N,"",O,B)},[()=>({"--user-primary-text-color":G(u),"--user-secondary-text-color":G(f),"--user-tertiary-text-color":G(h),"--user-font-family":G(p),"--user-font-size":G(g),"--user-primary-bg":G(y),"--user-secondary-bg":G(v),"--user-hover-bg":G(b),"--user-header-font-family":G(_),"--user-header-font-size":G(w),"--user-cell-font-family":G(S),"--user-cell-font-size":G(k),"--user-scrollbar-bg":G(E),"--user-scrollbar-pill-bg":G(T),"--user-scrollbar-label-bg":G(M),"--user-shadow":G(I),"--user-outline-color":G($),"--user-dimmed-row-color":G(C),"--user-row-scroll-to-color":G(L),"--user-row-hover-color":G(F)})]),sn(e,N),ai()}function g5t(){return ts}function m5t(e,t){const n=new Set(e),r=new Set(t);return{left:e.filter(i=>!r.has(i)),right:t.filter(i=>!n.has(i))}}function y5t(e,t){const n=new Set(t);return e.filter(r=>!n.has(r))}function v5t(e,t){return e.concat(t)}var b5t=Bn("<div></div>"),_5t=Bn("<div></div> <!>",1);const w5t={hash:"svelte-h8fig9",code:".row-background.svelte-h8fig9 {position:absolute;width:var(--width);height:var(--height);box-sizing:border-box;z-index:-1;transform:translate3d(0, var(--y), 0);transition:background-color 100ms linear;}.odd.svelte-h8fig9 {background-color:var(--secondary-bg);}.even.svelte-h8fig9 {background-color:var(--primary-bg);}.dimmer.svelte-h8fig9 {background-color:var(--dimmed-row-color);z-index:10;pointer-events:none;}.flashed.svelte-h8fig9 {background-color:var(--row-scroll-to-color);}.hovered.svelte-h8fig9 {background-color:var(--row-hover-color);}"};function x5t(e,t){si(t,!0),ti(e,w5t);const n=rr.controller,r=rr.model,i=rr.overscrollModifier,o=or.config;let s=Bt(()=>r.rowHeights[t.row]),a=Bt(()=>Math.max(r.colsRightmostPosition,n.viewWidth)),l=Bt(()=>i.y(r.rowPositions[t.row])),c=Bt(()=>r.getRowParity(t.row)),u=Bt(()=>n.flashedRowId===t.row),f=Bt(()=>n.hoveredRowId===t.row),h=Bt(()=>o.highlightedRows?o.highlightedRows?.has(t.row):null);var p=_5t(),g=Ta(p);let y;var v=Ma(g,2);{var b=_=>{var w=b5t();let S;pi(k=>{th(w,1,`row-background ${G(c)??""} dimmer`,"svelte-h8fig9"),S=ys(w,"",S,k)},[()=>({"--width":G(a)+"px","--height":G(s)+"px","--y":G(l)+"px"})]),sn(_,w)};Os(v,_=>{G(h)!==null&&!G(h)&&_(b)})}pi(_=>{th(g,1,`row-background ${G(c)??""} ${(G(u)?"flashed":null)??""} ${(G(f)&&o.highlightHoveredRow?"hovered":null)??""}`,"svelte-h8fig9"),y=ys(g,"",y,_)},[()=>({"--width":G(a)+"px","--height":G(s)+"px","--y":G(l)+"px"})]),sn(e,p),ai()}var S5t=Bn("<!> <!>",1),A5t=Bn('<div class="scroll-container svelte-1q3xqdh"><!></div> <!> <!>',1),E5t=Bn('<div class="table svelte-1q3xqdh"><!> <div class="table-contents svelte-1q3xqdh"><!></div></div>');const k5t={hash:"svelte-1q3xqdh",code:".table.svelte-1q3xqdh {width:100%;max-width:var(--max-width);height:100%;display:flex;flex-direction:column;position:relative;}.table-contents.svelte-1q3xqdh {position:relative;overflow:hidden;flex-grow:1;}.scroll-container.svelte-1q3xqdh {position:absolute;width:0;height:0;will-change:transform;contain:layout size;}"};function T5t(e,t){si(t,!0),ti(e,k5t),or.initialize(),vw.initialize(),hM.initialize(),rr.initialize();const n=rr.controller,r=rr.model,i=rr.overscrollModifier,o=or.config,s=hM.style;zr(()=>{t.scrollTo!=null&&n.scrollToRow(String(t.scrollTo))}),zr(()=>{t.highlightedRows&&t.highlightedRows.length>0?o.highlightedRows=new Set(t.highlightedRows.map(_=>String(_))):o.highlightedRows=null}),zr(()=>{t.onRowClick!=null?o.onRowClick=t.onRowClick:o.onRowClick=null}),zr(()=>{t.coordinator?uM.coordinator=t.coordinator:uM.coordinator=null}),zr(()=>{t.numLines!=null?o.textMaxLines=t.numLines:o.textMaxLines=o.DEFAULT_TEXT_MAX_LINES,t.lineHeight!=null?o.lineHeight=t.lineHeight:o.lineHeight=o.DEFAULT_LINE_HEIGHT}),zr(()=>{t.colorScheme!=null?s.colorScheme=t.colorScheme:s.colorScheme=null}),zr(()=>{t.theme!=null?s.theme=t.theme:s.theme={},t.colorScheme!=null?s.colorScheme=t.colorScheme:s.colorScheme=null}),zr(()=>{t.columnConfigs!=null?o.columnConfigs=t.columnConfigs:o.columnConfigs={},t.onColumnConfigsChange!=null?o.onColumnConfigsChange=t.onColumnConfigsChange:o.onColumnConfigsChange=()=>{}}),zr(()=>{o.showRowNumber=t.showRowNumber??null}),zr(()=>{o.onShowRowNumberChange=t.onShowRowNumberChange??null}),zr(()=>{n.initialize({tableName:t.table,rowKey:t.rowKey,columns:[g5t(),...t.columns],filterBy:t.filter??null})}),zr(()=>{t.customCells!=null?vw.config=t.customCells:vw.config={}}),zr(()=>{t.additionalHeaderContents!=null?fM.config=t.additionalHeaderContents:fM.config={}}),zr(()=>{t.headerHeight!=null?o.headerHeight=t.headerHeight:o.headerHeight=null}),zr(()=>{t.highlightHoveredRow!=null?o.highlightHoveredRow=t.highlightHoveredRow:o.highlightHoveredRow=!1});let a=Jt([]),l=Jt(0),c=Jt(null),u=Jt(lo([])),f=Jt(lo([])),h=Bt(()=>G(u).filter(_=>n.rowStillExists(_))),p=Bt(()=>G(f)),g=0;em(()=>(g=requestAnimationFrame(b),()=>{n.teardown(),r.teardown(),cancelAnimationFrame(g)}));function y(_,w){if(w.length>0){const S=w[w.length-1];return Math.abs(r.data[_][es]-r.data[S][es])}return 0}function v(){const{left:_,right:w}=m5t(G(a),r.renderableRows);_.length===0&&w.length===0||(Nt(a,y5t(G(a),_)),Nt(a,v5t(G(a),w.sort((S,k)=>y(S,G(a))-y(k,G(a))).slice(0,n.isJumping?n.rowsOnScreen:o.rowRenderBatchSize))))}function b(){v(),Nt(u,G(a).filter(S=>n.rowIsVisible(S)),!0),Nt(f,r.renderableCols.filter(S=>n.colIsVisible(S)),!0);const _=n.xScroll,w=i.yScroll(n.yScroll);G(c)&&(G(c).style.transform=`translate3d(${_}px, ${w}px, 0)`),Nt(l,n.updateKey,!0),g=requestAnimationFrame(b)}p5t(e,{children:(_,w)=>{var S=E5t(),k=jn(S);c5t(k,{});var E=Ma(k,2),T=jn(E);{var M=I=>{var $=A5t(),C=Ta($),L=jn(C);n4t(L,()=>G(l),O=>{var D=S5t(),B=Ta(D);Uy(B,16,()=>G(h),z=>z,(z,U)=>{var V=b0(),Y=Ta(V);Uy(Y,16,()=>G(p),Z=>Z,(Z,ct)=>{kMt(Z,{get row(){return U},get col(){return ct}})}),sn(z,V)});var j=Ma(B,2);Uy(j,16,()=>r.renderableRows,z=>z,(z,U)=>{x5t(z,{get row(){return U}})}),sn(O,D)}),On(C),hs(C,O=>Nt(c,O),()=>G(c));var F=Ma(C,2);Z4t(F,{});var N=Ma(F,2);X4t(N,{}),sn(I,$)};Os(T,I=>{n.isReady&&I(M)})}On(E),On(S),hs(S,I=>n.element=I,()=>n?.element),Pv("wheel",S,function(...I){n.handleWheel?.apply(this,I)}),wl(E,"clientHeight",I=>n.viewHeight=I),wl(E,"clientWidth",I=>n.viewWidth=I),sn(_,S)},$$slots:{default:!0}}),ai()}class M5t{component;currentProps;constructor(t,n){this.currentProps={...n},this.component=ZTt({component:T5t,target:t,props:n})}update(t){let n={};for(let r in t)t[r]!==this.currentProps[r]&&(n[r]=t[r],this.currentProps[r]=t[r]);this.component.$set(n)}destroy(){this.component.$destroy()}}var I5t=Et("<div></div>");function R5t(e,t){Re(t,!0);let n=jo(t,["$$slots","$$events","$$legacy"]),r;zg(()=>{let o=new M5t(r,n);Gi(()=>{o.update(n)}),r6(()=>{o.destroy()})});var i=I5t();Me(i,"",{},{width:"100%",height:"100%"}),ds(i,o=>r=o,()=>r),rt(e,i),Ce()}const B1=Symbol("Fixed"),xl=Symbol("Transient"),TH=Symbol("Transform");function C5t(e){return e}var N5t=3,kL=1e-6;function $5t(e){return"translate("+e+",0)"}function O5t(e){return t=>+e(t)}function D5t(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function L5t(){return!this.__axis}function F5t(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,u="y",f=$5t;function h(p){var g=r??(t.ticks?t.ticks.apply(t,n):t.domain()),y=i??(t.tickFormat?t.tickFormat.apply(t,n):C5t),v=Math.max(o,0)+a,b=t.range(),_=+b[0]+l,w=+b[b.length-1]+l,S=(t.bandwidth?D5t:O5t)(t.copy(),l),k=p.selection?p.selection():p,E=k.selectAll(".domain").data([null]),T=k.selectAll(".tick").data(g,t).order(),M=T.exit(),I=T.enter().append("g").attr("class","tick"),$=T.select("line"),C=T.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(I),$=$.merge(I.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),C=C.merge(I.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy","0.71em")),p!==k&&(E=E.transition(p),T=T.transition(p),$=$.transition(p),C=C.transition(p),M=M.transition(p).attr("opacity",kL).attr("transform",function(L){return isFinite(L=S(L))?f(L+l):this.getAttribute("transform")}),I.attr("opacity",kL).attr("transform",function(L){var F=this.parentNode.__axis;return f((F&&isFinite(F=F(L))?F:S(L))+l)})),M.remove(),E.attr("d",s?"M"+_+","+c*s+"V"+l+"H"+w+"V"+c*s:"M"+_+","+l+"H"+w),T.attr("opacity",1).attr("transform",function(L){return f(S(L)+l)}),$.attr(u+"2",c*o),C.attr(u,c*v).text(y),k.filter(L5t).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),k.each(function(){this.__axis=S})}return h.scale=function(p){return arguments.length?(t=p,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(o=s=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(s=+p,h):s},h.tickPadding=function(p){return arguments.length?(a=+p,h):a},h.offset=function(p){return arguments.length?(l=+p,h):l},h}function B5t(e){return F5t(N5t,e)}var P5t={value:()=>{}};function b3(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bw(n)}function bw(e){this._=e}function z5t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bw.prototype=b3.prototype={constructor:bw,on:function(e,t){var n=this._,r=z5t(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=U5t(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=TL(n[i],e.name,t);else if(t==null)for(i in n)n[i]=TL(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bw(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function U5t(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function TL(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=P5t,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var dM="http://www.w3.org/1999/xhtml";const $u={svg:"http://www.w3.org/2000/svg",xhtml:dM,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _3(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$u.hasOwnProperty(t)?{space:$u[t],local:e}:e}function q5t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===dM&&t.documentElement.namespaceURI===dM?t.createElement(e):t.createElementNS(n,e)}}function j5t(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function w3(e){var t=_3(e);return(t.local?j5t:q5t)(t)}function V5t(){}function AR(e){return e==null?V5t:function(){return this.querySelector(e)}}function W5t(e){typeof e!="function"&&(e=AR(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ys(r,this._parents)}function Y5t(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function H5t(){return[]}function MH(e){return e==null?H5t:function(){return this.querySelectorAll(e)}}function G5t(e){return function(){return Y5t(e.apply(this,arguments))}}function X5t(e){typeof e=="function"?e=G5t(e):e=MH(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new Ys(r,i)}function IH(e){return function(){return this.matches(e)}}function RH(e){return function(t){return t.matches(e)}}var K5t=Array.prototype.find;function J5t(e){return function(){return K5t.call(this.children,e)}}function Z5t(){return this.firstElementChild}function Q5t(e){return this.select(e==null?Z5t:J5t(typeof e=="function"?e:RH(e)))}var t6t=Array.prototype.filter;function e6t(){return Array.from(this.children)}function n6t(e){return function(){return t6t.call(this.children,e)}}function r6t(e){return this.selectAll(e==null?e6t:n6t(typeof e=="function"?e:RH(e)))}function i6t(e){typeof e!="function"&&(e=IH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Ys(r,this._parents)}function CH(e){return new Array(e.length)}function o6t(){return new Ys(this._enter||this._groups.map(CH),this._parents)}function Qx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qx.prototype={constructor:Qx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function s6t(e){return function(){return e}}function a6t(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Qx(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function l6t(e,t,n,r,i,o,s){var a,l,c=new Map,u=t.length,f=o.length,h=new Array(u),p;for(a=0;a<u;++a)(l=t[a])&&(h[a]=p=s.call(l,l.__data__,a,t)+"",c.has(p)?i[a]=l:c.set(p,l));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(l=c.get(p))?(r[a]=l,l.__data__=o[a],c.delete(p)):n[a]=new Qx(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(i[a]=l)}function c6t(e){return e.__data__}function u6t(e,t){if(!arguments.length)return Array.from(this,c6t);var n=t?l6t:a6t,r=this._parents,i=this._groups;typeof e!="function"&&(e=s6t(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],f=i[c],h=f.length,p=f6t(e.call(u,u&&u.__data__,c,r)),g=p.length,y=a[c]=new Array(g),v=s[c]=new Array(g),b=l[c]=new Array(h);n(u,f,y,v,b,p,t);for(var _=0,w=0,S,k;_<g;++_)if(S=y[_]){for(_>=w&&(w=_+1);!(k=v[w])&&++w<g;);S._next=k||null}}return s=new Ys(s,r),s._enter=a,s._exit=l,s}function f6t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h6t(){return new Ys(this._exit||this._groups.map(CH),this._parents)}function d6t(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function p6t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],f=c.length,h=a[l]=new Array(f),p,g=0;g<f;++g)(p=c[g]||u[g])&&(h[g]=p);for(;l<i;++l)a[l]=n[l];return new Ys(a,this._parents)}function g6t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function m6t(e){e||(e=y6t);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new Ys(i,this._parents).order()}function y6t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v6t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function b6t(){return Array.from(this)}function _6t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function w6t(){let e=0;for(const t of this)++e;return e}function x6t(){return!this.node()}function S6t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function A6t(e){return function(){this.removeAttribute(e)}}function E6t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function k6t(e,t){return function(){this.setAttribute(e,t)}}function T6t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function M6t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function I6t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function R6t(e,t){var n=_3(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?E6t:A6t:typeof t=="function"?n.local?I6t:M6t:n.local?T6t:k6t)(n,t))}function NH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function C6t(e){return function(){this.style.removeProperty(e)}}function N6t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $6t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O6t(e,t,n){return arguments.length>1?this.each((t==null?C6t:typeof t=="function"?$6t:N6t)(e,t,n??"")):_g(this.node(),e)}function _g(e,t){return e.style.getPropertyValue(t)||NH(e).getComputedStyle(e,null).getPropertyValue(t)}function D6t(e){return function(){delete this[e]}}function L6t(e,t){return function(){this[e]=t}}function F6t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function B6t(e,t){return arguments.length>1?this.each((t==null?D6t:typeof t=="function"?F6t:L6t)(e,t)):this.node()[e]}function $H(e){return e.trim().split(/^|\s+/)}function ER(e){return e.classList||new OH(e)}function OH(e){this._node=e,this._names=$H(e.getAttribute("class")||"")}OH.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function DH(e,t){for(var n=ER(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function LH(e,t){for(var n=ER(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function P6t(e){return function(){DH(this,e)}}function z6t(e){return function(){LH(this,e)}}function U6t(e,t){return function(){(t.apply(this,arguments)?DH:LH)(this,e)}}function q6t(e,t){var n=$H(e+"");if(arguments.length<2){for(var r=ER(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?U6t:t?P6t:z6t)(n,t))}function j6t(){this.textContent=""}function V6t(e){return function(){this.textContent=e}}function W6t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Y6t(e){return arguments.length?this.each(e==null?j6t:(typeof e=="function"?W6t:V6t)(e)):this.node().textContent}function H6t(){this.innerHTML=""}function G6t(e){return function(){this.innerHTML=e}}function X6t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function K6t(e){return arguments.length?this.each(e==null?H6t:(typeof e=="function"?X6t:G6t)(e)):this.node().innerHTML}function J6t(){this.nextSibling&&this.parentNode.appendChild(this)}function Z6t(){return this.each(J6t)}function Q6t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tIt(){return this.each(Q6t)}function eIt(e){var t=typeof e=="function"?e:w3(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nIt(){return null}function rIt(e,t){var n=typeof e=="function"?e:w3(e),r=t==null?nIt:typeof t=="function"?t:AR(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function iIt(){var e=this.parentNode;e&&e.removeChild(this)}function oIt(){return this.each(iIt)}function sIt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function aIt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lIt(e){return this.select(e?aIt:sIt)}function cIt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uIt(e){return function(t){e.call(this,t,this.__data__)}}function fIt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function hIt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function dIt(e,t,n){return function(){var r=this.__on,i,o=uIt(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function pIt(e,t,n){var r=fIt(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?dIt:hIt,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function FH(e,t,n){var r=NH(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gIt(e,t){return function(){return FH(this,e,t)}}function mIt(e,t){return function(){return FH(this,e,t.apply(this,arguments))}}function yIt(e,t){return this.each((typeof t=="function"?mIt:gIt)(e,t))}function*vIt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var BH=[null];function Ys(e,t){this._groups=e,this._parents=t}function P1(){return new Ys([[document.documentElement]],BH)}function bIt(){return this}Ys.prototype=P1.prototype={constructor:Ys,select:W5t,selectAll:X5t,selectChild:Q5t,selectChildren:r6t,filter:i6t,data:u6t,enter:o6t,exit:h6t,join:d6t,merge:p6t,selection:bIt,order:g6t,sort:m6t,call:v6t,nodes:b6t,node:_6t,size:w6t,empty:x6t,each:S6t,attr:R6t,style:O6t,property:B6t,classed:q6t,text:Y6t,html:K6t,raise:Z6t,lower:tIt,append:eIt,insert:rIt,remove:oIt,clone:lIt,datum:cIt,on:pIt,dispatch:yIt,[Symbol.iterator]:vIt};function Er(e){return typeof e=="string"?new Ys([[document.querySelector(e)]],[document.documentElement]):new Ys([[e]],BH)}function _It(e){let t;for(;t=e.sourceEvent;)e=t;return e}function el(e,t){if(e=_It(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const pM={capture:!0,passive:!1};function gM(e){e.preventDefault(),e.stopImmediatePropagation()}function PH(e){var t=e.document.documentElement,n=Er(e).on("dragstart.drag",gM,pM);"onselectstart"in t?n.on("selectstart.drag",gM,pM):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function zH(e,t){var n=e.document.documentElement,r=Er(e).on("dragstart.drag",null);t&&(r.on("click.drag",gM,pM),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var wg=0,xy=0,Xm=0,UH=1e3,t2,Sy,e2=0,Xd=0,x3=0,zv=typeof performance=="object"&&performance.now?performance:Date,qH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kR(){return Xd||(qH(wIt),Xd=zv.now()+x3)}function wIt(){Xd=0}function n2(){this._call=this._time=this._next=null}n2.prototype=jH.prototype={constructor:n2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kR():+n)+(t==null?0:+t),!this._next&&Sy!==this&&(Sy?Sy._next=this:t2=this,Sy=this),this._call=e,this._time=n,mM()},stop:function(){this._call&&(this._call=null,this._time=1/0,mM())}};function jH(e,t,n){var r=new n2;return r.restart(e,t,n),r}function xIt(){kR(),++wg;for(var e=t2,t;e;)(t=Xd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wg}function ML(){Xd=(e2=zv.now())+x3,wg=xy=0;try{xIt()}finally{wg=0,AIt(),Xd=0}}function SIt(){var e=zv.now(),t=e-e2;t>UH&&(x3-=t,e2=e)}function AIt(){for(var e,t=t2,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:t2=n);Sy=e,mM(r)}function mM(e){if(!wg){xy&&(xy=clearTimeout(xy));var t=e-Xd;t>24?(e<1/0&&(xy=setTimeout(ML,e-zv.now()-x3)),Xm&&(Xm=clearInterval(Xm))):(Xm||(e2=zv.now(),Xm=setInterval(SIt,UH)),wg=1,qH(ML))}}function IL(e,t,n){var r=new n2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var EIt=b3("start","end","cancel","interrupt"),kIt=[],VH=0,RL=1,yM=2,_w=3,CL=4,vM=5,ww=6;function S3(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;TIt(e,n,{name:t,index:r,group:i,on:EIt,tween:kIt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:VH})}function TR(e,t){var n=Il(e,t);if(n.state>VH)throw new Error("too late; already scheduled");return n}function Cc(e,t){var n=Il(e,t);if(n.state>_w)throw new Error("too late; already running");return n}function Il(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function TIt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=jH(o,0,n.time);function o(c){n.state=RL,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,f,h,p;if(n.state!==RL)return l();for(u in r)if(p=r[u],p.name===n.name){if(p.state===_w)return IL(s);p.state===CL?(p.state=ww,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=ww,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(IL(function(){n.state===_w&&(n.state=CL,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=yM,n.on.call("start",e,e.__data__,n.index,n.group),n.state===yM){for(n.state=_w,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=vM,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===vM&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ww,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function G0(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>yM&&r.state<vM,r.state=ww,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function MIt(e){return this.each(function(){G0(this,e)})}function IIt(e,t){var n,r;return function(){var i=Cc(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function RIt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Cc(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function CIt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Il(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?IIt:RIt)(n,e,t))}function MR(e,t,n){var r=e._id;return e.each(function(){var i=Cc(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Il(i,r).value[t]}}function WH(e,t){var n;return(typeof t=="number"?eo:t instanceof Gf?zd:(n=Gf(t))?(t=n,zd):$j)(e,t)}function NIt(e){return function(){this.removeAttribute(e)}}function $It(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OIt(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function DIt(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function LIt(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function FIt(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function BIt(e,t){var n=_3(e),r=n==="transform"?c2t:WH;return this.attrTween(e,typeof t=="function"?(n.local?FIt:LIt)(n,r,MR(this,"attr."+e,t)):t==null?(n.local?$It:NIt)(n):(n.local?DIt:OIt)(n,r,t))}function PIt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zIt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function UIt(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&zIt(e,o)),n}return i._value=t,i}function qIt(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&PIt(e,o)),n}return i._value=t,i}function jIt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_3(e);return this.tween(n,(r.local?UIt:qIt)(r,t))}function VIt(e,t){return function(){TR(this,e).delay=+t.apply(this,arguments)}}function WIt(e,t){return t=+t,function(){TR(this,e).delay=t}}function YIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VIt:WIt)(t,e)):Il(this.node(),t).delay}function HIt(e,t){return function(){Cc(this,e).duration=+t.apply(this,arguments)}}function GIt(e,t){return t=+t,function(){Cc(this,e).duration=t}}function XIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?HIt:GIt)(t,e)):Il(this.node(),t).duration}function KIt(e,t){if(typeof t!="function")throw new Error;return function(){Cc(this,e).ease=t}}function JIt(e){var t=this._id;return arguments.length?this.each(KIt(t,e)):Il(this.node(),t).ease}function ZIt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cc(this,e).ease=n}}function QIt(e){if(typeof e!="function")throw new Error;return this.each(ZIt(this._id,e))}function tRt(e){typeof e!="function"&&(e=IH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Ou(r,this._parents,this._name,this._id)}function eRt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],u=l.length,f=s[a]=new Array(u),h,p=0;p<u;++p)(h=l[p]||c[p])&&(f[p]=h);for(;a<r;++a)s[a]=t[a];return new Ou(s,this._parents,this._name,this._id)}function nRt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function rRt(e,t,n){var r,i,o=nRt(t)?TR:Cc;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function iRt(e,t){var n=this._id;return arguments.length<2?Il(this.node(),n).on.on(e):this.each(rRt(n,e,t))}function oRt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function sRt(){return this.on("end.remove",oRt(this._id))}function aRt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AR(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,S3(c[h],t,n,h,c,Il(u,n)));return new Ou(o,this._parents,t,n)}function lRt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=MH(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),p,g=Il(u,n),y=0,v=h.length;y<v;++y)(p=h[y])&&S3(p,t,n,y,h,g);o.push(h),s.push(u)}return new Ou(o,s,t,n)}var cRt=P1.prototype.constructor;function uRt(){return new cRt(this._groups,this._parents)}function fRt(e,t){var n,r,i;return function(){var o=_g(this,e),s=(this.style.removeProperty(e),_g(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function YH(e){return function(){this.style.removeProperty(e)}}function hRt(e,t,n){var r,i=n+"",o;return function(){var s=_g(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function dRt(e,t,n){var r,i,o;return function(){var s=_g(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),_g(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function pRt(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Cc(this,e),c=l.on,u=l.value[o]==null?a||(a=YH(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function gRt(e,t,n){var r=(e+="")=="transform"?l2t:WH;return t==null?this.styleTween(e,fRt(e,r)).on("end.style."+e,YH(e)):typeof t=="function"?this.styleTween(e,dRt(e,r,MR(this,"style."+e,t))).each(pRt(this._id,e)):this.styleTween(e,hRt(e,r,t),n).on("end.style."+e,null)}function mRt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yRt(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&mRt(e,s,n)),r}return o._value=t,o}function vRt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yRt(e,t,n??""))}function bRt(e){return function(){this.textContent=e}}function _Rt(e){return function(){var t=e(this);this.textContent=t??""}}function wRt(e){return this.tween("text",typeof e=="function"?_Rt(MR(this,"text",e)):bRt(e==null?"":e+""))}function xRt(e){return function(t){this.textContent=e.call(this,t)}}function SRt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&xRt(i)),t}return r._value=e,r}function ARt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,SRt(e))}function ERt(){for(var e=this._name,t=this._id,n=HH(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Il(l,t);S3(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ou(r,this._parents,e,n)}function kRt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=Cc(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var TRt=0;function Ou(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function HH(){return++TRt}var Yc=P1.prototype;Ou.prototype={constructor:Ou,select:aRt,selectAll:lRt,selectChild:Yc.selectChild,selectChildren:Yc.selectChildren,filter:tRt,merge:eRt,selection:uRt,transition:ERt,call:Yc.call,nodes:Yc.nodes,node:Yc.node,size:Yc.size,empty:Yc.empty,each:Yc.each,on:iRt,attr:BIt,attrTween:jIt,style:gRt,styleTween:vRt,text:wRt,textTween:ARt,remove:sRt,tween:CIt,delay:YIt,duration:XIt,ease:JIt,easeVarying:QIt,end:kRt,[Symbol.iterator]:Yc[Symbol.iterator]};function MRt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var IRt={time:null,delay:0,duration:250,ease:MRt};function RRt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CRt(e){var t,n;e instanceof Ou?(t=e._id,e=e._name):(t=HH(),(n=IRt).time=kR(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&S3(l,e,t,c,s,n||RRt(l,t));return new Ou(r,this._parents,e,t)}P1.prototype.interrupt=MIt;P1.prototype.transition=CRt;const Wk=e=>()=>e;function NRt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function $Rt(e){e.stopImmediatePropagation()}function Yk(e){e.preventDefault(),e.stopImmediatePropagation()}var NL={name:"drag"},Hk={name:"space"},Gp={name:"handle"},Xp={name:"center"};const{abs:$L,max:Zi,min:Qi}=Math;function OL(e){return[+e[0],+e[1]]}function bM(e){return[OL(e[0]),OL(e[1])]}var xw={name:"x",handles:["w","e"].map(Uv),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Sw={name:"y",handles:["n","s"].map(Uv),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ORt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Uv),input:function(e){return e==null?null:bM(e)},output:function(e){return e}},Hc={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},DL={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},LL={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},DRt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},LRt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Uv(e){return{type:e}}function FRt(e){return!e.ctrlKey&&!e.button}function BRt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function PRt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gk(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function zRt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function URt(){return IR(xw)}function qRt(){return IR(Sw)}function jRt(){return IR(ORt)}function IR(e){var t=BRt,n=FRt,r=PRt,i=!0,o=b3("start","brush","end"),s=6,a;function l(v){var b=v.property("__brush",y).selectAll(".overlay").data([Uv("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hc.overlay).merge(b).each(function(){var w=Gk(this).extent;Er(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),v.selectAll(".selection").data([Uv("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hc.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=v.selectAll(".handle").data(e.handles,function(w){return w.type});_.exit().remove(),_.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Hc[w.type]}),v.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(v,b,_){v.tween?v.on("start.brush",function(w){u(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){u(this,arguments).end(w)}).tween("brush",function(){var w=this,S=w.__brush,k=u(w,arguments),E=S.selection,T=e.input(typeof b=="function"?b.apply(this,arguments):b,S.extent),M=Xg(E,T);function I($){S.selection=$===1&&T===null?null:M($),c.call(w),k.brush()}return E!==null&&T!==null?I:I(1)}):v.each(function(){var w=this,S=arguments,k=w.__brush,E=e.input(typeof b=="function"?b.apply(w,S):b,k.extent),T=u(w,S).beforestart();G0(w),k.selection=E===null?null:E,c.call(w),T.start(_).brush(_).end(_)})},l.clear=function(v,b){l.move(v,null,b)};function c(){var v=Er(this),b=Gk(this).selection;b?(v.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?b[1][0]-s/2:b[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?b[1][1]-s/2:b[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?b[1][0]-b[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?b[1][1]-b[0][1]+s:s})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(v,b,_){var w=v.__brush.emitter;return w&&(!_||!w.clean)?w:new f(v,b,_)}function f(v,b,_){this.that=v,this.args=b,this.state=v.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,b){return this.starting?(this.starting=!1,this.emit("start",v,b)):this.emit("brush",v),this},brush:function(v,b){return this.emit("brush",v,b),this},end:function(v,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,b)),this},emit:function(v,b,_){var w=Er(this.that).datum();o.call(v,this.that,new NRt(v,{sourceEvent:b,target:l,selection:e.output(this.state.selection),mode:_,dispatch:o}),w)}};function h(v){if(a&&!v.touches||!n.apply(this,arguments))return;var b=this,_=v.target.__data__.type,w=(i&&v.metaKey?_="overlay":_)==="selection"?NL:i&&v.altKey?Xp:Gp,S=e===Sw?null:DRt[_],k=e===xw?null:LRt[_],E=Gk(b),T=E.extent,M=E.selection,I=T[0][0],$,C,L=T[0][1],F,N,O=T[1][0],D,B,j=T[1][1],z,U,V=0,Y=0,Z,ct=S&&k&&i&&v.shiftKey,gt,pt,lt=Array.from(v.touches||[v],xt=>{const qt=xt.identifier;return xt=el(xt,b),xt.point0=xt.slice(),xt.identifier=qt,xt});G0(b);var yt=u(b,arguments,!0).beforestart();if(_==="overlay"){M&&(Z=!0);const xt=[lt[0],lt[1]||lt[0]];E.selection=M=[[$=e===Sw?I:Qi(xt[0][0],xt[1][0]),F=e===xw?L:Qi(xt[0][1],xt[1][1])],[D=e===Sw?O:Zi(xt[0][0],xt[1][0]),z=e===xw?j:Zi(xt[0][1],xt[1][1])]],lt.length>1&&It(v)}else $=M[0][0],F=M[0][1],D=M[1][0],z=M[1][1];C=$,N=F,B=D,U=z;var at=Er(b).attr("pointer-events","none"),vt=at.selectAll(".overlay").attr("cursor",Hc[_]);if(v.touches)yt.moved=Q,yt.ended=_t;else{var st=Er(v.view).on("mousemove.brush",Q,!0).on("mouseup.brush",_t,!0);i&&st.on("keydown.brush",Dt,!0).on("keyup.brush",Ut,!0),PH(v.view)}c.call(b),yt.start(v,w.name);function Q(xt){for(const qt of xt.changedTouches||[xt])for(const ue of lt)ue.identifier===qt.identifier&&(ue.cur=el(qt,b));if(ct&&!gt&&!pt&&lt.length===1){const qt=lt[0];$L(qt.cur[0]-qt[0])>$L(qt.cur[1]-qt[1])?pt=!0:gt=!0}for(const qt of lt)qt.cur&&(qt[0]=qt.cur[0],qt[1]=qt.cur[1]);Z=!0,Yk(xt),It(xt)}function It(xt){const qt=lt[0],ue=qt.point0;var Wt;switch(V=qt[0]-ue[0],Y=qt[1]-ue[1],w){case Hk:case NL:{S&&(V=Zi(I-$,Qi(O-D,V)),C=$+V,B=D+V),k&&(Y=Zi(L-F,Qi(j-z,Y)),N=F+Y,U=z+Y);break}case Gp:{lt[1]?(S&&(C=Zi(I,Qi(O,lt[0][0])),B=Zi(I,Qi(O,lt[1][0])),S=1),k&&(N=Zi(L,Qi(j,lt[0][1])),U=Zi(L,Qi(j,lt[1][1])),k=1)):(S<0?(V=Zi(I-$,Qi(O-$,V)),C=$+V,B=D):S>0&&(V=Zi(I-D,Qi(O-D,V)),C=$,B=D+V),k<0?(Y=Zi(L-F,Qi(j-F,Y)),N=F+Y,U=z):k>0&&(Y=Zi(L-z,Qi(j-z,Y)),N=F,U=z+Y));break}case Xp:{S&&(C=Zi(I,Qi(O,$-V*S)),B=Zi(I,Qi(O,D+V*S))),k&&(N=Zi(L,Qi(j,F-Y*k)),U=Zi(L,Qi(j,z+Y*k)));break}}B<C&&(S*=-1,Wt=$,$=D,D=Wt,Wt=C,C=B,B=Wt,_ in DL&&vt.attr("cursor",Hc[_=DL[_]])),U<N&&(k*=-1,Wt=F,F=z,z=Wt,Wt=N,N=U,U=Wt,_ in LL&&vt.attr("cursor",Hc[_=LL[_]])),E.selection&&(M=E.selection),gt&&(C=M[0][0],B=M[1][0]),pt&&(N=M[0][1],U=M[1][1]),(M[0][0]!==C||M[0][1]!==N||M[1][0]!==B||M[1][1]!==U)&&(E.selection=[[C,N],[B,U]],c.call(b),yt.brush(xt,w.name))}function _t(xt){if($Rt(xt),xt.touches){if(xt.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else zH(xt.view,Z),st.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);at.attr("pointer-events","all"),vt.attr("cursor",Hc.overlay),E.selection&&(M=E.selection),zRt(M)&&(E.selection=null,c.call(b)),yt.end(xt,w.name)}function Dt(xt){switch(xt.keyCode){case 16:{ct=S&&k;break}case 18:{w===Gp&&(S&&(D=B-V*S,$=C+V*S),k&&(z=U-Y*k,F=N+Y*k),w=Xp,It(xt));break}case 32:{(w===Gp||w===Xp)&&(S<0?D=B-V:S>0&&($=C-V),k<0?z=U-Y:k>0&&(F=N-Y),w=Hk,vt.attr("cursor",Hc.selection),It(xt));break}default:return}Yk(xt)}function Ut(xt){switch(xt.keyCode){case 16:{ct&&(gt=pt=ct=!1,It(xt));break}case 18:{w===Xp&&(S<0?D=B:S>0&&($=C),k<0?z=U:k>0&&(F=N),w=Gp,It(xt));break}case 32:{w===Hk&&(xt.altKey?(S&&(D=B-V*S,$=C+V*S),k&&(z=U-Y*k,F=N+Y*k),w=Xp):(S<0?D=B:S>0&&($=C),k<0?z=U:k>0&&(F=N),w=Gp),vt.attr("cursor",Hc[_]),It(xt));break}default:return}Yk(xt)}}function p(v){u(this,arguments).moved(v)}function g(v){u(this,arguments).ended(v)}function y(){var v=this.__brush||{selection:null};return v.extent=bM(t.apply(this,arguments)),v.dim=e,v}return l.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Wk(bM(v)),l):t},l.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Wk(!!v),l):n},l.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Wk(!!v),l):r},l.handleSize=function(v){return arguments.length?(s=+v,l):s},l.keyModifiers=function(v){return arguments.length?(i=!!v,l):i},l.on=function(){var v=o.on.apply(o,arguments);return v===o?l:v},l}const _M=Math.PI,wM=2*_M,Yh=1e-6,VRt=wM-Yh;function GH(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function WRt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return GH;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let XH=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?GH:WRt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,c=i-n,u=s-t,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Yh)if(!(Math.abs(f*l-c*u)>Yh)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-s,g=i-a,y=l*l+c*c,v=p*p+g*g,b=Math.sqrt(y),_=Math.sqrt(h),w=o*Math.tan((_M-Math.acos((y+h-v)/(2*b*_)))/2),S=w/_,k=w/b;Math.abs(S-1)>Yh&&this._append`L${t+S*u},${n+S*f}`,this._append`A${o},${o},0,0,${+(f*p>u*g)},${this._x1=t+k*l},${this._y1=n+k*c}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,u=n+l,f=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Yh||Math.abs(this._y1-u)>Yh)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%wM+wM),h>VRt?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>Yh&&this._append`A${r},${r},0,${+(h>=_M)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function mu(e=3){return new XH(+e)}var YRt=Array.prototype,KH=YRt.slice;function HRt(e,t){return e-t}function GRt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const bf=e=>()=>e;function XRt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=KRt(e,t[n]))return i;return 0}function KRt(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],u=l[1],f=e[a],h=f[0],p=f[1];if(JRt(l,f,t))return 0;u>r!=p>r&&n<(h-c)*(r-u)/(p-u)+c&&(i=-i)}return i}function JRt(e,t,n){var r;return ZRt(e,t,n)&&QRt(e[r=+(e[0]===t[0])],n[r],t[r])}function ZRt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function QRt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function tCt(){}var Gc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function r2(){var e=1,t=1,n=uI,r=l;function i(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(HRt);else{const f=di(c,eCt);for(u=Yf(...pj(f[0],f[1],u),u);u[u.length-1]>=f[1];)u.pop();for(;u[1]<f[0];)u.shift()}return u.map(f=>o(c,f))}function o(c,u){const f=u==null?NaN:+u;if(isNaN(f))throw new Error(`invalid value: ${u}`);var h=[],p=[];return s(c,f,function(g){r(g,c,f),GRt(g)>0?h.push([g]):p.push(g)}),p.forEach(function(g){for(var y=0,v=h.length,b;y<v;++y)if(XRt((b=h[y])[0],g)!==-1){b.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:h}}function s(c,u,f){var h=new Array,p=new Array,g,y,v,b,_,w;for(g=y=-1,b=Uh(c[0],u),Gc[b<<1].forEach(S);++g<e-1;)v=b,b=Uh(c[g+1],u),Gc[v|b<<1].forEach(S);for(Gc[b<<0].forEach(S);++y<t-1;){for(g=-1,b=Uh(c[y*e+e],u),_=Uh(c[y*e],u),Gc[b<<1|_<<2].forEach(S);++g<e-1;)v=b,b=Uh(c[y*e+e+g+1],u),w=_,_=Uh(c[y*e+g+1],u),Gc[v|b<<1|_<<2|w<<3].forEach(S);Gc[b|_<<3].forEach(S)}for(g=-1,_=c[y*e]>=u,Gc[_<<2].forEach(S);++g<e-1;)w=_,_=Uh(c[y*e+g+1],u),Gc[_<<2|w<<3].forEach(S);Gc[_<<3].forEach(S);function S(k){var E=[k[0][0]+g,k[0][1]+y],T=[k[1][0]+g,k[1][1]+y],M=a(E),I=a(T),$,C;($=p[M])?(C=h[I])?(delete p[$.end],delete h[C.start],$===C?($.ring.push(T),f($.ring)):h[$.start]=p[C.end]={start:$.start,end:C.end,ring:$.ring.concat(C.ring)}):(delete p[$.end],$.ring.push(T),p[$.end=I]=$):($=h[I])?(C=p[M])?(delete h[$.start],delete p[C.end],$===C?($.ring.push(T),f($.ring)):h[C.start]=p[$.end]={start:C.start,end:$.end,ring:C.ring.concat($.ring)}):(delete h[$.start],$.ring.unshift(E),h[$.start=M]=$):h[M]=p[I]={start:M,end:I,ring:[E,T]}}}function a(c){return c[0]*2+c[1]*(e+1)*4}function l(c,u,f){c.forEach(function(h){var p=h[0],g=h[1],y=p|0,v=g|0,b=Xk(u[v*e+y]);p>0&&p<e&&y===p&&(h[0]=FL(p,Xk(u[v*e+y-1]),b,f)),g>0&&g<t&&v===g&&(h[1]=FL(g,Xk(u[(v-1)*e+y]),b,f))})}return i.contour=o,i.size=function(c){if(!arguments.length)return[e,t];var u=Math.floor(c[0]),f=Math.floor(c[1]);if(!(u>=0&&f>=0))throw new Error("invalid size");return e=u,t=f,i},i.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?bf(KH.call(c)):bf(c),i):n},i.smooth=function(c){return arguments.length?(r=c?l:tCt,i):r===l},i}function eCt(e){return isFinite(e)?e:NaN}function Uh(e,t){return e==null?!1:+e>=t}function Xk(e){return e==null||isNaN(e=+e)?-1/0:e}function FL(e,t,n,r){const i=r-t,o=n-t,s=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(s)?e:e+s-.5}function nCt(e){return e[0]}function rCt(e){return e[1]}function iCt(){return 1}function oCt(){var e=nCt,t=rCt,n=iCt,r=960,i=500,o=20,s=2,a=o*3,l=r+a*2>>s,c=i+a*2>>s,u=bf(20);function f(_){var w=new Float32Array(l*c),S=Math.pow(2,-s),k=-1;for(const F of _){var E=(e(F,++k,_)+a)*S,T=(t(F,k,_)+a)*S,M=+n(F,k,_);if(M&&E>=0&&E<l&&T>=0&&T<c){var I=Math.floor(E),$=Math.floor(T),C=E-I-.5,L=T-$-.5;w[I+$*l]+=(1-C)*(1-L)*M,w[I+1+$*l]+=C*(1-L)*M,w[I+1+($+1)*l]+=C*L*M,w[I+($+1)*l]+=(1-C)*L*M}}return lj({data:w,width:l,height:c},o*S),w}function h(_){var w=f(_),S=u(w),k=Math.pow(2,2*s);return Array.isArray(S)||(S=Yf(Number.MIN_VALUE,Wr(w)/k,S)),r2().size([l,c]).thresholds(S.map(E=>E*k))(w).map((E,T)=>(E.value=+S[T],p(E)))}h.contours=function(_){var w=f(_),S=r2().size([l,c]),k=Math.pow(2,2*s),E=T=>{T=+T;var M=p(S.contour(w,T*k));return M.value=T,M};return Object.defineProperty(E,"max",{get:()=>Wr(w)/k}),E};function p(_){return _.coordinates.forEach(g),_}function g(_){_.forEach(y)}function y(_){_.forEach(v)}function v(_){_[0]=_[0]*Math.pow(2,s)-a,_[1]=_[1]*Math.pow(2,s)-a}function b(){return a=o*3,l=r+a*2>>s,c=i+a*2>>s,h}return h.x=function(_){return arguments.length?(e=typeof _=="function"?_:bf(+_),h):e},h.y=function(_){return arguments.length?(t=typeof _=="function"?_:bf(+_),h):t},h.weight=function(_){return arguments.length?(n=typeof _=="function"?_:bf(+_),h):n},h.size=function(_){if(!arguments.length)return[r,i];var w=+_[0],S=+_[1];if(!(w>=0&&S>=0))throw new Error("invalid size");return r=w,i=S,b()},h.cellSize=function(_){if(!arguments.length)return 1<<s;if(!((_=+_)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(_)/Math.LN2),b()},h.thresholds=function(_){return arguments.length?(u=typeof _=="function"?_:Array.isArray(_)?bf(KH.call(_)):bf(_),h):u},h.bandwidth=function(_){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((_=+_)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*_*_+1)-1)/2,b()},h}const Au=11102230246251565e-32,to=134217729,sCt=(3+8*Au)*Au;function Kk(e,t,n,r,i){let o,s,a,l,c=t[0],u=r[0],f=0,h=0;u>c==u>-c?(o=c,c=t[++f]):(o=u,u=r[++h]);let p=0;if(f<e&&h<n)for(u>c==u>-c?(s=c+o,a=o-(s-c),c=t[++f]):(s=u+o,a=o-(s-u),u=r[++h]),o=s,a!==0&&(i[p++]=a);f<e&&h<n;)u>c==u>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++f]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=r[++h]),o=s,a!==0&&(i[p++]=a);for(;f<e;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++f],o=s,a!==0&&(i[p++]=a);for(;h<n;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=r[++h],o=s,a!==0&&(i[p++]=a);return(o!==0||p===0)&&(i[p++]=o),p}function aCt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function z1(e){return new Float64Array(e)}const lCt=(3+16*Au)*Au,cCt=(2+12*Au)*Au,uCt=(9+64*Au)*Au*Au,Kp=z1(4),BL=z1(8),PL=z1(12),zL=z1(16),xo=z1(4);function fCt(e,t,n,r,i,o,s){let a,l,c,u,f,h,p,g,y,v,b,_,w,S,k,E,T,M;const I=e-i,$=n-i,C=t-o,L=r-o;S=I*L,h=to*I,p=h-(h-I),g=I-p,h=to*L,y=h-(h-L),v=L-y,k=g*v-(S-p*y-g*y-p*v),E=C*$,h=to*C,p=h-(h-C),g=C-p,h=to*$,y=h-(h-$),v=$-y,T=g*v-(E-p*y-g*y-p*v),b=k-T,f=k-b,Kp[0]=k-(b+f)+(f-T),_=S+b,f=_-S,w=S-(_-f)+(b-f),b=w-E,f=w-b,Kp[1]=w-(b+f)+(f-E),M=_+b,f=M-_,Kp[2]=_-(M-f)+(b-f),Kp[3]=M;let F=aCt(4,Kp),N=cCt*s;if(F>=N||-F>=N||(f=e-I,a=e-(I+f)+(f-i),f=n-$,c=n-($+f)+(f-i),f=t-C,l=t-(C+f)+(f-o),f=r-L,u=r-(L+f)+(f-o),a===0&&l===0&&c===0&&u===0)||(N=uCt*s+sCt*Math.abs(F),F+=I*u+L*a-(C*c+$*l),F>=N||-F>=N))return F;S=a*L,h=to*a,p=h-(h-a),g=a-p,h=to*L,y=h-(h-L),v=L-y,k=g*v-(S-p*y-g*y-p*v),E=l*$,h=to*l,p=h-(h-l),g=l-p,h=to*$,y=h-(h-$),v=$-y,T=g*v-(E-p*y-g*y-p*v),b=k-T,f=k-b,xo[0]=k-(b+f)+(f-T),_=S+b,f=_-S,w=S-(_-f)+(b-f),b=w-E,f=w-b,xo[1]=w-(b+f)+(f-E),M=_+b,f=M-_,xo[2]=_-(M-f)+(b-f),xo[3]=M;const O=Kk(4,Kp,4,xo,BL);S=I*u,h=to*I,p=h-(h-I),g=I-p,h=to*u,y=h-(h-u),v=u-y,k=g*v-(S-p*y-g*y-p*v),E=C*c,h=to*C,p=h-(h-C),g=C-p,h=to*c,y=h-(h-c),v=c-y,T=g*v-(E-p*y-g*y-p*v),b=k-T,f=k-b,xo[0]=k-(b+f)+(f-T),_=S+b,f=_-S,w=S-(_-f)+(b-f),b=w-E,f=w-b,xo[1]=w-(b+f)+(f-E),M=_+b,f=M-_,xo[2]=_-(M-f)+(b-f),xo[3]=M;const D=Kk(O,BL,4,xo,PL);S=a*u,h=to*a,p=h-(h-a),g=a-p,h=to*u,y=h-(h-u),v=u-y,k=g*v-(S-p*y-g*y-p*v),E=l*c,h=to*l,p=h-(h-l),g=l-p,h=to*c,y=h-(h-c),v=c-y,T=g*v-(E-p*y-g*y-p*v),b=k-T,f=k-b,xo[0]=k-(b+f)+(f-T),_=S+b,f=_-S,w=S-(_-f)+(b-f),b=w-E,f=w-b,xo[1]=w-(b+f)+(f-E),M=_+b,f=M-_,xo[2]=_-(M-f)+(b-f),xo[3]=M;const B=Kk(D,PL,4,xo,zL);return zL[B-1]}function b_(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,c=Math.abs(s+a);return Math.abs(l)>=lCt*c?l:-fCt(e,t,n,r,i,o,c)}const UL=Math.pow(2,-52),__=new Uint32Array(512);class i2{static from(t,n=mCt,r=yCt){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new i2(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let I=0;I<s;I++){const $=t[2*I],C=t[2*I+1];$<a&&(a=$),C<l&&(l=C),$>c&&(c=$),C>u&&(u=C),this._ids[I]=I}const f=(a+c)/2,h=(l+u)/2;let p,g,y;for(let I=0,$=1/0;I<s;I++){const C=Jk(f,h,t[2*I],t[2*I+1]);C<$&&(p=I,$=C)}const v=t[2*p],b=t[2*p+1];for(let I=0,$=1/0;I<s;I++){if(I===p)continue;const C=Jk(v,b,t[2*I],t[2*I+1]);C<$&&C>0&&(g=I,$=C)}let _=t[2*g],w=t[2*g+1],S=1/0;for(let I=0;I<s;I++){if(I===p||I===g)continue;const $=pCt(v,b,_,w,t[2*I],t[2*I+1]);$<S&&(y=I,S=$)}let k=t[2*y],E=t[2*y+1];if(S===1/0){for(let C=0;C<s;C++)this._dists[C]=t[2*C]-t[0]||t[2*C+1]-t[1];_0(this._ids,this._dists,0,s-1);const I=new Uint32Array(s);let $=0;for(let C=0,L=-1/0;C<s;C++){const F=this._ids[C],N=this._dists[F];N>L&&(I[$++]=F,L=N)}this.hull=I.subarray(0,$),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(b_(v,b,_,w,k,E)<0){const I=g,$=_,C=w;g=y,_=k,w=E,y=I,k=$,E=C}const T=gCt(v,b,_,w,k,E);this._cx=T.x,this._cy=T.y;for(let I=0;I<s;I++)this._dists[I]=Jk(t[2*I],t[2*I+1],T.x,T.y);_0(this._ids,this._dists,0,s-1),this._hullStart=p;let M=3;r[p]=n[y]=g,r[g]=n[p]=y,r[y]=n[g]=p,i[p]=0,i[g]=1,i[y]=2,o.fill(-1),o[this._hashKey(v,b)]=p,o[this._hashKey(_,w)]=g,o[this._hashKey(k,E)]=y,this.trianglesLen=0,this._addTriangle(p,g,y,-1,-1,-1);for(let I=0,$,C;I<this._ids.length;I++){const L=this._ids[I],F=t[2*L],N=t[2*L+1];if(I>0&&Math.abs(F-$)<=UL&&Math.abs(N-C)<=UL||($=F,C=N,L===p||L===g||L===y))continue;let O=0;for(let U=0,V=this._hashKey(F,N);U<this._hashSize&&(O=o[(V+U)%this._hashSize],!(O!==-1&&O!==r[O]));U++);O=n[O];let D=O,B;for(;B=r[D],b_(F,N,t[2*D],t[2*D+1],t[2*B],t[2*B+1])>=0;)if(D=B,D===O){D=-1;break}if(D===-1)continue;let j=this._addTriangle(D,L,r[D],-1,-1,i[D]);i[L]=this._legalize(j+2),i[D]=j,M++;let z=r[D];for(;B=r[z],b_(F,N,t[2*z],t[2*z+1],t[2*B],t[2*B+1])<0;)j=this._addTriangle(z,L,B,i[L],-1,i[z]),i[L]=this._legalize(j+2),r[z]=z,M--,z=B;if(D===O)for(;B=n[D],b_(F,N,t[2*B],t[2*B+1],t[2*D],t[2*D+1])<0;)j=this._addTriangle(B,L,D,-1,i[D],i[B]),this._legalize(j+2),i[B]=j,r[D]=D,M--,D=B;this._hullStart=n[L]=D,r[D]=n[z]=L,r[L]=z,o[this._hashKey(F,N)]=L,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(M);for(let I=0,$=this._hullStart;I<M;I++)this.hull[I]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(hCt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=__[--o];continue}const c=a-a%3,u=l+(t+1)%3,f=c+(a+2)%3,h=n[s],p=n[t],g=n[u],y=n[f];if(dCt(i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1],i[2*y],i[2*y+1])){n[t]=y,n[a]=h;const b=r[f];if(b===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,b),this._link(a,r[s]),this._link(s,f);const _=c+(a+1)%3;o<__.length&&(__[o++]=_)}else{if(o===0)break;t=__[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function hCt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Jk(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function dCt(e,t,n,r,i,o,s,a){const l=e-s,c=t-a,u=n-s,f=r-a,h=i-s,p=o-a,g=l*l+c*c,y=u*u+f*f,v=h*h+p*p;return l*(f*v-y*p)-c*(u*v-y*h)+g*(u*p-f*h)<0}function pCt(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,c=o-t,u=s*s+a*a,f=l*l+c*c,h=.5/(s*c-a*l),p=(c*u-a*f)*h,g=(s*f-l*u)*h;return p*p+g*g}function gCt(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,c=o-t,u=s*s+a*a,f=l*l+c*c,h=.5/(s*c-a*l),p=e+(c*u-a*f)*h,g=t+(s*f-l*u)*h;return{x:p,y:g}}function _0(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Km(e,i,o),t[e[n]]>t[e[r]]&&Km(e,n,r),t[e[o]]>t[e[r]]&&Km(e,o,r),t[e[n]]>t[e[o]]&&Km(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Km(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(_0(e,t,o,r),_0(e,t,n,s-1)):(_0(e,t,n,s-1),_0(e,t,o,r))}}function Km(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function mCt(e){return e[0]}function yCt(e){return e[1]}const qL=1e-6;class nd{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>qL||Math.abs(this._y1-o)>qL)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class xM{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let vCt=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let y=0,v=0,b=r.length,_,w;y<b;y+=3,v+=2){const S=r[y]*2,k=r[y+1]*2,E=r[y+2]*2,T=t[S],M=t[S+1],I=t[k],$=t[k+1],C=t[E],L=t[E+1],F=I-T,N=$-M,O=C-T,D=L-M,B=(F*D-N*O)*2;if(Math.abs(B)<1e-9){if(o===void 0){o=s=0;for(const z of n)o+=t[z*2],s+=t[z*2+1];o/=n.length,s/=n.length}const j=1e9*Math.sign((o-T)*D-(s-M)*O);_=(T+C)/2-j*D,w=(M+L)/2+j*O}else{const j=1/B,z=F*F+N*N,U=O*O+D*D;_=T+(D*z-N*U)*j,w=M+(F*U-O*z)*j}a[v]=_,a[v+1]=w}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],p,g=t[2*l+1];i.fill(0);for(let y=0;y<n.length;++y)l=n[y],c=u,f=h,p=g,u=l*4,h=t[2*l],g=t[2*l+1],i[c+2]=i[u]=p-g,i[c+3]=i[u+1]=h-f}render(t){const n=t==null?t=new nd:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const h=r[u];if(h<u)continue;const p=Math.floor(u/3)*2,g=Math.floor(h/3)*2,y=s[p],v=s[p+1],b=s[g],_=s[g+1];this._renderSegment(y,v,b,_,t)}let l,c=o[o.length-1];for(let u=0;u<o.length;++u){l=c,c=o[u];const f=Math.floor(i[c]/3)*2,h=s[f],p=s[f+1],g=l*4,y=this._project(h,p,a[g+2],a[g+3]);y&&this._renderSegment(h,p,y[0],y[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new nd:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new nd:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new xM;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){t:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],c,u=this._regioncode(a,l),f,h=0;for(let p=0;p<r;p+=2)if(o=a,s=l,a=n[p],l=n[p+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,i?i.push(a,l):i=[a,l];else{let g,y,v,b,_;if(c===0){if((g=this._clipSegment(o,s,a,l,c,u))===null)continue;[y,v,b,_]=g}else{if((g=this._clipSegment(a,l,o,s,u,c))===null)continue;[b,_,y,v]=g,f=h,h=this._edgecode(y,v),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(y,v):i=[y,v]}f=h,h=this._edgecode(b,_),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(b,_):i=[b,_]}if(i)f=h,h=this._edgecode(i[0],i[1]),f&&h&&this._edge(t,f,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,c,u=o||s;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=c,o=this._regioncode(t,n)):(r=l,i=c,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(t,f,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const bCt=2*Math.PI,Jp=Math.pow;function _Ct(e){return e[0]}function wCt(e){return e[1]}function xCt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function SCt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class vh{static from(t,n=_Ct,r=wCt,i){return new vh("length"in t?ACt(t,n,r,i):Float64Array.from(ECt(t,n,r,i)))}constructor(t){this._delaunator=new i2(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&xCt(t)){this.collinear=Int32Array.from({length:n.length/2},(h,p)=>p).sort((h,p)=>n[2*h]-n[2*p]||n[2*h+1]-n[2*p+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,p=n.length/2;h<p;++h){const g=SCt(n[2*h],n[2*h+1],f);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new i2(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=o[l%3===2?l-2:l+1];(r[l]===-1||s[u]===-1)&&(s[u]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new vCt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=s[c],c=c%3===2?c-2:c+1,s[c]!==t)return;if(c=o[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Jp(n-c[t*2],2)+Jp(r-c[t*2+1],2);const h=i[t];let p=h;do{let g=l[p];const y=Jp(n-c[g*2],2)+Jp(r-c[g*2+1],2);if(y<f&&(f=y,u=g),p=p%3===2?p-2:p+1,l[p]!==t)break;if(p=a[p],p===-1){if(p=o[(s[t]+1)%o.length],p!==g&&Jp(n-c[p*2],2)+Jp(r-c[p*2+1],2)<f)return p;break}}while(p!==h);return u}render(t){const n=t==null?t=new nd:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const c=o[s]*2,u=o[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new nd:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,bCt)}return r&&r.value()}renderHull(t){const n=t==null?t=new nd:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new xM;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new nd:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new xM;return this.renderTriangle(t,n),n.value()}}function ACt(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*ECt(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var Ae=1e-6,o2=1e-12,en=Math.PI,Jr=en/2,jL=en/4,Hs=en*2,qi=180/en,Rn=en/180,Ln=Math.abs,nm=Math.atan,Sl=Math.atan2,Ie=Math.cos,w_=Math.ceil,JH=Math.exp,SM=Math.hypot,s2=Math.log,Zk=Math.pow,he=Math.sin,Ia=Math.sign||function(e){return e>0?1:e<0?-1:0},zo=Math.sqrt,RR=Math.tan;function ZH(e){return e>1?0:e<-1?en:Math.acos(e)}function vs(e){return e>1?Jr:e<-1?-Jr:Math.asin(e)}function Fs(){}function a2(e,t){e&&WL.hasOwnProperty(e.type)&&WL[e.type](e,t)}var VL={Feature:function(e,t){a2(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)a2(n[r].geometry,t)}},WL={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){AM(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)AM(n[r],t,0)},Polygon:function(e,t){YL(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)YL(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)a2(n[r],t)}};function AM(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function YL(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)AM(e[n],t,1);t.polygonEnd()}function _f(e,t){e&&VL.hasOwnProperty(e.type)?VL[e.type](e,t):a2(e,t)}function EM(e){return[Sl(e[1],e[0]),vs(e[2])]}function xg(e){var t=e[0],n=e[1],r=Ie(n);return[r*Ie(t),r*he(t),he(n)]}function x_(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function l2(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qk(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function S_(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kM(e){var t=zo(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ay,c2,u2,f2,h2,d2,p2,g2,TM,MM,IM,QH,tG,Io,Ro,Co,al={sphere:Fs,point:CR,lineStart:HL,lineEnd:GL,polygonStart:function(){al.lineStart=MCt,al.lineEnd=ICt},polygonEnd:function(){al.lineStart=HL,al.lineEnd=GL}};function CR(e,t){e*=Rn,t*=Rn;var n=Ie(t);U1(n*Ie(e),n*he(e),he(t))}function U1(e,t,n){++Ay,u2+=(e-u2)/Ay,f2+=(t-f2)/Ay,h2+=(n-h2)/Ay}function HL(){al.point=kCt}function kCt(e,t){e*=Rn,t*=Rn;var n=Ie(t);Io=n*Ie(e),Ro=n*he(e),Co=he(t),al.point=TCt,U1(Io,Ro,Co)}function TCt(e,t){e*=Rn,t*=Rn;var n=Ie(t),r=n*Ie(e),i=n*he(e),o=he(t),s=Sl(zo((s=Ro*o-Co*i)*s+(s=Co*r-Io*o)*s+(s=Io*i-Ro*r)*s),Io*r+Ro*i+Co*o);c2+=s,d2+=s*(Io+(Io=r)),p2+=s*(Ro+(Ro=i)),g2+=s*(Co+(Co=o)),U1(Io,Ro,Co)}function GL(){al.point=CR}function MCt(){al.point=RCt}function ICt(){eG(QH,tG),al.point=CR}function RCt(e,t){QH=e,tG=t,e*=Rn,t*=Rn,al.point=eG;var n=Ie(t);Io=n*Ie(e),Ro=n*he(e),Co=he(t),U1(Io,Ro,Co)}function eG(e,t){e*=Rn,t*=Rn;var n=Ie(t),r=n*Ie(e),i=n*he(e),o=he(t),s=Ro*o-Co*i,a=Co*r-Io*o,l=Io*i-Ro*r,c=SM(s,a,l),u=vs(c),f=c&&-u/c;TM.add(f*s),MM.add(f*a),IM.add(f*l),c2+=u,d2+=u*(Io+(Io=r)),p2+=u*(Ro+(Ro=i)),g2+=u*(Co+(Co=o)),U1(Io,Ro,Co)}function CCt(e){Ay=c2=u2=f2=h2=d2=p2=g2=0,TM=new ac,MM=new ac,IM=new ac,_f(e,al);var t=+TM,n=+MM,r=+IM,i=SM(t,n,r);return i<o2&&(t=d2,n=p2,r=g2,c2<Ae&&(t=u2,n=f2,r=h2),i=SM(t,n,r),i<o2)?[NaN,NaN]:[Sl(n,t)*qi,vs(r/i)*qi]}function RM(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function CM(e,t){return Ln(e)>en&&(e-=Math.round(e/Hs)*Hs),[e,t]}CM.invert=CM;function nG(e,t,n){return(e%=Hs)?t||n?RM(KL(e),JL(t,n)):KL(e):t||n?JL(t,n):CM}function XL(e){return function(t,n){return t+=e,Ln(t)>en&&(t-=Math.round(t/Hs)*Hs),[t,n]}}function KL(e){var t=XL(e);return t.invert=XL(-e),t}function JL(e,t){var n=Ie(e),r=he(e),i=Ie(t),o=he(t);function s(a,l){var c=Ie(l),u=Ie(a)*c,f=he(a)*c,h=he(l),p=h*n+u*r;return[Sl(f*i-p*o,u*n-h*r),vs(p*i+f*o)]}return s.invert=function(a,l){var c=Ie(l),u=Ie(a)*c,f=he(a)*c,h=he(l),p=h*i-f*o;return[Sl(f*i+h*o,u*n+p*r),vs(p*n-u*r)]},s}function NCt(e){e=nG(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=qi,n[1]*=qi,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=qi,n[1]*=qi,n},t}function $Ct(e,t,n,r,i,o){if(n){var s=Ie(t),a=he(t),l=r*n;i==null?(i=t+r*Hs,o=t-l/2):(i=ZL(s,i),o=ZL(s,o),(r>0?i<o:i>o)&&(i+=r*Hs));for(var c,u=i;r>0?u>o:u<o;u-=l)c=EM([s,-a*Ie(u),-a*he(u)]),e.point(c[0],c[1])}}function ZL(e,t){t=xg(t),t[0]-=e,kM(t);var n=ZH(-t[1]);return((-t[2]<0?-n:n)+Hs-Ae)%Hs}function rG(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Fs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Aw(e,t){return Ln(e[0]-t[0])<Ae&&Ln(e[1]-t[1])<Ae}function A_(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function iG(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,v=g[0],b=g[y],_;if(Aw(v,b)){if(!v[2]&&!b[2]){for(i.lineStart(),a=0;a<y;++a)i.point((v=g[a])[0],v[1]);i.lineEnd();return}b[0]+=2*Ae}o.push(_=new A_(v,g,null,!0)),s.push(_.o=new A_(v,null,_,!1)),o.push(_=new A_(b,g,null,!1)),s.push(_.o=new A_(b,null,_,!0))}}),!!o.length){for(s.sort(t),QL(o),QL(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var c=o[0],u,f;;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,l=u.length;a<l;++a)i.point((f=u[a])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=h.p.z,a=u.length-1;a>=0;--a)i.point((f=u[a])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);i.lineEnd()}}}function QL(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function tT(e){return Ln(e[0])<=en?e[0]:Ia(e[0])*((Ln(e[0])+en)%Hs-en)}function OCt(e,t){var n=tT(t),r=t[1],i=he(r),o=[he(n),-Ie(n),0],s=0,a=0,l=new ac;i===1?r=Jr+Ae:i===-1&&(r=-Jr-Ae);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,p=f[h-1],g=tT(p),y=p[1]/2+jL,v=he(y),b=Ie(y),_=0;_<h;++_,g=S,v=E,b=T,p=w){var w=f[_],S=tT(w),k=w[1]/2+jL,E=he(k),T=Ie(k),M=S-g,I=M>=0?1:-1,$=I*M,C=$>en,L=v*E;if(l.add(Sl(L*I*he($),b*T+L*Ie($))),s+=C?M+I*Hs:M,C^g>=n^S>=n){var F=l2(xg(p),xg(w));kM(F);var N=l2(o,F);kM(N);var O=(C^M>=0?-1:1)*vs(N[2]);(r>O||r===O&&(F[0]||F[1]))&&(a+=C^M>=0?1:-1)}}return(s<-Ae||s<Ae&&l<-o2)^a&1}function oG(e,t,n,r){return function(i){var o=t(i),s=rG(),a=t(s),l=!1,c,u,f,h={point:p,lineStart:y,lineEnd:v,polygonStart:function(){h.point=b,h.lineStart=_,h.lineEnd=w,u=[],c=[]},polygonEnd:function(){h.point=p,h.lineStart=y,h.lineEnd=v,u=yj(u);var S=OCt(c,r);u.length?(l||(i.polygonStart(),l=!0),iG(u,LCt,S,n,i)):S&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(S,k){e(S,k)&&i.point(S,k)}function g(S,k){o.point(S,k)}function y(){h.point=g,o.lineStart()}function v(){h.point=p,o.lineEnd()}function b(S,k){f.push([S,k]),a.point(S,k)}function _(){a.lineStart(),f=[]}function w(){b(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),k=s.result(),E,T=k.length,M,I,$;if(f.pop(),c.push(f),f=null,!!T){if(S&1){if(I=k[0],(M=I.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),E=0;E<M;++E)i.point(($=I[E])[0],$[1]);i.lineEnd()}return}T>1&&S&2&&k.push(k.pop().concat(k.shift())),u.push(k.filter(DCt))}}return h}}function DCt(e){return e.length>1}function LCt(e,t){return((e=e.x)[0]<0?e[1]-Jr-Ae:Jr-e[1])-((t=t.x)[0]<0?t[1]-Jr-Ae:Jr-t[1])}const tF=oG(function(){return!0},FCt,PCt,[-en,-Jr]);function FCt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?en:-en,l=Ln(o-t);Ln(l-en)<Ae?(e.point(t,n=(n+s)/2>0?Jr:-Jr),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=en&&(Ln(t-r)<Ae&&(t-=r*Ae),Ln(o-a)<Ae&&(o-=a*Ae),n=BCt(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function BCt(e,t,n,r){var i,o,s=he(e-n);return Ln(s)>Ae?nm((he(t)*(o=Ie(r))*he(n)-he(r)*(i=Ie(t))*he(e))/(i*o*s)):(t+r)/2}function PCt(e,t,n,r){var i;if(e==null)i=n*Jr,r.point(-en,i),r.point(0,i),r.point(en,i),r.point(en,0),r.point(en,-i),r.point(0,-i),r.point(-en,-i),r.point(-en,0),r.point(-en,i);else if(Ln(e[0]-t[0])>Ae){var o=e[0]<t[0]?en:-en;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function zCt(e){var t=Ie(e),n=2*Rn,r=t>0,i=Ln(t)>Ae;function o(u,f,h,p){$Ct(p,e,n,h,u,f)}function s(u,f){return Ie(u)*Ie(f)>t}function a(u){var f,h,p,g,y;return{lineStart:function(){g=p=!1,y=1},point:function(v,b){var _=[v,b],w,S=s(v,b),k=r?S?0:c(v,b):S?c(v+(v<0?en:-en),b):0;if(!f&&(g=p=S)&&u.lineStart(),S!==p&&(w=l(f,_),(!w||Aw(f,w)||Aw(_,w))&&(_[2]=1)),S!==p)y=0,S?(u.lineStart(),w=l(_,f),u.point(w[0],w[1])):(w=l(f,_),u.point(w[0],w[1],2),u.lineEnd()),f=w;else if(i&&f&&r^S){var E;!(k&h)&&(E=l(_,f,!0))&&(y=0,r?(u.lineStart(),u.point(E[0][0],E[0][1]),u.point(E[1][0],E[1][1]),u.lineEnd()):(u.point(E[1][0],E[1][1]),u.lineEnd(),u.lineStart(),u.point(E[0][0],E[0][1],3)))}S&&(!f||!Aw(f,_))&&u.point(_[0],_[1]),f=_,p=S,h=k},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return y|(g&&p)<<1}}}function l(u,f,h){var p=xg(u),g=xg(f),y=[1,0,0],v=l2(p,g),b=x_(v,v),_=v[0],w=b-_*_;if(!w)return!h&&u;var S=t*b/w,k=-t*_/w,E=l2(y,v),T=S_(y,S),M=S_(v,k);Qk(T,M);var I=E,$=x_(T,I),C=x_(I,I),L=$*$-C*(x_(T,T)-1);if(!(L<0)){var F=zo(L),N=S_(I,(-$-F)/C);if(Qk(N,T),N=EM(N),!h)return N;var O=u[0],D=f[0],B=u[1],j=f[1],z;D<O&&(z=O,O=D,D=z);var U=D-O,V=Ln(U-en)<Ae,Y=V||U<Ae;if(!V&&j<B&&(z=B,B=j,j=z),Y?V?B+j>0^N[1]<(Ln(N[0]-O)<Ae?B:j):B<=N[1]&&N[1]<=j:U>en^(O<=N[0]&&N[0]<=D)){var Z=S_(I,(-$+F)/C);return Qk(Z,T),[N,EM(Z)]}}}function c(u,f){var h=r?e:en-e,p=0;return u<-h?p|=1:u>h&&(p|=2),f<-h?p|=4:f>h&&(p|=8),p}return oG(s,a,o,r?[0,-e]:[-en,e-en])}function UCt(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],c=t[1],u=0,f=1,h=l-s,p=c-a,g;if(g=n-s,!(!h&&g>0)){if(g/=h,h<0){if(g<u)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>u&&(u=g)}if(g=i-s,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>u&&(u=g)}else if(h>0){if(g<u)return;g<f&&(f=g)}if(g=r-a,!(!p&&g>0)){if(g/=p,p<0){if(g<u)return;g<f&&(f=g)}else if(p>0){if(g>f)return;g>u&&(u=g)}if(g=o-a,!(!p&&g<0)){if(g/=p,p<0){if(g>f)return;g>u&&(u=g)}else if(p>0){if(g<u)return;g<f&&(f=g)}return u>0&&(e[0]=s+u*h,e[1]=a+u*p),f<1&&(t[0]=s+f*h,t[1]=a+f*p),!0}}}}}var Ey=1e9,E_=-Ey;function sG(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function o(c,u,f,h){var p=0,g=0;if(c==null||(p=s(c,f))!==(g=s(u,f))||l(c,u)<0^f>0)do h.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==g);else h.point(u[0],u[1])}function s(c,u){return Ln(c[0]-e)<Ae?u>0?0:3:Ln(c[0]-n)<Ae?u>0?2:1:Ln(c[1]-t)<Ae?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=s(c,1),h=s(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=rG(),h,p,g,y,v,b,_,w,S,k,E,T={point:M,lineStart:L,lineEnd:F,polygonStart:$,polygonEnd:C};function M(O,D){i(O,D)&&u.point(O,D)}function I(){for(var O=0,D=0,B=p.length;D<B;++D)for(var j=p[D],z=1,U=j.length,V=j[0],Y,Z,ct=V[0],gt=V[1];z<U;++z)Y=ct,Z=gt,V=j[z],ct=V[0],gt=V[1],Z<=r?gt>r&&(ct-Y)*(r-Z)>(gt-Z)*(e-Y)&&++O:gt<=r&&(ct-Y)*(r-Z)<(gt-Z)*(e-Y)&&--O;return O}function $(){u=f,h=[],p=[],E=!0}function C(){var O=I(),D=E&&O,B=(h=yj(h)).length;(D||B)&&(c.polygonStart(),D&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),B&&iG(h,a,O,o,c),c.polygonEnd()),u=c,h=p=g=null}function L(){T.point=N,p&&p.push(g=[]),k=!0,S=!1,_=w=NaN}function F(){h&&(N(y,v),b&&S&&f.rejoin(),h.push(f.result())),T.point=M,S&&u.lineEnd()}function N(O,D){var B=i(O,D);if(p&&g.push([O,D]),k)y=O,v=D,b=B,k=!1,B&&(u.lineStart(),u.point(O,D));else if(B&&S)u.point(O,D);else{var j=[_=Math.max(E_,Math.min(Ey,_)),w=Math.max(E_,Math.min(Ey,w))],z=[O=Math.max(E_,Math.min(Ey,O)),D=Math.max(E_,Math.min(Ey,D))];UCt(j,z,e,t,n,r)?(S||(u.lineStart(),u.point(j[0],j[1])),u.point(z[0],z[1]),B||u.lineEnd(),E=!1):B&&(u.lineStart(),u.point(O,D),E=!1)}_=O,w=D,S=B}return T}}function eF(e,t,n){var r=Ls(e,t-Ae,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function nF(e,t,n){var r=Ls(e,t-Ae,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function qCt(){var e,t,n,r,i,o,s,a,l=10,c=l,u=90,f=360,h,p,g,y,v=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return Ls(w_(r/u)*u,n,u).map(g).concat(Ls(w_(a/f)*f,s,f).map(y)).concat(Ls(w_(t/l)*l,e,l).filter(function(w){return Ln(w%u)>Ae}).map(h)).concat(Ls(w_(o/c)*c,i,c).filter(function(w){return Ln(w%f)>Ae}).map(p))}return b.lines=function(){return _().map(function(w){return{type:"LineString",coordinates:w}})},b.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(y(s).slice(1),g(n).reverse().slice(1),y(a).reverse().slice(1))]}},b.extent=function(w){return arguments.length?b.extentMajor(w).extentMinor(w):b.extentMinor()},b.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],s=+w[1][1],r>n&&(w=r,r=n,n=w),a>s&&(w=a,a=s,s=w),b.precision(v)):[[r,a],[n,s]]},b.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],o=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),o>i&&(w=o,o=i,i=w),b.precision(v)):[[t,o],[e,i]]},b.step=function(w){return arguments.length?b.stepMajor(w).stepMinor(w):b.stepMinor()},b.stepMajor=function(w){return arguments.length?(u=+w[0],f=+w[1],b):[u,f]},b.stepMinor=function(w){return arguments.length?(l=+w[0],c=+w[1],b):[l,c]},b.precision=function(w){return arguments.length?(v=+w,h=eF(o,i,90),p=nF(t,e,v),g=eF(a,s,90),y=nF(r,n,v),b):v},b.extentMajor([[-180,-90+Ae],[180,90-Ae]]).extentMinor([[-180,-80-Ae],[180,80+Ae]])}function jCt(){return qCt()()}const NM=e=>e;var eT=new ac,$M=new ac,aG,lG,OM,DM,uu={point:Fs,lineStart:Fs,lineEnd:Fs,polygonStart:function(){uu.lineStart=VCt,uu.lineEnd=YCt},polygonEnd:function(){uu.lineStart=uu.lineEnd=uu.point=Fs,eT.add(Ln($M)),$M=new ac},result:function(){var e=eT/2;return eT=new ac,e}};function VCt(){uu.point=WCt}function WCt(e,t){uu.point=cG,aG=OM=e,lG=DM=t}function cG(e,t){$M.add(DM*e-OM*t),OM=e,DM=t}function YCt(){cG(aG,lG)}var Sg=1/0,m2=Sg,qv=-Sg,y2=qv,v2={point:HCt,lineStart:Fs,lineEnd:Fs,polygonStart:Fs,polygonEnd:Fs,result:function(){var e=[[Sg,m2],[qv,y2]];return qv=y2=-(m2=Sg=1/0),e}};function HCt(e,t){e<Sg&&(Sg=e),e>qv&&(qv=e),t<m2&&(m2=t),t>y2&&(y2=t)}var LM=0,FM=0,ky=0,b2=0,_2=0,w0=0,BM=0,PM=0,Ty=0,uG,fG,Ql,tc,Sa={point:Kd,lineStart:rF,lineEnd:iF,polygonStart:function(){Sa.lineStart=KCt,Sa.lineEnd=JCt},polygonEnd:function(){Sa.point=Kd,Sa.lineStart=rF,Sa.lineEnd=iF},result:function(){var e=Ty?[BM/Ty,PM/Ty]:w0?[b2/w0,_2/w0]:ky?[LM/ky,FM/ky]:[NaN,NaN];return LM=FM=ky=b2=_2=w0=BM=PM=Ty=0,e}};function Kd(e,t){LM+=e,FM+=t,++ky}function rF(){Sa.point=GCt}function GCt(e,t){Sa.point=XCt,Kd(Ql=e,tc=t)}function XCt(e,t){var n=e-Ql,r=t-tc,i=zo(n*n+r*r);b2+=i*(Ql+e)/2,_2+=i*(tc+t)/2,w0+=i,Kd(Ql=e,tc=t)}function iF(){Sa.point=Kd}function KCt(){Sa.point=ZCt}function JCt(){hG(uG,fG)}function ZCt(e,t){Sa.point=hG,Kd(uG=Ql=e,fG=tc=t)}function hG(e,t){var n=e-Ql,r=t-tc,i=zo(n*n+r*r);b2+=i*(Ql+e)/2,_2+=i*(tc+t)/2,w0+=i,i=tc*e-Ql*t,BM+=i*(Ql+e),PM+=i*(tc+t),Ty+=i*3,Kd(Ql=e,tc=t)}function dG(e){this._context=e}dG.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Hs);break}}},result:Fs};var zM=new ac,nT,pG,gG,My,Iy,jv={point:Fs,lineStart:function(){jv.point=QCt},lineEnd:function(){nT&&mG(pG,gG),jv.point=Fs},polygonStart:function(){nT=!0},polygonEnd:function(){nT=null},result:function(){var e=+zM;return zM=new ac,e}};function QCt(e,t){jv.point=mG,pG=My=e,gG=Iy=t}function mG(e,t){My-=e,Iy-=t,zM.add(zo(My*My+Iy*Iy)),My=e,Iy=t}let oF,w2,sF,aF;class lF{constructor(t){this._append=t==null?yG:t8t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==sF||this._append!==w2){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,sF=r,w2=this._append,aF=this._,this._=i}this._+=aF;break}}}result(){const t=this._;return this._="",t.length?t:null}}function yG(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function t8t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return yG;if(t!==oF){const n=10**t;oF=t,w2=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return w2}function q1(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),_f(a,i(o))),o.result()}return s.area=function(a){return _f(a,i(uu)),uu.result()},s.measure=function(a){return _f(a,i(jv)),jv.result()},s.bounds=function(a){return _f(a,i(v2)),v2.result()},s.centroid=function(a){return _f(a,i(Sa)),Sa.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,NM):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new lF(n)):new dG(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new lF(n)),s},s.projection(e).digits(n).context(t)}function x2(e){return{stream:A3(e)}}function A3(e){return function(t){var n=new UM;for(var r in e)n[r]=e[r];return n.stream=t,n}}function UM(){}UM.prototype={constructor:UM,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function NR(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),_f(n,e.stream(v2)),t(v2.result()),r!=null&&e.clipExtent(r),e}function $R(e,t,n){return NR(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function vG(e,t,n){return $R(e,[[0,0],t],n)}function bG(e,t,n){return NR(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function _G(e,t,n){return NR(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var cF=16,e8t=Ie(30*Rn);function uF(e,t){return+t?r8t(e,t):n8t(e)}function n8t(e){return A3({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function r8t(e,t){function n(r,i,o,s,a,l,c,u,f,h,p,g,y,v){var b=c-r,_=u-i,w=b*b+_*_;if(w>4*t&&y--){var S=s+h,k=a+p,E=l+g,T=zo(S*S+k*k+E*E),M=vs(E/=T),I=Ln(Ln(E)-1)<Ae||Ln(o-f)<Ae?(o+f)/2:Sl(k,S),$=e(I,M),C=$[0],L=$[1],F=C-r,N=L-i,O=_*F-b*N;(O*O/w>t||Ln((b*F+_*N)/w-.5)>.3||s*h+a*p+l*g<e8t)&&(n(r,i,o,s,a,l,C,L,I,S/=T,k/=T,E,y,v),v.point(C,L),n(C,L,I,S,k,E,c,u,f,h,p,g,y,v))}}return function(r){var i,o,s,a,l,c,u,f,h,p,g,y,v={point:b,lineStart:_,lineEnd:S,polygonStart:function(){r.polygonStart(),v.lineStart=k},polygonEnd:function(){r.polygonEnd(),v.lineStart=_}};function b(M,I){M=e(M,I),r.point(M[0],M[1])}function _(){f=NaN,v.point=w,r.lineStart()}function w(M,I){var $=xg([M,I]),C=e(M,I);n(f,h,u,p,g,y,f=C[0],h=C[1],u=M,p=$[0],g=$[1],y=$[2],cF,r),r.point(f,h)}function S(){v.point=b,r.lineEnd()}function k(){_(),v.point=E,v.lineEnd=T}function E(M,I){w(i=M,I),o=f,s=h,a=p,l=g,c=y,v.point=w}function T(){n(f,h,u,p,g,y,o,s,i,a,l,c,cF,r),v.lineEnd=S,S()}return v}}var i8t=A3({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function o8t(e){return A3({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function s8t(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function fF(e,t,n,r,i,o){if(!o)return s8t(e,t,n,r,i);var s=Ie(o),a=he(o),l=s*e,c=a*e,u=s/e,f=a/e,h=(a*n-s*t)/e,p=(a*t+s*n)/e;function g(y,v){return y*=r,v*=i,[l*y-c*v+t,n-c*y-l*v]}return g.invert=function(y,v){return[r*(u*y-f*v+h),i*(p-f*y-u*v)]},g}function bh(e){return wG(function(){return e})()}function wG(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,c=0,u,f=0,h=1,p=1,g=null,y=tF,v=null,b,_,w,S=NM,k=.5,E,T,M,I,$;function C(O){return M(O[0]*Rn,O[1]*Rn)}function L(O){return O=M.invert(O[0],O[1]),O&&[O[0]*qi,O[1]*qi]}C.stream=function(O){return I&&$===O?I:I=i8t(o8t(u)(y(E(S($=O)))))},C.preclip=function(O){return arguments.length?(y=O,g=void 0,N()):y},C.postclip=function(O){return arguments.length?(S=O,v=b=_=w=null,N()):S},C.clipAngle=function(O){return arguments.length?(y=+O?zCt(g=O*Rn):(g=null,tF),N()):g*qi},C.clipExtent=function(O){return arguments.length?(S=O==null?(v=b=_=w=null,NM):sG(v=+O[0][0],b=+O[0][1],_=+O[1][0],w=+O[1][1]),N()):v==null?null:[[v,b],[_,w]]},C.scale=function(O){return arguments.length?(n=+O,F()):n},C.translate=function(O){return arguments.length?(r=+O[0],i=+O[1],F()):[r,i]},C.center=function(O){return arguments.length?(o=O[0]%360*Rn,s=O[1]%360*Rn,F()):[o*qi,s*qi]},C.rotate=function(O){return arguments.length?(a=O[0]%360*Rn,l=O[1]%360*Rn,c=O.length>2?O[2]%360*Rn:0,F()):[a*qi,l*qi,c*qi]},C.angle=function(O){return arguments.length?(f=O%360*Rn,F()):f*qi},C.reflectX=function(O){return arguments.length?(h=O?-1:1,F()):h<0},C.reflectY=function(O){return arguments.length?(p=O?-1:1,F()):p<0},C.precision=function(O){return arguments.length?(E=uF(T,k=O*O),N()):zo(k)},C.fitExtent=function(O,D){return $R(C,O,D)},C.fitSize=function(O,D){return vG(C,O,D)},C.fitWidth=function(O,D){return bG(C,O,D)},C.fitHeight=function(O,D){return _G(C,O,D)};function F(){var O=fF(n,0,0,h,p,f).apply(null,t(o,s)),D=fF(n,r-O[0],i-O[1],h,p,f);return u=nG(a,l,c),T=RM(t,D),M=RM(u,T),E=uF(T,k),N()}function N(){return I=$=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&L,F()}}function OR(e){var t=0,n=en/3,r=wG(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Rn,n=o[1]*Rn):[t*qi,n*qi]},i}function a8t(e){var t=Ie(e);function n(r,i){return[r*t,he(i)/t]}return n.invert=function(r,i){return[r/t,vs(i*t)]},n}function l8t(e,t){var n=he(e),r=(n+he(t))/2;if(Ln(r)<Ae)return a8t(e);var i=1+n*(2*r-n),o=zo(i)/r;function s(a,l){var c=zo(i-2*r*he(l))/r;return[c*he(a*=r),o-c*Ie(a)]}return s.invert=function(a,l){var c=o-l,u=Sl(a,Ln(c))*Ia(c);return c*r<0&&(u-=en*Ia(a)*Ia(c)),[u/r,vs((i-(a*a+c*c)*r*r)/(2*r))]},s}function S2(){return OR(l8t).scale(155.424).center([0,33.6442])}function xG(){return S2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function c8t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function u8t(){var e,t,n=xG(),r,i=S2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=S2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(h,p){l=[h,p]}};function u(h){var p=h[0],g=h[1];return l=null,r.point(p,g),l||(o.point(p,g),l)||(a.point(p,g),l)}u.invert=function(h){var p=n.scale(),g=n.translate(),y=(h[0]-g[0])/p,v=(h[1]-g[1])/p;return(v>=.12&&v<.234&&y>=-.425&&y<-.214?i:v>=.166&&v<.234&&y>=-.214&&y<-.115?s:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=c8t([n.stream(t=h),i.stream(h),s.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),s.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),s.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),g=+h[0],y=+h[1];return r=n.translate(h).clipExtent([[g-.455*p,y-.238*p],[g+.455*p,y+.238*p]]).stream(c),o=i.translate([g-.307*p,y+.201*p]).clipExtent([[g-.425*p+Ae,y+.12*p+Ae],[g-.214*p-Ae,y+.234*p-Ae]]).stream(c),a=s.translate([g-.205*p,y+.212*p]).clipExtent([[g-.214*p+Ae,y+.166*p+Ae],[g-.115*p-Ae,y+.234*p-Ae]]).stream(c),f()},u.fitExtent=function(h,p){return $R(u,h,p)},u.fitSize=function(h,p){return vG(u,h,p)},u.fitWidth=function(h,p){return bG(u,h,p)},u.fitHeight=function(h,p){return _G(u,h,p)};function f(){return e=t=null,u}return u.scale(1070)}function SG(e){return function(t,n){var r=Ie(t),i=Ie(n),o=e(r*i);return o===1/0?[2,0]:[o*i*he(t),o*he(n)]}}function j1(e){return function(t,n){var r=zo(t*t+n*n),i=e(r),o=he(i),s=Ie(i);return[Sl(t*o,r*s),vs(r&&n*o/r)]}}var AG=SG(function(e){return zo(2/(1+e))});AG.invert=j1(function(e){return 2*vs(e/2)});function f8t(){return bh(AG).scale(124.75).clipAngle(180-.001)}var EG=SG(function(e){return(e=ZH(e))&&e/he(e)});EG.invert=j1(function(e){return e});function h8t(){return bh(EG).scale(79.4188).clipAngle(180-.001)}function E3(e,t){return[e,s2(RR((Jr+t)/2))]}E3.invert=function(e,t){return[e,2*nm(JH(t))-Jr]};function d8t(){return kG(E3).scale(961/Hs)}function kG(e){var t=bh(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=c=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):s==null?null:[[s,a],[l,c]]};function u(){var f=en*r(),h=t(NCt(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===E3?[[Math.max(h[0]-f,s),a],[Math.min(h[0]+f,l),c]]:[[s,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,c)]])}return u()}function k_(e){return RR((Jr+e)/2)}function p8t(e,t){var n=Ie(e),r=e===t?he(e):s2(n/Ie(t))/s2(k_(t)/k_(e)),i=n*Zk(k_(e),r)/r;if(!r)return E3;function o(s,a){i>0?a<-Jr+Ae&&(a=-Jr+Ae):a>Jr-Ae&&(a=Jr-Ae);var l=i/Zk(k_(a),r);return[l*he(r*s),i-l*Ie(r*s)]}return o.invert=function(s,a){var l=i-a,c=Ia(r)*zo(s*s+l*l),u=Sl(s,Ln(l))*Ia(l);return l*r<0&&(u-=en*Ia(s)*Ia(l)),[u/r,2*nm(Zk(i/c,1/r))-Jr]},o}function g8t(){return OR(p8t).scale(109.5).parallels([30,30])}function A2(e,t){return[e,t]}A2.invert=A2;function m8t(){return bh(A2).scale(152.63)}function y8t(e,t){var n=Ie(e),r=e===t?he(e):(n-Ie(t))/(t-e),i=n/r+e;if(Ln(r)<Ae)return A2;function o(s,a){var l=i-a,c=r*s;return[l*he(c),i-l*Ie(c)]}return o.invert=function(s,a){var l=i-a,c=Sl(s,Ln(l))*Ia(l);return l*r<0&&(c-=en*Ia(s)*Ia(l)),[c/r,i-Ia(r)*zo(s*s+l*l)]},o}function v8t(){return OR(y8t).scale(131.154).center([0,13.9389])}var qy=1.340264,jy=-.081106,Vy=893e-6,Wy=.003796,E2=zo(3)/2,b8t=12;function TG(e,t){var n=vs(E2*he(t)),r=n*n,i=r*r*r;return[e*Ie(n)/(E2*(qy+3*jy*r+i*(7*Vy+9*Wy*r))),n*(qy+jy*r+i*(Vy+Wy*r))]}TG.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<b8t&&(a=n*(qy+jy*r+i*(Vy+Wy*r))-t,l=qy+3*jy*r+i*(7*Vy+9*Wy*r),n-=s=a/l,r=n*n,i=r*r*r,!(Ln(s)<o2));++o);return[E2*e*(qy+3*jy*r+i*(7*Vy+9*Wy*r))/Ie(n),vs(he(n)/E2)]};function _8t(){return bh(TG).scale(177.158)}function MG(e,t){var n=Ie(t),r=Ie(e)*n;return[n*he(e)/r,he(t)/r]}MG.invert=j1(nm);function w8t(){return bh(MG).scale(144.049).clipAngle(60)}function IG(e,t){return[Ie(t)*he(e),he(t)]}IG.invert=j1(vs);function x8t(){return bh(IG).scale(249.5).clipAngle(90+Ae)}function RG(e,t){var n=Ie(t),r=1+Ie(e)*n;return[n*he(e)/r,he(t)/r]}RG.invert=j1(function(e){return 2*nm(e)});function S8t(){return bh(RG).scale(250).clipAngle(142)}function CG(e,t){return[s2(RR((Jr+t)/2)),-e]}CG.invert=function(e,t){return[-t,2*nm(JH(e))-Jr]};function A8t(){var e=kG(CG),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function E8t(e,t){return e.parent===t.parent?1:2}function k8t(e){return e.reduce(T8t,0)/e.length}function T8t(e,t){return e+t.x}function M8t(e){return 1+e.reduce(I8t,0)}function I8t(e,t){return Math.max(e,t.y)}function R8t(e){for(var t;t=e.children;)e=t[0];return e}function C8t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function NG(){var e=E8t,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(h){var p=h.children;p?(h.x=k8t(p),h.y=M8t(p)):(h.x=s?a+=e(h,s):0,h.y=0,s=h)});var l=R8t(o),c=C8t(o),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return o.eachAfter(r?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(o.y?h.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function N8t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function $8t(){return this.eachAfter(N8t)}function O8t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function D8t(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function L8t(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function F8t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function B8t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function P8t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function z8t(e){for(var t=this,n=U8t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function U8t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function q8t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function j8t(){return Array.from(this)}function V8t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function W8t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Y8t(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function $G(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=X8t)):t===void 0&&(t=G8t);for(var n=new Ag(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new Ag(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(OG)}function H8t(){return $G(this).eachBefore(K8t)}function G8t(e){return e.children}function X8t(e){return Array.isArray(e)?e[1]:null}function K8t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function OG(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ag(e){this.data=e,this.depth=this.height=0,this.parent=null}Ag.prototype=$G.prototype={constructor:Ag,count:$8t,each:O8t,eachAfter:L8t,eachBefore:D8t,find:F8t,sum:B8t,sort:P8t,path:z8t,ancestors:q8t,descendants:j8t,leaves:V8t,links:W8t,copy:H8t,[Symbol.iterator]:Y8t};function rT(e){return e==null?null:J8t(e)}function J8t(e){if(typeof e!="function")throw new Error;return e}var Z8t={depth:-1},hF={},iT={};function Q8t(e){return e.id}function tNt(e){return e.parentId}function DG(){var e=Q8t,t=tNt,n;function r(i){var o=Array.from(i),s=e,a=t,l,c,u,f,h,p,g,y,v=new Map;if(n!=null){const b=o.map((S,k)=>eNt(n(S,k,i))),_=b.map(dF),w=new Set(b).add("");for(const S of _)w.has(S)||(w.add(S),b.push(S),_.push(dF(S)),o.push(iT));s=(S,k)=>b[k],a=(S,k)=>_[k]}for(u=0,l=o.length;u<l;++u)c=o[u],p=o[u]=new Ag(c),(g=s(c,u,i))!=null&&(g+="")&&(y=p.id=g,v.set(y,v.has(y)?hF:p)),(g=a(c,u,i))!=null&&(g+="")&&(p.parent=g);for(u=0;u<l;++u)if(p=o[u],g=p.parent){if(h=v.get(g),!h)throw new Error("missing: "+g);if(h===hF)throw new Error("ambiguous: "+g);h.children?h.children.push(p):h.children=[p],p.parent=h}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===iT&&f.children.length===1;)f=f.children[0],--l;for(let b=o.length-1;b>=0&&(p=o[b],p.data===iT);--b)p.data=null}if(f.parent=Z8t,f.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(OG),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=rT(i),r):e},r.parentId=function(i){return arguments.length?(t=rT(i),r):t},r.path=function(i){return arguments.length?(n=rT(i),r):n},r}function eNt(e){e=`${e}`;let t=e.length;return qM(e,t-1)&&!qM(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function dF(e){let t=e.length;if(t<2)return"";for(;--t>1&&!qM(e,t););return e.slice(0,t)}function qM(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function nNt(e,t){return e.parent===t.parent?1:2}function oT(e){var t=e.children;return t?t[0]:e.t}function sT(e){var t=e.children;return t?t[t.length-1]:e.t}function rNt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function iNt(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function oNt(e,t,n){return e.a.parent===t.parent?e.a:n}function Ew(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Ew.prototype=Object.create(Ag.prototype);function sNt(e){for(var t=new Ew(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Ew(o[s],s)),i.parent=n;return(t.parent=new Ew(null,0)).children=[t],t}function k2(){var e=nNt,t=1,n=1,r=null;function i(c){var u=sNt(c);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),r)c.eachBefore(l);else{var f=c,h=c,p=c;c.eachBefore(function(_){_.x<f.x&&(f=_),_.x>h.x&&(h=_),_.depth>p.depth&&(p=_)});var g=f===h?1:e(f,h)/2,y=g-f.x,v=t/(h.x+g+y),b=n/(p.depth||1);c.eachBefore(function(_){_.x=(_.x+y)*v,_.y=_.depth*b})}return c}function o(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){iNt(c);var p=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-p):c.z=p}else h&&(c.z=h.z+e(c._,h._));c.parent.A=a(c,h,c.parent.A||f[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,f){if(u){for(var h=c,p=c,g=u,y=h.parent.children[0],v=h.m,b=p.m,_=g.m,w=y.m,S;g=sT(g),h=oT(h),g&&h;)y=oT(y),p=sT(p),p.a=c,S=g.z+_-h.z-v+e(g._,h._),S>0&&(rNt(oNt(g,c,f),c,S),v+=S,b+=S),_+=g.m,v+=h.m,w+=y.m,b+=p.m;g&&!sT(p)&&(p.t=g,p.m+=_-b),h&&!oT(y)&&(y.t=h,y.m+=v-w,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}const aNt=1664525,lNt=1013904223,pF=1/4294967296;function DR(e=Math.random()){let t=(0<=e&&e<1?e/pF:Math.abs(e))|0;return()=>(t=aNt*t+lNt|0,pF*(t>>>0))}function $i(e){return function(){return e}}const LG=Math.cos,LR=Math.min,T2=Math.sin,ki=Math.sqrt,gF=1e-12,M2=Math.PI,k3=2*M2;function FG(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new XH(t)}function BG(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PG(e){this._context=e}PG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function V1(e){return new PG(e)}function zG(e){return e[0]}function UG(e){return e[1]}function qG(e,t){var n=$i(!0),r=null,i=V1,o=null,s=FG(a);e=typeof e=="function"?e:e===void 0?zG:$i(e),t=typeof t=="function"?t:t===void 0?UG:$i(t);function a(l){var c,u=(l=BG(l)).length,f,h=!1,p;for(r==null&&(o=i(p=s())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(f,c,l),+t(f,c,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:$i(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:$i(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:$i(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function FR(e,t,n){var r=null,i=$i(!0),o=null,s=V1,a=null,l=FG(c);e=typeof e=="function"?e:e===void 0?zG:$i(+e),t=typeof t=="function"?t:$i(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?UG:$i(+n);function c(f){var h,p,g,y=(f=BG(f)).length,v,b=!1,_,w=new Array(y),S=new Array(y);for(o==null&&(a=s(_=l())),h=0;h<=y;++h){if(!(h<y&&i(v=f[h],h,f))===b)if(b=!b)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=p;--g)a.point(w[g],S[g]);a.lineEnd(),a.areaEnd()}b&&(w[h]=+e(v,h,f),S[h]=+t(v,h,f),a.point(r?+r(v,h,f):w[h],n?+n(v,h,f):S[h]))}if(_)return a=null,_+""||null}function u(){return qG().defined(i).curve(s).context(o)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:$i(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:$i(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:$i(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:$i(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:$i(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:$i(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:$i(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),c):s},c.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),c):o},c}class jG{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function cNt(e){return new jG(e,!0)}function uNt(e){return new jG(e,!1)}const fNt=ki(3),VG={draw(e,t){const n=ki(t+LR(t/28,.75))*.59436,r=n/2,i=r*fNt;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Vv={draw(e,t){const n=ki(t/M2);e.moveTo(n,0),e.arc(0,0,n,0,k3)}},WG={draw(e,t){const n=ki(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},YG=ki(1/3),hNt=YG*2,HG={draw(e,t){const n=ki(t/hNt),r=n*YG;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},GG={draw(e,t){const n=ki(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},XG={draw(e,t){const n=ki(t-LR(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},KG={draw(e,t){const n=ki(t),r=-n/2;e.rect(r,r,n,n)}},JG={draw(e,t){const n=ki(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},dNt=.8908130915292852,ZG=T2(M2/10)/T2(7*M2/10),pNt=T2(k3/10)*ZG,gNt=-LG(k3/10)*ZG,QG={draw(e,t){const n=ki(t*dNt),r=pNt*n,i=gNt*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const s=k3*o/5,a=LG(s),l=T2(s);e.lineTo(l*n,-a*n),e.lineTo(a*r-l*i,l*r+a*i)}e.closePath()}},aT=ki(3),tX={draw(e,t){const n=-ki(t/(aT*3));e.moveTo(0,n*2),e.lineTo(-aT*n,-n),e.lineTo(aT*n,-n),e.closePath()}},mNt=ki(3),eX={draw(e,t){const n=ki(t)*.6824,r=n/2,i=n*mNt/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},oa=-.5,sa=ki(3)/2,jM=1/ki(12),yNt=(jM/2+1)*3,nX={draw(e,t){const n=ki(t/yNt),r=n/2,i=n*jM,o=r,s=n*jM+n,a=-o,l=s;e.moveTo(r,i),e.lineTo(o,s),e.lineTo(a,l),e.lineTo(oa*r-sa*i,sa*r+oa*i),e.lineTo(oa*o-sa*s,sa*o+oa*s),e.lineTo(oa*a-sa*l,sa*a+oa*l),e.lineTo(oa*r+sa*i,oa*i-sa*r),e.lineTo(oa*o+sa*s,oa*s-sa*o),e.lineTo(oa*a+sa*l,oa*l-sa*a),e.closePath()}},rX={draw(e,t){const n=ki(t-LR(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},vNt=[Vv,WG,HG,KG,QG,tX,nX],bNt=[Vv,XG,rX,eX,VG,JG,GG];function eh(){}function I2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function T3(e){this._context=e}T3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:I2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _Nt(e){return new T3(e)}function iX(e){this._context=e}iX.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:I2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wNt(e){return new iX(e)}function oX(e){this._context=e}oX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:I2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xNt(e){return new oX(e)}function sX(e,t){this._basis=new T3(e),this._beta=t}sX.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const SNt=function e(t){function n(r){return t===1?new T3(r):new sX(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function R2(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function BR(e,t){this._context=e,this._k=(1-t)/6}BR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:R2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:R2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ANt=function e(t){function n(r){return new BR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function PR(e,t){this._context=e,this._k=(1-t)/6}PR.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:R2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ENt=function e(t){function n(r){return new PR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zR(e,t){this._context=e,this._k=(1-t)/6}zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kNt=function e(t){function n(r){return new zR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function UR(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>gF){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>gF){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function aX(e,t){this._context=e,this._alpha=t}aX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:UR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const TNt=function e(t){function n(r){return t?new aX(r,t):new BR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lX(e,t){this._context=e,this._alpha=t}lX.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:UR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MNt=function e(t){function n(r){return t?new lX(r,t):new PR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cX(e,t){this._context=e,this._alpha=t}cX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:UR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const INt=function e(t){function n(r){return t?new cX(r,t):new zR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uX(e){this._context=e}uX.prototype={areaStart:eh,areaEnd:eh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RNt(e){return new uX(e)}function mF(e){return e<0?-1:1}function yF(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(mF(o)+mF(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function vF(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function lT(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function C2(e){this._context=e}C2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lT(this,this._t0,vF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lT(this,vF(this,n=yF(this,e,t)),n);break;default:lT(this,this._t0,n=yF(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fX(e){this._context=new hX(e)}(fX.prototype=Object.create(C2.prototype)).point=function(e,t){C2.prototype.point.call(this,t,e)};function hX(e){this._context=e}hX.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function CNt(e){return new C2(e)}function NNt(e){return new fX(e)}function dX(e){this._context=e}dX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=bF(e),i=bF(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bF(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function $Nt(e){return new dX(e)}function M3(e,t){this._context=e,this._t=t}M3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ONt(e){return new M3(e,.5)}function DNt(e){return new M3(e,0)}function LNt(e){return new M3(e,1)}const T_=e=>()=>e;function FNt(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function rc(e,t,n){this.k=e,this.x=t,this.y=n}rc.prototype={constructor:rc,scale:function(e){return e===1?this:new rc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pX=new rc(1,0,0);rc.prototype;function cT(e){e.stopImmediatePropagation()}function Jm(e){e.preventDefault(),e.stopImmediatePropagation()}function BNt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function PNt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _F(){return this.__zoom||pX}function zNt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function UNt(){return navigator.maxTouchPoints||"ontouchstart"in this}function qNt(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function jNt(){var e=BNt,t=PNt,n=qNt,r=zNt,i=UNt,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=d2t,c=b3("start","zoom","end"),u,f,h,p=500,g=150,y=0,v=10;function b(N){N.property("__zoom",_F).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(N,O,D,B){var j=N.selection?N.selection():N;j.property("__zoom",_F),N!==j?k(N,O,D,B):j.interrupt().each(function(){E(this,arguments).event(B).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},b.scaleBy=function(N,O,D,B){b.scaleTo(N,function(){var j=this.__zoom.k,z=typeof O=="function"?O.apply(this,arguments):O;return j*z},D,B)},b.scaleTo=function(N,O,D,B){b.transform(N,function(){var j=t.apply(this,arguments),z=this.__zoom,U=D==null?S(j):typeof D=="function"?D.apply(this,arguments):D,V=z.invert(U),Y=typeof O=="function"?O.apply(this,arguments):O;return n(w(_(z,Y),U,V),j,s)},D,B)},b.translateBy=function(N,O,D,B){b.transform(N,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),s)},null,B)},b.translateTo=function(N,O,D,B,j){b.transform(N,function(){var z=t.apply(this,arguments),U=this.__zoom,V=B==null?S(z):typeof B=="function"?B.apply(this,arguments):B;return n(pX.translate(V[0],V[1]).scale(U.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof D=="function"?-D.apply(this,arguments):-D),z,s)},B,j)};function _(N,O){return O=Math.max(o[0],Math.min(o[1],O)),O===N.k?N:new rc(O,N.x,N.y)}function w(N,O,D){var B=O[0]-D[0]*N.k,j=O[1]-D[1]*N.k;return B===N.x&&j===N.y?N:new rc(N.k,B,j)}function S(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function k(N,O,D,B){N.on("start.zoom",function(){E(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(B).end()}).tween("zoom",function(){var j=this,z=arguments,U=E(j,z).event(B),V=t.apply(j,z),Y=D==null?S(V):typeof D=="function"?D.apply(j,z):D,Z=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),ct=j.__zoom,gt=typeof O=="function"?O.apply(j,z):O,pt=l(ct.invert(Y).concat(Z/ct.k),gt.invert(Y).concat(Z/gt.k));return function(lt){if(lt===1)lt=gt;else{var yt=pt(lt),at=Z/yt[2];lt=new rc(at,Y[0]-yt[0]*at,Y[1]-yt[1]*at)}U.zoom(null,lt)}})}function E(N,O,D){return!D&&N.__zooming||new T(N,O)}function T(N,O){this.that=N,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,O),this.taps=0}T.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,O){return this.mouse&&N!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var O=Er(this.that).datum();c.call(N,this.that,new FNt(N,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),O)}};function M(N,...O){if(!e.apply(this,arguments))return;var D=E(this,O).event(N),B=this.__zoom,j=Math.max(o[0],Math.min(o[1],B.k*Math.pow(2,r.apply(this,arguments)))),z=el(N);if(D.wheel)(D.mouse[0][0]!==z[0]||D.mouse[0][1]!==z[1])&&(D.mouse[1]=B.invert(D.mouse[0]=z)),clearTimeout(D.wheel);else{if(B.k===j)return;D.mouse=[z,B.invert(z)],G0(this),D.start()}Jm(N),D.wheel=setTimeout(U,g),D.zoom("mouse",n(w(_(B,j),D.mouse[0],D.mouse[1]),D.extent,s));function U(){D.wheel=null,D.end()}}function I(N,...O){if(h||!e.apply(this,arguments))return;var D=N.currentTarget,B=E(this,O,!0).event(N),j=Er(N.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",Z,!0),z=el(N,D),U=N.clientX,V=N.clientY;PH(N.view),cT(N),B.mouse=[z,this.__zoom.invert(z)],G0(this),B.start();function Y(ct){if(Jm(ct),!B.moved){var gt=ct.clientX-U,pt=ct.clientY-V;B.moved=gt*gt+pt*pt>y}B.event(ct).zoom("mouse",n(w(B.that.__zoom,B.mouse[0]=el(ct,D),B.mouse[1]),B.extent,s))}function Z(ct){j.on("mousemove.zoom mouseup.zoom",null),zH(ct.view,B.moved),Jm(ct),B.event(ct).end()}}function $(N,...O){if(e.apply(this,arguments)){var D=this.__zoom,B=el(N.changedTouches?N.changedTouches[0]:N,this),j=D.invert(B),z=D.k*(N.shiftKey?.5:2),U=n(w(_(D,z),B,j),t.apply(this,O),s);Jm(N),a>0?Er(this).transition().duration(a).call(k,U,B,N):Er(this).call(b.transform,U,B,N)}}function C(N,...O){if(e.apply(this,arguments)){var D=N.touches,B=D.length,j=E(this,O,N.changedTouches.length===B).event(N),z,U,V,Y;for(cT(N),U=0;U<B;++U)V=D[U],Y=el(V,this),Y=[Y,this.__zoom.invert(Y),V.identifier],j.touch0?!j.touch1&&j.touch0[2]!==Y[2]&&(j.touch1=Y,j.taps=0):(j.touch0=Y,z=!0,j.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(j.taps<2&&(f=Y[0],u=setTimeout(function(){u=null},p)),G0(this),j.start())}}function L(N,...O){if(this.__zooming){var D=E(this,O).event(N),B=N.changedTouches,j=B.length,z,U,V,Y;for(Jm(N),z=0;z<j;++z)U=B[z],V=el(U,this),D.touch0&&D.touch0[2]===U.identifier?D.touch0[0]=V:D.touch1&&D.touch1[2]===U.identifier&&(D.touch1[0]=V);if(U=D.that.__zoom,D.touch1){var Z=D.touch0[0],ct=D.touch0[1],gt=D.touch1[0],pt=D.touch1[1],lt=(lt=gt[0]-Z[0])*lt+(lt=gt[1]-Z[1])*lt,yt=(yt=pt[0]-ct[0])*yt+(yt=pt[1]-ct[1])*yt;U=_(U,Math.sqrt(lt/yt)),V=[(Z[0]+gt[0])/2,(Z[1]+gt[1])/2],Y=[(ct[0]+pt[0])/2,(ct[1]+pt[1])/2]}else if(D.touch0)V=D.touch0[0],Y=D.touch0[1];else return;D.zoom("touch",n(w(U,V,Y),D.extent,s))}}function F(N,...O){if(this.__zooming){var D=E(this,O).event(N),B=N.changedTouches,j=B.length,z,U;for(cT(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),z=0;z<j;++z)U=B[z],D.touch0&&D.touch0[2]===U.identifier?delete D.touch0:D.touch1&&D.touch1[2]===U.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(U=el(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var V=Er(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return b.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:T_(+N),b):r},b.filter=function(N){return arguments.length?(e=typeof N=="function"?N:T_(!!N),b):e},b.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:T_(!!N),b):i},b.extent=function(N){return arguments.length?(t=typeof N=="function"?N:T_([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),b):t},b.scaleExtent=function(N){return arguments.length?(o[0]=+N[0],o[1]=+N[1],b):[o[0],o[1]]},b.translateExtent=function(N){return arguments.length?(s[0][0]=+N[0][0],s[1][0]=+N[1][0],s[0][1]=+N[0][1],s[1][1]=+N[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(N){return arguments.length?(n=N,b):n},b.duration=function(N){return arguments.length?(a=+N,b):a},b.interpolate=function(N){return arguments.length?(l=N,b):l},b.on=function(){var N=c.on.apply(c,arguments);return N===c?b:N},b.clickDistance=function(N){return arguments.length?(y=(N=+N)*N,b):Math.sqrt(y)},b.tapDistance=function(N){return arguments.length?(v=+N,b):v},b}function Xi(e){return e!=null&&!Number.isNaN(e)}function ja(e,t){return+Xi(t)-+Xi(e)||Wn(e,t)}function N2(e,t){return+Xi(t)-+Xi(e)||Fd(e,t)}function qR(e){return e!=null&&`${e}`!=""}function $2(e){return isFinite(e)?e:NaN}function Eu(e){return e>0&&isFinite(e)?e:NaN}function I3(e){return e<0&&isFinite(e)?e:NaN}function VNt(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${WNt(e.getUTCFullYear())}-${ou(e.getUTCMonth()+1,2)}-${ou(e.getUTCDate(),2)}${n||r||i||o?`T${ou(n,2)}:${ou(r,2)}${i||o?`:${ou(i,2)}${o?`.${ou(o,3)}`:""}`:""}Z`:""}`}function WNt(e){return e<0?`-${ou(-e,6)}`:e>9999?`+${ou(e,6)}`:ou(e,4)}function ou(e,t){return`${e}`.padStart(t,"0")}const YNt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function gX(e,t){return YNt.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function Eg(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Fd(t,n)}const x0=1e3,Rf=x0*60,Cf=Rf*60,Sc=Cf*24,Vl=Sc*7,wd=Sc*30,mf=Sc*365,uT=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",x0],["5 seconds",5*x0],["15 seconds",15*x0],["30 seconds",30*x0],["minute",Rf],["5 minutes",5*Rf],["15 minutes",15*Rf],["30 minutes",30*Rf],["hour",Cf],["3 hours",3*Cf],["6 hours",6*Cf],["12 hours",12*Cf],["day",Sc],["2 days",2*Sc],["week",Vl],["2 weeks",2*Vl],["month",wd],["3 months",3*wd],["6 months",6*wd],["year",mf],["2 years",2*mf],["5 years",5*mf],["10 years",10*mf],["20 years",20*mf],["50 years",50*mf],["100 years",100*mf]],jR=new Map([["second",x0],["minute",Rf],["hour",Cf],["day",Sc],["monday",Vl],["tuesday",Vl],["wednesday",Vl],["thursday",Vl],["friday",Vl],["saturday",Vl],["sunday",Vl],["week",Vl],["month",wd],["year",mf]]),mX=new Map([["second",sl],["minute",S1],["hour",E1],["day",sp],["monday",Av],["tuesday",Yj],["wednesday",Hj],["thursday",Ud],["friday",Gj],["saturday",Xj],["sunday",gg],["week",gg],["month",T1],["year",bl]]),VR=new Map([["second",sl],["minute",A1],["hour",k1],["day",ZS],["monday",Ev],["tuesday",Kj],["wednesday",Jj],["thursday",qd],["friday",Zj],["saturday",Qj],["sunday",mg],["week",mg],["month",M1],["year",_l]]),W1=Symbol("intervalDuration"),R3=Symbol("intervalType");for(const[e,t]of mX)t[W1]=jR.get(e),t[R3]="time";for(const[e,t]of VR)t[W1]=jR.get(e),t[R3]="utc";const Ry=[["year",_l,"utc"],["month",M1,"utc"],["day",ZS,"utc",6*wd],["hour",k1,"utc",3*Sc],["minute",A1,"utc",6*Cf],["second",sl,"utc",30*Rf]],kw=[["year",bl,"time"],["month",T1,"time"],["day",sp,"time",6*wd],["hour",E1,"time",3*Sc],["minute",S1,"time",6*Cf],["second",sl,"time",30*Rf]],HNt=[Ry[0],kw[0],Ry[1],kw[1],Ry[2],kw[2],...Ry.slice(3)];function WR(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=VR.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function YR(e){return yX(WR(e),"time")}function C3(e){return yX(WR(e),"utc")}function yX([e,t],n){let r=(n==="time"?mX:VR).get(e);return t>1&&(r=r.every(t),r[W1]=jR.get(e)*t,r[R3]=n),r}function wF(e,t){if(!(t>1))return;const n=e[W1];if(!uT.some(([,i])=>i===n)||n%Sc===0&&Sc<n&&n<wd)return;const[r]=uT[qS(([,i])=>Math.log(i)).center(uT,Math.log(n*t))];return(e[R3]==="time"?YR:C3)(r)}function xF(e,t,n){const r=t==="time"?wI:I1;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=GNt(n);switch(e){case"millisecond":return Zp(r(".%L"),r(":%M:%S"),i);case"second":return Zp(r(":%S"),r("%-I:%M"),i);case"minute":return Zp(r("%-I:%M"),r("%p"),i);case"hour":return Zp(r("%-I %p"),r("%b %-d"),i);case"day":return Zp(r("%-d"),r("%b"),i);case"month":return Zp(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function GNt(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function XNt(e){return e==="time"?kw:e==="utc"?Ry:HNt}function KNt(e,t,n){const r=Wr(Rxt(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return xF("millisecond","utc",n);for(const[i,o,s,a]of XNt(e)){if(r>a||i==="hour"&&!r)break;if(t.every(l=>o.floor(l)>=l))return xF(i,s,n)}}function Zp(e,t,n){return(r,i,o)=>{const s=e(r,i),a=t(r,i),l=i-Eg(o);return i!==l&&o[l]!==void 0&&a===t(o[l],l)?s:n(s,a)}}const N3=Object.getPrototypeOf(Uint8Array),JNt=Object.prototype.toString;function Xu(e){return e instanceof Array||e instanceof N3}function vX(e){return e instanceof N3&&!ZNt(e)}function bX(e){return e?.prototype instanceof N3&&!QNt(e)}function ZNt(e){return e instanceof BigInt64Array||e instanceof BigUint64Array}function QNt(e){return e===BigInt64Array||e===BigUint64Array}const _X=Symbol("reindex");function ln(e,t,n){const r=typeof t;return r==="string"?OX(e)?HR(e.getChild(t),n):SF(e,wX(t),n):r==="function"?SF(e,t,n):r==="number"||t instanceof Date||r==="boolean"?pr(e,Yi(t),n):typeof t?.transform=="function"?VM(t.transform(e),n):t$t(VM(t,n),e?.[_X])}function t$t(e,t){return e!=null&&t?O3(e,t):e}function SF(e,t,n){return pr(e,bX(n)?(r,i)=>KR(t(r,i)):t,n)}function VM(e,t){return t===void 0?_h(e):DX(e)?HR(e,t):e instanceof t?e:t.from(e,bX(t)&&!vX(e)?KR:void 0)}function HR(e,t){return e==null?e:(t===void 0||t===Array)&&p$t(e.type)?xX(AF(e)):VM(AF(e),t)}function AF(e){return e.nullCount?e.toJSON():e.toArray()}const Yy=[null],wX=e=>t=>{const n=t[e];return n===void 0&&t.type==="Feature"?t.properties?.[e]:n},gi={transform:Ku},de={transform:e=>e},GR=()=>1,e$t=()=>!0,Wi=e=>e==null?e:`${e}`,Tr=e=>e==null?e:+e,$3=e=>e?e[0]:void 0,Wv=e=>e?e[1]:void 0,n$t=e=>e?e[2]:void 0,Yi=e=>()=>e;function XR(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Hf(n,t,r)}function cs(e){return vX(e)?e:pr(e,KR,Float64Array)}function KR(e){return e==null?NaN:Number(e)}function xX(e){return pr(e,SX)}function SX(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?gX(e):e==null||isNaN(e=Number(e))?void 0:new Date(e)}function Uo(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Y1(e)?[void 0,e]:[e,void 0]}function ii(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function AX(e,t,n){if(e!=null)return Xs(e,t,n)}function Xs(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function kg(e){return OX(e)?e:_h(e)}function _h(e){if(e==null||Xu(e))return e;if(DX(e))return HR(e);if(EX(e))switch(e.type){case"FeatureCollection":return e.features;case"GeometryCollection":return e.geometries;default:return[e]}return Array.from(e)}function EX(e){switch(e?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function pr(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Yv(e,t=Array){return e instanceof t?e.slice():t.from(e)}function kX({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function TX({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function rm(e){return kX(e)||TX(e)||e.interval!==void 0}function Ks(e){return e?.toString===JNt}function xd(e){return Ks(e)&&(e.type!==void 0||e.domain!==void 0)}function Yl(e){return Ks(e)&&typeof e.transform!="function"}function nh(e){return Yl(e)&&e.value===void 0&&e.channel===void 0}function MX(e,t,n,r=de){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Rl(e,t){return e===void 0&&t===void 0?[$3,Wv]:[e,t]}function wh({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Uo(t)),e===void 0&&([e]=Uo(n)),e}function Hv(e){return Xu(e)?e.length:e?.numRows}function Ku(e){const t=Hv(e),n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function O3(e,t){return Xu(e)?pr(t,n=>e[n],e.constructor):pr(t,n=>e.at(n))}function JR(e){return e.length===1?(t,n)=>e(O3(n,t)):e}function Sd(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function yu(e){return e!==null&&typeof e=="object"?e.valueOf():e}function IX(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Bs(e){let t;return[{transform:()=>t,label:Nc(e)},n=>t=n]}function ns(e){return e==null?[e]:Bs(e)}function Nc(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function O2(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return qo(r)||qo(i)?pr(r,(o,s)=>new Date((+r[s]+ +i[s])/2)):pr(r,(o,s)=>(+r[s]+ +i[s])/2,Float64Array)},label:e.label}}function D2(e,t){const n=RX(t?.interval,t?.type);return n?pr(e,n):e}function RX(e,t){const n=D3(e,t);return n&&(r=>Xi(r)?n.floor(r):r)}function D3(e,t){if(e!=null){if(typeof e=="number")return CX(e);if(typeof e=="string")return(t==="time"?YR:C3)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function CX(e){e=+e,0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const t=Math.abs(e);return e<0?{floor:n=>Math.floor(n*t)/t,offset:(n,r=1)=>(n*t+Math.floor(r))/t,range:(n,r)=>Ls(Math.ceil(n*t),r*t).map(i=>i/t)}:{floor:n=>Math.floor(n/t)*t,offset:(n,r=1)=>n+t*Math.floor(r),range:(n,r)=>Ls(Math.ceil(n/t),r/t).map(i=>i*t)}}function im(e,t){if(e=D3(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function r$t(e,t){if(e=im(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function i$t(e){return S0(e)&&typeof e?.floor=="function"&&e.floor()instanceof Date}function S0(e){return typeof e?.range=="function"}function om(e){return e===void 0||Yl(e)?e:{value:e}}function o$t(e){return e==null?null:{transform:t=>ln(t,e,Float64Array),label:Nc(e)}}function s$t(e){if(!Ju(e))return!1;for(const t of e)if(t!=null)return typeof t=="object"&&"0"in t&&"1"in t}function Ju(e){return e&&typeof e[Symbol.iterator]=="function"}function NX(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Gr(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function qo(e){for(const t of e)if(t!=null)return t instanceof Date}function a$t(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&gX(t)}function l$t(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function A0(e){for(const t of e)if(t!=null)return typeof t=="number"}function fT(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const c$t=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Y1(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||c$t.has(e))}function u$t(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Dr(e){return e==null||Tg(e)}function Tg(e){return/^\s*none\s*$/i.test(e)}function f$t(e){return/^\s*round\s*$/i.test(e)}function WM(e,t){return AX(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function H1(e="middle"){return WM(e,"frameAnchor")}function h$t(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function d$t(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function ZR(e){return Ju(e)?d$t(e):e}function $X(e){return e===!0?e="frame":e===!1?e=null:!EX(e)&&e!=null&&(e=Xs(e,"clip",["frame","sphere"]),e==="sphere"&&(e={type:"Sphere"})),e}function OX(e){return e&&typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function DX(e){return e&&typeof e.toArray=="function"&&e.type}function p$t(e){return e&&(e.typeId===8||e.typeId===10)&&e.unit===1}const ic=Symbol("position"),Zu=Symbol("color"),G1=Symbol("radius"),X1=Symbol("length"),K1=Symbol("opacity"),L3=Symbol("symbol"),LX=Symbol("projection"),jr=new Map([["x",ic],["y",ic],["fx",ic],["fy",ic],["r",G1],["color",Zu],["opacity",K1],["symbol",L3],["length",X1],["projection",LX]]);function g$t(e){return e===ic||e===LX}function m$t(e){return e===ic||e===G1||e===X1||e===K1}const FX=Math.sqrt(3),BX=2/FX,y$t={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*BX,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},QR=new Map([["asterisk",VG],["circle",Vv],["cross",WG],["diamond",HG],["diamond2",GG],["hexagon",y$t],["plus",XG],["square",KG],["square2",JG],["star",QG],["times",rX],["triangle",tX],["triangle2",eX],["wye",nX]]);function tC(e){return e&&typeof e.draw=="function"}function v$t(e){return tC(e)?!0:typeof e!="string"?!1:QR.has(e.toLowerCase())}function eC(e){if(e==null||tC(e))return e;const t=QR.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function b$t(e){if(e==null||tC(e))return[void 0,e];if(typeof e=="string"){const t=QR.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Cl({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},s){if(r===void 0&&(e!=null&&(r=nC(e)),t!=null&&!nh(t)&&(r=hT(r,iC(t))),n&&(r=hT(r,rC))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||nh(t))&&{sort:t},transform:hT(r,s)}}function go({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=nC(e)),t!=null&&!nh(t)&&(r=dT(r,iC(t))),n&&(r=dT(r,rC))),{...i,...(t===null||nh(t))&&{sort:t},initializer:dT(r,o)}}function hT(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,kg(n),r,i)}}function dT(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let s,a,l,c,u,f;return{data:a=n,facets:l=r,channels:s}=e.call(this,n,r,i,...o),{data:u=a,facets:f=l,channels:c}=t.call(this,a,l,{...i,...s},...o),{data:u,facets:f,channels:{...s,...c}}}}function F3(e,t){return(e.initializer!=null?go:Cl)(e,t)}function _$t(e,t){return F3(t,nC(e))}function nC(e){return(t,n)=>{const r=ln(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function w$t({sort:e,...t}={}){return{...F3(t,rC),sort:nh(e)?e:null}}function rC(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function x$t({seed:e,sort:t,...n}={}){return{...F3(n,zX(e==null?Math.random:DR(e))),sort:nh(t)?t:null}}function PX(e,{sort:t,...n}={}){return{...(Yl(e)&&e.channel!==void 0?go:F3)(n,iC(e)),sort:nh(t)?t:null}}function iC(e){return(typeof e=="function"&&e.length!==1?S$t:zX)(e)}function S$t(e){return(t,n)=>{const r=Xu(t)?(i,o)=>e(t[i],t[o]):(i,o)=>e(t.get(i),t.get(o));return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function zX(e){let t,n;({channel:t,value:e,order:n}={...om(e)});const r=t?.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?N2:ja),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=ja;break;case"descending":n=N2;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,s)=>{let a;if(t===void 0)a=ln(i,e);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(a=s[t],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:i,facets:o.map(c=>c.slice().sort(l))}}}function oC(e,t){return B3(null,null,e,t)}function Gv(e={y:"count"},t={}){const{x:n=de}=t;if(n==null)throw new Error("missing channel: x");return B3(n,null,e,t)}function Xv(e={x:"count"},t={}){const{y:n=de}=t;if(n==null)throw new Error("missing channel: y");return B3(null,n,e,t)}function sC(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Rl(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return B3(n,r,e,t)}function B3(e,t,{data:n=uC,filter:r,sort:i,reverse:o,...s}={},a={}){s=qX(s,a),n=WX(n,de),i=i==null?void 0:jX("sort",i,a),r=r==null?void 0:VX("filter",r,a);const[l,c]=ns(e),[u,f]=ns(t),{z:h,fill:p,stroke:g,x1:y,x2:v,y1:b,y2:_,...w}=a,[S,k]=ns(h),[E]=Uo(p),[T]=Uo(g),[M,I]=ns(E),[$,C]=ns(T);return{..."z"in a&&{z:S||h},..."fill"in a&&{fill:M||p},..."stroke"in a&&{stroke:$||g},...Cl(w,(L,F,N)=>{const O=D2(ln(L,e),N?.x),D=D2(ln(L,t),N?.y),B=ln(L,h),j=ln(L,E),z=ln(L,T),U=cC(s,{z:B,fill:j,stroke:z}),V=[],Y=[],Z=O&&c([]),ct=D&&f([]),gt=B&&k([]),pt=j&&I([]),lt=z&&C([]);let yt=0;for(const at of s)at.initialize(L);i&&i.initialize(L),r&&r.initialize(L);for(const at of F){const vt=[];for(const st of s)st.scope("facet",at);i&&i.scope("facet",at),r&&r.scope("facet",at);for(const[st,Q]of Ad(at,U))for(const[It,_t]of Ad(Q,D))for(const[Dt,Ut]of Ad(_t,O)){const xt={data:L};if(O&&(xt.x=Dt),D&&(xt.y=It),U&&(xt.z=st),!(r&&!r.reduce(Ut,xt))){vt.push(yt++),Y.push(n.reduceIndex(Ut,L,xt)),O&&Z.push(Dt),D&&ct.push(It),B&&gt.push(U===B?st:B[Ut[0]]),j&&pt.push(U===j?st:j[Ut[0]]),z&&lt.push(U===z?st:z[Ut[0]]);for(const qt of s)qt.reduce(Ut,xt);i&&i.reduce(Ut,xt)}}V.push(vt)}return YX(V,i,o),{data:Y,facets:V}}),...!Nf(s,"x")&&(l?{x:l}:{x1:y,x2:v}),...!Nf(s,"y")&&(u?{y:u}:{y1:b,y2:_}),...Object.fromEntries(s.map(({name:L,output:F})=>[L,F]))}}function Nf(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function UX(e,t,n=aC){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",I$t]),t.href!=null&&e.href===void 0&&r.push(["href",fC]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?A$t(i):n(i,o,t))}function aC(e,t,n,r=lC){let i;Ks(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const o=r(e,t,n),[s,a]=Bs(o.label);let l;return{name:e,output:i===void 0?s:{value:s,scale:i},initialize(c){o.initialize(c),l=a([])},scope(c,u){o.scope(c,u)},reduce(c,u){l.push(o.reduce(c,u))}}}function A$t(e){return{name:e,initialize(){},scope(){},reduce(){}}}function lC(e,t,n,r=P3){const i=IX(e,n),o=r(t,i);let s,a;return{label:Nc(o===L2?null:i,o.label),initialize(l){s=i===void 0?l:ln(l,i),o.scope==="data"&&(a=o.reduceIndex(Ku(l),s))},scope(l,c){o.scope===l&&(a=o.reduceIndex(c,s))},reduce(l,c){return o.scope==null?o.reduceIndex(l,s,c):o.reduceIndex(l,s,a,c)}}}function Ad(e,t){return t?hh(e,n=>t[n]):[[,e]]}function P3(e,t,n=E$t){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Ks(e))return T$t(e);if(typeof e=="function")return M$t(e);if(/^p\d{2}$/i.test(e))return tu(XR(e));switch(`${e}`.toLowerCase()){case"first":return fC;case"last":return R$t;case"identity":return uC;case"count":return L2;case"distinct":return C$t;case"sum":return t==null?L2:N$t;case"proportion":return kF(t,"data");case"proportion-facet":return kF(t,"facet");case"deviation":return tu(v1);case"min":return tu(Lr);case"min-index":return tu(kxt);case"max":return tu(Wr);case"max-index":return tu(Ext);case"mean":return EF(WS);case"median":return EF(wv);case"variance":return tu(sI);case"mode":return tu(vj)}return n(e)}function E$t(e){throw new Error(`invalid reduce: ${e}`)}function qX(e,t){return UX(e,t,jX)}function jX(e,t,n){return aC(e,t,n,VX)}function VX(e,t,n){return lC(e,t,n,WX)}function WX(e,t){return P3(e,t,k$t)}function k$t(e){switch(`${e}`.toLowerCase()){case"x":return $$t;case"y":return O$t;case"z":return HX}throw new Error(`invalid group reduce: ${e}`)}function cC(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function YX(e,t,n){if(t){const r=t.output.transform(),i=(o,s)=>ja(r[o],r[s]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function T$t(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function M$t(e){return{reduceIndex(t,n,r){return e(O3(n,t),r)}}}function tu(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function EF(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return qo(n)?new Date(r):r}}}const uC={reduceIndex(e,t){return O3(t,e)}},fC={reduceIndex(e,t){return t[e[0]]}},I$t={reduceIndex(e,t){const r=Tx(L0(e,o=>o.length,o=>t[o]),Wv),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[`… ${o.length.toLocaleString("en-US")} more`,yl(o,Wv)]}return i.map(([o,s])=>`${o} (${s.toLocaleString("en-US")})`).join(`
`)}},R$t={reduceIndex(e,t){return t[e[e.length-1]]}},L2={label:"Frequency",reduceIndex(e){return e.length}},C$t={label:"Distinct",reduceIndex(e,t){const n=new Hg;for(const r of e)n.add(t[r]);return n.size}},N$t=tu(yl);function kF(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>yl(n,o=>r[o])/i}}const $$t={reduceIndex(e,t,{x:n}){return n}},O$t={reduceIndex(e,t,{y:n}){return n}},HX={reduceIndex(e,t,{z:n}){return n}};function D$t(e){if(typeof e!="function")throw new Error(`invalid test function: ${e}`);return{reduceIndex(t,n,{data:r}){return n[t.find(Xu(r)?i=>e(r[i],i,r):i=>e(r.get(i),i,r))]}}}function Kv(e,{scale:t,type:n,value:r,filter:i,hint:o,label:s=Nc(r)},a){return o===void 0&&typeof r?.transform=="function"&&(o=r.hint),XX(a,{scale:t,type:n,value:ln(e,r),label:s,filter:i,hint:o})}function GX(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Kv(t,r,n)]))}function z3(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const s=i==null?null:t[i];return[r,s==null?o:pr(o,s)]}));return n.channels=e,n}function XX(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&fT(r,Y1)?null:"color",t.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&fT(r,u$t)?null:"opacity",t.defaultScale="opacity";break;case"symbol":n!==!0&&fT(r,v$t)?(t.scale=null,t.value=pr(r,eC)):t.scale="symbol",t.defaultScale="symbol";break;default:t.scale=jr.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!jr.has(n))throw new Error(`unknown scale: ${n}`);return t}function L$t(e,t,n,r,i){const{order:o,reverse:s,reduce:a=!0,limit:l}=i;for(const c in i){if(!jr.has(c))continue;let{value:u,order:f=o,reverse:h=s,reduce:p=a,limit:g=l}=om(i[c]);const y=u?.startsWith("-");if(y&&(u=u.slice(1)),f=f===void 0?y!==(u==="width"||u==="height")?JX:KX:P$t(f),p==null||p===!1)continue;const v=c==="fx"||c==="fy"?B$t(t,r[c]):F$t(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const b=v.value,[_=0,w=1/0]=Ju(g)?g:g<0?[g]:[0,g];if(u==null)v.domain=()=>{let S=Array.from(new Hg(b));return h&&(S=S.reverse()),(_!==0||w!==1/0)&&(S=S.slice(_,w)),S};else{const S=u==="data"?e:u==="height"?TF(n,"y1","y2"):u==="width"?TF(n,"x1","x2"):YM(n,u,u==="y"?"y2":u==="x"?"x2":void 0),k=P3(p===!0?"max":p,S);v.domain=()=>{let E=_xt(Ku(b),T=>k.reduceIndex(T,S),T=>b[T]);return f&&E.sort(f),h&&E.reverse(),(_!==0||w!==1/0)&&(E=E.slice(_,w)),E.map($3)}}}}function F$t(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function B$t(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const s=r[n[o][0]];for(const a of e[o])i[a]=s}return t}function TF(e,t,n){const r=YM(e,t),i=YM(e,n);return pr(i,(o,s)=>Math.abs(o-r[s]),Float64Array)}function YM(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function P$t(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return KX;case"descending":return JX}throw new Error(`invalid order: ${e}`)}function KX([e,t],[n,r]){return ja(t,r)||ja(e,n)}function JX([e,t],[n,r]){return N2(t,r)||ja(e,n)}function HM(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const ZX=new Map([["accent",USt],["category10",zSt],["dark2",qSt],["observable10",jSt],["paired",VSt],["pastel1",WSt],["pastel2",YSt],["set1",HSt],["set2",GSt],["set3",XSt],["tableau10",KSt]]);function z$t(e){return e!=null&&ZX.has(`${e}`.toLowerCase())}const MF=new Map([...ZX,["brbg",Xc(fV,hV)],["prgn",Xc(dV,pV)],["piyg",Xc(gV,mV)],["puor",Xc(yV,vV)],["rdbu",Xc(P4,Ox)],["rdgy",Xc(bV,_V)],["rdylbu",Xc(z4,Dx)],["rdylgn",Xc(wV,xV)],["spectral",Xc(SV,AV)],["burd",IF(P4,Ox)],["buylrd",IF(z4,Dx)],["blues",Ri(HV,GV)],["greens",Ri(XV,KV)],["greys",Ri(JV,ZV)],["oranges",Ri(rW,iW)],["purples",Ri(QV,tW)],["reds",Ri(eW,nW)],["turbo",Kc(EI)],["viridis",Kc(fW)],["magma",Kc(hW)],["inferno",Kc(n3)],["plasma",Kc(dW)],["cividis",Kc(oW)],["cubehelix",Kc(sW)],["warm",Kc(aW)],["cool",Kc(lW)],["bugn",Ri(EV,kV)],["bupu",Ri(TV,MV)],["gnbu",Ri(IV,RV)],["orrd",Ri(CV,NV)],["pubu",Ri(OV,DV)],["pubugn",Ri($V,SI)],["purd",Ri(LV,FV)],["rdpu",Ri(BV,PV)],["ylgn",Ri(UV,qV)],["ylgnbu",Ri(zV,AI)],["ylorbr",Ri(jV,VV)],["ylorrd",Ri(WV,YV)],["rainbow",RF(cW)],["sinebow",RF(uW)]]);function Ri(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?vl(t,n):e[n])}function Xc(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?vl(t,n):e[n])}function IF(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?vl(r=>t(1-r),n):e[n].slice().reverse())}function Kc(e){return({length:t})=>vl(e,Math.max(2,Math.floor(t)))}function RF(e){return({length:t})=>vl(e,Math.floor(t)+1).slice(0,-1)}function QX(e){const t=`${e}`.toLowerCase();if(!MF.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return MF.get(t)}function U3(e,t){const n=QX(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function U$t(e,t="greys"){const n=new Set,[r,i]=U3(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const CF=new Map([["brbg",hV],["prgn",pV],["piyg",mV],["puor",vV],["rdbu",Ox],["rdgy",_V],["rdylbu",Dx],["rdylgn",xV],["spectral",AV],["burd",e=>Ox(1-e)],["buylrd",e=>Dx(1-e)],["blues",GV],["greens",KV],["greys",ZV],["purples",tW],["reds",nW],["oranges",iW],["turbo",EI],["viridis",fW],["magma",hW],["inferno",n3],["plasma",dW],["cividis",oW],["cubehelix",sW],["warm",aW],["cool",lW],["bugn",kV],["bupu",MV],["gnbu",RV],["orrd",NV],["pubugn",SI],["pubu",DV],["purd",FV],["rdpu",PV],["ylgnbu",AI],["ylgn",qV],["ylorbr",VV],["ylorrd",YV],["rainbow",cW],["sinebow",uW]]);function hC(e){const t=`${e}`.toLowerCase();if(!CF.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return CF.get(t)}const q$t=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function j$t(e){return e!=null&&q$t.has(`${e}`.toLowerCase())}const tK=e=>t=>e(1-t),pT=[0,1],NF=new Map([["number",eo],["rgb",zd],["hsl",g2t],["hcl",v2t],["lab",m2t]]);function eK(e){const t=`${e}`.toLowerCase();if(!NF.has(t))throw new Error(`unknown interpolator: ${t}`);return NF.get(t)}function J1(e,t,n,{type:r,nice:i,clamp:o,zero:s,domain:a=rK(e,n),unknown:l,round:c,scheme:u,interval:f,range:h=jr.get(e)===G1?t7t(n,a):jr.get(e)===X1?e7t(n,a):jr.get(e)===K1?pT:void 0,interpolate:p=jr.get(e)===Zu?u==null&&h!==void 0?zd:hC(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?yI:eo,reverse:g}){if(a=$F(a),f=im(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof p!="function"&&(p=eK(p)),g=!!g,h!==void 0){const y=a.length,v=(h=$F(h)).length;if(y!==v){if(p.length===1)throw new Error("invalid piecewise interpolator");p=XS(p,h),h=void 0}}if(p.length===1?(g&&(p=tK(p),g=!1),h===void 0&&(h=Float64Array.from(a,(y,v)=>v/(a.length-1)),h.length===2&&(h=pT)),t.interpolate((h===pT?Yi:pC)(p))):t.interpolate(p),s){const[y,v]=di(a);(y>0||v<0)&&(a=Yv(a),(Eg(a)||1)===Math.sign(y)?a[0]=0:a[a.length-1]=0)}return g&&(a=Ix(a)),t.domain(a).unknown(l),i&&(t.nice(V$t(i,r)),a=t.domain()),h!==void 0&&t.range(h),o&&t.clamp(o),{type:r,domain:a,range:h,scale:t,interpolate:p,interval:f}}function $F(e){return e=_h(e),e.length>=2?e:[e[0],e[0]]}function V$t(e,t){return e===!0?void 0:typeof e=="number"?e:r$t(e,t)}function W$t(e,t,n){return J1(e,qu(),t,n)}function Y$t(e,t,n){return nK(e,t,{...n,exponent:.5})}function nK(e,t,{exponent:n=1,...r}){return J1(e,jj().exponent(n),t,{...r,type:"pow"})}function H$t(e,t,{base:n=10,domain:r=n7t(t),...i}){return J1(e,pg().base(n),t,{...i,domain:r})}function G$t(e,t,{constant:n=1,...r}){return J1(e,bI().constant(n),t,r)}function X$t(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:s=r7t(t),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?vl(l,i):jr.get(e)===Zu?U3(o,i):void 0),s.length>0&&(s=Vj(s,n===void 0?{length:i}:n).quantiles()),dC(e,t,{domain:s,range:n,reverse:c,unknown:a})}function K$t(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=rK(e,t),unknown:s,interpolate:a,reverse:l}){const[c,u]=di(o);let f;return n===void 0?(f=Yf(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=a!==void 0?vl(a,r):jr.get(e)===Zu?U3(i,r):void 0):(f=vl(eo(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),Eg(_h(o))<0&&f.reverse(),dC(e,t,{domain:f,range:n,reverse:l,unknown:s})}function dC(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:s=o!==void 0?vl(o,n.length+1):jr.get(e)===Zu?U3(i,n.length+1):void 0,reverse:a}){n=_h(n);const l=Eg(n);if(!isNaN(l)&&!J$t(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(s=Ix(s)),{type:"threshold",scale:Wj(l<0?Ix(n):n,s===void 0?[]:s).unknown(r),domain:n,range:s}}function J$t(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=Fd(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function Z$t(e){return{type:"identity",scale:m$t(jr.get(e))?Bj():t=>t}}function Jv(e,t=$2){return e.length?[Lr(e,({value:n})=>n===void 0?n:Lr(n,t)),Wr(e,({value:n})=>n===void 0?n:Wr(n,t))]:[0,1]}function rK(e,t){const n=jr.get(e);return(n===G1||n===K1||n===X1?Q$t:Jv)(t)}function Q$t(e){return[0,e.length?Wr(e,({value:t})=>t===void 0?t:Wr(t,$2)):1]}function t7t(e,t){const n=e.find(({radius:s})=>s!==void 0);if(n!==void 0)return[0,n.radius];const r=Hf(e,.5,({value:s})=>s===void 0?NaN:Hf(s,.25,Eu)),i=t.map(s=>3*Math.sqrt(s/r)),o=30/Wr(i);return o<1?i.map(s=>s*o):i}function e7t(e,t){const n=wv(e,({value:o})=>o===void 0?NaN:wv(o,Math.abs)),r=t.map(o=>12*o/n),i=60/Wr(r);return i<1?r.map(o=>o*i):r}function n7t(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Jv(e,Eu);if(n<0)return Jv(e,I3)}return[1,10]}function r7t(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function pC(e){return(t,n)=>r=>e(t+r*(n-t))}let GM=0,XM;function i7t(){const e=GM;return GM=0,XM=void 0,e}function ku(e){e!==XM&&(XM=e,console.warn(e),++GM)}function q3(e,t,n,r,{type:i,nice:o,clamp:s,domain:a=Jv(r),unknown:l,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:p=jr.get(e)===Zu?u==null&&f!==void 0?zd:hC(u!==void 0?u:"rdbu"):eo,reverse:g}){c=+c,a=_h(a);let[y,v]=a;if(a.length>2&&ku(`Warning: the diverging ${e} scale domain contains extra elements.`),Fd(y,v)<0&&([y,v]=[v,y],g=!g),y=Math.min(y,c),v=Math.max(v,c),typeof p!="function"&&(p=eK(p)),f!==void 0&&(p=p.length===1?pC(p)(...f):XS(p,f)),g&&(p=tK(p)),h){const b=n.apply(c),_=b-n.apply(y),w=n.apply(v)-b;_<w?y=n.invert(b-w):_>w&&(v=n.invert(b+_))}return t.domain([y,c,v]).unknown(l).interpolator(p),s&&t.clamp(s),o&&t.nice(o),{type:i,domain:[y,v],pivot:c,interpolate:p,scale:t}}function o7t(e,t,n){return q3(e,sV(),c7t,t,n)}function s7t(e,t,n){return iK(e,t,{...n,exponent:.5})}function iK(e,t,{exponent:n=1,...r}){return q3(e,cV().exponent(n=+n),h7t(n),t,{...r,type:"diverging-pow"})}function a7t(e,t,{base:n=10,pivot:r=1,domain:i=Jv(t,r<0?I3:Eu),...o}){return q3(e,aV().base(n=+n),u7t,t,{domain:i,pivot:r,...o})}function l7t(e,t,{constant:n=1,...r}){return q3(e,lV().constant(n=+n),d7t(n),t,r)}const c7t={apply(e){return e},invert(e){return e}},u7t={apply:Math.log,invert:Math.exp},f7t={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function h7t(e){return e===.5?f7t:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function d7t(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function oK(e,t,n,r){return J1(e,t,n,r)}function p7t(e,t,n){return oK(e,FSt(),t,n)}function g7t(e,t,n){return oK(e,BSt(),t,n)}const Z1=Symbol("ordinal");function sK(e,t,n,{type:r,interval:i,domain:o,range:s,reverse:a,hint:l}){return i=im(i,r),o===void 0&&(o=lK(n,i,e)),(r==="categorical"||r===Z1)&&(r="ordinal"),a&&(o=Ix(o)),o=t.domain(o).domain(),s!==void 0&&(typeof s=="function"&&(s=s(o)),t.range(s)),{type:r,domain:o,range:s,scale:t,hint:l,interval:i}}function m7t(e,t,{type:n,interval:r,domain:i,range:o,scheme:s,unknown:a,...l}){r=im(r,n),i===void 0&&(i=lK(t,r,e));let c;if(jr.get(e)===L3)c=b7t(t),o=o===void 0?_7t(c):pr(o,eC);else if(jr.get(e)===Zu&&(o===void 0&&(n==="ordinal"||n===Z1)&&(o=U$t(i,s),o!==void 0&&(s=void 0)),s===void 0&&o===void 0&&(s=n==="ordinal"?"turbo":"observable10"),s!==void 0))if(o!==void 0){const u=hC(s),f=o[0],h=o[1]-o[0];o=({length:p})=>vl(g=>u(f+h*g),p)}else o=QX(s);if(a===N4)throw new Error(`implicit unknown on ${e} scale is not supported`);return sK(e,hI().unknown(a),t,{...l,type:n,domain:i,range:o,hint:c})}function y7t(e,t,{align:n=.5,padding:r=.5,...i}){return aK($xt().align(n).padding(r),t,i,e)}function v7t(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...s}){return aK(b1().align(n).paddingInner(i).paddingOuter(o),t,s,e)}function aK(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=sK(r,e,t,n),e.round=i,e}function lK(e,t,n){const r=new Hg;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const s of i)r.add(s)}if(t!==void 0){const[i,o]=di(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&jr.get(n)===ic)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Tx(r,ja)}function OF(e,t){let n;for(const{hint:r}of e){const i=r?.[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function b7t(e){return{fill:OF(e,"fill"),stroke:OF(e,"stroke")}}function _7t(e){return Dr(e.fill)?bNt:vNt}function KM(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:s=n,round:a,nice:l,clamp:c,zero:u,align:f,padding:h,projection:p,facet:{label:g=t}={},...y}={}){const v={};for(const[b,_]of e){const w=y[b],S=dK(b,_,{round:jr.get(b)===ic?a:void 0,nice:l,clamp:c,zero:u,align:f,padding:h,projection:p,...w});if(S){let{label:k=b==="fx"||b==="fy"?g:t,percent:E,transform:T,inset:M,insetTop:I=M!==void 0?M:b==="y"?r:0,insetRight:$=M!==void 0?M:b==="x"?i:0,insetBottom:C=M!==void 0?M:b==="y"?o:0,insetLeft:L=M!==void 0?M:b==="x"?s:0}=w||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");S.percent=!!E,S.label=k===void 0?x7t(_,S):k,S.transform=T,b==="x"||b==="fx"?(S.insetLeft=+L,S.insetRight=+$):(b==="y"||b==="fy")&&(S.insetTop=+I,S.insetBottom=+C),v[b]=S}}return v}function DF(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:s,interval:a,label:l}=i;t[r]=gK(i),n[r]=o,o.type=s,a!=null&&(o.interval=a),l!=null&&(o.label=l)}return n}function w7t(e,t){const{x:n,y:r,fx:i,fy:o}=e,s=i||o?gC(t):t;i&&LF(i,s),o&&FF(o,s);const a=i||o?uK(e,t):t;n&&LF(n,a),r&&FF(r,a)}function x7t(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!vp(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function cK(e){return Math.sign(Eg(e.domain()))*Math.sign(Eg(e.range()))}function gC(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:s,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:o,height:s}}function uK({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:l}=gC(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:e?e.scale.bandwidth()+s+i:a,height:t?t.scale.bandwidth()+r+o:l,facet:{width:a,height:l}}}function LF(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:s=0}=t,a=o+n,l=i-s-r;e.range=[a,Math.max(a,l)],vp(e)||(e.range=hK(e)),e.scale.range(e.range)}fK(e)}function FF(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:s=0}=t,a=o+n,l=i-s-r;e.range=[Math.max(a,l),a],vp(e)?e.range.reverse():e.range=hK(e),e.scale.range(e.range)}fK(e)}function fK(e){e.round===void 0&&E7t(e)&&S7t(e)<=30&&e.scale.round(!0)}function S7t({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),s=t-i,a=Math.abs(r-n)/Math.max(1,s+o*2);return(a-Math.floor(a))*s}function hK(e){const t=e.scale.domain().length+pK(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function JM(e,t,n){return dK(e,n===void 0?void 0:[{hint:n}],{...t})}function dK(e,t=[],n={}){const r=A7t(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&vp({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(qo)?ku(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Qp(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Qp(r)}".`):i.some(a$t)?ku(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Qp(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Qp(r)}".`):i.some(l$t)&&ku(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Qp(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Qp(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=M_(t,n,cs);break;case"identity":switch(jr.get(e)){case ic:n=M_(t,n,cs);break;case L3:n=M_(t,n,k7t);break}break;case"utc":case"time":n=M_(t,n,xX);break}switch(r){case"diverging":return o7t(e,t,n);case"diverging-sqrt":return s7t(e,t,n);case"diverging-pow":return iK(e,t,n);case"diverging-log":return a7t(e,t,n);case"diverging-symlog":return l7t(e,t,n);case"categorical":case"ordinal":case Z1:return m7t(e,t,n);case"cyclical":case"sequential":case"linear":return W$t(e,t,n);case"sqrt":return Y$t(e,t,n);case"threshold":return dC(e,t,n);case"quantile":return X$t(e,t,n);case"quantize":return K$t(e,t,n);case"pow":return nK(e,t,n);case"log":return H$t(e,t,n);case"symlog":return G$t(e,t,n);case"utc":return g7t(e,t,n);case"time":return p7t(e,t,n);case"point":return y7t(e,t,n);case"band":return v7t(e,t,n);case"identity":return Z$t(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Qp(e){return typeof e=="symbol"?e.description:e}function BF(e){return typeof e=="string"?`${e}`.toLowerCase():e}const PF={toString:()=>"projection"};function A7t(e,t,{type:n,domain:r,range:i,scheme:o,pivot:s,projection:a}){if(n=BF(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(n=PF);for(const u of t){const f=BF(u.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===PF)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:u})=>u!==void 0))return;const l=jr.get(e);if(l===G1)return"sqrt";if(l===K1||l===X1)return"linear";if(l===L3)return"ordinal";const c=(r??i)?.length;if(c<2||c>2)return gT(l);if(r!==void 0){if(Gr(r))return gT(l);if(qo(r))return"utc"}else{const u=t.map(({value:f})=>f).filter(f=>f!==void 0);if(u.some(Gr))return gT(l);if(u.some(qo))return"utc"}if(l===Zu){if(s!=null||j$t(o))return"diverging";if(z$t(o))return"categorical"}return"linear"}function gT(e){switch(e){case ic:return"point";case Zu:return Z1;default:return"ordinal"}}function vp({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Z1}function pK({type:e}){return e==="threshold"}function E7t({type:e}){return e==="point"||e==="band"}function Ac(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function M_(e,{domain:t,...n},r){for(const i of e)i.value!==void 0&&(t===void 0&&(t=i.value?.domain),i.value=r(i.value));return{domain:t===void 0?t:r(t),...n}}function k7t(e){return pr(e,eC)}function Zv(e={}){let t;for(const n in e)if(jr.has(n)&&xd(e[n])){if(t!==void 0)throw new Error("ambiguous scale definition; multiple scales found");t=gK(JM(n,e[n]))}if(t===void 0)throw new Error("invalid scale definition; no scale found");return t}function T7t(e){return t=>{if(!jr.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function gK({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:s,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Yv(n),...r!==void 0&&{range:Yv(r)},...s!==void 0&&{transform:s},...a&&{percent:a},...c!==void 0&&{unknown:c},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function M7t(e,t){const{fx:n,fy:r}=KM(e,t),i=n?.scale.domain(),o=r?.scale.domain();return i&&o?vxt(i,o).map(([s,a],l)=>({x:s,y:a,i:l})):i?i.map((s,a)=>({x:s,i:a})):o?o.map((s,a)=>({y:s,i:a})):void 0}function I7t(e,{x:t,y:n}){return t&&=ZM(t),n&&=ZM(n),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function mC(e,{fx:t,fy:n}){const r=Ku(e),i=t?.value,o=n?.value;return t&&n?L0(r,s=>(s.fx=i[s[0]],s.fy=o[s[0]],s),s=>i[s],s=>o[s]):t?L0(r,s=>(s.fx=i[s[0]],s),s=>i[s]):L0(r,s=>(s.fy=o[s[0]],s),s=>o[s])}function R7t(e,t,{marginTop:n,marginLeft:r}){const i=e?({x:s})=>e(s)-r:()=>0,o=t?({y:s})=>t(s)-n:()=>0;return function(s){this.tagName==="svg"?(this.setAttribute("x",i(s)),this.setAttribute("y",o(s))):this.setAttribute("transform",`translate(${i(s)},${o(s)})`)}}function C7t(e){const t=[],n=new Uint32Array(yl(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const N7t=new Map([["top",mT],["right",bT],["bottom",yT],["left",vT],["top-left",I_(mT,vT)],["top-right",I_(mT,bT)],["bottom-left",I_(yT,vT)],["bottom-right",I_(yT,bT)],["top-empty",D7t],["right-empty",B7t],["bottom-empty",L7t],["left-empty",F7t],["empty",P7t]]);function $7t(e){if(e==null)return null;const t=N7t.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const zF=new WeakMap;function ZM(e){let t=zF.get(e);return t||zF.set(e,t=new Bd(pr(e,(n,r)=>[n,r]))),t}function xh(e,t){return ZM(e).get(t)}function O7t(e,t,n){return t=yu(t),n=yu(n),e.find(r=>Object.is(yu(r.x),t)&&Object.is(yu(r.y),n))}function j3(e,t,n){return O7t(e,t,n)?.empty}function mT(e,{y:t},{y:n}){return t?xh(t,n)===0:!0}function yT(e,{y:t},{y:n}){return t?xh(t,n)===t.length-1:!0}function vT(e,{x:t},{x:n}){return t?xh(t,n)===0:!0}function bT(e,{x:t},{x:n}){return t?xh(t,n)===t.length-1:!0}function D7t(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=xh(t,r);if(o>0)return j3(e,n,t[o-1])}function L7t(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=xh(t,r);if(o<t.length-1)return j3(e,n,t[o+1])}function F7t(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=xh(t,n);if(o>0)return j3(e,t[o-1],r)}function B7t(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=xh(t,n);if(o<t.length-1)return j3(e,t[o+1],r)}function P7t(e,t,{empty:n}){return n}function I_(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function _T(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>r.get(i)?.get(o)??[]):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}const mK=Math.PI,Jc=2*mK,wT=.618;function z7t({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},s){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,c="frame";if(Ks(e)){let k;if({type:e,domain:l,inset:k,insetTop:n=k!==void 0?k:n,insetRight:r=k!==void 0?k:r,insetBottom:i=k!==void 0?k:i,insetLeft:o=k!==void 0?k:o,clip:c=c,...a}=e,e==null)return}typeof e!="function"&&({type:e}=QM(e));const{width:u,height:f,marginLeft:h,marginRight:p,marginTop:g,marginBottom:y}=s,v=u-h-p-o-r,b=f-g-y-n-i;if(e=e?.({width:v,height:b,clip:c,...a}),e==null)return;c=U7t(c,h,g,u-p,f-y);let _=h+o,w=g+n,S;if(l!=null){const[[k,E],[T,M]]=q1(e).bounds(l),I=Math.min(v/(T-k),b/(M-E));I>0?(_-=(I*(k+T)-v)/2,w-=(I*(E+M)-b)/2,S=x2({point($,C){this.stream.point($*I+_,C*I+w)}})):ku("Warning: the projection could not be fit to the specified domain; using the default scale.")}return S??=_===0&&w===0?yK():x2({point(k,E){this.stream.point(k+_,E+w)}}),{stream:k=>e.stream(S.stream(c(k)))}}function QM(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Za(u8t,.7463,.4673);case"albers":return R_(xG,.7463,.4673);case"azimuthal-equal-area":return Za(f8t,4,4);case"azimuthal-equidistant":return Za(h8t,Jc,Jc);case"conic-conformal":return R_(g8t,Jc,Jc);case"conic-equal-area":return R_(S2,6.1702,2.9781);case"conic-equidistant":return R_(v8t,7.312,3.6282);case"equal-earth":return Za(_8t,5.4133,2.6347);case"equirectangular":return Za(m8t,Jc,mK);case"gnomonic":return Za(w8t,3.4641,3.4641);case"identity":return{type:yK};case"reflect-y":return{type:q7t};case"mercator":return Za(d8t,Jc,Jc);case"orthographic":return Za(x8t,2,2);case"stereographic":return Za(S8t,2,2);case"transverse-mercator":return Za(A8t,Jc,Jc);default:throw new Error(`unknown projection type: ${e}`)}}function U7t(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return sG(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Za(e,t,n){return{type:({width:r,height:i,rotate:o,precision:s=.15,clip:a})=>{const l=e();return s!=null&&l.precision?.(s),o!=null&&l.rotate?.(o),typeof a=="number"&&l.clipAngle?.(a),r!=null&&(l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2])),l},aspectRatio:n/t}}function R_(e,t,n){const{type:r,aspectRatio:i}=Za(e,t,n);return{type:o=>{const{parallels:s,domain:a,width:l,height:c}=o,u=r(o);return s!=null&&(u.parallels(s),a===void 0&&l!=null&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const yK=Yi({stream:e=>e}),q7t=Yi(x2({point(e,t){this.stream.point(e,-t)}}));function vK(e,t,n,r){const i=n[e],o=n[t],s=i.length,a=n[e]=new Float64Array(s).fill(NaN),l=n[t]=new Float64Array(s).fill(NaN);let c;const u=r.stream({point(f,h){a[c]=f,l[c]=h}});for(c=0;c<s;++c)u.point(i[c],o[c])}function j7t({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Ks(e)&&(e=e.type),e!=null)}function V7t(e){if(typeof e?.stream=="function")return wT;if(Ks(e)){let t,n;if({domain:t,type:e,...n}=e,t!=null&&e!=null){const r=typeof e=="string"?QM(e).type:e,[[i,o],[s,a]]=q1(r({...n,width:100,height:100})).bounds(t),l=(a-o)/(s-i);return l&&isFinite(l)?l<.2?.2:l>5?5:l:wT}}if(e!=null){if(typeof e!="function"){const{aspectRatio:t}=QM(e);if(t)return t}return wT}}function Q1(e,t,{projection:n}){const{x:r,y:i}=e;let o={};return r&&(o.x=r),i&&(o.y=i),o=z3(o,t),n&&r?.scale==="x"&&i?.scale==="y"&&vK("x","y",o,n),r&&(o.x=cs(o.x)),i&&(o.y=cs(o.y)),o}function W7t(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(s,a){t.push(s),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const s of e.value)_f(s,o);return[r,i]}function Y7t({x:e,y:t}){if(e||t)return e??=n=>n,t??=n=>n,x2({point(n,r){this.stream.point(e(n),t(r))}})}function V3(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:$X(n)}}function xn(e,{document:t}){return Er(w3(e).call(t.documentElement))}const t5=Symbol("unset");function Mg(e){return(e.length===1?H7t:G7t)(e)}function H7t(e){let t,n=t5;return r=>(Object.is(n,r)||(n=r,t=e(r)),t)}function G7t(e){let t,n;return(...r)=>((n?.length!==r.length||n.some((i,o)=>!Object.is(i,r[o])))&&(n=r,t=e(...r)),t)}const X7t=Mg(e=>new Intl.NumberFormat(e)),K7t=Mg((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{month:t}})),J7t=Mg((e,t)=>new Intl.DateTimeFormat(e,{timeZone:"UTC",...t&&{weekday:t}}));function bK(e="en-US"){const t=X7t(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function Z7t(e="en-US",t="short"){const n=K7t(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function Q7t(e="en-US",t="short"){const n=J7t(e,t);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function _K(e){return VNt(e,"Invalid Date")}function tOt(e="en-US"){const t=bK(e);return n=>(n instanceof Date?_K:typeof n=="number"?t:Wi)(n)}const Ig=tOt(),Hi=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let eOt=0,nOt=0;function yC(){return`plot-clip-${++eOt}`}function rOt(){return`plot-pattern-${++nOt}`}function wK(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:s,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:g,strokeDasharray:y,strokeDashoffset:v,opacity:b,mixBlendMode:_,imageFilter:w,paintOrder:S,pointerEvents:k,shapeRendering:E,channels:T},{ariaLabel:M,fill:I="currentColor",fillOpacity:$,stroke:C="none",strokeOpacity:L,strokeWidth:F,strokeLinecap:N,strokeLinejoin:O,strokeMiterlimit:D,paintOrder:B}){I===null&&(a=null,l=null),C===null&&(c=null,f=null),Dr(I)?!Dr(C)&&(!Dr(a)||T?.fill)&&(C="none"):Dr(C)&&(!Dr(c)||T?.stroke)&&(I="none");const[j,z]=Uo(a,I),[U,V]=ii(l,$),[Y,Z]=Uo(c,C),[ct,gt]=ii(f,L),[pt,lt]=ii(b);Tg(Z)||(u===void 0&&(u=F),p===void 0&&(p=N),h===void 0&&(h=O),g===void 0&&!f$t(h)&&(g=D),!Tg(z)&&S===void 0&&(S=B));const[yt,at]=ii(u);return I!==null&&(e.fill=ui(z,"currentColor"),e.fillOpacity=Zm(V,1)),C!==null&&(e.stroke=ui(Z,"none"),e.strokeWidth=Zm(at,1),e.strokeOpacity=Zm(gt,1),e.strokeLinejoin=ui(h,"miter"),e.strokeLinecap=ui(p,"butt"),e.strokeMiterlimit=Zm(g,4),e.strokeDasharray=ui(y,"none"),e.strokeDashoffset=ui(v,"0")),e.target=Wi(s),e.ariaLabel=Wi(M),e.ariaDescription=Wi(i),e.ariaHidden=Wi(o),e.opacity=Zm(lt,1),e.mixBlendMode=ui(_,"normal"),e.imageFilter=ui(w,"none"),e.paintOrder=ui(S,"normal"),e.pointerEvents=ui(k,"auto"),e.shapeRendering=ui(E,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:j,scale:"auto",optional:!0},fillOpacity:{value:U,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:ct,scale:"auto",optional:!0},strokeWidth:{value:yt,optional:!0},opacity:{value:pt,scale:"auto",optional:!0}}}function iOt(e,t){t&&e.filter(n=>qR(t[n])).append("title").call(sOt,t)}function oOt(e,t){t&&e.filter(([n])=>qR(t[n])).append("title").call(aOt,t)}function sOt(e,t){t&&e.text(n=>Ig(t[n]))}function aOt(e,t){t&&e.text(([n])=>Ig(t[n]))}function Yr(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&me(e,"aria-label",h=>r[h]),o&&me(e,"fill",h=>o[h]),s&&me(e,"fill-opacity",h=>s[h]),a&&me(e,"stroke",h=>a[h]),l&&me(e,"stroke-opacity",h=>l[h]),c&&me(e,"stroke-width",h=>c[h]),u&&me(e,"opacity",h=>u[h]),f&&SK(e,h=>f[h],t),n||iOt(e,i)}function F2(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:s,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:f}){r&&me(e,"aria-label",([h])=>r[h]),o&&me(e,"fill",([h])=>o[h]),s&&me(e,"fill-opacity",([h])=>s[h]),a&&me(e,"stroke",([h])=>a[h]),l&&me(e,"stroke-opacity",([h])=>l[h]),c&&me(e,"stroke-width",([h])=>c[h]),u&&me(e,"opacity",([h])=>u[h]),f&&SK(e,([h])=>f[h],t),n||oOt(e,i)}function lOt({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:s,opacity:a,href:l},{tip:c}){return[e,c?void 0:t,n,r,i,o,s,a,l].filter(u=>u!==void 0)}function vC(e,t,n){const r=hh(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&ku("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*xK(e,t,n,r){const{z:i}=n,{z:o}=r,s=lOt(r,n),a=[...t,...s];for(const l of o?vC(e,o,i):[e]){let c,u;t:for(const f of l){for(const h of a)if(!Xi(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=s.map(h=>yu(h[f])),u=[f];continue}u.push(f);for(let h=0;h<s.length;++h)if(yu(s[h][f])!==c[h]){yield u,c=s.map(g=>yu(g[f])),u=[f];continue t}}u&&(yield u)}}function cOt(e,t,n,r){let i;const{clip:o=r.clip}=t;o==="frame"?(e=xn("svg:g",r).each(function(){this.appendChild(e.node()),e.node=()=>this}),i=fOt(r,n)):o&&(i=dOt(o,r)),me(e,"aria-label",t.ariaLabel),me(e,"aria-description",t.ariaDescription),me(e,"aria-hidden",t.ariaHidden),me(e,"clip-path",i)}function uOt(e){const t=new WeakMap;return(n,r)=>{let i=t.get(n);if(!i){const o=yC();Er(n.ownerSVGElement).append("clipPath").attr("id",o).call(e,n,r),t.set(n,i=`url(#${o})`)}return i}}const fOt=uOt((e,t,n)=>{const{width:r,height:i,marginLeft:o,marginRight:s,marginTop:a,marginBottom:l}=n;e.append("rect").attr("x",o).attr("y",a).attr("width",r-s-o).attr("height",i-a-l)}),UF=new WeakMap,hOt={type:"Sphere"};function dOt(e,t){let n,r;if((n=UF.get(t))||UF.set(t,n=new WeakMap),e.type==="Sphere"&&(e=hOt),!(r=n.get(e))){const i=yC();Er(t.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",t.path()(e)),n.set(e,r=`url(#${i})`)}return r}function Ir(e,t,n,r){cOt(e,t,n,r),me(e,"class",t.className),me(e,"fill",t.fill),me(e,"fill-opacity",t.fillOpacity),me(e,"stroke",t.stroke),me(e,"stroke-width",t.strokeWidth),me(e,"stroke-opacity",t.strokeOpacity),me(e,"stroke-linejoin",t.strokeLinejoin),me(e,"stroke-linecap",t.strokeLinecap),me(e,"stroke-miterlimit",t.strokeMiterlimit),me(e,"stroke-dasharray",t.strokeDasharray),me(e,"stroke-dashoffset",t.strokeDashoffset),me(e,"shape-rendering",t.shapeRendering),me(e,"filter",t.imageFilter),me(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;me(e,"pointer-events",i)}function lr(e,t){pOt(e,"mix-blend-mode",t.mixBlendMode),me(e,"opacity",t.opacity)}function SK(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS($u.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS($u.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function me(e,t,n){n!=null&&e.attr(t,n)}function pOt(e,t,n){n!=null&&e.style(t,n)}function mr(e,t,{x:n,y:r},i=Hi,o=Hi){i+=t.dx,o+=t.dy,n?.bandwidth&&(i+=n.bandwidth()/2),r?.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function ui(e,t){if((e=Wi(e))!==t)return e}function Zm(e,t){if((e=Tr(e))!==t)return e}const gOt=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function bC(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!gOt.test(e))throw new Error(`invalid class name: ${e}`);return e}function _C(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function $c({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:s}){return[/left$/.test(e)?s:/right$/.test(e)?t-i:(s+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}let yr=class{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:s,fx:a,fy:l,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:p=h,marginRight:g=h,marginBottom:y=h,marginLeft:v=h,className:b,clip:_=i?.clip,channels:w,tip:S,render:k}=r;if(this.data=t,this.sort=nh(c)?c:null,this.initializer=go(r).initializer,this.transform=this.initializer?r.transform:Cl(r).transform,o===null||o===!1?this.facet=null:(this.facet=Xs(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===Yy&&typeof a=="string"?[a]:a,this.fy=t===Yy&&typeof l=="string"?[l]:l),this.facetAnchor=$7t(s),n=ZR(n),w!==void 0&&(n={...mOt(w),...n}),i!==void 0&&(n={...wK(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([E,T])=>{if(Yl(T.value)){const{value:M,label:I=T.label,scale:$=T.scale}=T.value;T={...T,label:I,scale:$,value:M}}if(t===Yy&&typeof T.value=="string"){const{value:M}=T;T={...T,value:[M]}}return[E,T]}).filter(([E,{value:T,optional:M}])=>{if(T!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${E}`)})),this.dx=+u,this.dy=+f,this.marginTop=+p,this.marginRight=+g,this.marginBottom=+y,this.marginLeft=+v,this.clip=$X(_),this.tip=yOt(S),this.className=Wi(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const E in this.channels){const{scale:T}=n[E];if(!(T!=="x"&&T!=="y"))throw new Error("super-faceting cannot use x or y")}}k!=null&&(this.render=Qv(k,this.render))}initialize(t,n,r){let i=kg(this.data);t===void 0&&i!=null&&(t=[Ku(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=kg(i)),t!==void 0&&(t.original=o);const s=GX(this.channels,i);return this.sort!=null&&L$t(i,t,s,n,this.sort),{data:i,facets:t,channels:s}}filter(t,n,r){for(const i in n){const{filter:o=Xi}=n[i];if(o!==null){const s=r[i];t=t.filter(a=>o(s[a]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&vK(i,o,n,r.projection)}}scale(t,n,r){const i=z3(t,n);return r.projection&&this.project(t,i,r),i}};function Va(...e){return e.plot=yr.prototype.plot,e}function Qv(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,s,a){return e.call(this,n,r,i,o,s,(l,c,u,f,h)=>t.call(this,l,c,u,f,h,a))}}function mOt(e){return Object.fromEntries(Object.entries(ZR(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:om(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function yOt(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Xs(e,"tip",["x","y","xy"]):e}function bp(e,t){return e?.tip===!0?{...e,tip:t}:Ks(e?.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}function vOt(e,t,n={}){let r=.5-Hi,i=.5+Hi,o=.5+Hi,s=.5-Hi;for(const{marginTop:y,marginRight:v,marginBottom:b,marginLeft:_}of t)y>r&&(r=y),v>i&&(i=v),b>o&&(o=b),_>s&&(s=_);let{margin:a,marginTop:l=a!==void 0?a:r,marginRight:c=a!==void 0?a:i,marginBottom:u=a!==void 0?a:o,marginLeft:f=a!==void 0?a:s}=n;l=+l,c=+c,u=+u,f=+f;let{width:h=640,height:p=bOt(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:s})+Math.max(0,l-r+u-o)}=n;h=+h,p=+p;const g={width:h,height:p,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f};if(e.fx||e.fy){let{margin:y,marginTop:v=y!==void 0?y:l,marginRight:b=y!==void 0?y:c,marginBottom:_=y!==void 0?y:u,marginLeft:w=y!==void 0?y:f}=n.facet??{};v=+v,b=+b,_=+_,w=+w,g.facet={marginTop:v,marginRight:b,marginBottom:_,marginLeft:w}}return g}function bOt({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:s,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const f=n&&n.scale.domain().length||1,h=V7t(i);if(h){const g=r?r.scale.domain().length:1,y=(1.1*f-.1)/(1.1*g-.1)*h,v=Math.max(.1,Math.min(10,y));return Math.round((s-u-l)*v+a+c)}const p=t?vp(t)?t.scale.domain().length||1:Math.max(7,17/f):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const g=qF("y",t)/(qF("x",e)*o),y=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,b=y*(s-u-l)-e.insetLeft-e.insetRight;return(g*b+t.insetTop+t.insetBottom)/v+a+c}return!!(t||n)*Math.max(1,Math.min(60,p*f))*20+!!r*30+60}function qF(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,s]=di(r);return Math.abs(i(s)-i(o))}const jF=new WeakMap;function wC(e,t,{x:n,y:r,px:i,py:o,maxRadius:s=40,channels:a,render:l,...c}={}){return s=+s,i!=null&&(n??=null,a={...a,px:{value:i,scale:"x"}}),o!=null&&(r??=null,a={...a,py:{value:o,scale:"y"}}),{x:n,y:r,channels:a,...c,render:Qv(function(u,f,h,p,g,y){g={...g,pointerSticky:!1};const v=g.ownerSVGElement,{data:b}=g.getMarkState(this);let _=jF.get(v);_||jF.set(v,_={sticky:!1,roots:[],renders:[]});let w=_.renders.push(Z)-1;const{x:S,y:k,fx:E,fy:T}=f;let M=E?E(u.fx)-p.marginLeft:0,I=T?T(u.fy)-p.marginTop:0;S?.bandwidth&&(M+=S.bandwidth()/2),k?.bandwidth&&(I+=k.bandwidth()/2);const $=u.fi!=null;let C;if($){let lt=_.facetStates;lt||(_.facetStates=lt=new Map),C=lt.get(this),C||lt.set(this,C=new Map)}const[L,F]=$c(this,p),{px:N,py:O}=h,D=N?lt=>N[lt]:AK(h,L),B=O?lt=>O[lt]:EK(h,F);let j,z,U,V;function Y(lt,yt){if($)if(V&&(V=cancelAnimationFrame(V)),lt==null)C.delete(u.fi);else{C.set(u.fi,yt),V=requestAnimationFrame(()=>{V=null;for(const[at,vt]of C)if(vt<yt||vt===yt&&at<u.fi){lt=null;break}Z(lt)});return}Z(lt)}function Z(lt){if(j===lt&&U===_.sticky)return;j=lt,U=g.pointerSticky=_.sticky;const yt=j==null?[]:[j];$&&(yt.fx=u.fx,yt.fy=u.fy,yt.fi=u.fi);const at=y(yt,f,h,p,g);if(z){if($){const vt=z.parentNode,st=z.getAttribute("transform"),Q=at.getAttribute("transform");st?at.setAttribute("transform",st):at.removeAttribute("transform"),Q?vt.setAttribute("transform",Q):vt.removeAttribute("transform"),at.removeAttribute("aria-label"),at.removeAttribute("aria-description"),at.removeAttribute("aria-hidden")}z.replaceWith(at)}if(_.roots[w]=z=at,!(j==null&&C?.size>1)){const vt=j==null?null:Xu(b)?b[j]:b.get(j);g.dispatchValue(vt)}return at}function ct(lt){if(_.sticky||lt.pointerType==="mouse"&&lt.buttons===1)return;let[yt,at]=el(lt);yt-=M,at-=I;const vt=yt<p.marginLeft||yt>p.width-p.marginRight?1:e,st=at<p.marginTop||at>p.height-p.marginBottom?1:t;let Q=null,It=s*s;for(const _t of u){const Dt=vt*(D(_t)-yt),Ut=st*(B(_t)-at),xt=Dt*Dt+Ut*Ut;xt<=It&&(Q=_t,It=xt)}if(Q!=null&&(e!==1||t!==1)){const _t=D(Q)-yt,Dt=B(Q)-at;It=_t*_t+Dt*Dt}Y(Q,It)}function gt(lt){lt.pointerType==="mouse"&&j!=null&&(_.sticky&&_.roots.some(yt=>yt?.contains(lt.target))||(_.sticky?(_.sticky=!1,_.renders.forEach(yt=>yt(null))):(_.sticky=!0,Z(j)),lt.stopImmediatePropagation()))}function pt(lt){lt.pointerType==="mouse"&&(_.sticky||Y(null))}return v.addEventListener("pointerenter",ct),v.addEventListener("pointermove",ct),v.addEventListener("pointerdown",gt),v.addEventListener("pointerleave",pt),Z(null)},l)}}function W3(e){return wC(1,1,e)}function Y3(e){return wC(1,.01,e)}function t1(e){return wC(.01,1,e)}function AK({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function EK({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function kK(e){return vp(e)&&e.interval===void 0?void 0:"tabular-nums"}function _Ot(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:s=18,marginRight:a=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:f=(i-c-a)/64,tickFormat:h,fontVariant:p=kK(e),round:g=!0,opacity:y,className:v}=t;const b=V3(t);v=bC(v),y=ii(y)[1],h===null&&(h=()=>null);const _=xn("svg",b).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(L=>L.append("style").text(`:where(.${v}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${v}-ramp text) {
  white-space: pre;
}`)).call(_C,u);let w=L=>L.selectAll(".tick line").attr("y1",s+l-o),S;const k=g?(L,F)=>L.rangeRound(F):(L,F)=>L.range(F),{type:E,domain:T,range:M,interpolate:I,scale:$,pivot:C}=e;if(I){const L=M===void 0?I:XS(I.length===1?pC(I):I,M);S=k($.copy(),vl(eo(c,i-a),Math.min(T.length+(C!==void 0),M===void 0?1/0:M.length)));const F=256,N=b.document.createElement("canvas");N.width=F,N.height=1;const O=N.getContext("2d");for(let D=0,B=F-1;D<F;++D)O.fillStyle=L(D/B),O.fillRect(D,0,1,1);_.append("image").attr("opacity",y).attr("x",c).attr("y",s).attr("width",i-c-a).attr("height",o-s-l).attr("preserveAspectRatio","none").attr("xlink:href",N.toDataURL())}else if(E==="threshold"){const L=T,F=h===void 0?N=>N:typeof h=="string"?Ha(h):h;S=k(qu().domain([-1,M.length-1]),[c,i-a]),_.append("g").attr("fill-opacity",y).selectAll().data(M).enter().append("rect").attr("x",(N,O)=>S(O-1)).attr("y",s).attr("width",(N,O)=>S(O)-S(O-1)).attr("height",o-s-l).attr("fill",N=>N),f=pr(L,(N,O)=>O),h=N=>F(L[N],N)}else S=k(b1().domain(T),[c,i-a]),_.append("g").attr("fill-opacity",y).selectAll().data(T).enter().append("rect").attr("x",S).attr("y",s).attr("width",Math.max(0,S.bandwidth()-1)).attr("height",o-s-l).attr("fill",$),w=()=>{};return _.append("g").attr("transform",`translate(0,${o-l})`).call(B5t(S).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ui(p,"normal")).call(w).call(L=>L.select(".domain").remove()),n!==void 0&&_.append("text").attr("x",c).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),_.node()}const B2=Math.PI/180;function sm(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=xT(n),e.markerMid=xT(r),e.markerEnd=xT(i)}function xT(e){if(e==null||e===!1)return null;if(e===!0)return WF;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return VF("auto");case"arrow-reverse":return VF("auto-start-reverse");case"dot":return wOt;case"circle":case"circle-fill":return WF;case"circle-stroke":return xOt;case"tick":return ST("auto");case"tick-x":return ST(90);case"tick-y":return ST(0)}throw new Error(`invalid marker: ${e}`)}function VF(e){return(t,n)=>xn("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function wOt(e,t){return xn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function WF(e,t){return xn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function xOt(e,t){return xn("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ST(e){return(t,n)=>xn("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let SOt=0;function tb(e,t,{stroke:n},r){return MK(e,t,n&&(i=>n[i]),null,r)}function AOt(e,t,{stroke:n,z:r},i){return MK(e,t,n&&(([o])=>n[o]),r,i)}const e5=1,TK=2;function EOt(e,t){const n=new Uint8Array(t.length),r=e.data().filter(o=>o.length>1),i=r.length;for(let o=0,s=t5;o<i;++o){const a=r[o];if(a.length>1){const l=a[0];s!==(s=yu(t[l]))&&(n[l]|=e5)}}for(let o=i-1,s=t5;o>=0;--o){const a=r[o];if(a.length>1){const l=a[0];s!==(s=yu(t[l]))&&(n[l]|=TK)}}return([o])=>n[o]}function MK(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,s,a){if(!t&&!n&&!r)return;const l=new Map,c=s&&EOt(e,s);function u(f,h,p){return function(g){if(p&&!p(g))return;const y=o(g);let v=l.get(h);v||l.set(h,v=new Map);let b=v.get(y);if(!b){const _=this.parentNode.insertBefore(h(y,a),this),w=`plot-marker-${++SOt}`;_.setAttribute("id",w),v.set(y,b=`url(#${w})`)}this.setAttribute(f,b)}}t&&e.each(u("marker-start",t,c&&(f=>c(f)&e5))),n&&c&&e.each(u("marker-start",n,f=>!(c(f)&e5))),n&&e.each(u("marker-mid",n)),r&&e.each(u("marker-end",r,c&&(f=>c(f)&TK)))}function eb({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=IK(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function nb({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=IK(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function IK(e,t,n){return e===void 0&&t===void 0&&n===void 0?Hi?[1,0]:[.5,.5]:[t,n]}function RK(e,{interval:t}){return e={...om(e)},e.interval=D3(e.interval===void 0?t:e.interval),e}function H3(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:s}=n,{value:a,interval:l}=RK(i,n);if(a==null||l==null&&!r)return n;const c=Nc(i);if(l==null){let p;const g={transform:y=>p||(p=ln(y,a)),label:c};return{...n,[e]:void 0,[`${e}1`]:o===void 0?g:o,[`${e}2`]:s===void 0&&!(o===s&&r)?g:s}}let u,f;function h(p){return f!==void 0&&p===u?f:f=pr(ln(u=p,a),g=>l.floor(g))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:h,label:c}:o,[`${e}2`]:s===void 0?{transform:p=>h(p).map(g=>l.offset(g)),label:c}:s})}function CK(e,t,n){const{[e]:r}=n,{value:i,interval:o}=RK(r,n);return i==null||o==null?n:t({...n,[e]:{label:Nc(r),transform:s=>{const a=pr(ln(s,i),c=>o.floor(c)),l=a.map(c=>o.offset(c));return a.map(qo(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function NK(e={}){return H3("x",eb,e,!0)}function $K(e={}){return H3("y",nb,e,!0)}function xC(e={}){return H3("x",eb,e)}function SC(e={}){return H3("y",nb,e)}function OK(e={}){return CK("x",eb,e)}function DK(e={}){return CK("y",nb,e)}const LK={ariaLabel:"rule",fill:null,stroke:"currentColor"};class FK extends yr{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:s=0,insetTop:a=s,insetBottom:l=s}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},bp(n,"x"),LK),this.insetTop=Tr(a),this.insetBottom=Tr(l),sm(this,n)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y1:c,y2:u}=r,{width:f,height:h,marginTop:p,marginRight:g,marginLeft:y,marginBottom:v}=i,{insetTop:b,insetBottom:_}=this;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s},Hi,0).call(w=>w.selectAll().data(t).enter().append("line").call(lr,this).attr("x1",l?S=>l[S]:(y+f-g)/2).attr("x2",l?S=>l[S]:(y+f-g)/2).attr("y1",c&&!Ac(a)?S=>c[S]+b:p+b).attr("y2",u&&!Ac(a)?a.bandwidth?S=>u[S]+a.bandwidth()-_:S=>u[S]-_:h-v-_).call(Yr,this,r).call(tb,this,r,o)).node()}}class BK extends yr{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:s=0,insetRight:a=s,insetLeft:l=s}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},bp(n,"y"),LK),this.insetRight=Tr(a),this.insetLeft=Tr(l),sm(this,n)}render(t,n,r,i,o){const{x:s,y:a}=n,{y:l,x1:c,x2:u}=r,{width:f,height:h,marginTop:p,marginRight:g,marginLeft:y,marginBottom:v}=i,{insetLeft:b,insetRight:_}=this;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{y:l&&a},0,Hi).call(w=>w.selectAll().data(t).enter().append("line").call(lr,this).attr("x1",c&&!Ac(s)?S=>c[S]+b:y+b).attr("x2",u&&!Ac(s)?s.bandwidth?S=>u[S]+s.bandwidth()-_:S=>u[S]-_:f-g-_).attr("y1",l?S=>l[S]:(p+h-v)/2).attr("y2",l?S=>l[S]:(p+h-v)/2).call(Yr,this,r).call(tb,this,r,o)).node()}}function rh(e,t){let{x:n=de,y:r,y1:i,y2:o,...s}=SC(t);return[i,o]=PK(r,i,o),new FK(e,{...s,x:n,y1:i,y2:o})}function ih(e,t){let{y:n=de,x:r,x1:i,x2:o,...s}=xC(t);return[i,o]=PK(r,i,o),new BK(e,{...s,y:n,x1:i,x2:o})}function PK(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function rb(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const kOt={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},zK="­";let G3=class extends yr{constructor(t,n={}){const{x:r,y:i,text:o=Ju(t)&&NX(t)?de:gi,frameAnchor:s,textAnchor:a=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:l=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:y,fontVariant:v,fontWeight:b,rotate:_}=n,[w,S]=ii(_,0),[k,E]=ROt(g);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:k,optional:!0},rotate:{value:o$t(w),optional:!0},text:{value:o,filter:qR,optional:!0}},n,kOt),this.rotate=S,this.textAnchor=ui(a,"middle"),this.lineAnchor=Xs(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=UK(f),this.monospace=!!h,this.fontFamily=Wi(p),this.fontSize=E,this.fontStyle=Wi(y),this.fontVariant=Wi(v),this.fontWeight=Wi(b),this.frameAnchor=H1(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=WK(this),this.clipLine=YK(this)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,rotate:u,text:f,title:h,fontSize:p}=r,{rotate:g}=this,[y,v]=$c(this,i);return xn("svg:g",o).call(Ir,this,i,o).call(VK,this,f,i).call(mr,this,{x:l&&s,y:c&&a}).call(b=>b.selectAll().data(t).enter().append("text").call(lr,this).call(TOt,this,f,h).attr("transform",rb`translate(${l?_=>l[_]:y},${c?_=>c[_]:v})${u?_=>` rotate(${u[_]})`:g?` rotate(${g})`:""}`).call(me,"font-size",p&&(_=>p[_])).call(Yr,this,r)).node()}};function UK(e){return e==null?null:Xs(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function TOt(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:s,splitLines:a,clipLine:l}=t;e.each(function(c){const u=a(Ig(n[c])??"").map(l),f=u.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let p=0;for(let g=0;g<f;++g){if(++p,!u[g])continue;const y=this.ownerDocument.createElementNS($u.svg,"tspan");y.setAttribute("x",0),g===p-1?y.setAttribute("y",`${(h+g)*o}em`):y.setAttribute("dy",`${p*o}em`),y.textContent=u[g],this.appendChild(y),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(s&&!r&&u[0]!==n[c]){const p=this.ownerDocument.createElementNS($u.svg,"title");p.textContent=n[c],this.appendChild(p)}})}function Rg(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Rl(t,n)),new G3(e,{...r,x:t,y:n})}function qK(e,{x:t=de,...n}={}){return new G3(e,DK({...n,x:t}))}function jK(e,{y:t=de,...n}={}){return new G3(e,OK({...n,y:t}))}function VK(e,t,n){me(e,"text-anchor",t.textAnchor),me(e,"font-family",t.fontFamily),me(e,"font-size",t.fontSize),me(e,"font-style",t.fontStyle),me(e,"font-variant",t.fontVariant===void 0?MOt(n):t.fontVariant),me(e,"font-weight",t.fontWeight)}function MOt(e){return e&&(A0(e)||qo(e))?"tabular-nums":void 0}const IOt=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function ROt(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),IOt.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function COt(e,t,n){const r=[];let i,o=0;for(const[s,a,l]of NOt(e)){if(i===void 0&&(i=s),o>i&&n(e,i,a)>t&&(r.push(e.slice(i,o)+(e[o-1]===zK?"-":"")),i=s),l){r.push(e.slice(i,a)),i=void 0;continue}o=a}return r}function*NOt(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case zK:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const YF={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function AC(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=am(e,i))r+=YF[e[i]]??(GK(e,i)?120:YF.e);return r}function EC(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=am(e,i))r+=GK(e,i)?126:63;return r}function WK({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?EC:AC,i=t*100;return o=>COt(o,i,r)}function YK({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?EC:AC,i=t*100;switch(n){case"clip-start":return o=>GF(o,i,r,"");case"clip-end":return o=>HF(o,i,r,"");case"ellipsis-start":return o=>GF(o,i,r,X0);case"ellipsis-middle":return o=>$Ot(o,i,r,X0);case"ellipsis-end":return o=>HF(o,i,r,X0)}}const X0="…";function Cg(e,t,n,r){const i=[];let o=0;for(let s=0,a=0,l=e.length;s<l;s=a){a=am(e,s);const c=n(e,s,a);if(o+c>t){for(o+=r;o>t&&s>0;)a=s,s=i.pop(),o-=n(e,s,a);return[s,t-o]}o+=c,i.push(s)}return[-1,0]}function HF(e,t,n,r){e=e.trim();const i=n(r),[o]=Cg(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function $Ot(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[s,a]=Cg(e,t/2,n,o),[l]=Cg(e,i-t/2-a+o,n,-o);return l<0?r:e.slice(0,s).trimEnd()+r+e.slice(am(e,l)).trimStart()}function GF(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[s]=Cg(e,i-t+o,n,-o);return s<0?r:r+e.slice(am(e,s)).trimStart()}const n5=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,XF=/\p{Extended_Pictographic}/uy;function am(e,t){return t+=OOt(e,t)?2:1,LOt(e,t)&&(t=n5.lastIndex),DOt(e,t)?am(e,t+1):t}function HK(e,t){return e.charCodeAt(t)<128}function OOt(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function DOt(e,t){return e.charCodeAt(t)===8205}function LOt(e,t){return HK(e,t)?!1:(n5.lastIndex=t,n5.test(e))}function GK(e,t){return HK(e,t)?!1:(XF.lastIndex=t,XF.test(e))}const XK={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},KK=3.5,FOt=KK*5,JK={draw(e,t,n){const r=t*n/FOt;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},ZK={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},BOt=new Map([["arrow",JK],["spike",ZK]]);function POt(e){return e&&typeof e.draw=="function"}function zOt(e){if(POt(e))return e;const t=BOt.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class X3 extends yr{constructor(t,n={}){const{x:r,y:i,r:o=KK,length:s,rotate:a,shape:l=JK,anchor:c="middle",frameAnchor:u}=n,[f,h]=ii(s,12),[p,g]=ii(a,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,XK),this.r=+o,this.length=h,this.rotate=g,this.shape=zOt(l),this.anchor=Xs(c,"anchor",["start","middle","end"]),this.frameAnchor=H1(u)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,length:u,rotate:f}=r,{length:h,rotate:p,anchor:g,shape:y,r:v}=this,[b,_]=$c(this,i);return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(w=>w.selectAll().data(t).enter().append("path").call(lr,this).attr("transform",rb`translate(${l?S=>l[S]:b},${c?S=>c[S]:_})${f?S=>` rotate(${f[S]})`:p?` rotate(${p})`:""}${g==="start"?"":g==="end"?u?S=>` translate(0,${u[S]})`:` translate(0,${h})`:u?S=>` translate(0,${u[S]/2})`:` translate(0,${h/2})`}`).attr("d",u?S=>{const k=mu();return y.draw(k,u[S],v),k}:(()=>{const S=mu();return y.draw(S,h,v),S})()).call(Yr,this,r)).node()}}function QK(e,t={}){let{x:n,y:r,...i}=t;return t.frameAnchor===void 0&&([n,r]=Rl(n,r)),new X3(e,{...i,x:n,y:r})}function tJ(e,t={}){const{x:n=de,...r}=t;return new X3(e,{...r,x:n})}function eJ(e,t={}){const{y:n=de,...r}=t;return new X3(e,{...r,y:n})}function UOt(e,t={}){const{shape:n=ZK,stroke:r=XK.stroke,strokeWidth:i=1,fill:o=r,fillOpacity:s=.3,anchor:a="start",...l}=t;return QK(e,{...l,shape:n,stroke:r,strokeWidth:i,fill:o,fillOpacity:s,anchor:a})}function Sh(e,t){return arguments.length<2&&!Ju(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function K3({anchor:e}={},t){return e===void 0?t[0]:Xs(e,"anchor",t)}function nJ(e){return K3(e,["left","right"])}function rJ(e){return K3(e,["right","left"])}function iJ(e){return K3(e,["bottom","top"])}function oJ(e){return K3(e,["top","bottom"])}function kC(){const[e,t]=Sh(...arguments);return lJ("y",nJ(t),e,t)}function sJ(){const[e,t]=Sh(...arguments);return lJ("fy",rJ(t),e,t)}function TC(){const[e,t]=Sh(...arguments);return cJ("x",iJ(t),e,t)}function aJ(){const[e,t]=Sh(...arguments);return cJ("fx",oJ(t),e,t)}function lJ(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:p,tickSize:g=e==="y"?6:0,tickPadding:y,tickRotate:v,x:b,margin:_,marginTop:w=_===void 0?20:_,marginRight:S=_===void 0?t==="right"?40:0:_,marginBottom:k=_===void 0?20:_,marginLeft:E=_===void 0?t==="left"?40:0:_,label:T,labelAnchor:M,labelArrow:I,labelOffset:$,ariaLabel:C=`${e}-axis`,...L}){return g=Tr(g),y=Tr(y),v=Tr(v),M!==void 0&&(M=Xs(M,"labelAnchor",["center","top","bottom"])),I=wJ(I),Va(g&&!Dr(o)?qOt(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:g,tickPadding:y,tickRotate:v,x:b,ariaLabel:C,...L}):null,Dr(l)?null:VOt(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:g,tickPadding:y,tickRotate:v,x:b,marginTop:w,marginRight:S,marginBottom:k,marginLeft:E,ariaLabel:C,...L}),!Dr(l)&&T!==null?Rg([],yJ({fill:l,fillOpacity:c,...L},function(F,N,O,D,B){const j=D[e],{marginTop:z,marginRight:U,marginBottom:V,marginLeft:Y}=e==="y"&&B.inset||B,Z=M??(j.bandwidth?"center":"top"),ct=$??(t==="right"?U:Y)-3;return Z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=Z,this.frameAnchor=`${Z}-${t}`,this.rotate=0),this.dy=Z==="top"?3-z:Z==="bottom"?V-3:0,this.dx=t==="right"?ct:-ct,this.ariaLabel=`${C} label`,{facets:[[0]],channels:{text:{value:[_J(e,j,{anchor:t,label:T,labelAnchor:Z,labelArrow:I})]}}}})):null)}function cJ(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:s=i,strokeWidth:a=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:p,tickSize:g=e==="x"?6:0,tickPadding:y,tickRotate:v,y:b,margin:_,marginTop:w=_===void 0?t==="top"?30:0:_,marginRight:S=_===void 0?20:_,marginBottom:k=_===void 0?t==="bottom"?30:0:_,marginLeft:E=_===void 0?20:_,label:T,labelAnchor:M,labelArrow:I,labelOffset:$,ariaLabel:C=`${e}-axis`,...L}){return g=Tr(g),y=Tr(y),v=Tr(v),M!==void 0&&(M=Xs(M,"labelAnchor",["center","left","right"])),I=wJ(I),Va(g&&!Dr(o)?jOt(e,t,n,{stroke:o,strokeOpacity:s,strokeWidth:a,tickSize:g,tickPadding:y,tickRotate:v,y:b,ariaLabel:C,...L}):null,Dr(l)?null:WOt(e,t,n,{fill:l,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:g,tickPadding:y,tickRotate:v,y:b,marginTop:w,marginRight:S,marginBottom:k,marginLeft:E,ariaLabel:C,...L}),!Dr(l)&&T!==null?Rg([],yJ({fill:l,fillOpacity:c,...L},function(F,N,O,D,B){const j=D[e],{marginTop:z,marginRight:U,marginBottom:V,marginLeft:Y}=e==="x"&&B.inset||B,Z=M??(j.bandwidth?"center":"right"),ct=$??(t==="top"?z:V)-3;return Z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${Z}`,this.textAnchor=Z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-ct:ct,this.dx=Z==="right"?U-3:Z==="left"?3-Y:0,this.ariaLabel=`${C} label`,{facets:[[0]],channels:{text:{value:[_J(e,j,{anchor:t,label:T,labelAnchor:Z,labelArrow:I})]}}}})):null)}function qOt(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:p=e==="y"?void 0:null,ariaLabel:g,...y}){return lm(eJ,e,n,{ariaLabel:`${g} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:s,frameAnchor:a,y:p,...y,dx:t==="left"?+h-Hi+ +u:+h+Hi-f,anchor:"start",length:l,shape:t==="left"?XOt:KOt})}function jOt(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:s=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:p=e==="x"?void 0:null,ariaLabel:g,...y}){return lm(tJ,e,n,{ariaLabel:`${g} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:s,frameAnchor:a,x:p,...y,dy:t==="bottom"?+h-Hi-f:+h+Hi+ +u,anchor:"start",length:l,shape:t==="bottom"?HOt:GOt})}function VOt(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>60?4*Math.cos(s*B2):0),text:l,textAnchor:c=Math.abs(s)>60?"middle":t==="left"?"end":"start",lineAnchor:u=s>60?"top":s<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:p=h,insetRight:g=h,dx:y=0,ariaLabel:v,y:b=e==="y"?void 0:null,..._}){return lm(jK,e,n,{ariaLabel:`${v} tick label`},{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:s,y:b,..._,dx:t==="left"?+y-o-a+ +p:+y+ +o+ +a-g},function(w,S,k,E,T){f===void 0&&(this.fontVariant=bJ(w)),l===void 0&&(T.text=vJ(w,S,k,E,t))})}function WOt(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:s=0,tickPadding:a=Math.max(3,9-o)+(Math.abs(s)>=10?4*Math.cos(s*B2):0),text:l,textAnchor:c=Math.abs(s)>=10?s<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(s)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:p=h,insetBottom:g=h,dy:y=0,x:v=e==="x"?void 0:null,ariaLabel:b,..._}){return lm(qK,e,n,{ariaLabel:`${b} tick label`},{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:s,x:v,..._,dy:t==="bottom"?+y+ +o+ +a-g:+y-o-a+ +p},function(w,S,k,E,T){f===void 0&&(this.fontVariant=bJ(w)),l===void 0&&(T.text=vJ(w,S,k,E,t))})}function uJ(){const[e,t]=Sh(...arguments);return pJ("y",nJ(t),e,t)}function fJ(){const[e,t]=Sh(...arguments);return pJ("fy",rJ(t),e,t)}function hJ(){const[e,t]=Sh(...arguments);return gJ("x",iJ(t),e,t)}function dJ(){const[e,t]=Sh(...arguments);return gJ("fx",oJ(t),e,t)}function pJ(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:s=t==="right"?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return lm(ih,e,n,{ariaLabel:a,ariaHidden:l},{y:r,x1:o,x2:s,...mJ(c)})}function gJ(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:s=t==="bottom"?i:null,ariaLabel:a=`${e}-grid`,ariaHidden:l=!0,...c}){return lm(rh,e,n,{ariaLabel:a,ariaHidden:l},{x:r,y1:o,y2:s,...mJ(c)})}function mJ({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function yJ({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},f){return[,e]=Uo(e),[,t]=ii(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:s,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:f}}function lm(e,t,n,r,i,o){let s;function a(u,f,h,p,g,y){const v=u==null&&(t==="fx"||t==="fy"),{[t]:b}=p;if(!b)throw new Error(`missing scale: ${t}`);const _=b.domain();let{interval:w,ticks:S,tickFormat:k,tickSpacing:E=t==="x"?80:35}=i;if(typeof S=="string"&&xJ(b)&&(w=S,S=void 0),S===void 0&&(S=im(w,b.type)??YOt(b,E)),u==null){if(Ju(S))u=_h(S);else if(S0(S))u=AT(S,...di(_));else if(b.interval){let M=b.interval;if(b.ticks){const[I,$]=di(_),C=($-I)/M[W1];M=wF(M,C/S)??M,u=AT(M,I,$)}else{u=_;const I=u.length;M=wF(M,I/S)??M,M!==b.interval&&(u=AT(M,...di(u)))}if(M===b.interval){const I=Math.round(u.length/S);I>1&&(u=u.filter(($,C)=>C%I===0))}}else b.ticks?u=b.ticks(S):u=_;if(!b.ticks&&u.length&&u!==_){const M=new Hg(_);u=u.filter(I=>M.has(I)),u.length||ku(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?f=[Ku(u)]:s[t]={scale:t,value:de}}o?.call(this,b,u,S,k,s);const T=Object.fromEntries(Object.entries(s).map(([M,I])=>[M,{...I,value:ln(u,I.value)}]));return v&&(f=y.filterFacets(u,T)),{data:u,facets:f,channels:T}}const l=go(i).initializer,c=e(n,go({...i,initializer:a},l));return n==null?(s=c.channels,c.channels={}):s={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function YOt(e,t){const[n,r]=di(e.range());return(r-n)/t}function vJ(e,t,n,r,i){return{value:MC(e,t,n,r,i)}}function MC(e,t,n,r,i){return typeof r=="function"&&!(e.type==="log"&&e.tickFormat)?r:r===void 0&&t&&qo(t)?KNt(e.type,t,i)??Ig:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&e.domain().length>0?(qo(e.domain())?I1:Ha)(r):r===void 0?Ig:Yi(r)}function AT(e,t,n){return e.range(t,e.offset(e.floor(n)))}const HOt={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},GOt={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},XOt={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},KOt={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function bJ(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function _J(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&xJ(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const s=cK(t);s&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===s<0?"left":"right":s<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function wJ(e="auto"){return Dr(e)?!1:typeof e=="boolean"?e:Xs(e,"labelArrow",["auto","up","right","down","left"])}function xJ(e){return qo(e.domain())}function KF(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function JOt(e,{opacity:t,...n}={}){if(!vp(e)&&!pK(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return SJ(e,n,(r,i,o,s)=>r.append("svg").attr("width",o).attr("height",s).attr("fill",i.scale).attr("fill-opacity",ii(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function ZOt(e,{fill:t=e.hint?.fill!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=e.hint?.stroke!==void 0?e.hint.stroke:Dr(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:s=4.5,...a}={},l){const[c,u]=Uo(t),[f,h]=Uo(r),p=KF(l,c),g=KF(l,f),y=s*s*Math.PI;return n=ii(n)[1],i=ii(i)[1],o=ii(o)[1],SJ(e,a,(v,b,_,w)=>v.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",w).attr("fill",c==="color"?S=>p.scale(S):u).attr("fill-opacity",n).attr("stroke",f==="color"?S=>g.scale(S):h).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",S=>{const k=mu();return e.scale(S).draw(k,y),k}))}function SJ(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=kK(e),swatchSize:s=15,swatchWidth:a=s,swatchHeight:l=s,marginLeft:c=0,className:u,style:f,width:h}=t;const p=V3(t);u=bC(u),i=MC(e.scale,e.domain,void 0,i);const g=xn("div",p).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let y;return r!=null?(y=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,a,l).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(y=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),g.call(v=>v.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${y}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",ui(o,"normal")).call(_C,f).node()}const P2=new Map([["symbol",ZOt],["color",AJ],["opacity",eDt]]);function QOt(e={}){for(const[t,n]of P2){const r=e[t];if(xd(r)){const i=V3(e);let o;if(t==="symbol"){const{fill:s,stroke:a=s===void 0&&xd(e.color)?"color":void 0}=e;o={fill:s,stroke:a}}return n(JM(t,r,o),IC(i,r,e),s=>xd(e[s])?JM(s,e[s]):null)}}throw new Error("unknown legend type; no scale found")}function tDt(e,t,n={}){return(r,i)=>{if(!P2.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return P2.get(r)(e[r],IC(t,n[r],i),o=>e[o])}}function IC({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return h$t(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function AJ(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return JOt(e,n);case"ramp":return _Ot(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function eDt({type:e,interpolate:t,...n},{legend:r=!0,color:i=ms(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return AJ({type:e,...n,interpolate:nDt(i)},{legend:r,...o})}function nDt(e){const{r:t,g:n,b:r}=ms(e)||ms(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function rDt(e,t,n){const r=[];for(const[i,o]of P2){const s=n[i];if(s?.legend&&i in e){const a=o(e[i],IC(t,e[i],s),l=>e[l]);a!=null&&r.push(a)}}return r}function J3(e={},t="x"){return kX(e)?e:{...e,[t]:de}}function Z3(e={},t="y"){return TX(e)?e:{...e,[t]:de}}function EJ(e,t){if(t.length===1)return{data:e,facets:t};const n=Hv(e),r=new Uint8Array(n);let i=0;for(const a of t)for(const l of a)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Yv(e);const o=e[_X]=new Uint32Array(n+i);t=t.map(a=>Yv(a,Uint32Array));let s=n;r.fill(0);for(const a of t)for(let l=0,c=a.length;l<c;++l){const u=a[l];r[u]?(a[l]=s,e[s]=e[u],o[s]=u,++s):o[u]=u,r[u]=1}return{data:e,facets:t}}function kJ(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{y1:n,y:r=n,x:i,...o}=t,[s,a,l,c]=um(r,i,"y","x",e,o);return{...s,y1:n,y:a,x1:l,x2:c,x:O2(l,c)}}function iDt(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{y1:n,y:r=n,x:i}=t,[o,s,a]=um(r,i,"y","x",e,t);return{...o,y1:n,y:s,x:a}}function oDt(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{y1:n,y:r=n,x:i}=t,[o,s,,a]=um(r,i,"y","x",e,t);return{...o,y1:n,y:s,x:a}}function TJ(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{x1:n,x:r=n,y:i,...o}=t,[s,a,l,c]=um(r,i,"x","y",e,o);return{...s,x1:n,x:a,y1:l,y2:c,y:O2(l,c)}}function sDt(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{x1:n,x:r=n,y:i}=t,[o,s,a]=um(r,i,"x","y",e,t);return{...o,x1:n,x:s,y:a}}function aDt(e={},t={}){arguments.length===1&&([e,t]=cm(e));const{x1:n,x:r=n,y:i}=t,[o,s,,a]=um(r,i,"x","y",e,t);return{...o,x1:n,x:s,y:a}}function Q3({x:e,x1:t,x2:n,...r}={}){return r=bp(r,"y"),t===void 0&&n===void 0?kJ({x:e,...r}):([t,n]=MX(e,t,n),{...r,x1:t,x2:n})}function tA({y:e,y1:t,y2:n,...r}={}){return r=bp(r,"x"),t===void 0&&n===void 0?TJ({y:e,...r}):([t,n]=MX(e,t,n),{...r,y1:t,y2:n})}function cm(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const lDt={length:!0};function um(e,t=GR,n,r,{offset:i,order:o,reverse:s},a){if(t===null)throw new Error(`stack requires ${r}`);const l=wh(a),[c,u]=ns(e),[f,h]=Bs(t),[p,g]=Bs(t);return f.hint=p.hint=lDt,i=cDt(i),o=hDt(o,i,r),[Cl(a,(y,v,b)=>{({data:y,facets:v}=EJ(y,v));const _=e==null?void 0:u(D2(ln(y,e),b?.[n])),w=ln(y,t,Float64Array),S=ln(y,l),k=o&&o(y,_,w,S),E=Hv(y),T=h(new Float64Array(E)),M=g(new Float64Array(E)),I=[];for(const $ of v){const C=_?Array.from(hh($,L=>_[L]).values()):[$];if(k)for(const L of C)L.sort(k);for(const L of C){let F=0,N=0;s&&L.reverse();for(const O of L){const D=w[O];D<0?F=M[O]=(T[O]=F)+D:D>0?N=M[O]=(T[O]=N)+D:M[O]=T[O]=N}}I.push(C)}return i&&i(I,T,M,S),{data:y,facets:v}}),c,f,p]}function cDt(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return uDt;case"center":case"silhouette":return fDt;case"wiggle":return IJ}throw new Error(`unknown offset: ${e}`)}}function MJ(e,t){let n=0,r=0;for(const i of e){const o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function uDt(e,t,n){for(const r of e)for(const i of r){const[o,s]=MJ(i,n);for(const a of i){const l=1/(s-o||1);t[a]=l*(t[a]-o),n[a]=l*(n[a]-o)}}}function fDt(e,t,n){for(const r of e){for(const i of r){const[o,s]=MJ(i,n);for(const a of i){const l=(s+o)/2;t[a]-=l,n[a]-=l}}RJ(r,t,n)}CJ(e,t,n)}function IJ(e,t,n,r){for(const i of e){const o=new Bd;let s=0;for(const a of i){let l=-1;const c=a.map(p=>Math.abs(n[p]-t[p])),u=a.map(p=>{l=r?r[p]:++l;const g=n[p]-t[p],y=o.has(l)?g-o.get(l):0;return o.set(l,g),y}),f=[0,...bxt(u)];for(const p of a)t[p]+=s,n[p]+=s;const h=yl(c);h&&(s-=yl(c,(p,g)=>(u[g]/2+f[g])*p)/h)}RJ(i,t,n)}CJ(e,t,n)}function RJ(e,t,n){const r=Lr(e,i=>Lr(i,o=>t[o]));for(const i of e)for(const o of i)t[o]-=r,n[o]-=r}function CJ(e,t,n){const r=e.length;if(r===1)return;const i=e.map(a=>a.flat()),o=i.map(a=>(Lr(a,l=>t[l])+Wr(a,l=>n[l]))/2),s=Lr(o);for(let a=0;a<r;a++){const l=s-o[a];for(const c of i[a])t[c]+=l,n[c]+=l}}function hDt(e,t,n){if(e===void 0&&t===IJ)return JF(ja);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?N2:ja;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return dDt(i);case"z":return pDt(i);case"sum":return gDt(i);case"appearance":return mDt(i);case"inside-out":return JF(i)}return ZF(wX(e))}if(typeof e=="function")return(e.length===1?ZF:yDt)(e);if(Xu(e))return vDt(e);throw new Error(`invalid order: ${e}`)}}function dDt(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function pDt(e){return(t,n,r,i)=>(o,s)=>e(i[o],i[s])}function gDt(e){return eA(e,(t,n,r,i)=>cI(Ku(t),o=>yl(o,s=>r[s]),o=>i[o]))}function mDt(e){return eA(e,(t,n,r,i)=>cI(Ku(t),o=>n[fI(o,s=>r[s])],o=>i[o]))}function JF(e){return eA(e,(t,n,r,i)=>{const o=Ku(t),s=cI(o,f=>n[fI(f,h=>r[h])],f=>i[f]),a=L0(o,f=>yl(f,h=>r[h]),f=>i[f]),l=[],c=[];let u=0;for(const f of s)u<0?(u+=a.get(f),l.push(f)):(u-=a.get(f),c.push(f));return c.reverse().concat(l)})}function ZF(e){return t=>{const n=ln(t,e);return(r,i)=>ja(n[r],n[i])}}function yDt(e){return t=>Xu(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r))}function vDt(e){return eA(ja,()=>e)}function eA(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const s=new Bd(t(n,r,i,o).map((a,l)=>[a,l]));return(a,l)=>e(s.get(o[a]),s.get(o[l]))}}const bDt={ariaLabel:"rect"};class nA extends yr{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:s}=n;super(t,{x1:{value:r,scale:"x",type:r!=null&&o==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,bDt),RC(this,n),CC(this,n)}render(t,n,r,i,o){const{x:s,y:a}=n;let{x1:l,y1:c,x2:u,y2:f}=r;const{marginTop:h,marginRight:p,marginBottom:g,marginLeft:y,width:v,height:b}=i,{projection:_}=o,{insetTop:w,insetRight:S,insetBottom:k,insetLeft:E}=this,{rx:T,ry:M,rx1y1:I,rx1y2:$,rx2y1:C,rx2y2:L}=this;(l||u)&&!_&&Ac(s)&&(l=u=null),(c||f)&&!_&&Ac(a)&&(c=f=null);const F=s?.bandwidth?s.bandwidth():0,N=a?.bandwidth?a.bandwidth():0;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{},0,0).call(O=>O.selectAll().data(t).enter().call(I||$||C||L?D=>D.append("path").call(lr,this).call(NC,l&&u?B=>l[B]+(u[B]<l[B]?-S:E):l?B=>l[B]+E:y+E,c&&f?B=>c[B]+(f[B]<c[B]?-k:w):c?B=>c[B]+w:h+w,l&&u?B=>u[B]-(u[B]<l[B]?-E:S):l?B=>l[B]+F-S:v-p-S,c&&f?B=>f[B]-(f[B]<c[B]?-w:k):c?B=>c[B]+N-k:b-g-k,this).call(Yr,this,r):D=>D.append("rect").call(lr,this).attr("x",l?u?B=>Math.min(l[B],u[B])+E:B=>l[B]+E:y+E).attr("y",c?f?B=>Math.min(c[B],f[B])+w:B=>c[B]+w:h+w).attr("width",l?u?B=>Math.max(0,Math.abs(u[B]-l[B])+F-E-S):F-E-S:v-p-y-S-E).attr("height",c?f?B=>Math.max(0,Math.abs(c[B]-f[B])+N-w-k):N-w-k:b-h-g-w-k).call(me,"rx",T).call(me,"ry",M).call(Yr,this,r))).node()}}function RC(e,{inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={}){e.insetTop=Tr(n),e.insetRight=Tr(r),e.insetBottom=Tr(i),e.insetLeft=Tr(o)}function CC(e,{r:t,rx:n,ry:r,rx1:i=t,ry1:o=t,rx2:s=t,ry2:a=t,rx1y1:l=i!==void 0?+i:o!==void 0?+o:0,rx1y2:c=i!==void 0?+i:a!==void 0?+a:0,rx2y1:u=s!==void 0?+s:o!==void 0?+o:0,rx2y2:f=s!==void 0?+s:a!==void 0?+a:0}={}){l||c||u||f?(e.rx1y1=l,e.rx1y2=c,e.rx2y1=u,e.rx2y2=f):(e.rx=ui(n,"auto"),e.ry=ui(r,"auto"))}function NC(e,t,n,r,i,o){const{rx1y1:s,rx1y2:a,rx2y1:l,rx2y2:c}=o;typeof t!="function"&&(t=Yi(t)),typeof n!="function"&&(n=Yi(n)),typeof r!="function"&&(r=Yi(r)),typeof i!="function"&&(i=Yi(i));const u=Math.max(Math.abs(s+l),Math.abs(a+c)),f=Math.max(Math.abs(s+a),Math.abs(l+c));e.attr("d",h=>{const p=t(h),g=n(h),y=r(h),v=i(h),b=p>y,_=g>v,w=b?y:p,S=b?p:y,k=_?v:g,E=_?g:v,T=Math.min(1,(S-w)/u,(E-k)/f),M=T*(b?_?c:l:_?a:s),I=T*(b?_?a:s:_?c:l),$=T*(b?_?s:a:_?l:c),C=T*(b?_?l:c:_?s:a);return`M${w},${k+N_(M,C)}A${M},${M} 0 0 ${M<0?0:1} ${w+C_(M,C)},${k}H${S-C_(I,$)}A${I},${I} 0 0 ${I<0?0:1} ${S},${k+N_(I,$)}V${E-N_($,I)}A${$},${$} 0 0 ${$<0?0:1} ${S-C_($,I)},${E}H${w+C_(C,M)}A${C},${C} 0 0 ${C<0?0:1} ${w},${E-N_(C,M)}Z`})}function C_(e,t){return t<0?e:Math.abs(e)}function N_(e,t){return t<0?Math.abs(e):e}function $C(e,t){return new nA(e,NK($K(t)))}function z2(e,t={}){return rm(t)||(t={...t,y:gi,x2:de,interval:1}),new nA(e,Q3($K(J3(t))))}function U2(e,t={}){return rm(t)||(t={...t,x:gi,y2:de,interval:1}),new nA(e,tA(NK(Z3(t))))}const _Dt={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},wDt={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class NJ extends yr{constructor(t={}){const{anchor:n=null}=t;super(Yy,void 0,t,n==null?_Dt:wDt),this.anchor=AX(n,"anchor",["top","right","bottom","left"]),RC(this,t),n||CC(this,t)}render(t,n,r,i,o){const{marginTop:s,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:f}=i,{anchor:h,insetTop:p,insetRight:g,insetBottom:y,insetLeft:v}=this,{rx:b,ry:_,rx1y1:w,rx1y2:S,rx2y1:k,rx2y2:E}=this,T=c+v,M=u-a-g,I=s+p,$=f-l-y;return xn(h?"svg:line":w||S||k||E?"svg:path":"svg:rect",o).datum(0).call(Ir,this,i,o).call(lr,this).call(Yr,this,r).call(mr,this,{}).call(h==="left"?C=>C.attr("x1",T).attr("x2",T).attr("y1",I).attr("y2",$):h==="right"?C=>C.attr("x1",M).attr("x2",M).attr("y1",I).attr("y2",$):h==="top"?C=>C.attr("x1",T).attr("x2",M).attr("y1",I).attr("y2",I):h==="bottom"?C=>C.attr("x1",T).attr("x2",M).attr("y1",$).attr("y2",$):w||S||k||E?C=>C.call(NC,T,I,M,$,this):C=>C.attr("x",T).attr("y",I).attr("width",M-T).attr("height",$-I).attr("rx",b).attr("ry",_)).node()}}function OC(e){return new NJ(e)}const ET={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},xDt=new Set(["geometry","href","src","ariaLabel","scales"]);class $J extends yr{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Ju(t)&&NX(t)&&(n={...n,title:de});const{x:r,y:i,x1:o,x2:s,y1:a,y2:l,anchor:c,preferredAnchor:u="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:y,fontWeight:v,lineHeight:b=1,lineWidth:_=20,frameAnchor:w,format:S,textAnchor:k="start",textOverflow:E,textPadding:T=8,title:M,pointerSize:I=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&s!=null?null:r,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:s==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:s,scale:"x",optional:o==null},y2:{value:l,scale:"y",optional:a==null},title:{value:M,optional:!0}},n,ET),this.anchor=WM(c,"anchor"),this.preferredAnchor=WM(u,"preferredAnchor"),this.frameAnchor=H1(w),this.textAnchor=ui(k,"middle"),this.textPadding=+T,this.pointerSize=+I,this.pathFilter=Wi($),this.lineHeight=+b,this.lineWidth=+_,this.textOverflow=UK(E),this.monospace=!!f,this.fontFamily=Wi(h),this.fontSize=Tr(p),this.fontStyle=Wi(g),this.fontVariant=Wi(y),this.fontWeight=Wi(v);for(const C in ET)C in this.channels&&(this[C]=ET[C]);this.splitLines=WK(this),this.clipLine=YK(this),this.format=typeof S=="string"||typeof S=="function"?{title:S}:{...S}}render(t,n,r,i,o){const s=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=o,{anchor:p,monospace:g,lineHeight:y,lineWidth:v}=this,{textPadding:b,pointerSize:_,pathFilter:w}=this,{marginTop:S,marginLeft:k}=i,{x1:E,y1:T,x2:M,y2:I,x:$=E??M,y:C=T??I}=r,L=c?c(t.fx)-k:0,F=u?u(t.fy)-S:0,[N,O]=$c(this,i),D=AK(r,N),B=EK(r,O),j=g?EC:AC,z=j(X0);let U,V;"title"in r?(U=QF.call(this,{title:r.channels.title},n),V=kDt):(U=QF.call(this,r.channels,n),V=TDt);const Y=xn("svg:g",o).call(Ir,this,i,o).call(VK,this).call(mr,this,{x:$&&a,y:C&&l}).call(gt=>gt.selectAll().data(t).enter().append("g").attr("transform",pt=>`translate(${Math.round(D(pt))},${Math.round(B(pt))})`).call(lr,this).call(pt=>pt.append("path").attr("filter",w)).call(pt=>pt.append("text").each(function(lt){const yt=Er(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const at=V.call(s,lt,t,U,n,r);if(typeof at=="string")for(const vt of s.splitLines(at))Z(yt,{value:s.clipLine(vt)});else{const vt=new Set;for(const st of at){const{label:Q=""}=st;Q&&vt.has(Q)||(vt.add(Q),Z(yt,st))}}})));function Z(gt,{label:pt,value:lt,color:yt,opacity:at}){pt??="",lt??="";const vt=yt!=null||at!=null;let st,Q=v*100;const[It]=Cg(pt,Q,j,z);if(It>=0)pt=pt.slice(0,It).trimEnd()+X0,st=lt.trim(),lt="";else{(pt||!lt&&!vt)&&(lt=" "+lt);const[Dt]=Cg(lt,Q-j(pt),j,z);Dt>=0&&(st=lt.trim(),lt=lt.slice(0,Dt).trimEnd()+X0)}const _t=gt.append("tspan").attr("x",0).attr("dy",`${y}em`).text("​");pt&&_t.append("tspan").attr("font-weight","bold").text(pt),lt&&_t.append(()=>h.createTextNode(lt)),vt&&_t.append("tspan").text(" ■").attr("fill",yt).attr("fill-opacity",at).style("user-select","none"),st&&_t.append("title").text(st)}function ct(){const{width:gt,height:pt}=i.facet??i;Y.selectChildren().each(function(lt){let{x:yt,width:at,height:vt}=this.getBBox();at=Math.round(at),vt=Math.round(vt);let st=p;if(st===void 0){const _t=D(lt)+L,Dt=B(lt)+F,Ut=_t+at+_+b*2<gt,xt=_t-at-_-b*2>0,qt=Dt+vt+_+b*2<pt,ue=Dt-vt-_-b*2>0;st=Ut&&xt?qt&&ue?s.preferredAnchor:ue?"bottom":"top":qt&&ue?Ut?"left":"right":(Ut||xt)&&(qt||ue)?`${ue?"bottom":"top"}-${Ut?"left":"right"}`:s.preferredAnchor}const Q=this.firstChild,It=this.lastChild;if(Q.setAttribute("d",EDt(st,_,b,at,vt)),yt)for(const _t of It.childNodes)_t.setAttribute("x",-yt);It.setAttribute("y",`${+SDt(st,It.childNodes.length,y).toFixed(6)}em`),It.setAttribute("transform",`translate(${ADt(st,_,b,at,vt)})`)}),Y.attr("visibility",null)}return t.length&&(Y.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(ct):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ct)),Y.node()}}function OJ(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Rl(t,n)),new $J(e,{...r,x:t,y:n})}function SDt(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function ADt(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function EDt(e,t,n,r,i){const o=r+n*2,s=i+n*2;switch(e){case"middle":return`M${-o/2},${-s/2}h${o}v${s}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${s}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${s}h${-o}v${-s}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${s}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-s/2}h${-o}v${s}h${o}v${t/2-s/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-s}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-s}h${-o}v${s}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-s}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-s/2}h${o}v${s}h${-o}v${t/2-s/2}z`}}function QF(e,t){const n={};let r=this.format;r=tB(r,e,"x"),r=tB(r,e,"y"),this.format=r;for(const i in r){const o=r[i];if(!(o===null||o===!1))if(i==="fx"||i==="fy")n[i]=!0;else{const s=HM(e,i);s&&(n[i]=s)}}for(const i in e){if(i in n||i in r||xDt.has(i)||(i==="x"||i==="y")&&e.geometry)continue;const o=HM(e,i);if(o){if(o.scale==null&&o.defaultScale==="color")continue;n[i]=o}}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const i in n){const o=this.format[i];if(typeof o=="string"){const s=n[i]?.value??t[i]?.domain()??[];this.format[i]=(qo(s)?I1:Ha)(o)}else if(o===void 0||o===!0){const s=t[i];this.format[i]=s?.bandwidth?MC(s,s.domain()):Ig}}return n}function tB(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),s=e[n];return o.splice(o.findIndex(([a])=>a===n)+1,0,[r,s],[i,s]),Object.fromEntries(o)}function kDt(e,t,{title:n}){return this.format.title(n.value[e],e)}function*TDt(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:q2(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const s=n[o];if(o==="x2"&&"x1"in n)yield{label:nB(r,n,"x"),value:eB(this.format.x2,n.x1,s,e)};else if(o==="y2"&&"y1"in n)yield{label:nB(r,n,"y"),value:eB(this.format.y2,n.y1,s,e)};else{const a=s.value[e],l=s.scale;if(!Xi(a)&&l==null)continue;yield{label:q2(r,n,o),value:this.format[o](a,e),color:l==="color"?i[o][e]:null,opacity:l==="opacity"?i[o][e]:null}}}}function eB(e,t,n,r){return n.hint?.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function nB(e,t,n){const r=q2(e,t,`${n}1`,n),i=q2(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function q2(e,t,n,r=n){const i=t[n],o=e[i?.scale??n];return String(o?.label??i?.label??r)}function DC(e={}){const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:s,ariaDescription:a}=e,l=bC(e.className),c=e.marks===void 0?[]:iB(e.marks);c.push(...ODt(c));const u=NDt(t,e),f=new Map;for(const z of c){const U=oB(z,u,e);U&&f.set(z,U)}const h=new Map;u&&Qm(h,[u],e),Qm(h,f,e);const p=iB(DDt(c,h,e));for(const z of p){const U=oB(z,u,e);U&&f.set(z,U)}c.unshift(...p);let g=M7t(h,e);if(g!==void 0){const z=u?_T(g,u):void 0;for(const V of c){if(V.facet===null||V.facet==="super")continue;const Y=f.get(V);Y!==void 0&&(Y.facetsIndex=V.fx!=null||V.fy!=null?_T(g,Y):z)}const U=new Set;for(const{facetsIndex:V}of f.values())V?.forEach((Y,Z)=>{Y?.length>0&&U.add(Z)});g.forEach(0<U.size&&U.size<g.length?(V,Y)=>V.empty=!U.has(Y):V=>V.empty=!1);for(const V of c)if(V.facet==="exclude"){const Y=f.get(V);Y!==void 0&&(Y.facetsIndex=C7t(Y.facetsIndex))}}for(const z of jr.keys())xd(e[z])&&z!=="fx"&&z!=="fy"&&h.set(z,[]);const y=new Map;for(const z of c){if(y.has(z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:V}=f.get(z)??{},{data:Y,facets:Z,channels:ct}=z.initialize(U,V,e);LC(ct,e),y.set(z,{data:Y,facets:Z,channels:ct})}const v=KM(Qm(h,y,e),e),b=vOt(v,c,e);w7t(v,b);const _=DF(v),{fx:w,fy:S}=_,k=w||S?uK(v,b):b,E=w||S?qDt(_,b):b,T=V3(e),M=T.document,I=w3("svg").call(M.documentElement);let $=I;T.ownerSVGElement=I,T.className=l,T.projection=z7t(e,k),T.path=function(){return q1(this.projection??Y7t(_))},T.filterFacets=(z,U)=>_T(g,{channels:U,groups:mC(z,U)}),T.getMarkState=z=>{const U=y.get(z),V=f.get(z);return{...U,channels:{...U.channels,...V?.channels}}},T.dispatchValue=z=>{$.value!==z&&($.value=z,$.dispatchEvent(new T.document.defaultView.Event("input",{bubbles:!0})))};const C=new Set;for(const[z,U]of y)if(z.initializer!=null){const V=z.facet==="super"?E:k,Y=z.initializer(U.data,U.facets,U.channels,_,V,T);if(Y.data!==void 0&&(U.data=Y.data),Y.facets!==void 0&&(U.facets=Y.facets),Y.channels!==void 0){const{fx:Z,fy:ct,...gt}=Y.channels;CDt(gt),Object.assign(U.channels,gt);for(const pt of Object.values(gt)){const{scale:lt}=pt;lt!=null&&!g$t(jr.get(lt))&&(DJ(pt,e),C.add(lt))}(Z!=null||ct!=null)&&f.set(z,!0)}}if(C.size){const z=new Map;Qm(z,y,e,Z=>C.has(Z)),Qm(h,y,e,Z=>C.has(Z));const U=UDt(KM(z,e),v),{scales:V,...Y}=DF(U);Object.assign(v,U),Object.assign(_,Y),Object.assign(_.scales,V)}let L,F;g!==void 0&&(L={x:w?.domain(),y:S?.domain()},g=I7t(g,L),F=R7t(w,S,b));for(const[z,U]of y)U.values=z.scale(U.channels,_,T);const{width:N,height:O}=b;Er(I).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",O).attr("viewBox",`0 0 ${N} ${O}`).attr("aria-label",s).attr("aria-description",a).call(z=>z.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(_C,n);for(const z of c){const{channels:U,values:V,facets:Y}=y.get(z);if(g===void 0||z.facet==="super"){let Z=null;if(Y&&(Z=Y[0],Z=z.filter(Z,U,V),Z.length===0))continue;const ct=z.render(Z,_,V,E,T);if(ct==null)continue;I.appendChild(ct)}else{let Z;for(const ct of g){if(!(z.facetAnchor?.(g,L,ct)??!ct.empty))continue;let gt=null;if(Y){const lt=f.has(z);if(gt=Y[lt?ct.i:0],gt=z.filter(gt,U,V),gt.length===0)continue;!lt&&gt===Y[0]&&(gt=Sd(gt)),gt.fx=ct.x,gt.fy=ct.y,gt.fi=ct.i}const pt=z.render(gt,_,V,k,T);if(pt!=null){(Z??=Er(I).append("g")).append(()=>pt).datum(ct);for(const lt of["aria-label","aria-description","aria-hidden","transform"])pt.hasAttribute(lt)&&(Z.attr(lt,pt.getAttribute(lt)),pt.removeAttribute(lt))}}Z?.selectChildren().each(F)}}const D=rDt(v,T,e),{figure:B=r!=null||i!=null||o!=null||D.length>0}=e;B&&($=M.createElement("figure"),$.className=`${l}-figure`,$.style.maxWidth="initial",r!=null&&$.append(rB(M,r,"h2")),i!=null&&$.append(rB(M,i,"h3")),$.append(...D,I),o!=null&&$.append(MDt(M,o)),"value"in I&&($.value=I.value,delete I.value)),$.scale=T7t(_.scales),$.legend=tDt(v,T,e);const j=i7t();return j>0&&Er(I).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${j.toLocaleString("en-US")} warning${j===1?"":"s"}. Please check the console.`),$}function rB(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function MDt(e,t){const n=e.createElement("figcaption");return n.append(t),n}function iB(e){return e.flat(1/0).filter(t=>t!=null).map(IDt)}function IDt(e){return typeof e.render=="function"?e:new RDt(e)}class RDt extends yr{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function LC(e,t){for(const n in e)DJ(e[n],t);return e}function DJ(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:s,transform:a=o?l=>l==null?NaN:l*100:RX(s,i)}=t[n]??{};a!=null&&(e.value=pr(e.value,a),e.transform=!1)}function CDt(e){for(const t in e)XX(t,e[t])}function Qm(e,t,n,r=e$t){for(const{channels:i}of t.values())for(const o in i){const s=i[o],{scale:a}=s;if(a!=null&&r(a))if(a==="projection"){if(!j7t(n)){const l=n.x?.domain===void 0,c=n.y?.domain===void 0;if(l||c){const[u,f]=W7t(s);l&&kT(e,"x",u),c&&kT(e,"y",f)}}}else kT(e,a,s)}return e}function kT(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function NDt(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=kg(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Kv(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Kv(i,{value:r,scale:"fy"})),LC(o,t);const s=mC(i,o);return{channels:o,groups:s,data:e.data}}function oB(e,t,n){if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=kg(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=Kv(l,{value:r,scale:"fx"})),i!=null&&(c.fy=Kv(l,{value:i,scale:"fy"})),LC(c,n),{channels:c,groups:mC(l,c)}}if(t===void 0)return;const{channels:o,groups:s,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:o,groups:s};a.length>0&&(s.size>1||s.size===1&&o.fx&&o.fy&&[...s][0][1].size>1)&&Hv(kg(e.data))===Hv(a)&&ku(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function $Dt(e,t={}){return go({...t,x:null,y:null},(n,r,i,o,s,a)=>a.getMarkState(e))}function ODt(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?Y3:/^y$/i.test(i)?t1:W3,r=i($Dt(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===t1?"left":"bottom");const s=OJ(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,t.push(s)}}return t}function DDt(e,t,n){let{projection:r,x:i={},y:o={},fx:s={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:f=l,grid:h}=u,x:{axis:p=l,grid:g=p===null?null:c}=i,y:{axis:y=l,grid:v=y===null?null:c}=o,fx:{axis:b=f,grid:_=b===null?null:h}=s,fy:{axis:w=f,grid:S=w===null?null:h}=a}=n;(r||!xd(i)&&!sB("x",e))&&(p=g=null),(r||!xd(o)&&!sB("y",e))&&(y=v=null),t.has("fx")||(b=_=null),t.has("fy")||(w=S=null),p===void 0&&(p=!D_(e,"x")),y===void 0&&(y=!D_(e,"y")),b===void 0&&(b=!D_(e,"fx")),w===void 0&&(w=!D_(e,"fy")),p===!0&&(p="bottom"),y===!0&&(y="left"),b===!0&&(b=p==="top"||p===null?"bottom":"top"),w===!0&&(w=y==="right"||y===null?"left":"right");const k=[];return O_(k,S,fJ,a),$_(k,w,sJ,"right","left",u,a),O_(k,_,dJ,s),$_(k,b,aJ,"top","bottom",u,s),O_(k,v,uJ,o),$_(k,y,kC,"left","right",n,o),O_(k,g,hJ,i),$_(k,p,TC,"bottom","top",n,i),k}function $_(e,t,n,r,i,o,s){if(!t)return;const a=LDt(t);s=FDt(a?r:t,o,s);const{line:l}=s;(n===kC||n===TC)&&l&&!Tg(l)&&e.push(OC(BDt(s))),e.push(n(s)),a&&e.push(n({...s,anchor:i,label:null}))}function O_(e,t,n,r){!t||Tg(t)||e.push(n(PDt(t,r)))}function LDt(e){return/^\s*both\s*$/i.test(e)}function FDt(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=t.label,labelAnchor:p,labelArrow:g=t.labelArrow,labelOffset:y}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:s,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:p,labelArrow:g,labelOffset:y}}function BDt(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function PDt(e,{stroke:t=Y1(e)?e:void 0,ticks:n=zDt(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function zDt(e){switch(typeof e){case"number":return!0;case"string":return!Y1(e)}return Ju(e)||typeof e?.range=="function"}function D_(e,t){const n=`${t}-axis `;return e.some(r=>r.ariaLabel?.startsWith(n))}function sB(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function UDt(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function qDt({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:s,width:a,height:l}=gC(n),c=e&&aB(e),u=t&&aB(t);return{marginTop:t?u[0]:r,marginRight:e?a-c[1]:i,marginBottom:t?l-u[1]:o,marginLeft:e?c[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function aB(e){const t=e.domain();if(t.length===0)return[0,e.bandwidth()];let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const jDt=new Map([["basis",_Nt],["basis-closed",wNt],["basis-open",xNt],["bundle",SNt],["bump-x",cNt],["bump-y",uNt],["cardinal",ANt],["cardinal-closed",ENt],["cardinal-open",kNt],["catmull-rom",TNt],["catmull-rom-closed",MNt],["catmull-rom-open",INt],["linear",V1],["linear-closed",RNt],["monotone-x",CNt],["monotone-y",NNt],["natural",$Nt],["step",ONt],["step-after",LNt],["step-before",DNt]]);function FC(e=V1,t){if(typeof e=="function")return e;const n=jDt.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function LJ(e=Ng,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Ng:FC(e,t)}function Ng(e){return V1(e)}function wf(e={y:"count"},t={}){[e,t]=UC(e,t);const{x:n,y:r}=t;return zC(j2(n,t,de),null,null,r,e,eb(t))}function xf(e={x:"count"},t={}){[e,t]=UC(e,t);const{x:n,y:r}=t;return zC(null,j2(r,t,de),n,null,e,nb(t))}function Gh(e={fill:"count"},t={}){[e,t]=UC(e,t);const{x:n,y:r}=VDt(t);return zC(n,r,null,null,e,eb(nb(t)))}function FJ(e,t,n={}){if(n?.interval==null)return n;const{reduce:r=fC}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function BC(e={}){return FJ(wf,"y",bp(e,"x"))}function PC(e={}){return FJ(xf,"x",bp(e,"y"))}function zC(e,t,n,r,{data:i=uC,filter:o=L2,sort:s,reverse:a,...l}={},c={}){e=lB(e),t=lB(t),l=WDt(l,c),i=UJ(i,de),s=s==null?void 0:PJ("sort",s,c),o=o==null?void 0:zJ("filter",o,c),n!=null&&Nf(l,"x","x1","x2")&&(n=null),r!=null&&Nf(l,"y","y1","y2")&&(r=null);const[u,f]=ns(e),[h,p]=ns(e),[g,y]=ns(t),[v,b]=ns(t),[_,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[S,k]=ns(_),{x:E,y:T,z:M,fill:I,stroke:$,x1:C,x2:L,y1:F,y2:N,domain:O,cumulative:D,thresholds:B,interval:j,...z}=c,[U,V]=ns(M),[Y]=Uo(I),[Z]=Uo($),[ct,gt]=ns(Y),[pt,lt]=ns(Z);return{..."z"in c&&{z:U||M},..."fill"in c&&{fill:ct||I},..."stroke"in c&&{stroke:pt||$},...Cl(z,(yt,at,vt)=>{const st=D2(ln(yt,_),vt?.[w]),Q=ln(yt,M),It=ln(yt,Y),_t=ln(yt,Z),Dt=cC(l,{z:Q,fill:It,stroke:_t}),Ut=[],xt=[],qt=st&&k([]),ue=Q&&V([]),Wt=It&&gt([]),re=_t&&lt([]),Ke=e&&f([]),le=e&&p([]),_n=t&&y([]),pn=t&&b([]),cr=GDt(e,t,yt);let xr=0;for(const qe of l)qe.initialize(yt);s&&s.initialize(yt),o&&o.initialize(yt);for(const qe of at){const nn=[];for(const Pn of l)Pn.scope("facet",qe);s&&s.scope("facet",qe),o&&o.scope("facet",qe);for(const[Pn,Ti]of Ad(qe,Dt))for(const[Yo,yo]of Ad(Ti,st))for(const[mi,yi]of cr(yo))if(Dt&&(yi.z=Pn),!(o&&!o.reduce(mi,yi))){nn.push(xr++),xt.push(i.reduceIndex(mi,yt,yi)),st&&qt.push(Yo),Q&&ue.push(Dt===Q?Pn:Q[(mi.length>0?mi:yo)[0]]),It&&Wt.push(Dt===It?Pn:It[(mi.length>0?mi:yo)[0]]),_t&&re.push(Dt===_t?Pn:_t[(mi.length>0?mi:yo)[0]]),Ke&&(Ke.push(yi.x1),le.push(yi.x2)),_n&&(_n.push(yi.y1),pn.push(yi.y2));for(const ws of l)ws.reduce(mi,yi);s&&s.reduce(mi,yi)}Ut.push(nn)}return YX(Ut,s,a),{data:xt,facets:Ut}}),...!Nf(l,"x")&&(u?{x1:u,x2:h,x:O2(u,h)}:{x:E,x1:C,x2:L}),...!Nf(l,"y")&&(g?{y1:g,y2:v,y:O2(g,v)}:{y:T,y1:F,y2:N}),...S&&{[w]:S},...Object.fromEntries(l.map(({name:yt,output:at})=>[yt,at]))}}function UC({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function j2(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...om(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=BJ(e.thresholds,e.interval),e}function VDt(e){let{x:t,y:n}=e;return t=j2(t,e),n=j2(n,e),[t.value,n.value]=Rl(t.value,n.value),{x:t,y:n}}function lB(e){if(e==null)return;const{value:t,cumulative:n,domain:r=di,thresholds:i}=e,o=s=>{let a=ln(s,t),l;if(qo(a)||HDt(i)){a=pr(a,SX,Float64Array);let[u,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!S0(i)?i(a,u,f):i;typeof h=="number"&&(h=eV(u,f,h)),S0(h)&&(r===di&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),l=h}else{a=cs(a);let[u,f]=typeof r=="function"?r(a):r,h=typeof i=="function"&&!S0(i)?i(a,u,f):i;if(typeof h=="number")if(r===di){let p=_v(u,f,h);if(isFinite(p))if(p>0){let g=Math.round(u/p),y=Math.round(f/p);g*p<=u||--g,y*p>f||++y;let v=y-g+1;h=new Float64Array(v);for(let b=0;b<v;++b)h[b]=(g+b)*p}else if(p<0){p=-p;let g=Math.round(u*p),y=Math.round(f*p);g/p<=u||--g,y/p>f||++y;let v=y-g+1;h=new Float64Array(v);for(let b=0;b<v;++b)h[b]=(g+b)/p}else h=[u];else h=[u]}else h=Yf(u,f,h);else S0(h)&&(r===di&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));l=h}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?KDt:n>0?XDt:qC)(c,l,a),c};return o.label=Nc(t),o}function BJ(e,t,n=cB){if(e===void 0)return t===void 0?n:im(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return Mxt;case"scott":return mj;case"sturges":return uI;case"auto":return cB}return C3(e)}return e}function WDt(e,t){return UX(e,t,PJ)}function PJ(e,t,n){return aC(e,t,n,zJ)}function zJ(e,t,n){return lC(e,t,n,UJ)}function UJ(e,t){return P3(e,t,YDt)}function YDt(e){switch(`${e}`.toLowerCase()){case"x":return JDt;case"x1":return QDt;case"x2":return tLt;case"y":return ZDt;case"y1":return eLt;case"y2":return nLt;case"z":return HX}throw new Error(`invalid bin reduce: ${e}`)}function cB(e,t,n){return Math.min(200,mj(e,t,n))}function HDt(e){return i$t(e)||Ju(e)&&qo(e)}function GDt(e,t,n){const r=e?.(n),i=t?.(n);return r&&i?function*(o){const s=r.bin(o);for(const[a,[l,c]]of r.entries()){const u=i.bin(s[a]);for(const[f,[h,p]]of i.entries())yield[u[f],{data:n,x1:l,y1:h,x2:c,y2:p}]}}:r?function*(o){const s=r.bin(o);for(const[a,[l,c]]of r.entries())yield[s[a],{data:n,x1:l,x2:c}]}:function*(o){const s=i.bin(o);for(const[a,[l,c]]of i.entries())yield[s[a],{data:n,y1:l,y2:c}]}}function qC(e,t,n){return t=cs(t),r=>{const i=e.map(()=>[]);for(const o of r)i[jS(t,n[o])-1]?.push(o);return i}}function XDt(e,t,n){const r=qC(e,t,n);return i=>{const o=r(i);for(let s=1,a=o.length;s<a;++s){const l=o[s-1],c=o[s];for(const u of l)c.push(u)}return o}}function KDt(e,t,n){const r=qC(e,t,n);return i=>{const o=r(i);for(let s=o.length-2;s>=0;--s){const a=o[s+1],l=o[s];for(const c of a)l.push(c)}return o}}function qJ(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const JDt={reduceIndex(e,t,{x1:n,x2:r}){return qJ(n,r)}},ZDt={reduceIndex(e,t,{y1:n,y2:r}){return qJ(n,r)}},QDt={reduceIndex(e,t,{x1:n}){return n}},tLt={reduceIndex(e,t,{x2:n}){return n}},eLt={reduceIndex(e,t,{y1:n}){return n}},nLt={reduceIndex(e,t,{y2:n}){return n}},rLt={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class rA extends yr{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:s,z:a,curve:l,tension:c}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0},z:{value:wh(n),optional:!0}},n,rLt),this.z=a,this.curve=FC(l,c)}filter(t){return t}render(t,n,r,i,o){const{x1:s,y1:a,x2:l=s,y2:c=a}=r;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n,0,0).call(u=>u.selectAll().data(xK(t,[s,a,l,c],this,r)).enter().append("path").call(lr,this).call(F2,this,r).attr("d",FR().curve(this.curve).defined(f=>f>=0).x0(f=>s[f]).y0(f=>a[f]).x1(f=>l[f]).y1(f=>c[f]))).node()}}function r5(e,t){return t===void 0?$g(e,{x:$3,y:Wv}):new rA(e,t)}function e1(e,t){const{y:n=gi,...r}=PC(t);return new rA(e,Q3(J3({...r,y1:n,y2:void 0},n===gi?"x2":"x")))}function $g(e,t){const{x:n=gi,...r}=BC(t);return new rA(e,tA(Z3({...r,x1:n,x2:void 0},n===gi?"y2":"y")))}const iLt={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class jJ extends yr{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:s,curve:a,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,iLt),this.curve=LJ(a,l),sm(this,n)}project(t,n,r){this.curve!==Ng&&super.project(t,n,r)}render(t,n,r,i,o){const{x1:s,y1:a,x2:l=s,y2:c=a}=r,{curve:u}=this;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(lr,this).attr("d",u===Ng&&o.projection?oLt(o.path(),s,a,l,c):h=>{const p=mu(),g=u(p);return g.lineStart(),g.point(s[h],a[h]),g.point(l[h],c[h]),g.lineEnd(),p}).call(Yr,this,r).call(tb,this,r,o)).node()}}function oLt(e,t,n,r,i){return t=cs(t),n=cs(n),r=cs(r),i=cs(i),o=>e({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function VJ(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:s,...a}={}){return[n,r]=V2(t,n,r),[o,s]=V2(i,o,s),new jJ(e,{...a,x1:n,x2:r,y1:o,y2:s})}function V2(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}const sLt={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class WJ extends yr{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:s,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:p}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,sLt),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=aLt(p)}render(t,n,r,i,o){const{x1:s,y1:a,x2:l=s,y2:c=a,SW:u}=r,{strokeWidth:f,bend:h,headAngle:p,headLength:g,insetStart:y,insetEnd:v}=this,b=u?S=>u[S]:Yi(f===void 0?1:f),_=p*B2/2,w=g/1.5;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(S=>S.selectAll().data(t).enter().append("path").call(lr,this).attr("d",k=>{let E=s[k],T=a[k],M=l[k],I=c[k];const $=Math.hypot(M-E,I-T);if($<=y+v)return null;let C=Math.atan2(I-T,M-E);const L=Math.min(w*b(k),$/3),F=this.sweep(E,T,M,I)*h*B2,N=Math.hypot($/Math.tan(F),$)/2;if(y||v)if(N<1e5){const ct=Math.sign(F),[gt,pt]=lLt([E,T],[M,I],N,ct);if(y&&([E,T]=uB([gt,pt,N],[E,T,y],-ct*Math.sign(y))),v){const[lt,yt]=uB([gt,pt,N],[M,I,v],ct*Math.sign(v));C+=Math.atan2(yt-pt,lt-gt)-Math.atan2(I-pt,M-gt),M=lt,I=yt}}else{const ct=M-E,gt=I-T,pt=Math.hypot(ct,gt);y&&(E+=ct/pt*y,T+=gt/pt*y),v&&(M-=ct/pt*v,I-=gt/pt*v)}const O=C+F,D=O+_,B=O-_,j=M-L*Math.cos(D),z=I-L*Math.sin(D),U=M-L*Math.cos(B),V=I-L*Math.sin(B),Y=N<1e5?`A${N},${N} 0,0,${F>0?1:0} `:"L",Z=L?`M${j},${z}L${M},${I}L${U},${V}`:"";return`M${E},${T}${Y}${M},${I}${Z}`}).call(Yr,this,r)).node()}}function aLt(e=1){if(typeof e=="number")return Yi(Math.sign(e));if(typeof e=="function")return(t,n,r,i)=>Math.sign(e(t,n,r,i));switch(Xs(e,"sweep",["+x","-x","+y","-y"])){case"+x":return(t,n,r)=>Wn(t,r);case"-x":return(t,n,r)=>Fd(t,r);case"+y":return(t,n,r,i)=>Wn(n,i);case"-y":return(t,n,r,i)=>Fd(n,i)}}function lLt([e,t],[n,r],i,o){const s=n-e,a=r-t,l=Math.hypot(s,a),c=o*Math.sqrt(i*i-l*l/4)/l;return[(e+n)/2-a*c,(t+r)/2+s*c]}function uB([e,t,n],[r,i,o],s){const a=r-e,l=i-t,c=Math.hypot(a,l),u=(a*a+l*l-o*o+n*n)/(2*c),f=s*Math.sqrt(n*n-u*u);return[e+(a*u+l*f)/c,t+(l*u-a*f)/c]}function cLt(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:s,...a}={}){return[n,r]=V2(t,n,r),[o,s]=V2(i,o,s),new WJ(e,{...a,x1:n,x2:r,y1:o,y2:s})}const uLt={ariaLabel:"bar"};class jC extends yr{constructor(t,n,r={},i=uLt){super(t,n,r,i),RC(this,r),CC(this,r)}render(t,n,r,i,o){const{rx:s,ry:a,rx1y1:l,rx1y2:c,rx2y1:u,rx2y2:f}=this,h=this._x(n,r,i),p=this._y(n,r,i),g=this._width(n,r,i),y=this._height(n,r,i);return xn("svg:g",o).call(Ir,this,i,o).call(this._transform,this,n).call(v=>v.selectAll().data(t).enter().call(l||c||u||f?b=>b.append("path").call(lr,this).call(NC,h,p,fB(h,g),fB(p,y),this).call(Yr,this,r):b=>b.append("rect").call(lr,this).attr("x",h).attr("width",g).attr("y",p).attr("height",y).call(me,"rx",s).call(me,"ry",a).call(Yr,this,r))).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:s,insetRight:a}=this,l=n&&t?t.bandwidth():o-r-i;return Math.max(0,l-s-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:s,insetBottom:a}=this,l=n&&t?t.bandwidth():o-r-i;return Math.max(0,l-s-a)}}function fB(e,t){return typeof e=="function"&&typeof t=="function"?n=>e(n)+t(n):typeof e=="function"?n=>e(n)+t:typeof t=="function"?n=>e+t(n):e+t}class VC extends jC{constructor(t,n={},r){const{x1:i,x2:o,y:s}=n;super(t,{x1:{value:i,scale:"x"},x2:{value:o,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,r)}_transform(t,n,{x:r}){t.call(mr,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:o}=this;return Ac(t)?i+o:s=>Math.min(n[s],r[s])+o}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:o,width:s}){const{insetLeft:a,insetRight:l}=this;return Ac(t)?s-i-o-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}class WC extends jC{constructor(t,n={},r){const{x:i,y1:o,y2:s}=n;super(t,{y1:{value:o,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,r)}_transform(t,n,{y:r}){t.call(mr,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Ac(t)?i+o:s=>Math.min(n[s],r[s])+o}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:s}){const{insetTop:a,insetBottom:l}=this;return Ac(t)?s-i-o-a-l:c=>Math.max(0,Math.abs(r[c]-n[c])-a-l)}}function rd(e,t={}){return rm(t)||(t={...t,y:gi,x2:de}),new VC(e,Q3(xC(J3(t))))}function id(e,t={}){return rm(t)||(t={...t,x:gi,y2:de}),new WC(e,tA(SC(Z3(t))))}const fLt={ariaLabel:"cell"};class iA extends jC{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,fLt)}_transform(t,n){t.call(mr,n,{},0,0)}}function E0(e,{x:t,y:n,...r}={}){return[t,n]=Rl(t,n),new iA(e,{...r,x:t,y:n})}function hLt(e,{x:t=gi,fill:n,stroke:r,...i}={}){return n===void 0&&Uo(r)[0]===void 0&&(n=de),new iA(e,{...i,x:t,fill:n,stroke:r})}function dLt(e,{y:t=gi,fill:n,stroke:r,...i}={}){return n===void 0&&Uo(r)[0]===void 0&&(n=de),new iA(e,{...i,y:t,fill:n,stroke:r})}const pLt={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function YC(e){return e.sort===void 0&&e.reverse===void 0?PX({channel:"-r"},e):e}class oA extends yr{constructor(t,n={}){const{x:r,y:i,r:o,rotate:s,symbol:a=Vv,frameAnchor:l}=n,[c,u]=ii(s,0),[f,h]=b$t(a),[p,g]=ii(o,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:p,scale:"r",filter:Eu,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},YC(n),pLt),this.r=g,this.rotate=u,this.symbol=h,this.frameAnchor=H1(l);const{channels:y}=this,{symbol:v}=y;if(v){const{fill:b,stroke:_}=y;v.hint={fill:b?b.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:_?_.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,r:u,rotate:f,symbol:h}=r,{r:p,rotate:g,symbol:y}=this,[v,b]=$c(this,i),_=y===Vv,w=u?void 0:p*p*Math.PI;return I3(p)&&(t=[]),xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(S=>S.selectAll().data(t).enter().append(_?"circle":"path").call(lr,this).call(_?k=>{k.attr("cx",l?E=>l[E]:v).attr("cy",c?E=>c[E]:b).attr("r",u?E=>u[E]:p)}:k=>{k.attr("transform",rb`translate(${l?E=>l[E]:v},${c?E=>c[E]:b})${f?E=>` rotate(${f[E]})`:g?` rotate(${g})`:""}`).attr("d",u&&h?E=>{const T=mu();return h[E].draw(T,u[E]*u[E]*Math.PI),T}:u?E=>{const T=mu();return y.draw(T,u[E]*u[E]*Math.PI),T}:h?E=>{const T=mu();return h[E].draw(T,w),T}:(()=>{const E=mu();return y.draw(E,w),E})())}).call(Yr,this,r)).node()}}function Ah(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Rl(t,n)),new oA(e,{...r,x:t,y:n})}function gLt(e,{x:t=de,...n}={}){return new oA(e,DK({...n,x:t}))}function mLt(e,{y:t=de,...n}={}){return new oA(e,OK({...n,y:t}))}function yLt(e,t){return Ah(e,{...t,symbol:"circle"})}function vLt(e,t){return Ah(e,{...t,symbol:"hexagon"})}const bLt={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class sA extends yr{constructor(t,n={}){const{x:r,y:i,z:o,curve:s,tension:a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:wh(n),optional:!0}},n,bLt),this.z=o,this.curve=LJ(s,a),sm(this,n)}filter(t){return t}project(t,n,r){this.curve!==Ng&&super.project(t,n,r)}render(t,n,r,i,o){const{x:s,y:a}=r,{curve:l}=this;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(c=>c.selectAll().data(xK(t,[s,a],this,r)).enter().append("path").call(lr,this).call(F2,this,r).call(AOt,this,r,o).attr("d",l===Ng&&o.projection?_Lt(o.path(),s,a):qG().curve(l).defined(u=>u>=0).x(u=>s[u]).y(u=>a[u]))).node()}}function _Lt(e,t,n){return t=cs(t),n=cs(n),r=>{let i=[];const o=[i];for(const s of r)s===-1?(i=[],o.push(i)):i.push([t[s],n[s]]);return e({type:"MultiLineString",coordinates:o})}}function aA(e,{x:t,y:n,...r}={}){return[t,n]=Rl(t,n),new sA(e,{...r,x:t,y:n})}function n1(e,{x:t=de,y:n=gi,...r}={}){return new sA(e,PC({...r,x:t,y:n}))}function r1(e,{x:t=gi,y:n=de,...r}={}){return new sA(e,BC({...r,x:t,y:n}))}function YJ(e,t){t=xLt(t);const{x:n,y:r,color:i,size:o}=t,s=L_(e,n),a=L_(e,r),l=L_(e,i),c=L_(e,o);let{fx:u,fy:f,x:{value:h,reduce:p,zero:g,...y},y:{value:v,reduce:b,zero:_,...w},color:{value:S,color:k,reduce:E},size:{value:T,reduce:M},mark:I}=t;if(p===void 0&&(p=b==null&&h==null&&T==null&&v!=null?"count":null),b===void 0&&(b=p==null&&v==null&&T==null&&h!=null?"count":null),M===void 0&&T==null&&E==null&&p==null&&b==null&&(h==null||Gr(s))&&(v==null||Gr(a))&&(M="count"),g===void 0&&(g=F_(p)?!0:void 0),_===void 0&&(_=F_(b)?!0:void 0),h==null&&v==null)throw new Error("must specify x or y");if(p!=null&&v==null)throw new Error("reducing x requires y");if(b!=null&&h==null)throw new Error("reducing y requires x");I===void 0&&(I=T!=null||M!=null?"dot":F_(p)||F_(b)||E!=null?"bar":h!=null&&v!=null?Gr(s)||Gr(a)||p==null&&b==null&&!ty(s)&&!ty(a)?"dot":"line":h!=null||v!=null?"rule":null);let $,C,L;switch(I){case"dot":L=Ah,C="stroke";break;case"line":L=s&&a||p!=null||b!=null?_||b!=null||s&&ty(s)?r1:g||p!=null||a&&ty(a)?n1:aA:s?n1:r1,C="stroke",dB(l)&&($=null);break;case"area":L=!(_||b!=null)&&(g||p!=null||a&&ty(a))?e1:$g,C="fill",dB(l)&&($=null);break;case"rule":L=s?rh:ih,C="stroke";break;case"bar":L=p!=null?Gr(a)?hB(p)&&s&&Gr(s)?E0:rd:z2:b!=null?Gr(s)?hB(b)&&a&&Gr(a)?E0:id:U2:E!=null||M!=null?s&&Gr(s)&&a&&Gr(a)?E0:s&&Gr(s)?id:a&&Gr(a)?rd:$C:s&&A0(s)&&!(a&&A0(a))?rd:a&&A0(a)&&!(s&&A0(s))?id:E0,C="fill";break;default:throw new Error(`invalid mark: ${I}`)}let F={fx:u,fy:f,x:s??void 0,y:a??void 0,[C]:l??k,z:$,r:c??void 0,tip:!0},N,O={[C]:E??void 0,r:M??void 0};if(p!=null&&b!=null)throw new Error("cannot reduce both x and y");return b!=null?(O.y=b,N=Gr(s)?Gv:wf):p!=null?(O.x=p,N=Gr(a)?Xv:xf):(E!=null||M!=null)&&(s&&a?N=Gr(s)&&Gr(a)?sC:Gr(s)?xf:Gr(a)?wf:Gh:s?N=Gr(s)?Gv:wf:a&&(N=Gr(a)?Xv:xf)),(N===Gh||N===wf)&&(F.x={value:s,...y}),(N===Gh||N===xf)&&(F.y={value:a,...w}),g===void 0&&(g=s&&!(N===Gh||N===wf)&&(L===rd||L===e1||L===z2||L===ih)),_===void 0&&(_=a&&!(N===Gh||N===xf)&&(L===id||L===$g||L===U2||L===rh)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:p??null,zero:!!g,...y},y:{value:v??null,reduce:b??null,zero:!!_,...w},color:{value:S??null,reduce:E??null,...k!==void 0&&{color:k}},size:{value:T??null,reduce:M??null},mark:I,markImpl:pB[L],markOptions:F,transformImpl:pB[N],transformOptions:O,colorMode:C}}function wLt(e,t){const n=YJ(e,t),{fx:r,fy:i,x:{zero:o},y:{zero:s},markOptions:a,transformOptions:l,colorMode:c}=n,u=i5[n.markImpl],f=i5[n.transformImpl],h=r!=null||i!=null?OC({strokeOpacity:.1}):null,p=[o?rh([0]):null,s?ih([0]):null],g=u(e,f?f(l,a):a);return c==="stroke"?Va(h,p,g):Va(h,g,p)}function ty(e){let t,n;for(const r of e){if(r==null)continue;if(t===void 0){t=r;continue}const i=Math.sign(Wn(t,r));if(i){if(n!==void 0&&i!==n)return!1;t=r,n=i}}return!0}function xLt({x:e,y:t,color:n,size:r,fx:i,fy:o,mark:s}={}){return Yl(e)||(e=t0(e)),Yl(t)||(t=t0(t)),Yl(n)||(n=Y1(n)?{color:n}:t0(n)),Yl(r)||(r=t0(r)),Yl(i)&&({value:i}=t0(i)),Yl(o)&&({value:o}=t0(o)),s!=null&&(s=`${s}`.toLowerCase()),{x:e,y:t,color:n,size:r,fx:i,fy:o,mark:s}}function L_(e,t){const n=ln(e,t.value);return n&&(n.label=Nc(t.value)),n}function t0(e){return SLt(e)?{reduce:e}:{value:e}}function F_(e){return/^(?:distinct|count|sum|proportion)$/i.test(e)}function hB(e){return/^(?:first|last|mode)$/i.test(e)}function SLt(e){if(e==null)return!1;if(typeof e.reduceIndex=="function"||typeof e.reduce=="function"&&Ks(e)||/^p\d{2}$/i.test(e))return!0;switch(`${e}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function dB(e){return e?new Hg(e).size>e.length>>1:!1}const i5={dot:Ah,line:aA,lineX:n1,lineY:r1,areaX:e1,areaY:$g,ruleX:rh,ruleY:ih,barX:rd,barY:id,rect:$C,rectX:z2,rectY:U2,cell:E0,bin:Gh,binX:wf,binY:xf,group:sC,groupX:Gv,groupY:Xv},pB=Object.fromEntries(Object.entries(i5).map(([e,t])=>[t,e]));function HC(e,t={}){let{x:n,x1:r,x2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,x:n=de});const o={};return n!=null&&(o.x=e),r!=null&&(o.x1=e),i!=null&&(o.x2=e),Ec(o,t)}function GC(e,t={}){let{y:n,y1:r,y2:i}=t;n===void 0&&r===void 0&&i===void 0&&(t={...t,y:n=de});const o={};return n!=null&&(o.y=e),r!=null&&(o.y1=e),i!=null&&(o.y2=e),Ec(o,t)}function Ec(e={},t={}){const n=wh(t),r=Object.entries(e).map(([i,o])=>{const s=IX(i,t);if(s==null)throw new Error(`missing channel: ${i}`);const[a,l]=Bs(s);return{key:i,input:s,output:a,setOutput:l,map:ALt(o)}});return{...Cl(t,(i,o)=>{const s=ln(i,n),a=r.map(({input:c})=>ln(i,c)),l=r.map(({setOutput:c})=>c(new Array(i.length)));for(const c of o)for(const u of s?hh(c,f=>s[f]).values():[c])r.forEach(({map:f},h)=>f.mapIndex(u,a[h],l[h]));return{data:i,facets:o}}),...Object.fromEntries(r.map(({key:i,output:o})=>[i,o]))}}function ALt(e){if(e==null)throw new Error("missing map");if(typeof e.mapIndex=="function")return e;if(typeof e.map=="function"&&Ks(e))return ELt(e);if(typeof e=="function")return TT(JR(e));switch(`${e}`.toLowerCase()){case"cumsum":return TLt;case"rank":return TT((t,n)=>bj(t,r=>n[r]));case"quantile":return TT((t,n)=>kLt(t,r=>n[r]))}throw new Error(`invalid map: ${e}`)}function ELt(e){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:e.map.bind(e)}}function kLt(e,t){const n=VS(e,t)-1;return bj(e,t).map(r=>r/n)}function TT(e){return{mapIndex(t,n,r){const i=e(t,n);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let o=0,s=t.length;o<s;++o)r[t[o]]=i[o]}}}const TLt={mapIndex(e,t,n){let r=0;for(const i of e)n[i]=r+=t[i]}};function MLt(e={},t){return arguments.length===1&&(t=e),HC(lA(e),t)}function ILt(e={},t){return arguments.length===1&&(t=e),GC(lA(e),t)}function lA(e={}){typeof e=="number"&&(e={k:e});let{k:t,reduce:n,shift:r,anchor:i,strict:o}=e;if(i===void 0&&r!==void 0&&(i=CLt(r),ku(`Warning: the shift option is deprecated; please use anchor "${i}" instead.`)),!((t=Math.floor(t))>0))throw new Error(`invalid k: ${t}`);return NLt(n)(t,RLt(i,t),o)}function RLt(e="middle",t){switch(`${e}`.toLowerCase()){case"middle":return t-1>>1;case"start":return 0;case"end":return t-1}throw new Error(`invalid anchor: ${e}`)}function CLt(e){switch(`${e}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${e}`)}function NLt(e="mean"){if(typeof e=="string"){if(/^p\d{2}$/i.test(e))return B_(XR(e));switch(e.toLowerCase()){case"deviation":return B_(v1);case"max":return P_((t,n)=>Wr(t,r=>n[r]));case"mean":return $Lt;case"median":return B_(wv);case"min":return P_((t,n)=>Lr(t,r=>n[r]));case"mode":return P_((t,n)=>vj(t,r=>n[r]));case"sum":return HJ;case"variance":return B_(sI);case"difference":return LLt;case"ratio":return FLt;case"first":return BLt;case"last":return PLt}}if(typeof e!="function")throw new Error(`invalid reduce: ${e}`);return P_(JR(e))}function B_(e){return(t,n,r)=>r?{mapIndex(i,o,s){const a=c=>o[c]==null?NaN:+o[c];let l=0;for(let c=0;c<t-1;++c)isNaN(a(c))&&++l;for(let c=0,u=i.length-t+1;c<u;++c)isNaN(a(c+t-1))&&++l,s[i[c+n]]=l===0?e(Sd(i,c,c+t),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(i,o,s){const a=l=>o[l]==null?NaN:+o[l];for(let l=-n;l<0;++l)s[i[l+n]]=e(Sd(i,0,l+t),a);for(let l=0,c=i.length-n;l<c;++l)s[i[l+n]]=e(Sd(i,l,l+t),a)}}}function P_(e){return(t,n,r)=>r?{mapIndex(i,o,s){let a=0;for(let l=0;l<t-1;++l)a+=Xi(o[i[l]]);for(let l=0,c=i.length-t+1;l<c;++l)a+=Xi(o[i[l+t-1]]),a===t&&(s[i[l+n]]=e(Sd(i,l,l+t),o)),a-=Xi(o[i[l]])}}:{mapIndex(i,o,s){for(let a=-n;a<0;++a)s[i[a+n]]=e(Sd(i,0,a+t),o);for(let a=0,l=i.length-n;a<l;++a)s[i[a+n]]=e(Sd(i,a,a+t),o)}}}function HJ(e,t,n){return n?{mapIndex(r,i,o){let s=0,a=0;for(let l=0;l<e-1;++l){const c=i[r[l]];c===null||isNaN(c)?++s:a+=+c}for(let l=0,c=r.length-e+1;l<c;++l){const u=i[r[l]],f=i[r[l+e-1]];f===null||isNaN(f)?++s:a+=+f,o[r[l+t]]=s===0?a:NaN,u===null||isNaN(u)?--s:a-=+u}}}:{mapIndex(r,i,o){let s=0;const a=r.length;for(let l=0,c=Math.min(a,e-t-1);l<c;++l)s+=+i[r[l]]||0;for(let l=-t,c=a-t;l<c;++l)s+=+i[r[l+e-1]]||0,o[r[l+t]]=s,s-=+i[r[l]]||0}}}function $Lt(e,t,n){if(n){const r=HJ(e,t,n);return{mapIndex(i,o,s){r.mapIndex(i,o,s);for(let a=0,l=i.length-e+1;a<l;++a)s[i[a+t]]/=e}}}else return{mapIndex(r,i,o){let s=0,a=0;const l=r.length;for(let c=0,u=Math.min(l,e-t-1);c<u;++c){let f=i[r[c]];f!==null&&!isNaN(f=+f)&&(s+=f,++a)}for(let c=-t,u=l-t;c<u;++c){let f=i[r[c+e-1]],h=i[r[c]];f!==null&&!isNaN(f=+f)&&(s+=f,++a),o[r[c+t]]=s/a,h!==null&&!isNaN(h=+h)&&(s-=h,--a)}}}}function OLt(e,t,n,r){for(let i=n+r;n<i;++n){const o=e[t[n]];if(Xi(o))return o}}function DLt(e,t,n,r){for(let i=n+r-1;i>=n;--i){const o=e[t[i]];if(Xi(o))return o}}function GJ(e,t,n,r){for(let i=n+r;n<i;++n){let o=e[t[n]];if(o!==null&&!isNaN(o=+o))return o}}function XJ(e,t,n,r){for(let i=n+r-1;i>=n;--i){let o=e[t[i]];if(o!==null&&!isNaN(o=+o))return o}}function LLt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s){const l=i[r[s]],c=i[r[s+e-1]];o[r[s+t]]=l===null||c===null?NaN:c-l}}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=XJ(i,r,s,e)-GJ(i,r,s,e)}}}function FLt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s){const l=i[r[s]],c=i[r[s+e-1]];o[r[s+t]]=l===null||c===null?NaN:c/l}}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=XJ(i,r,s,e)/GJ(i,r,s,e)}}}function BLt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s)o[r[s+t]]=i[r[s]]}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=OLt(i,r,s,e)}}}function PLt(e,t,n){return n?{mapIndex(r,i,o){for(let s=0,a=r.length-e;s<a;++s)o[r[s+t]]=i[r[s+e-1]]}}:{mapIndex(r,i,o){for(let s=-t,a=r.length-e+t+1;s<a;++s)o[r[s+t]]=DLt(i,r,s,e)}}}const Tu={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function zLt(e,{x:t=de,y:n,k:r=Tu.k,color:i=Tu.color,opacity:o=Tu.opacity,fill:s=i,fillOpacity:a=o,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Va(Dr(s)?null:e1(e,Ec({x1:Ed({k:-r,...f}),x2:Ed({k:r,...f})},{x1:t,x2:t,y:n,fill:s,fillOpacity:a,...f})),Dr(l)?null:n1(e,Ec({x:Ed(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function ULt(e,{x:t,y:n=de,k:r=Tu.k,color:i=Tu.color,opacity:o=Tu.opacity,fill:s=i,fillOpacity:a=o,stroke:l=i,strokeOpacity:c,strokeWidth:u,...f}={}){return Va(Dr(s)?null:$g(e,Ec({y1:Ed({k:-r,...f}),y2:Ed({k:r,...f})},{x:t,y1:n,y2:n,fill:s,fillOpacity:a,...f})),Dr(l)?null:r1(e,Ec({y:Ed(f)},{x:t,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...f})))}function Ed({n:e=Tu.n,k:t=0,strict:n=Tu.strict,anchor:r=Tu.anchor}={}){return lA({k:e,reduce:i=>WS(i)+t*(v1(i)||0),strict:n,anchor:r})}const qLt={ariaLabel:"tick",fill:null,stroke:"currentColor"};class KJ extends yr{constructor(t,n,r){super(t,n,r,qLt),sm(this,r)}render(t,n,r,i,o){return xn("svg:g",o).call(Ir,this,i,o).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("line").call(lr,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Yr,this,r).call(tb,this,r,o)).node()}}class JJ extends KJ{constructor(t,n={}){const{x:r,y:i,inset:o=0,insetTop:s=o,insetBottom:a=o}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Tr(s),this.insetBottom=Tr(a)}_transform(t,n,{x:r}){t.call(mr,n,{x:r},Hi,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?o=>n[o]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&t?s=>n[s]+t.bandwidth()-o:r-i-o}}class ZJ extends KJ{constructor(t,n={}){const{x:r,y:i,inset:o=0,insetRight:s=o,insetLeft:a=o}=n;super(t,{y:{value:i,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=Tr(s),this.insetLeft=Tr(a)}_transform(t,n,{y:r}){t.call(mr,n,{y:r},0,Hi)}_x1({x:t},{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n&&t?o=>n[o]+i:r+i}_x2({x:t},{x:n},{width:r,marginRight:i}){const{insetRight:o}=this;return n&&t?s=>n[s]+t.bandwidth()-o:r-i-o}_y1(t,{y:n}){return r=>n[r]}_y2(t,{y:n}){return r=>n[r]}}function QJ(e,{x:t=de,...n}={}){return new JJ(e,{...n,x:t})}function tZ(e,{y:t=de,...n}={}){return new ZJ(e,{...n,y:t})}function jLt(e,{x:t=de,y:n=null,r,fill:i="#ccc",fillOpacity:o,stroke:s="currentColor",strokeOpacity:a,strokeWidth:l=2,sort:c,...u}={}){const f=n!=null?Xv:oC;return Va(ih(e,f({x1:XC,x2:KC},{x:t,y:n,stroke:s,strokeOpacity:a,...u})),rd(e,f({x1:"p25",x2:"p75"},{x:t,y:n,fill:i,fillOpacity:o,...u})),QJ(e,f({x:"p50"},{x:t,y:n,stroke:s,strokeOpacity:a,strokeWidth:l,sort:c,...u})),Ah(e,Ec({x:eZ},{x:t,y:n,z:n,r,stroke:s,strokeOpacity:a,...u})))}function VLt(e,{y:t=de,x:n=null,r,fill:i="#ccc",fillOpacity:o,stroke:s="currentColor",strokeOpacity:a,strokeWidth:l=2,sort:c,...u}={}){const f=n!=null?Gv:oC;return Va(rh(e,f({y1:XC,y2:KC},{x:n,y:t,stroke:s,strokeOpacity:a,...u})),id(e,f({y1:"p25",y2:"p75"},{x:n,y:t,fill:i,fillOpacity:o,...u})),tZ(e,f({y:"p50"},{x:n,y:t,stroke:s,strokeOpacity:a,strokeWidth:l,sort:c,...u})),Ah(e,Ec({y:eZ},{x:n,y:t,z:n,r,stroke:s,strokeOpacity:a,...u})))}function eZ(e){const t=XC(e),n=KC(e);return e.map(r=>r<t||r>n?r:NaN)}function XC(e){const t=nZ(e)*2.5-rZ(e)*1.5;return Lr(e,n=>n>=t?n:NaN)}function KC(e){const t=rZ(e)*2.5-nZ(e)*1.5;return Wr(e,n=>n<=t?n:NaN)}function nZ(e){return Hf(e,.25)}function rZ(e){return Hf(e,.75)}const WLt={ariaLabel:"raster",stroke:null,pixelSize:1};function e0(e,t){const n=+e;if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}function gB(e,t){const n=Math.floor(e);if(isNaN(n))throw new Error(`invalid ${t}: ${e}`);return n}class iZ extends yr{constructor(t,n,r={},i){let{width:o,height:s,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:f=a==null?o:void 0,y2:h=l==null?s:void 0,pixelSize:p=i.pixelSize,blur:g=0,interpolate:y}=r;if(o!=null&&(o=gB(o,"width")),s!=null&&(s=gB(s,"height")),c!=null&&(c=e0(c,"x1")),u!=null&&(u=e0(u,"y1")),f!=null&&(f=e0(f,"x2")),h!=null&&(h=e0(h,"y2")),a==null&&(c==null||f==null))throw new Error("missing x");if(l==null&&(u==null||h==null))throw new Error("missing y");t!=null&&o!=null&&s!=null&&(a===void 0&&c!=null&&f!=null&&(a=tFt(c,f,o)),l===void 0&&u!=null&&h!=null&&(l=eFt(u,h,o,s))),super(t,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},r,i),this.width=o,this.height=s,this.pixelSize=e0(p,"pixelSize"),this.blur=e0(g,"blur"),this.interpolate=a==null||l==null?null:HLt(y)}}let oZ=class extends iZ{constructor(t,n={}){const{imageRendering:r}=n;if(t==null){const{fill:i,fillOpacity:o}=n;ii(o)[0]!==void 0&&(n=o5("fillOpacity",n)),Uo(i)[0]!==void 0&&(n=o5("fill",n))}super(t,void 0,n,WLt),this.imageRendering=ui(r,"auto")}scale(t,{color:n,...r},i){return super.scale(t,r,i)}render(t,n,r,i,o){const s=n[r.channels.fill?.scale]??(O=>O),{x:a,y:l}=r,{document:c}=o,[u,f,h,p]=aZ(r,i,o),g=h-u,y=p-f,{pixelSize:v,width:b=Math.round(Math.abs(g)/v),height:_=Math.round(Math.abs(y)/v)}=this,w=b*_;let{fill:S,fillOpacity:k}=r,E=0;if(this.interpolate){const O=b/g,D=_/y,B=pr(a,z=>(z-u)*O,Float64Array),j=pr(l,z=>(z-f)*D,Float64Array);S&&(S=this.interpolate(t,b,_,B,j,S)),k&&(k=this.interpolate(t,b,_,B,j,k))}else this.data==null&&t&&(E=t.fi*w);const T=c.createElement("canvas");T.width=b,T.height=_;const M=T.getContext("2d"),I=M.createImageData(b,_),$=I.data;let{r:C,g:L,b:F}=ms(this.fill)??{r:0,g:0,b:0},N=(this.fillOpacity??1)*255;for(let O=0;O<w;++O){const D=O<<2;if(S){const B=s(S[O+E]);if(B==null){$[D+3]=0;continue}({r:C,g:L,b:F}=ms(B))}k&&(N=k[O+E]*255),$[D+0]=C,$[D+1]=L,$[D+2]=F,$[D+3]=N}return this.blur>0&&fxt(I,this.blur),M.putImageData(I,0,0),xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(O=>O.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(p-f)})`).attr("width",Math.abs(g)).attr("height",Math.abs(y)).attr("preserveAspectRatio","none").call(me,"image-rendering",this.imageRendering).call(lr,this).attr("xlink:href",T.toDataURL())).node()}};function sZ(e,t,n){arguments.length<3&&(n=t,t=null);let{x:r,y:i,[e]:o,...s}=n;return r===void 0&&i===void 0&&s$t(t)&&(r=$3,i=Wv,o===void 0&&(o=n$t)),[t,{...s,x:r,y:i,[e]:o}]}function YLt(){const[e,t]=sZ("fill",...arguments);return new oZ(e,e==null||t.fill!==void 0||t.fillOpacity!==void 0?t:{...t,fill:de})}function aZ({x1:e,y1:t,x2:n,y2:r},i,{projection:o}){const{width:s,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:f}=i;return[e&&o==null?e[0]:f,t&&o==null?t[0]:l,n&&o==null?n[0]:s-c,r&&o==null?r[0]:a-u]}function lZ({x1:e,y1:t,x2:n,y2:r},i,o,s){const a={};return e&&(a.x1=e),t&&(a.y1=t),n&&(a.x2=n),r&&(a.y2=r),aZ(z3(a,i),o,s)}function o5(e,t={}){const{[e]:n}=t;if(typeof n!="function")throw new Error(`invalid ${e}: not a function`);return go({...t,[e]:void 0},function(r,i,o,s,a,l){const{x:c,y:u}=s;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,p,g]=lZ(o,s,a,l),y=p-f,v=g-h,{pixelSize:b}=this,{width:_=Math.round(Math.abs(y)/b),height:w=Math.round(Math.abs(v)/b)}=t,S=new Array(_*w*(i?i.length:1)),k=y/_,E=v/w;let T=0;for(const M of i??[void 0])for(let I=.5;I<w;++I)for(let $=.5;$<_;++$,++T)S[T]=n(c.invert(f+$*k),u.invert(h+I*E),M);return{data:S,facets:i,channels:{[e]:{value:S,scale:"auto"}}}})}function HLt(e){if(typeof e=="function")return e;if(e==null)return s5;switch(`${e}`.toLowerCase()){case"none":return s5;case"nearest":return ZC;case"barycentric":return JC();case"random-walk":return QC()}throw new Error(`invalid interpolate: ${e}`)}function s5(e,t,n,r,i,o){const s=new Array(t*n);for(const a of e)r[a]<0||r[a]>=t||i[a]<0||i[a]>=n||(s[Math.floor(i[a])*t+Math.floor(r[a])]=o[a]);return s}function JC({random:e=DR(42)}={}){return(t,n,r,i,o,s)=>{const{points:a,triangles:l,hull:c}=vh.from(t,p=>i[p],p=>o[p]),u=new s.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),h=QLt(s,e);for(let p=0;p<l.length;p+=3){const g=l[p],y=l[p+1],v=l[p+2],b=a[2*g],_=a[2*y],w=a[2*v],S=a[2*g+1],k=a[2*y+1],E=a[2*v+1],T=Math.min(b,_,w),M=Math.max(b,_,w),I=Math.min(S,k,E),$=Math.max(S,k,E),C=(k-E)*(b-w)+(S-E)*(w-_);if(!C)continue;const L=s[t[g]],F=s[t[y]],N=s[t[v]];for(let O=Math.floor(T);O<M;++O)for(let D=Math.floor(I);D<$;++D){if(O<0||O>=n||D<0||D>=r)continue;const B=O+.5,j=D+.5,z=Math.sign(C),U=(k-E)*(B-w)+(j-E)*(w-_);if(U*z<0)continue;const V=(E-S)*(B-w)+(j-E)*(b-w);if(V*z<0)continue;const Y=C-(U+V);if(Y*z<0)continue;const Z=O+n*D;u[Z]=h(L,U/C,F,V/C,N,Y/C,O,D),f[Z]=1}}return GLt(u,f,i,o,s,n,r,c,t,h),u}}function GLt(e,t,n,r,i,o,s,a,l,c){n=Float64Array.from(a,p=>n[l[p]]),r=Float64Array.from(a,p=>r[l[p]]),i=Array.from(a,p=>i[l[p]]);const u=n.length,f=Array.from({length:u},(p,g)=>KLt(g,n,r));let h=0;for(let p=0;p<s;++p){const g=p+.5;for(let y=0;y<o;++y){const v=y+o*p;if(!t[v]){const b=y+.5;for(let _=0;_<u;++_){const w=(u+h+(_%2?(_+1)/2:-_/2))%u;if(f[w](b,g)){const S=XLt(n.at(w-1),r.at(w-1),n[w],r[w],b,g);e[v]=c(i.at(w-1),S,i[w],1-S,i[w],0,y,p),h=w;break}}}}}}function XLt(e,t,n,r,i,o){const s=n-e,a=r-t,l=s*(n-i)+a*(r-o),c=s*(i-e)+a*(o-t);return l>0&&c>0?l/(l+c):+(l>c)}function ey(e,t,n,r){return e*r-n*t}function KLt(e,t,n){const r=t.length,i=t.at(e-2),o=n.at(e-2),s=t.at(e-1),a=n.at(e-1),l=t[e],c=n[e],u=t.at(e+1-r),f=n.at(e+1-r),h=s-l,p=a-c,g=i-s,y=o-a,v=l-u,b=c-f,_=Math.hypot(h,p),w=Math.hypot(g,y),S=Math.hypot(v,b);return(k,E)=>{const T=k-s,M=E-a,I=k-l,$=E-c;return ey(T,M,I,$)>-1e-6&&ey(T,M,h,p)*w-ey(T,M,g,y)*_>-1e-6&&ey(I,$,v,b)*_-ey(I,$,h,p)*S<=0}}function ZC(e,t,n,r,i,o){const s=new o.constructor(t*n),a=vh.from(e,u=>r[u],u=>i[u]);let l,c;for(let u=.5,f=0;u<n;++u){c=l;for(let h=.5;h<t;++h,++f)c=a.find(h,u,c),h===.5&&(l=c),s[f]=o[e[c]]}return s}function QC({random:e=DR(42),minDistance:t=.5,maxSteps:n=2}={}){return(r,i,o,s,a,l)=>{const c=new l.constructor(i*o),u=vh.from(r,g=>s[g],g=>a[g]);let f,h,p;for(let g=.5,y=0;g<o;++g){h=f;for(let v=.5;v<i;++v,++y){let b=v,_=g;p=h=u.find(b,_,h),v===.5&&(f=h);let w,S=0;for(;(w=Math.hypot(s[r[p]]-b,a[r[p]]-_))>t&&S<n;){const k=e(v,g,S)*2*Math.PI;b+=Math.cos(k)*w,_+=Math.sin(k)*w,p=u.find(b,_,p),++S}c[y]=l[r[p]]}}return c}}function JLt(e,t,n,r,i,o){return t*e+r*n+o*i}function ZLt(e){return(t,n,r,i,o,s,a,l)=>{const c=e(a,l);return c<n?t:c<n+i?r:o}}function QLt(e,t){return A0(e)||qo(e)?JLt:ZLt(t)}function tFt(e,t,n){return{transform(r){const i=r.length,o=new Float64Array(i),s=(t-e)/n,a=e+s/2;for(let l=0;l<i;++l)o[l]=l%n*s+a;return o}}}function eFt(e,t,n,r){return{transform(i){const o=i.length,s=new Float64Array(o),a=(t-e)/r,l=e+a/2;for(let c=0;c<o;++c)s[c]=Math.floor(c/n)%r*a+l;return s}}}const mB={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class cZ extends iZ{constructor(t,{smooth:n=!0,value:r,...i}={}){const o=wK({},i,mB);if(r===void 0){for(const a in o)if(o[a].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=i[a],i[a]="value"}}if(r!=null){const a={transform:l=>l.map(c=>c.value),label:Nc(r)};for(const l in o)i[l]==="value"&&(i[l]=a)}if(t==null){if(r==null)throw new Error("missing contour value");i=o5("value",{value:r,...i}),r=null}else{let{interpolate:a}=i;r===void 0&&(r=de),a===void 0&&(i.interpolate="nearest")}super(t,{value:{value:r,optional:!0}},nFt(i),mB);const s={geometry:{value:de}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(s[a]=l,delete this.channels[a])}this.contourChannels=s,this.smooth=!!n}filter(t,{x:n,y:r,value:i,...o},s){return super.filter(t,o,s)}render(t,n,r,i,o){const{geometry:s}=r,a=q1();return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(l=>{l.selectAll().data(t).enter().append("path").call(lr,this).attr("d",c=>a(s[c])).call(Yr,this,r)}).node()}}function nFt({thresholds:e,interval:t,...n}){return e=BJ(e,t,uI),go(n,function(r,i,o,s,a,l){const[c,u,f,h]=lZ(o,s,a,l),p=f-c,g=h-u,{pixelSize:y,width:v=Math.round(Math.abs(p)/y),height:b=Math.round(Math.abs(g)/y)}=this,_=v/p,w=b/g,S=o.value.value,k=[];if(this.interpolate){const{x:$,y:C}=Q1(o,s,l),L=pr($,D=>(D-c)*_,Float64Array),F=pr(C,D=>(D-u)*w,Float64Array),N=[o.x,o.y,o.value],O=[L,F,S];for(const D of i){const B=this.filter(D,N,O);k.push(this.interpolate(B,v,b,L,F,S))}}else if(i){const $=v*b,C=i.length;for(let L=0;L<C;++L)k.push(S.slice(L*$,L*$+$))}else k.push(S);if(this.blur>0)for(const $ of k)lj({data:$,width:v,height:b},this.blur);const E=rFt(e,S,...oFt(k));if(E===null)throw new Error(`unsupported thresholds: ${e}`);const{contour:T}=r2().size([v,b]).smooth(this.smooth),M=[],I=[];for(const $ of k)I.push(Ls(M.length,M.push(...pr(E,C=>T($,C)))));for(const{coordinates:$}of M)for(const C of $)for(const L of C)for(const F of L)F[0]=F[0]/_+c,F[1]=F[1]/w+u;return{data:M,facets:I,channels:GX(this.contourChannels,M)}})}function rFt(e,t,n,r){if(typeof e?.range=="function")return e.range(e.floor(n),r);if(typeof e=="function"&&(e=e(t,n,r)),typeof e!="number")return _h(e);const i=Yf(...pj(n,r,e),e);for(;i[i.length-1]>=r;)i.pop();for(;i[1]<n;)i.shift();return i}function iFt(){return new cZ(...sZ("value",...arguments))}function oFt(e){return[Lr(e,t=>Lr(t,yB)),Wr(e,t=>Wr(t,yB))]}function yB(e){return isFinite(e)?e:NaN}function sFt(e,t){return t8(W3,e,t)}function aFt(e,t={}){return t8(Y3,e,t)}function lFt(e,t={}){return t8(t1,e,t)}function t8(e,t,n={}){const{x:r,y:i,maxRadius:o}=n,s=e({px:r,py:i,maxRadius:o}),a=[];r!=null&&a.push(rh(t,vB("x",{...s,inset:-6},n))),i!=null&&a.push(ih(t,vB("y",{...s,inset:-6},n))),r!=null&&a.push(Rg(t,bB("x",{...s,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),i!=null&&a.push(Rg(t,bB("y",{...s,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Va(...a)}function uZ(e,{channels:t,...n},{facet:r,facetAnchor:i,fx:o,fy:s,[e]:a,channels:l,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:i,fx:o,fy:s,[e]:a,channels:{...t,...l},transform:c,initializer:cFt(e,u)}}function cFt(e,t){return t==null?t:function(n,r,{x:i,y:o,px:s,py:a,...l},...c){const{channels:{x:u,y:f,...h}={},...p}=t.call(this,n,r,{...l,x:s,y:a},...c);return{channels:{...h,...u&&{px:u,...e==="x"&&{x:u}},...f&&{py:f,...e==="y"&&{y:f}}},...p}}}function vB(e,t,n){const{color:r="currentColor",opacity:i=.2,ruleStroke:o=r,ruleStrokeOpacity:s=i,ruleStrokeWidth:a}=n;return{...uZ(e,t,n),stroke:o,strokeOpacity:s,strokeWidth:a}}function bB(e,t,n){const{color:r="currentColor",textFill:i=r,textFillOpacity:o,textStroke:s="var(--plot-background)",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...uZ(e,t,uFt(e,n)),fill:i,fillOpacity:o,stroke:s,strokeOpacity:a,strokeWidth:l}}function uFt(e,t){return go(t,(n,r,i)=>({channels:{text:{value:HM(i,e)?.value}}}))}const fFt={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},hFt={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},dFt={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},pFt={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},gFt={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class mFt extends yr{constructor(t,n={}){const{x:r,y:i,z:o,curve:s,tension:a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},n,fFt),this.curve=FC(s,a),sm(this,n)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,z:u}=r,{curve:f}=this,[h,p]=$c(this,i),g=l?_=>l[_]:Yi(h),y=c?_=>c[_]:Yi(p),v=this;function b(_){let w=-1;const S=[],k={};for(const N in r)k[N]=[];const E=[],T=[],M=[],I=[];function $(N,O){N=_[N],O=_[O],S.push(++w),E[w]=g(N),M[w]=y(N),T[w]=g(O),I[w]=y(O);for(const D in r)k[D].push(r[D][O])}const{halfedges:C,hull:L,triangles:F}=vh.from(_,g,y);for(let N=0;N<C.length;++N){const O=C[N];O>N&&$(F[N],F[O])}for(let N=0;N<L.length;++N)$(L[N],L[(N+1)%L.length]);Er(this).selectAll().data(S).enter().append("path").call(lr,v).attr("d",N=>{const O=mu(),D=f(O);return D.lineStart(),D.point(E[N],M[N]),D.point(T[N],I[N]),D.lineEnd(),O}).call(Yr,v,k).call(tb,v,k,o)}return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(u?_=>_.selectAll().data(hh(t,w=>u[w]).values()).enter().append("g").each(b):_=>_.datum(t).each(b)).node()}}class e8 extends yr{constructor(t,n={},r,i=({z:o})=>o){const{x:o,y:s}=n;super(t,{x:{value:o,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},z:{value:i(n),optional:!0}},n,r)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,z:u}=r,[f,h]=$c(this,i),p=l?b=>l[b]:Yi(f),g=c?b=>c[b]:Yi(h),y=this;function v(b){const _=vh.from(b,p,g);Er(this).append("path").datum(b[0]).call(lr,y).attr("d",y._render(_,i)).call(Yr,y,r)}return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(u?b=>b.selectAll().data(hh(t,_=>u[_]).values()).enter().append("g").each(v):b=>b.datum(t).each(v)).node()}}class yFt extends e8{constructor(t,n={}){super(t,n,hFt),this.fill="none"}_render(t){return t.render()}}class vFt extends e8{constructor(t,n={}){super(t,n,dFt,wh)}_render(t){return t.renderHull()}}class bFt extends yr{constructor(t,n={}){const{x:r,y:i,z:o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:o,optional:!0}},go(n,function(s,a,l,c,u,f){let{x:h,y:p,z:g}=l;({x:h,y:p}=Q1(l,c,f)),g=g?.value;const y=new Array((h??p).length).fill(null),[v,b]=$c(this,u),_=h?S=>h[S]:Yi(v),w=p?S=>p[S]:Yi(b);for(let S of a){h&&(S=S.filter(k=>Xi(_(k)))),p&&(S=S.filter(k=>Xi(w(k))));for(const[,k]of Ad(S,g)){const E=vh.from(k,_,w),T=fZ(E,u);for(let M=0,I=k.length;M<I;++M)y[k[M]]=T.renderCell(M)}}return{data:s,facets:a,channels:{cells:{value:y}}}}),pFt)}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,cells:u}=r;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(f=>{f.selectAll().data(t).enter().append("path").call(lr,this).attr("d",h=>u[h]).call(Yr,this,r)}).node()}}class _Ft extends e8{constructor(t,n){super(t,n,gFt),this.fill="none"}_render(t,n){return fZ(t,n).render()}}function fZ(e,t){const{width:n,height:r,marginTop:i,marginRight:o,marginBottom:s,marginLeft:a}=t;return e.voronoi([a,i,n-o,r-s])}function ib(e,t,{x:n,y:r,...i}={}){return[n,r]=Rl(n,r),new e(t,{...i,x:n,y:r})}function wFt(e,t){return ib(mFt,e,t)}function xFt(e,t){return ib(yFt,e,t)}function SFt(e,t){return ib(vFt,e,t)}function AFt(e,{x:t,y:n,initializer:r,...i}={}){return ib(bFt,e,{...Cl({...i,x:t,y:n},EJ),initializer:r})}function EFt(e,t){return ib(_Ft,e,t)}const kFt={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class hZ extends yr{constructor(t,{x:n,y:r,z:i,weight:o,fill:s,stroke:a,...l}={}){const c=_B(s)&&(s="currentColor",!0),u=_B(a)&&(a="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:wh({z:i,fill:s,stroke:a}),optional:!0},weight:{value:o,optional:!0}},IFt({...l,fill:s,stroke:a},c,u),kFt),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=i}filter(t){return t}render(t,n,r,i,o){const{contours:s}=r,a=q1();return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{}).call(l=>l.selectAll().data(t).enter().append("path").call(lr,this).call(Yr,this,r).attr("d",c=>a(s[c]))).node()}}function TFt(e,{x:t,y:n,...r}={}){return[t,n]=Rl(t,n),new hZ(e,{...r,x:t,y:n})}const MFt=new Set(["x","y","z","weight"]);function IFt(e,t,n){let{bandwidth:i,thresholds:o}=e;return i=i===void 0?20:+i,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?cs(o):+o,go(e,function(s,a,l,c,u,f){const h=l.weight?cs(l.weight.value):null,p=l.z?.value,{z:g}=this,[y,v]=$c(this,u),{width:b,height:_}=u,{x:w,y:S}=Q1(l,c,f),k=Object.fromEntries(Object.entries(l).filter(([F])=>!MFt.has(F)).map(([F,N])=>[F,{...N,value:[]}])),E=t&&[],T=n&&[],M=oCt().x(w?F=>w[F]:y).y(S?F=>S[F]:v).weight(h?F=>h[F]:1).size([b,_]).bandwidth(i),I=[];for(const F of a){const N=[];I.push(N);for(const O of p?vC(F,p,g):[F]){const D=M.contours(O);N.push([O,D])}}let $=o;if(!($ instanceof N3)){let F=0;for(const N of I)for(const[,O]of N){const D=O.max;D>F&&(F=D)}$=Float64Array.from({length:o-1},(N,O)=>F*100*(O+1)/o)}const C=[],L=[];for(const F of I){const N=[];C.push(N);for(const[O,D]of F)for(const B of $){N.push(L.length),L.push(D(B/100)),E&&E.push(B),T&&T.push(B);for(const j in k)k[j].value.push(l[j].value[O[0]])}}return E&&E.push(0),T&&T.push(0),{data:s,facets:C,channels:{...k,...E&&{fill:{value:E,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:L}}}})}function _B(e){return/^density$/i.test(e)}function RFt(e,t){return dZ("x",e,t)}function CFt(e,t){return dZ("y",e,t)}function dZ(e,t,{x1:n,x2:r,y1:i,y2:o,x:s=n===void 0&&r===void 0?e==="y"?gi:de:void 0,y:a=i===void 0&&o===void 0?e==="x"?gi:de:void 0,fill:l,positiveFill:c="#3ca951",negativeFill:u="#4269d0",fillOpacity:f=1,positiveFillOpacity:h=f,negativeFillOpacity:p=f,stroke:g,strokeOpacity:y,z:v=Uo(g)[0],clip:b,tip:_,render:w,...S}={}){return[n,r]=wB(s,n,r),[i,o]=wB(a,i,o),n===r&&i===o&&(e==="y"?i=iu(0):n=iu(0)),{tip:_}=bp({tip:_},e==="y"?"x":"y"),Va(Dr(c)?null:Object.assign(r5(t,{x1:n,x2:r,y1:i,y2:o,z:v,fill:c,fillOpacity:h,render:Qv(w,xB(e,!0)),clip:b,...S}),{ariaLabel:"positive difference"}),Dr(u)?null:Object.assign(r5(t,{x1:n,x2:r,y1:i,y2:o,z:v,fill:u,fillOpacity:p,render:Qv(w,xB(e,!1)),clip:b,...S}),{ariaLabel:"negative difference"}),aA(t,{x:r,y:o,z:v,stroke:g,strokeOpacity:y,tip:_,clip:!0,...S}))}function wB(e,t,n){return t===void 0&&n===void 0?t=n=iu(e):t===void 0?(n=iu(n),t=e===void 0?n:iu(e)):n===void 0?(t=iu(t),n=e===void 0?t:iu(e)):(t=iu(t),n=iu(n)),[t,n]}function iu(e){let t;const{value:n,label:r=Nc(n)}=om(e);return{transform:i=>t||(t=ln(i,n)),label:r}}function xB(e,t){const n=e==="x"?"y":"x",r=`${n}1`,i=`${n}2`,o=`${e}1`,s=`${e}2`;return(a,l,c,u,f,h)=>{const{[r]:p,[i]:g}=c,y=new Float32Array(p.length),v=new Float32Array(g.length),b=u[e==="y"?"height":"width"];(t===cK(l[e])<0?y:v).fill(b);const _=h(a,l,{...c,[i]:p,[s]:v},u,f),w=h(a,l,{...c,[r]:g,[o]:y},u,f),S=_.querySelector("g")??_,k=w.querySelector("g")??w;for(let E=0;S.firstChild;E+=2){const T=yC(),M=xn("svg:clipPath",f).attr("id",T).node();M.appendChild(S.firstChild),k.childNodes[E].setAttribute("clip-path",`url(#${T})`),k.insertBefore(M,k.childNodes[E])}return w}}function pZ({geometry:e=de,...t}={}){const n=Mg(r=>ln(r,e));return go({...t,x:null,y:null,geometry:{transform:n}},(r,i,o,s,a,l)=>{const c=n(r),u=c.length,f=new Float64Array(u),h=new Float64Array(u),{centroid:p}=l.path();for(let g=0;g<u;++g)[f[g],h[g]]=p(c[g]);return{data:r,facets:i,channels:{x:{value:f,scale:null,source:null},y:{value:h,scale:null,source:null}}}})}function NFt({geometry:e=de,...t}={}){const n=Mg(i=>ln(i,e)),r=Mg(i=>ln(n(i),CCt));return{...t,x:{transform:i=>Float64Array.from(r(i),([o])=>o)},y:{transform:i=>Float64Array.from(r(i),([,o])=>o)},geometry:{transform:n}}}const $Ft={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class gZ extends yr{constructor(t,n={}){const[r,i]=ii(n.r,3);super(t,{x:{value:n.tip?n.x:null,scale:"x",optional:!0},y:{value:n.tip?n.y:null,scale:"y",optional:!0},r:{value:r,scale:"r",filter:Eu,optional:!0},geometry:{value:n.geometry,scale:"projection"}},YC(n),$Ft),this.r=i}render(t,n,r,i,o){const{geometry:s,r:a}=r,l=o.path(),{r:c}=this;return I3(c)?t=[]:c!==void 0&&l.pointRadius(c),xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(u=>{u.selectAll().data(t).enter().append("path").call(lr,this).attr("d",a?f=>l.pointRadius(a[f])(s[f]):f=>l(s[f])).call(Yr,this,r)}).node()}}function n8(e,t={}){return t.tip&&t.x===void 0&&t.y===void 0?t=pZ(t):t.geometry===void 0&&(t={...t,geometry:de}),new gZ(e,t)}function OFt({strokeWidth:e=1.5,...t}={}){return n8({type:"Sphere"},{strokeWidth:e,...t})}function DFt({strokeOpacity:e=.1,...t}={}){return n8(jCt(),{strokeOpacity:e,...t})}const Hy=.5,Gy=0;function LFt(e={fill:"count"},{binWidth:t,...n}={}){const{z:r}=n;return t=t===void 0?20:Tr(t),e=qX(e,n),Nf(e,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Nf(e,"r")&&(n.r=t/2),go(n,(i,o,s,a,l,c)=>{let{x:u,y:f,z:h,fill:p,stroke:g,symbol:y}=s;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Q1(s,a,c)),h=h?h.value:ln(i,r),p=p?.value,g=g?.value,y=y?.value;const v=cC(e,{z:h,fill:p,stroke:g,symbol:y}),b=h&&[],_=p&&[],w=g&&[],S=y&&[],k=[],E=[],T=[];let M=-1;for(const L of e)L.initialize(i);for(const L of o){const F=[];for(const N of e)N.scope("facet",L);for(const[N,O]of Ad(L,v))for(const{index:D,extent:B}of FFt(i,O,u,f,t)){F.push(++M),E.push(B.x),T.push(B.y),h&&b.push(v===h?N:h[D[0]]),p&&_.push(v===p?N:p[D[0]]),g&&w.push(v===g?N:g[D[0]]),y&&S.push(v===y?N:y[D[0]]);for(const j of e)j.reduce(D,B)}k.push(F)}const I=s.x.scale,$=s.y.scale,C={x:{value:E,source:a[I]?{value:pr(E,a[I].invert),scale:I}:null},y:{value:T,source:a[$]?{value:pr(T,a[$].invert),scale:$}:null},...h&&{z:{value:b}},...p&&{fill:{value:_,scale:"auto"}},...g&&{stroke:{value:w,scale:"auto"}},...y&&{symbol:{value:S,scale:"auto"}},...Object.fromEntries(e.map(({name:L,output:F})=>[L,{scale:"auto",label:F.label,radius:L==="r"?t/2:void 0,value:F.transform()}]))};return{data:i,facets:k,channels:C}})}function FFt(e,t,n,r,i){const o=i*(1.5/FX),s=new Map;for(const a of t){let l=n[a],c=r[a];if(isNaN(l)||isNaN(c))continue;let u=Math.round(c=(c-Gy)/o),f=Math.round(l=(l-Hy)/i-(u&1)/2),h=c-u;if(Math.abs(h)*3>1){let y=l-f,v=f+(l<f?-1:1)/2,b=u+(c<u?-1:1),_=l-v,w=c-b;y*y+h*h>_*_+w*w&&(f=v+(u&1?1:-1)/2,u=b)}const p=`${f},${u}`;let g=s.get(p);g===void 0&&(g={index:[],extent:{data:e,x:(f+(u&1)/2)*i+Hy,y:u*o+Gy}},s.set(p,g)),g.index.push(a)}return s.values()}const BFt={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function PFt(e){return new mZ(e)}class mZ extends yr{constructor({binWidth:t=20,clip:n=!0,...r}={}){super(Yy,void 0,{clip:n,...r},BFt),this.binWidth=Tr(t)}render(t,n,r,i,o){const{binWidth:s}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:f,height:h}=i,p=u-Hy,g=f-l-Hy,y=a-Gy,v=h-c-Gy,b=s/2,_=b*BX,w=_/2,S=b*2,k=_*1.5,E=Math.floor(p/S),T=Math.ceil(g/S),M=Math.floor((y+w)/k),I=Math.ceil((v-w)/k)+1,$=`m0,${df(-_)}l${df(b)},${df(w)}v${df(_)}l${df(-b)},${df(w)}`;let C=$;for(let L=M;L<I;++L)for(let F=E;F<T;++F)C+=`M${df(F*S+(L&1)*b)},${df(L*k)}${$}`;return xn("svg:g",o).datum(0).call(Ir,this,i,o).call(mr,this,{},Hi+Hy,Hi+Gy).call(L=>L.append("path").call(lr,this).call(Yr,this,r).attr("d",C)).node()}}function df(e){return Math.round(e*1e3)/1e3}const zFt={ariaLabel:"image",fill:null,stroke:null};function UFt(e){return/^\.*\//.test(e)}function qFt(e){return/^(blob|data|file|http|https):/i.test(e)}function jFt(e){return typeof e=="string"&&(UFt(e)||qFt(e))?[void 0,e]:[e,void 0]}class yZ extends yr{constructor(t,n={}){let{x:r,y:i,r:o,width:s,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:p}=n;o==null&&(o=void 0),o===void 0&&s===void 0&&a===void 0?s=a=16:s===void 0&&a!==void 0?s=a:a===void 0&&s!==void 0&&(a=s);const[g,y]=jFt(c),[v,b]=ii(o),[_,w]=ii(s,b!==void 0?b*2:void 0),[S,k]=ii(a,b!==void 0?b*2:void 0),[E,T]=ii(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Eu,optional:!0},width:{value:_,filter:Eu,optional:!0},height:{value:S,filter:Eu,optional:!0},rotate:{value:E,optional:!0},src:{value:g,optional:!0}},YC(n),zFt),this.src=y,this.width=w,this.rotate=T,this.height=k,this.r=b,this.preserveAspectRatio=ui(u,"xMidYMid"),this.crossOrigin=Wi(f),this.frameAnchor=H1(h),this.imageRendering=ui(p,"auto")}render(t,n,r,i,o){const{x:s,y:a}=n,{x:l,y:c,width:u,height:f,r:h,rotate:p,src:g}=r,{r:y,width:v,height:b,rotate:_}=this,[w,S]=$c(this,i);return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,{x:l&&s,y:c&&a}).call(k=>k.selectAll().data(t).enter().append("image").call(lr,this).attr("x",SB(l,u,h,w,v,y)).attr("y",SB(c,f,h,S,b,y)).attr("width",u?E=>u[E]:v!==void 0?v:h?E=>h[E]*2:y*2).attr("height",f?E=>f[E]:b!==void 0?b:h?E=>h[E]*2:y*2).attr("transform",p?E=>`rotate(${p[E]})`:_?`rotate(${_})`:null).attr("transform-origin",p||_?rb`${l?E=>l[E]:w}px ${c?E=>c[E]:S}px`:null).call(me,"href",g?E=>g[E]:this.src).call(me,"preserveAspectRatio",this.preserveAspectRatio).call(me,"crossorigin",this.crossOrigin).call(me,"image-rendering",this.imageRendering).call(me,"clip-path",h?E=>`circle(${h[E]}px)`:y!==void 0?`circle(${y}px)`:null).call(Yr,this,r)).node()}}function SB(e,t,n,r,i,o){return t&&e?s=>e[s]-t[s]/2:t?s=>r-t[s]/2:e&&i!==void 0?s=>e[s]-i/2:i!==void 0?r-i/2:n&&e?s=>e[s]-n[s]:n?s=>r-n[s]:e?s=>e[s]-o:r-o}function VFt(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Rl(t,n)),new yZ(e,{...r,x:t,y:n})}function WFt(e,t,n){var r=1e-8,i=t-1,o=n-1,s=0,a,l,c,u,f,h,p,g;if(e<=0)return 0;if(e>=1)return 1;for(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),c=Math.exp(t*a)/t,u=Math.exp(n*l)/n,p=c+u,e<c/p?h=Math.pow(t*p*e,1/t):h=1-Math.pow(n*p*(1-e),1/n),g=-K0(t)-K0(n)+K0(t+n);s<10;s++){if(h===0||h===1)return h;if(f=YFt(h,t,n)-e,c=Math.exp(i*Math.log(h)+o*Math.log(1-h)+g),u=f/c,h-=c=u/(1-.5*Math.min(1,u*(i/h-o/(1-h)))),h<=0&&(h=.5*(h+c)),h>=1&&(h=.5*(h+c+1)),Math.abs(c)<r*h&&s>0)break}return h}function YFt(e,t,n){var r=e===0||e===1?0:Math.exp(K0(t+n)-K0(t)-K0(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?r*AB(e,t,n)/t:1-r*AB(1-e,n,t)/n}function AB(e,t,n){var r=1e-30,i=1,o=t+n,s=t+1,a=t-1,l=1,c=1-o*e/s,u,f,h,p;for(Math.abs(c)<r&&(c=r),c=1/c,p=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,p*=c*l,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h=c*l,p*=h,!(Math.abs(h-1)<3e-7));i++);return p}function K0(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)r+=n[t]/++o;return Math.log(2.506628274631*r/i)-s}function HFt(e,t){var n=WFt(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const GFt={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class vZ extends yr{constructor(t,n={}){const{x:r,y:i,z:o,ci:s=.95,precision:a=4}=n;if(super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:wh(n),optional:!0}},n,GFt),this.z=o,this.ci=+s,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${s}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(t,n,r,i,o){const{x:s,y:a,z:l}=r,{ci:c}=this;return xn("svg:g",o).call(Ir,this,i,o).call(mr,this,n).call(u=>u.selectAll().data(l?vC(t,l,this.z):[t]).enter().call(f=>f.append("path").attr("fill","none").call(lr,this).call(F2,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,s,a)).call(c&&!Tg(this.fill)?h=>h.select(XFt).attr("stroke","none").call(lr,this).call(F2,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",p=>this._renderBand(p,s,a)):()=>{}))).node()}}function XFt(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS($u.svg,"path"),this)}class KFt extends vZ{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:o}=this,[s,a]=di(t,u=>r[u]),l=W2(t,r,n),c=bZ(t,r,n,(1-i)/2,l);return FR().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Ls(s,a-o/2,o).concat(a))}_renderLine(t,n,r){const[i,o]=di(t,a=>r[a]),s=W2(t,r,n);return`M${s(i)},${i}L${s(o)},${o}`}}class JFt extends vZ{constructor(t,n){super(t,n)}_renderBand(t,n,r){const{ci:i,precision:o}=this,[s,a]=di(t,u=>n[u]),l=W2(t,n,r),c=bZ(t,n,r,(1-i)/2,l);return FR().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Ls(s,a-o/2,o).concat(a))}_renderLine(t,n,r){const[i,o]=di(t,a=>n[a]),s=W2(t,n,r);return`M${i},${s(i)}L${o},${s(o)}`}}function ZFt(e,{y:t=gi,x:n=de,stroke:r,fill:i=Dr(r)?"currentColor":r,...o}={}){return new KFt(e,PC({...o,x:n,y:t,fill:i,stroke:r}))}function QFt(e,{x:t=gi,y:n=de,stroke:r,fill:i=Dr(r)?"currentColor":r,...o}={}){return new JFt(e,BC({...o,x:t,y:n,fill:i,stroke:r}))}function W2(e,t,n){let r=0,i=0,o=0,s=0;for(const u of e){const f=t[u],h=n[u];r+=f,i+=h,o+=f*h,s+=f*f}const a=e.length,l=(a*o-r*i)/(a*s-r*r),c=(i-l*r)/a;return u=>l*u+c}function bZ(e,t,n,r,i){const o=yl(e,u=>t[u])/e.length;let s=0,a=0;for(const u of e)s+=(t[u]-o)**2,a+=(n[u]-i(t[u]))**2;const l=Math.sqrt(a/(e.length-2)),c=HFt(r,e.length-2);return(u,f)=>{const h=i(u),p=l*Math.sqrt(1/e.length+(u-o)**2/s);return h+f*c*p}}function a5({path:e=de,delimiter:t,frameAnchor:n,treeLayout:r=k2,treeSort:i,treeSeparation:o,treeAnchor:s,treeFilter:a,...l}={}){s=r8(s),i=wZ(i),a!=null&&(a=c5(a)),n===void 0&&(n=s.frameAnchor);const c=xZ(t),u=IZ(l,c5),[f,h]=Bs(),[p,g]=Bs();return{x:f,y:p,frameAnchor:n,...Cl(l,(y,v)=>{const b=c(ln(y,e)),_=h([]),w=g([]);let S=-1;const k=[],E=[],T=DG().path($=>b[$]),M=Xu(y)?$=>$.data=y[$.data]:$=>$.data=y.get($.data),I=r();I.nodeSize&&I.nodeSize([1,1]),I.separation&&o!==void 0&&I.separation(o??GR);for(const $ of u)$[Y2]=$[TZ]([]);for(const $ of v){const C=[],L=T($.filter(F=>b[F]!=null)).each(M);i!=null&&L.sort(i),I(L);for(const F of L.descendants())if(!(a!=null&&!a(F))){C.push(++S),k[S]=F.data,s.position(F,S,_,w);for(const N of u)N[Y2][S]=N[MZ](F)}E.push(C)}return{data:k,facets:E}}),...Object.fromEntries(u)}}function _Z({path:e=de,delimiter:t,curve:n="bump-x",stroke:r="#555",strokeWidth:i=1.5,strokeOpacity:o=.5,treeLayout:s=k2,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...f}={}){c=r8(c),a=wZ(a),u!=null&&(u=kB(u)),f={curve:n,stroke:r,strokeWidth:i,strokeOpacity:o,...f};const h=xZ(t),p=IZ(f,kB),[g,y]=Bs(),[v,b]=Bs(),[_,w]=Bs(),[S,k]=Bs();return{x1:g,x2:v,y1:_,y2:S,...Cl(f,(E,T)=>{const M=h(ln(E,e)),I=y([]),$=b([]),C=w([]),L=k([]);let F=-1;const N=[],O=[],D=DG().path(j=>M[j]),B=s();B.nodeSize&&B.nodeSize([1,1]),B.separation&&l!==void 0&&B.separation(l??GR);for(const j of p)j[Y2]=j[TZ]([]);for(const j of T){const z=[],U=D(j.filter(V=>M[V]!=null)).each(V=>V.data=E[V.data]);a!=null&&U.sort(a),B(U);for(const{source:V,target:Y}of U.links())if(!(u!=null&&!u(Y,V))){z.push(++F),N[F]=Y.data,c.position(V,F,I,C),c.position(Y,F,$,L);for(const Z of p)Z[Y2][F]=Z[MZ](Y,V)}O.push(z)}return{data:N,facets:O}}),...Object.fromEntries(p)}}function r8(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return tBt;case"right":return eBt}throw new Error(`invalid tree anchor: ${e}`)}const tBt={frameAnchor:"left",dx:6,position({x:e,y:t},n,r,i){r[n]=t,i[n]=-e}},eBt={frameAnchor:"right",dx:-6,position({x:e,y:t},n,r,i){r[n]=-t,i[n]=-e}};function wZ(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?EB(c5(e)):EB(nBt(e))}function EB(e){return(t,n)=>ja(e(t),e(n))}function nBt(e){return t=>t.data?.[e]}function xZ(e="/"){if(e=`${e}`,e==="/")return n=>n;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return n=>n.map(r=>rBt(r,t))}const l5=92,SZ=47;function rBt(e,t){if(t===l5)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,i=e.length;r<i;++r){switch(e.charCodeAt(r)){case l5:if(!n){n=!0;continue}break;case t:n?(e=e.slice(0,r-1)+e.slice(r),--r,--i):e=e.slice(0,r)+"/"+e.slice(r+1);break;case SZ:n?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,i+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++i);break}n=!1}return e}function iBt(e){let t=!1;for(let n=0,r=e.length;n<r;++n){switch(e.charCodeAt(n)){case l5:if(!t){t=!0;continue}case SZ:t&&(e=e.slice(0,n-1)+e.slice(n),--n,--r);break}t=!1}return e}function AZ(e){return Ks(e)&&typeof e.node=="function"}function oBt(e){return Ks(e)&&typeof e.link=="function"}function c5(e){if(AZ(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return f5;case"node:path":return u5;case"node:internal":return EZ;case"node:external":return kZ;case"node:depth":return h5;case"node:height":return d5}throw new Error(`invalid node value: ${e}`)}}function kB(e){if(AZ(e))return e.node;if(oBt(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return z_(f5);case"parent:path":return z_(u5);case"parent:depth":return z_(h5);case"parent:height":return z_(d5);case"node:name":return f5;case"node:path":return u5;case"node:internal":return EZ;case"node:external":return kZ;case"node:depth":return h5;case"node:height":return d5}throw new Error(`invalid link value: ${e}`)}}function u5(e){return e.id}function f5(e){return sBt(e.id)}function h5(e){return e.depth}function d5(e){return e.height}function EZ(e){return!!e.children}function kZ(e){return!e.children}function z_(e){return(t,n)=>n==null?void 0:e(n)}function sBt(e){let t=e.length;for(;--t>0&&!aBt(e,t););return iBt(e.slice(t+1))}function aBt(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}const TZ=2,MZ=3,Y2=4;function IZ(e,t){const n=[];for(const r in e){const i=e[r],o=t(i);o!==void 0&&n.push([r,...Bs(i),o])}return n}function RZ(e,{fill:t,stroke:n,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:p=Dr(f)&&Dr(h),text:g="node:name",textStroke:y="var(--plot-background)",title:v="node:path",dx:b,dy:_,textAnchor:w,treeLayout:S=k2,textLayout:k=S===k2||S===NG?"mirrored":"normal",tip:E,...T}={}){if(b===void 0&&(b=r8(T.treeAnchor).dx),w!==void 0)throw new Error("textAnchor is not a configurable tree option");k=Xs(k,"textLayout",["mirrored","normal"]);function M(I){return Rg(e,a5({treeLayout:S,text:g,fill:t===void 0?"currentColor":t,stroke:y,dx:b,dy:_,title:v,...I,...T}))}return Va(VJ(e,_Z({treeLayout:S,markerStart:f,markerEnd:h,stroke:n!==void 0?n:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:i,strokeLinejoin:o,strokeLinecap:s,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...T})),p?Ah(e,a5({treeLayout:S,fill:t===void 0?"node:internal":t,title:v,tip:E,...T})):null,g!=null?k==="mirrored"?[M({textAnchor:"start",treeFilter:"node:external"}),M({textAnchor:"end",treeFilter:"node:internal",dx:-b})]:M():null)}function lBt(e,t){return RZ(e,{...t,treeLayout:NG})}const CZ={ariaLabel:"waffle"};class NZ extends VC{constructor(t,{unit:n=1,gap:r=1,round:i,multiple:o,...s}={}){super(t,OZ("x",s),CZ),this.unit=Math.max(0,n),this.gap=+r,this.round=DZ(i),this.multiple=LZ(o)}}class $Z extends WC{constructor(t,{unit:n=1,gap:r=1,round:i,multiple:o,...s}={}){super(t,OZ("y",s),CZ),this.unit=Math.max(0,n),this.gap=+r,this.round=DZ(i),this.multiple=LZ(o)}}function OZ(e,t){const n=e==="y"?"x":"y",r=`${e}1`,i=`${e}2`;return go(cBt(t),function(o,s,a,l,c){const{round:u,unit:f}=this,h=a[r].value,p=a[i].value,g=z3({...n in a&&{[n]:a[n]},[r]:a[r],[i]:a[i]},l),y=this[e==="y"?"_width":"_height"](l,g,c),v=this[e==="y"?"_x":"_y"](l,g,c),b=f*hBt(l.scales[e]),{multiple:_=Math.max(1,Math.floor(Math.sqrt(y/b)))}=this,w=Math.min(y/_,b*_),S=b*_,k=(y-_*w)/2,E=typeof v=="function"?D=>v(D)+k:v+k,T=l[e](0),M=e==="y"?([D,B])=>[D*w,-B*S]:([D,B])=>[B*S,D*w],I=typeof E=="function"?D=>E(D)-y/2:()=>E,[$,C]=e==="y"?[0,1]:[1,0],L=p.length,F=new Array(L),N=new Float64Array(L),O=new Float64Array(L);for(let D=0;D<L;++D){F[D]=i8(u(h[D]/f),u(p[D]/f),_).map(M);const B=F[D].pop();N[D]=B[$]+I(D),O[D]=B[C]+T}return{channels:{polygon:{value:F,source:null,filter:null},[`c${n}`]:{value:[w,E],source:null,filter:null},[`c${e}`]:{value:[S,T],source:null,filter:null},[n]:{value:N,scale:null,source:null},[r]:{value:O,scale:null,source:a[r]},[i]:{value:O,scale:null,source:a[i]}}}})}function cBt({render:e,...t}){return{...t,render:Qv(e,function(n,r,i,o,s){const{gap:a,rx:l,ry:c}=this,{channels:u,ariaLabel:f,href:h,title:p,...g}=i,{document:y}=s,v=u.polygon.value,[b,_]=u.cx.value,[w,S]=u.cy.value,k=rOt(),E=y.createElementNS($u.svg,"pattern");E.setAttribute("width",b),E.setAttribute("height",w),E.setAttribute("patternUnits","userSpaceOnUse");const T=E.appendChild(y.createElementNS($u.svg,"rect"));return T.setAttribute("x",a/2),T.setAttribute("y",a/2),T.setAttribute("width",b-a),T.setAttribute("height",w-a),l!=null&&T.setAttribute("rx",l),c!=null&&T.setAttribute("ry",c),xn("svg:g",s).call(Ir,this,o,s).call(this._transform,this,r).call(M=>M.selectAll().data(n).enter().append(()=>E.cloneNode(!0)).attr("id",I=>`${k}-${I}`).select("rect").call(lr,this).call(Yr,this,g)).call(M=>M.selectAll().data(n).enter().append("path").attr("transform",rb`translate(${_},${S})`).attr("d",I=>`M${v[I].join("L")}Z`).attr("fill",I=>`url(#${k}-${I})`).attr("stroke",this.stroke==null?null:"none").call(Yr,this,{ariaLabel:f,href:h,title:p})).node()})}}function i8(e,t,n){if(t<e)return i8(t,e,n);if(e<0)return uBt(e,t,n,Math.ceil(-Math.min(e,t)/n));const r=Math.floor(e%n),i=Math.ceil(e%n),o=Math.floor(t%n),s=Math.ceil(t%n),a=Math.floor(e/n),l=Math.ceil(e/n),c=Math.floor(t/n),u=Math.ceil(t/n),f=[];return u>l&&f.push([0,l]),f.push([r,l],[r,a+e%1],[i,a+e%1]),e%n>n-1||(f.push([i,a]),c>a&&f.push([n,a])),c>a&&f.push([n,c]),f.push([s,c],[s,c+t%1],[o,c+t%1]),t%n<1||(f.push([o,u]),u>l&&f.push([0,u])),f.push(fBt(e,t,n)),f}function uBt(e,t,n,r){return i8(e+r*n,t+r*n,n).map(([i,o])=>[i,o-r])}function fBt(e,t,n){const r=Math.floor(t/n)-Math.floor(e/n);return r===0?MT(e,t,n):r===1?Math.floor(t%n)>Math.ceil(e%n)?[(Math.floor(t%n)+Math.ceil(e%n))/2,Math.floor(t/n)]:t%n>n-e%n?MT(t-t%n,t,n):MT(e,n*Math.ceil(e/n),n):[n/2,(Math.round(e/n)+Math.round(t/n))/2]}function MT(e,t,n){const r=Math.floor(t)-Math.floor(e);return r===0?[Math.floor(e%n)+.5,Math.floor(e/n)+(e+t)/2%1]:r===1?t%1-e%1>.5?[Math.ceil(e%n),Math.floor(t/n)+(e%1+t%1)/2]:t%1>1-e%1?[Math.floor(t%n)+.5,Math.floor(t/n)+t%1/2]:[Math.floor(e%n)+.5,Math.floor(e/n)+(1+e%1)/2]:[Math.ceil(e%n)+Math.ceil(Math.floor(t)-Math.ceil(e))/2,Math.floor(e/n)+(t>=1+e?.5:(e+t)/2%1)]}function DZ(e){if(e===void 0||e===!1)return Number;if(e===!0)return Math.round;if(typeof e!="function")throw new Error(`invalid round: ${e}`);return e}function LZ(e){return e===void 0?void 0:Math.max(1,Math.floor(e))}function hBt({domain:e,range:t}){return TB(t)/TB(e)}function TB(e){const[t,n]=di(e);return n-t}function dBt(e,{tip:t,...n}={}){return rm(n)||(n={...n,y:gi,x2:de}),new NZ(e,{tip:FZ(t),...Q3(xC(J3(n)))})}function pBt(e,{tip:t,...n}={}){return rm(n)||(n={...n,x:gi,y2:de}),new $Z(e,{tip:FZ(t),...tA(SC(Z3(n)))})}function FZ(e){return e===!0?{maxRadius:1/0}:Ks(e)&&e.maxRadius===void 0?{...e,maxRadius:1/0}:void 0}function BZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IT,MB;function gBt(){if(MB)return IT;MB=1;function e(s,a,l,c,u){for(var f=u+1;c<=u;){var h=c+u>>>1,p=s[h],g=l!==void 0?l(p,a):p-a;g>=0?(f=h,u=h-1):c=h+1}return f}function t(s,a,l,c,u){for(var f=u+1;c<=u;){var h=c+u>>>1,p=s[h],g=l!==void 0?l(p,a):p-a;g>0?(f=h,u=h-1):c=h+1}return f}function n(s,a,l,c,u){for(var f=c-1;c<=u;){var h=c+u>>>1,p=s[h],g=l!==void 0?l(p,a):p-a;g<0?(f=h,c=h+1):u=h-1}return f}function r(s,a,l,c,u){for(var f=c-1;c<=u;){var h=c+u>>>1,p=s[h],g=l!==void 0?l(p,a):p-a;g<=0?(f=h,c=h+1):u=h-1}return f}function i(s,a,l,c,u){for(;c<=u;){var f=c+u>>>1,h=s[f],p=l!==void 0?l(h,a):h-a;if(p===0)return f;p<=0?c=f+1:u=f-1}return-1}function o(s,a,l,c,u,f){return typeof l=="function"?f(s,a,l,c===void 0?0:c|0,u===void 0?s.length-1:u|0):f(s,a,void 0,l===void 0?0:l|0,c===void 0?s.length-1:c|0)}return IT={ge:function(s,a,l,c,u){return o(s,a,l,c,u,e)},gt:function(s,a,l,c,u){return o(s,a,l,c,u,t)},lt:function(s,a,l,c,u){return o(s,a,l,c,u,n)},le:function(s,a,l,c,u){return o(s,a,l,c,u,r)},eq:function(s,a,l,c,u){return o(s,a,l,c,u,i)}},IT}var RT,IB;function mBt(){if(IB)return RT;IB=1;var e=gBt(),t=0,n=1,r=2;RT=w;function i(S,k,E,T,M){this.mid=S,this.left=k,this.right=E,this.leftPoints=T,this.rightPoints=M,this.count=(k?k.count:0)+(E?E.count:0)+T.length}var o=i.prototype;function s(S,k){S.mid=k.mid,S.left=k.left,S.right=k.right,S.leftPoints=k.leftPoints,S.rightPoints=k.rightPoints,S.count=k.count}function a(S,k){var E=v(k);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function l(S,k){var E=S.intervals([]);E.push(k),a(S,E)}function c(S,k){var E=S.intervals([]),T=E.indexOf(k);return T<0?t:(E.splice(T,1),a(S,E),n)}o.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},o.insert=function(S){var k=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?l(this,S):this.left.insert(S):this.left=v([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?l(this,S):this.right.insert(S):this.right=v([S]);else{var E=e.ge(this.leftPoints,S,g),T=e.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(T,0,S)}},o.remove=function(S){var k=this.count-this.leftPoints;if(S[1]<this.mid){if(!this.left)return t;var E=this.right?this.right.count:0;if(4*E>3*(k-1))return c(this,S);var T=this.left.remove(S);return T===r?(this.left=null,this.count-=1,n):(T===n&&(this.count-=1),T)}else if(S[0]>this.mid){if(!this.right)return t;var M=this.left?this.left.count:0;if(4*M>3*(k-1))return c(this,S);var T=this.right.remove(S);return T===r?(this.right=null,this.count-=1,n):(T===n&&(this.count-=1),T)}else{if(this.count===1)return this.leftPoints[0]===S?r:t;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var I=this,$=this.left;$.right;)I=$,$=$.right;if(I===this)$.right=this.right;else{var C=this.left,T=this.right;I.count-=$.count,I.right=$.left,$.left=C,$.right=T}s(this,$),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return n}for(var C=e.ge(this.leftPoints,S,g);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){this.count-=1,this.leftPoints.splice(C,1);for(var T=e.ge(this.rightPoints,S,y);T<this.rightPoints.length&&this.rightPoints[T][1]===S[1];++T)if(this.rightPoints[T]===S)return this.rightPoints.splice(T,1),n}return t}};function u(S,k,E){for(var T=0;T<S.length&&S[T][0]<=k;++T){var M=E(S[T]);if(M)return M}}function f(S,k,E){for(var T=S.length-1;T>=0&&S[T][1]>=k;--T){var M=E(S[T]);if(M)return M}}function h(S,k){for(var E=0;E<S.length;++E){var T=k(S[E]);if(T)return T}}o.queryPoint=function(S,k){if(S<this.mid){if(this.left){var E=this.left.queryPoint(S,k);if(E)return E}return u(this.leftPoints,S,k)}else if(S>this.mid){if(this.right){var E=this.right.queryPoint(S,k);if(E)return E}return f(this.rightPoints,S,k)}else return h(this.leftPoints,k)},o.queryInterval=function(S,k,E){if(S<this.mid&&this.left){var T=this.left.queryInterval(S,k,E);if(T)return T}if(k>this.mid&&this.right){var T=this.right.queryInterval(S,k,E);if(T)return T}return k<this.mid?u(this.leftPoints,k,E):S>this.mid?f(this.rightPoints,S,E):h(this.leftPoints,E)};function p(S,k){return S-k}function g(S,k){var E=S[0]-k[0];return E||S[1]-k[1]}function y(S,k){var E=S[1]-k[1];return E||S[0]-k[0]}function v(S){if(S.length===0)return null;for(var k=[],E=0;E<S.length;++E)k.push(S[E][0],S[E][1]);k.sort(p);for(var T=k[k.length>>1],M=[],I=[],$=[],E=0;E<S.length;++E){var C=S[E];C[1]<T?M.push(C):T<C[0]?I.push(C):$.push(C)}var L=$,F=$.slice();return L.sort(g),F.sort(y),new i(T,v(M),v(I),L,F)}function b(S){this.root=S}var _=b.prototype;_.insert=function(S){this.root?this.root.insert(S):this.root=new i(S[0],null,null,[S],[S])},_.remove=function(S){if(this.root){var k=this.root.remove(S);return k===r&&(this.root=null),k!==t}return!1},_.queryPoint=function(S,k){if(this.root)return this.root.queryPoint(S,k)},_.queryInterval=function(S,k,E){if(S<=k&&this.root)return this.root.queryInterval(S,k,E)},Object.defineProperty(_,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(_,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(S){return!S||S.length===0?new b(null):new b(v(S))}return RT}var yBt=mBt();const vBt=BZ(yBt),bBt=({marginLeft:e})=>[1,e],_Bt=({width:e,marginRight:t})=>[-1,e-t],wBt=({width:e,marginLeft:t,marginRight:n})=>[0,(t+e-n)/2],xBt=({marginTop:e})=>[1,e],SBt=({height:e,marginBottom:t})=>[-1,e-t],ABt=({height:e,marginTop:t,marginBottom:n})=>[0,(t+e-n)/2];function PZ(e){return typeof e=="string"?{anchor:e}:e}function EBt(e={},t={}){arguments.length===1&&([e,t]=zZ(e));let{anchor:n="left",padding:r=1,r:i=t.r}=PZ(e);switch(`${n}`.toLowerCase()){case"left":n=bBt;break;case"right":n=_Bt;break;case"middle":n=wBt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return UZ("x","y",n,Tr(r),i,t)}function kBt(e={},t={}){arguments.length===1&&([e,t]=zZ(e));let{anchor:n="bottom",padding:r=1,r:i=t.r}=PZ(e);switch(`${n}`.toLowerCase()){case"top":n=xBt;break;case"bottom":n=SBt;break;case"middle":n=ABt;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return UZ("y","x",n,Tr(r),i,t)}function zZ(e){const{anchor:t,padding:n,...r}=e,{r:i}=r;return[{anchor:t,padding:n,r:i},r]}function UZ(e,t,n,r,i,o){if(i!=null&&typeof i!="number"){let{channels:s,sort:a,reverse:l}=o;s=ZR(s),s?.r===void 0&&(o={...o,channels:{...s,r:{value:i,scale:"r"}}}),a===void 0&&l===void 0&&(o.sort={channel:"-r"})}return go(o,function(s,a,l,c,u,f){let{[t]:h,r:p}=l;if(!l[t])throw new Error(`missing channel: ${t}`);({[t]:h}=Q1(l,c,f));const g=p?void 0:i!==void 0?Tr(i):this.r!==void 0?this.r:3;p&&(p=ln(p.value,c[p.scale]||de,Float64Array));let[y,v]=n(u);const b=y?MBt:TBt,_=new Float64Array(h.length),w=p?S=>p[S]:()=>g;for(let S of a){const k=vBt();S=S.filter(p?T=>$2(h[T])&&Eu(p[T]):T=>$2(h[T]));const E=new Float64Array(2*S.length+2);for(const T of S){const M=w(T),I=y?M+r:0,$=h[T]-M,C=h[T]+M;let L=2;k.queryInterval($-r,C+r,([,,N])=>{const O=_[N]-I,D=h[T]-h[N],B=r+(p?p[T]+p[N]:2*g),j=Math.sqrt(B*B-D*D);E[L++]=O-j,E[L++]=O+j});let F=E.slice(0,L);y&&(F=F.filter(N=>N>=0));t:for(const N of F.sort(b)){for(let O=0;O<L;O+=2)if(E[O]+1e-6<N&&N<E[O+1]-1e-6)continue t;_[T]=N+I;break}k.insert([$,C,T])}}y||(y=1);for(const S of a)for(const k of S)_[k]=_[k]*y+v;return{data:s,facets:a,channels:{[e]:{value:_,source:null},[t]:{value:h,source:l[t]},...p&&{r:{value:p,source:l.r}}}}})}function TBt(e,t){return Math.abs(e)-Math.abs(t)}function MBt(e,t){return e-t}function IBt(e,t){return arguments.length===1&&({basis:e,...t}=e),HC(o8(e),t)}function RBt(e,t){return arguments.length===1&&({basis:e,...t}=e),GC(o8(e),t)}function o8(e){if(e===void 0)return RB;if(typeof e=="function")return cA(JR(e));if(/^p\d{2}$/i.test(e))return fm(XR(e));switch(`${e}`.toLowerCase()){case"deviation":return $Bt;case"first":return RB;case"last":return NBt;case"max":return OBt;case"mean":return DBt;case"median":return LBt;case"min":return FBt;case"sum":return BBt;case"extent":return CBt}throw new Error(`invalid basis: ${e}`)}function cA(e){return{mapIndex(t,n,r){const i=+e(t,n);for(const o of t)r[o]=n[o]===null?NaN:n[o]/i}}}function fm(e){return cA((t,n)=>e(t,r=>n[r]))}const CBt={mapIndex(e,t,n){const[r,i]=di(e,s=>t[s]),o=i-r;for(const s of e)n[s]=t[s]===null?NaN:(t[s]-r)/o}},RB=cA((e,t)=>{for(let n=0;n<e.length;++n){const r=t[e[n]];if(Xi(r))return r}}),NBt=cA((e,t)=>{for(let n=e.length-1;n>=0;--n){const r=t[e[n]];if(Xi(r))return r}}),$Bt={mapIndex(e,t,n){const r=WS(e,o=>t[o]),i=v1(e,o=>t[o]);for(const o of e)n[o]=t[o]===null?NaN:i?(t[o]-r)/i:0}},OBt=fm(Wr),DBt=fm(WS),LBt=fm(wv),FBt=fm(Lr),BBt=fm(yl);function PBt(e,t){return qZ("x",e,t)}function zBt(e,t){return qZ("y",e,t)}function qZ(e,t,n={}){let r,i=1;if(typeof t=="number")i=t,r=(c,u)=>+c+u;else{if(typeof t=="string"){const c=t.startsWith("-")?-1:1;[t,i]=WR(t.replace(/^[+-]/,"")),i*=c}t=D3(t),r=(c,u)=>t.offset(c,u)}const o=`${e}1`,s=`${e}2`,a=Ec({[o]:c=>c.map(u=>r(u,i)),[s]:c=>c},n),l=a[s].transform;return a[s].transform=()=>{const c=l(),[u,f]=di(c);return c.domain=i<0?[u,r(f,i)]:[r(u,i),f],c},a}function UBt(e,t={}){if(typeof e=="string")switch(e.toLowerCase()){case"first":return s8(t);case"last":return a8(t)}if(typeof e=="function")return oh(null,e,t);let n,r;for(n in e){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=qBt(e[n])}if(r===void 0)throw new Error(`invalid selector: ${e}`);return oh(n,r,t)}function qBt(e){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"min":return l8;case"max":return c8}throw new Error(`unknown selector: ${e}`)}function s8(e){return oh(null,jBt,e)}function a8(e){return oh(null,VBt,e)}function jZ(e){return oh("x",l8,e)}function VZ(e){return oh("y",l8,e)}function WZ(e){return oh("x",c8,e)}function YZ(e){return oh("y",c8,e)}function*jBt(e){yield e[0]}function*VBt(e){yield e[e.length-1]}function*l8(e,t){yield Nxt(e,n=>t[n])}function*c8(e,t){yield fI(e,n=>t[n])}function oh(e,t,n){if(e!=null){if(n[e]==null)throw new Error(`missing channel: ${e}`);e=n[e]}const r=wh(n);return Cl(n,(i,o)=>{const s=ln(i,r),a=ln(i,e),l=[];for(const c of o){const u=[];for(const f of s?hh(c,h=>s[h]).values():[c])for(const h of t(f,a))u.push(h);l.push(u)}return{data:i,facets:l}})}yr.prototype.plot=function({marks:e=[],...t}={}){return DC({...t,marks:[...e,this]})};const WBt=Object.freeze(Object.defineProperty({__proto__:null,Area:rA,Arrow:WJ,BarX:VC,BarY:WC,Cell:iA,Contour:cZ,Density:hZ,Dot:oA,Frame:NJ,Geo:gZ,Hexgrid:mZ,Image:yZ,Line:sA,Link:jJ,Mark:yr,Raster:oZ,Rect:nA,RuleX:FK,RuleY:BK,Text:G3,TickX:JJ,TickY:ZJ,Tip:$J,Vector:X3,WaffleX:NZ,WaffleY:$Z,area:r5,areaX:e1,areaY:$g,arrow:cLt,auto:wLt,autoSpec:YJ,axisFx:aJ,axisFy:sJ,axisX:TC,axisY:kC,barX:rd,barY:id,bin:Gh,binX:wf,binY:xf,bollinger:Ed,bollingerX:zLt,bollingerY:ULt,boxX:jLt,boxY:VLt,cell:E0,cellX:hLt,cellY:dLt,centroid:pZ,circle:yLt,cluster:lBt,column:Bs,contour:iFt,crosshair:sFt,crosshairX:aFt,crosshairY:lFt,delaunayLink:wFt,delaunayMesh:xFt,density:TFt,differenceX:RFt,differenceY:CFt,dodgeX:EBt,dodgeY:kBt,dot:Ah,dotX:gLt,dotY:mLt,filter:_$t,find:D$t,formatIsoDate:_K,formatMonth:Z7t,formatNumber:bK,formatWeekday:Q7t,frame:OC,geo:n8,geoCentroid:NFt,graticule:DFt,gridFx:dJ,gridFy:fJ,gridX:hJ,gridY:uJ,group:sC,groupX:Gv,groupY:Xv,groupZ:oC,hexagon:vLt,hexbin:LFt,hexgrid:PFt,hull:SFt,identity:de,image:VFt,indexOf:gi,initializer:go,interpolateNearest:ZC,interpolateNone:s5,interpolatorBarycentric:JC,interpolatorRandomWalk:QC,legend:QOt,line:aA,lineX:n1,lineY:r1,linearRegressionX:ZFt,linearRegressionY:QFt,link:VJ,map:Ec,mapX:HC,mapY:GC,marks:Va,normalize:o8,normalizeX:IBt,normalizeY:RBt,numberInterval:CX,plot:DC,pointer:W3,pointerX:Y3,pointerY:t1,raster:YLt,rect:$C,rectX:z2,rectY:U2,reverse:w$t,ruleX:rh,ruleY:ih,scale:Zv,select:UBt,selectFirst:s8,selectLast:a8,selectMaxX:WZ,selectMaxY:YZ,selectMinX:jZ,selectMinY:VZ,shiftX:PBt,shiftY:zBt,shuffle:x$t,sort:PX,sphere:OFt,spike:UOt,stackX:kJ,stackX1:iDt,stackX2:oDt,stackY:TJ,stackY1:sDt,stackY2:aDt,text:Rg,textX:qK,textY:jK,tickX:QJ,tickY:tZ,timeInterval:YR,tip:OJ,transform:Cl,tree:RZ,treeLink:_Z,treeNode:a5,utcInterval:C3,valueof:ln,vector:QK,vectorX:tJ,vectorY:eJ,voronoi:AFt,voronoiMesh:EFt,waffleX:dBt,waffleY:pBt,window:lA,windowX:MLt,windowY:ILt},Symbol.toStringTag,{value:"Module"})),YBt=new Map([["style","style"],["width","width"],["height","height"],["margin","margin"],["marginLeft","marginLeft"],["marginRight","marginRight"],["marginTop","marginTop"],["marginBottom","marginBottom"],["align","align"],["aspectRatio","aspectRatio"],["axis","axis"],["inset","inset"],["grid","grid"],["label","label"],["padding","padding"],["xScale","x.type"],["xDomain","x.domain"],["xRange","x.range"],["xNice","x.nice"],["xInset","x.inset"],["xInsetLeft","x.insetLeft"],["xInsetRight","x.insetRight"],["xClamp","x.clamp"],["xRound","x.round"],["xAlign","x.align"],["xPadding","x.padding"],["xPaddingInner","x.paddingInner"],["xPaddingOuter","x.paddingOuter"],["xAxis","x.axis"],["xTicks","x.ticks"],["xTickSize","x.tickSize"],["xTickSpacing","x.tickSpacing"],["xTickPadding","x.tickPadding"],["xTickFormat","x.tickFormat"],["xTickRotate","x.tickRotate"],["xGrid","x.grid"],["xLine","x.line"],["xLabel","x.label"],["xLabelAnchor","x.labelAnchor"],["xLabelArrow","x.labelArrow"],["xLabelOffset","x.labelOffset"],["xFontVariant","x.fontVariant"],["xAriaLabel","x.ariaLabel"],["xAriaDescription","x.ariaDescription"],["xPercent","x.percent"],["xReverse","x.reverse"],["xZero","x.zero"],["xBase","x.base"],["xExponent","x.exponent"],["xConstant","x.constant"],["yScale","y.type"],["yDomain","y.domain"],["yRange","y.range"],["yNice","y.nice"],["yInset","y.inset"],["yInsetTop","y.insetTop"],["yInsetBottom","y.insetBottom"],["yClamp","y.clamp"],["yRound","y.round"],["yAlign","y.align"],["yPadding","y.padding"],["yPaddingInner","y.paddingInner"],["yPaddingOuter","y.paddingOuter"],["yAxis","y.axis"],["yTicks","y.ticks"],["yTickSize","y.tickSize"],["yTickSpacing","y.tickSpacing"],["yTickPadding","y.tickPadding"],["yTickFormat","y.tickFormat"],["yTickRotate","y.tickRotate"],["yGrid","y.grid"],["yLine","y.line"],["yLabel","y.label"],["yLabelAnchor","y.labelAnchor"],["yLabelArrow","y.labelArrow"],["yLabelOffset","y.labelOffset"],["yFontVariant","y.fontVariant"],["yAriaLabel","y.ariaLabel"],["yAriaDescription","y.ariaDescription"],["yPercent","y.percent"],["yReverse","y.reverse"],["yZero","y.zero"],["yBase","y.base"],["yExponent","y.exponent"],["yConstant","y.constant"],["facetMargin","facet.margin"],["facetMarginTop","facet.marginTop"],["facetMarginBottom","facet.marginBottom"],["facetMarginLeft","facet.marginLeft"],["facetMarginRight","facet.marginRight"],["facetGrid","facet.grid"],["facetLabel","facet.label"],["fxDomain","fx.domain"],["fxRange","fx.range"],["fxInset","fx.inset"],["fxInsetLeft","fx.insetLeft"],["fxInsetRight","fx.insetRight"],["fxRound","fx.round"],["fxAlign","fx.align"],["fxPadding","fx.padding"],["fxPaddingInner","fx.paddingInner"],["fxPaddingOuter","fx.paddingOuter"],["fxAxis","fx.axis"],["fxTicks","fx.ticks"],["fxTickSize","fx.tickSize"],["fxTickSpacing","fx.tickSpacing"],["fxTickPadding","fx.tickPadding"],["fxTickFormat","fx.tickFormat"],["fxTickRotate","fx.tickRotate"],["fxGrid","fx.grid"],["fxLine","fx.line"],["fxLabel","fx.label"],["fxLabelAnchor","fx.labelAnchor"],["fxLabelOffset","fx.labelOffset"],["fxFontVariant","fx.fontVariant"],["fxAriaLabel","fx.ariaLabel"],["fxAriaDescription","fx.ariaDescription"],["fxReverse","fx.reverse"],["fyDomain","fy.domain"],["fyRange","fy.range"],["fyInset","fy,inset"],["fyInsetTop","fy.insetTop"],["fyInsetBottom","fy.insetBottom"],["fyRound","fy.round"],["fyAlign","fy.align"],["fyPadding","fy.padding"],["fyPaddingInner","fy.paddingInner"],["fyPaddingOuter","fy.paddingOuter"],["fyAxis","fy.axis"],["fyTicks","fy.ticks"],["fyTickSize","fy.tickSize"],["fyTickSpacing","fy.tickSpacing"],["fyTickPadding","fy.tickPadding"],["fyTickFormat","fy.tickFormat"],["fyTickRotate","fy.tickRotate"],["fyGrid","fy.grid"],["fyLine","fy.line"],["fyLabel","fy.label"],["fyLabelAnchor","fy.labelAnchor"],["fyLabelOffset","fy.labelOffset"],["fyFontVariant","fy.fontVariant"],["fyAriaLabel","fy.ariaLabel"],["fyAriaDescription","fy.ariaDescription"],["fyReverse","fy.reverse"],["colorScale","color.type"],["colorDomain","color.domain"],["colorRange","color.range"],["colorClamp","color.clamp"],["colorN","color.n"],["colorNice","color.nice"],["colorScheme","color.scheme"],["colorInterpolate","color.interpolate"],["colorPivot","color.pivot"],["colorSymmetric","color.symmetric"],["colorLabel","color.label"],["colorPercent","color.percent"],["colorReverse","color.reverse"],["colorZero","color.zero"],["colorTickFormat","color.tickFormat"],["colorBase","color.base"],["colorExponent","color.exponent"],["colorConstant","color.constant"],["opacityScale","opacity.type"],["opacityDomain","opacity.domain"],["opacityRange","opacity.range"],["opacityClamp","opacity.clamp"],["opacityNice","opacity.nice"],["opacityLabel","opacity.label"],["opacityPercent","opacity.percent"],["opacityReverse","opacity.reverse"],["opacityZero","opacity.zero"],["opacityTickFormat","opacity.tickFormat"],["opacityBase","opacity.base"],["opacityExponent","opacity.exponent"],["opacityConstant","opacity.constant"],["symbolScale","symbol.type"],["symbolDomain","symbol.domain"],["symbolRange","symbol.range"],["rScale","r.type"],["rDomain","r.domain"],["rRange","r.range"],["rClamp","r.clamp"],["rNice","r.nice"],["rLabel","r.label"],["rPercent","r.percent"],["rZero","r.zero"],["rBase","r.base"],["rExponent","r.exponent"],["rConstant","r.constant"],["lengthScale","length.type"],["lengthDomain","length.domain"],["lengthRange","length.range"],["lengthClamp","length.clamp"],["lengthNice","length.nice"],["lengthPercent","length.percent"],["lengthZero","length.zero"],["lengthBase","length.base"],["lengthExponent","length.exponent"],["lengthConstant","length.constant"],["projectionType","projection.type"],["projectionParallels","projection.parallels"],["projectionPrecision","projection.precision"],["projectionRotate","projection.rotate"],["projectionDomain","projection.domain"],["projectionInset","projection.inset"],["projectionInsetLeft","projection.insetLeft"],["projectionInsetRight","projection.insetRight"],["projectionInsetTop","projection.insetTop"],["projectionInsetBottom","projection.insetBottom"],["projectionClip","projection.clip"]]);function HBt(e,t,n){for(let r=0;r<t.length;++r){const i=t[r];r===t.length-1?e[i]=n:e=e[i]||(e[i]={})}}function GBt(e,t,n){for(const r in e){const i=YBt.get(r);if(i==null)throw new Error(`Unrecognized plot attribute: ${r}`);const o=e[r];typeof o=="symbol"?n.push(r):o!==void 0&&HBt(t,i.split("."),o)}}const XBt=new Set(["frame","hexgrid","sphere","graticule"]),KBt=new Map([["first",s8],["last",a8],["maxX",WZ],["maxY",YZ],["minX",jZ],["minY",VZ],["nearest",W3],["nearestX",Y3],["nearestXY",t1]]);async function JBt(e){const t={marks:[]},n=[],{attributes:r,marks:i}=e;GBt(r,t,n);const o=[];for(const a of i)for(const{type:l,data:c,options:u}of a.plotSpecs()){const{select:f,...h}=u,p=KBt.get(f)?.(h)??h,g=XBt.has(l)?[p]:[c,p];t.marks.push(WBt[l](...g)),o.push(a.index)}QBt(t,e);const s=DC(t);e9t(s,o),ZBt(e,s,r,n);for(const a of e.interactors)await a.init(s);return s}function ZBt(e,t,n,r){r.forEach(i=>{const o=n[i];if(o===B1){if(!i.endsWith("Domain"))throw new Error(`Unsupported fixed attribute: ${i}`);const s=i.slice(0,-6),a=t.scale(s);a?.domain&&e.setAttribute(i,n[`${s}Reverse`]?a.domain.slice().reverse():a.domain)}else throw new Error(`Unrecognized symbol: ${o}`)})}function QBt(e,t){const{marks:n}=t;U_("x",e,n),U_("y",e,n),U_("fx",e,n),U_("fy",e,n)}function U_(e,t,n){const r=t[e]||{};if(r.axis===null||r.label!==void 0)return;const i=n.map(s=>s.channelField(e)?.field);if(i.every(s=>s==null))return;let o;for(let s=0;s<i.length;++s){const a=HZ(i[s]);a!==void 0&&(o===void 0?o=a:o!==a&&(o=void 0))}o!==void 0&&(t[e]={...r,label:o})}function HZ(e){if(e){switch(e.type){case"COLUMN_REF":return e.column;case"CAST":return HZ(e.expr);case"FUNCTION":if(e.name==="make_date")return"date";break}return t9t(e)}}function t9t(e){const t=`${e}`.replaceAll('"',"").replaceAll("(*)","()");return t.endsWith("()")?t.slice(0,-2):t}function e9t(e,t){let n=-1;for(const r of e.children){const i=r.getAttribute("aria-label")||"";r.nodeName==="style"||i.includes("-axis")||i.includes("-grid")||r.setAttribute("data-index",t[++n])}}const n9t={width:640,marginLeft:40,marginRight:20,marginTop:20,marginBottom:30};class r9t{constructor(t){this.attributes={...n9t},this.listeners=null,this.interactors=[],this.legends=[],this.marks=[],this.markset=null,this.params=new Map,this.synch=new Swt,this.element=t||document.createElement("div"),this.element.setAttribute("class","plot"),this.element.style.display="flex",Object.assign(this.element,{value:this})}margins(){return{left:this.getAttribute("marginLeft"),top:this.getAttribute("marginTop"),bottom:this.getAttribute("marginBottom"),right:this.getAttribute("marginRight")}}innerWidth(){const{left:t,right:n}=this.margins();return this.getAttribute("width")-t-n}innerHeight(t=400){const{top:n,bottom:r}=this.margins();let i=this.getAttribute("height");return i==null&&(i=i9t(this,n,r)||t,this.setAttribute("height",i,{silent:!0})),i-n-r}pending(t){this.synch.pending(t)}update(t){return this.synch.ready(t)&&!this.pendingRender&&(this.pendingRender=!0,requestAnimationFrame(()=>this.render())),this.synch.promise}async render(){this.pendingRender=!1;const t=await JBt(this),n=this.legends.flatMap(({legend:r,include:i})=>{const o=r.init(t);return i?o:[]});this.element.replaceChildren(t,...n),this.synch.resolve()}getAttribute(t){return this.attributes[t]}setAttribute(t,n,r){return Hz(this.attributes[t],n)?(n===void 0?delete this.attributes[t]:this.attributes[t]=n,r?.silent||this.listeners?.get(t)?.forEach(i=>i(t,n)),!0):!1}addAttributeListener(t,n){const r=this.listeners||(this.listeners=new Map);return r.has(t)||r.set(t,new Set),r.get(t).add(n),this}removeAttributeListener(t,n){return this.listeners?.get(t)?.delete(n)}addParams(t,n){const{params:r}=this;for(const i of n)r.has(i)?r.get(i).push(t):(r.set(i,[t]),i.addEventListener("value",()=>Promise.allSettled(r.get(i).map(o=>o.initialize()))))}addMark(t){return t.setPlot(this,this.marks.length),this.marks.push(t),this.markset=null,this}get markSet(){return this.markset||(this.markset=new Set(this.marks))}addInteractor(t){return this.interactors.push(t),this}addLegend(t,n=!0){t.setPlot(this),this.legends.push({legend:t,include:n})}}function i9t(e,t,n){const r=e.getAttribute("aspectRatio");if(r==null)return;const i=e.getAttribute("xDomain"),o=e.getAttribute("yDomain");if(!i||!o)return;const s=Math.abs(i[1]-i[0]);return Math.abs(o[1]-o[0])*e.innerWidth()/(r*s)+t+n}function GZ(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Gf(e)!==null)}const o9t=new Set(["offset","order","reverse","sort","label","anchor","curve","tension","marker","markerStart","markerMid","markerEnd","textAnchor","lineAnchor","lineHeight","textOverflow","monospace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","frameAnchor","strokeLinejoin","strokeLinecap","strokeMiterlimit","strokeDasharray","strokeDashoffset","mixBlendMode","shapeRendering","imageRendering","preserveAspectRatio","interpolate","crossOrigin","paintOrder","pointerEvents","target","select"]);function s9t(e){return o9t.has(e)}const a9t=new Set(["asterisk","circle","cross","diamond","diamond2","hexagon","plus","square","square2","star","times","triangle","triangle2","wye"]);function l9t(e){return a9t.has(`${e}`.toLowerCase())}const XZ=e=>e==="stroke"||e==="fill",c9t=e=>/opacity$/i.test(e),u9t=e=>e==="symbol",f9t=(e,t)=>e!=="sort"&&e!=="tip"&&t!=null&&!Array.isArray(t),CT=(e,t)=>({channel:e,field:t,as:ES(t)&&!tmt(t)?t.column:e}),NT=(e,t)=>({channel:e,value:t}),p5=e=>Array.isArray(e);let Eh=class extends ch{constructor(t,n,r,i={}){super(n?.options?.filterBy),this.type=t,this.reqs=i,this.source=n;const o=this.channels=[],s=this.detail=new Set,a=this.params=new Set;p5(n)?this.data=Ld(n):Na(n?.table)&&a.add(n.table);const l=(c,u)=>{const f=typeof u;if(c==="channels")for(const h in u)s.add(h),l(h,u[h]);else if(f==="function"&&u[TH]){const h=u(this,c);for(const p in h)l(p,h[p])}else if(f==="string")s9t(c)||XZ(c)&&GZ(u)||u9t(c)&&l9t(u)?o.push(NT(c,u)):o.push(CT(c,Mt(u)));else if(u1(u)){const h=NT(c,u.value);o.push(h),u.addEventListener("value",p=>(h.value=p,this.update()))}else dc(u)?(Vyt(u).forEach(h=>a.add(h)),o.push(CT(c,u))):f==="object"&&f9t(c,u)?o.push(CT(c,u)):u!==void 0&&o.push(NT(c,u))};for(const c in r)l(c,r[c])}setPlot(t,n){this.plot=t,this.index=n,t.addParams(this,this.params),this.source?.table&&this.queryPending()}sourceTable(){const t=this.source?.table;return t?Na(t)?t.value:t:null}hasOwnData(){return this.source==null||p5(this.source)}hasFieldInfo(){return!!this._fieldInfo}channel(t){return this.channels.find(n=>n.channel===t)}channelField(t,{exact:n=!1}={}){const r=n?this.channel(t):this.channels.find(i=>i.channel.startsWith(t));return r?.field?r:null}async prepare(){if(this.hasOwnData())return null;const{channels:t,reqs:n}=this,r=new Map;for(const{channel:a,field:l}of t){if(!l)continue;const c=l.stats?.stats||[],u=l.stats?.column??l,f=r.get(u)??r.set(u,new Set).get(u);c.forEach(h=>f.add(h)),n[a]?.forEach(h=>f.add(h))}const i=this.sourceTable(),o=await rI(this.coordinator,Array.from(r,([a,l])=>({table:i,column:a,stats:Array.from(l)}))),s=Object.fromEntries(o.map(a=>[a.column,a]));for(const a of this.channels){const{field:l}=a;l&&Object.assign(a,s[l.stats?.column??l])}this._fieldInfo=!0}query(t=[]){return this.hasOwnData()?null:u8(this.channels,this.sourceTable()).where(t)}queryPending(){return this.plot.pending(this),this}queryResult(t){return this.data=Ld(t),this}update(){return this.plot.update(this)}plotSpecs(){const{type:t,data:n,detail:r,channels:i}=this;return KZ(t,r,i,n)}};function ga(e,t){const n=t?.[e.as]??e.as;return Object.hasOwn(e,"value")?e.value:XZ(e.channel)?{value:n,scale:"color"}:c9t(e.channel)?{value:n,scale:"opacity"}:n}function u8(e,t,n=[]){const r=zt.from({source:t}),i=new Set;let o=!1;for(const s of e){const{channel:a,field:l,as:c}=s;if(!n.includes(a)){if(a==="orderby")r.orderby(s.value??l);else if(l){if(uh(l))o=!0;else{if(i.has(c))continue;i.add(c)}r.select({[c]:l})}}}return o&&r.groupby(Array.from(i)),r}function KZ(e,t,n,r,i={}){const{numRows:o,values:s,columns:a}=r??{},l={};for(const f of n){const h=t.has(f.channel)?l:i;h[f.channel]=ga(f,a)}return t.size&&(i.channels=l),[{type:e,data:s??(r?{length:o}:null),options:i}]}function H2(e,t){const{plot:n}=e;let r=n.getAttribute(`${t}Scale`);if(!r){const{type:o}=e.channelField(t);r=o==="date"?"time":"linear"}const i={type:r};switch(r){case"log":i.base=n.getAttribute(`${t}Base`)??10;break;case"pow":i.exponent=n.getAttribute(`${t}Exponent`)??1;break;case"symlog":i.constant=n.getAttribute(`${t}Constant`)??1;break}return E6(i)}function sh(e,t,n,r,i=1,o){const{field:s}=e.channelField(t);o=o??s;const{type:a,apply:l,sqlApply:c}=H2(e,t),u=!!e.plot.getAttribute(`${t}Reverse`),[f,h]=r.map(y=>l(y)),p=c(o),g=a==="time"||a==="utc"?p:o;return[Qyt(p,f,h,n-i,u),g]}const JZ={x:["min","max"]},ZZ={y:["min","max"]},QZ={...JZ,...ZZ};function tQ(e,t,n,r,i){const{plot:o}=e,s=o.getAttribute(r),a=o.getAttribute(i);if(Array.isArray(s)&&!s[xl])return s;{const{column:l,min:c,max:u}=e.channelField(n),f=eQ(t,l)||(a?qu().domain([c,u]).nice().domain():[c,u]);return s!==B1&&(f[xl]=!0),o.setAttribute(r,f,{silent:!0}),f}}function ob(e,t){return tQ(e,t,"x","xDomain","xNice")}function sb(e,t){return tQ(e,t,"y","yDomain","yNice")}function eQ(e,t){if(!e)return;let n,r;return[e].flat().forEach(i=>$d(i,o=>{if(o instanceof wz&&`${o.expr}`===t){const s=(o.extent??[]).map(a=>a?.value??a);(n==null||s[0]<n)&&(n=s[0]),(r==null||s[1]>r)&&(r=s[1])}})),n!=null&&r!=null&&n!==r?[n,r]:void 0}class h9t extends Eh{constructor(t,n,r){const i=t.endsWith("X")?"y":t.endsWith("Y")?"x":null,o=i?{[i]:["count","min","max"]}:void 0;super(t,n,r,o),this.dim=i}query(t=[]){const{plot:n,dim:r,source:i}=this;let o=i.options?.optimize;const s=super.query(t);if(!r)return s;const a=r==="x"?"y":"x",l=this.channelField(a,{exact:!0})?.as,{field:c,as:u,type:f,count:h,min:p,max:g}=this.channelField(r),y=f==="date"||f==="number",v=r==="x"?n.innerWidth():n.innerHeight();if(o??=h/v>10,o&&y&&l){const[b,_]=eQ(t,c)||[p,g],[w]=sh(this,r,v,[b,_],1,u),S=s._select.map(k=>k.alias).filter(k=>k!==u&&k!==l);return vvt(s,w,u,l,S)}else return s.orderby(u)}}function g5(e,t=[]){return new t.constructor(e)}function d9t(e,t,n,r,i){const o=t.length,s={},a=[];if(i?.length){const l=new Int32Array(o),c=i.map(h=>r[h]),u={};for(let h=0;h<o;++h){const p=c.map(g=>g[h]);l[h]=u[p]??=a.push(p)-1}for(let h=0;h<i.length;++h)s[i[h]]=a.map(p=>p[h]);const f=s._grid=a.map(()=>g5(e,n));for(let h=0;h<o;++h)f[l[h]][t[h]]=n[h]}else{a.push([]);const[l]=s._grid=[g5(e,n)];for(let c=0;c<o;++c)l[t[c]]=n[c]}return{numRows:a.length,columns:s}}function p9t(e,t,n,r,i,o,s){const a=n.length,l=e*t,c=i.map(p=>r[p]),u={},f=[],h=new Int32Array(a);if(o?.length){const p=o.map(y=>r[y]),g={};for(let y=0;y<a;++y){const v=p.map(b=>b[y]);h[y]=g[v]??=f.push(v)-1}for(let y=0;y<o.length;++y)u[o[y]]=f.map(v=>v[y])}else f.push([]);if(s){const p=n.map(v=>v%e),g=n.map(v=>Math.floor(v/e)),y=f.map(()=>[]);for(let v=0;v<a;++v)y[h[v]].push(v);i.forEach((v,b)=>{const _=c[b];u[v]=f.map((w,S)=>s(y[S],e,t,p,g,_))})}else i.forEach((p,g)=>{const y=c[g],v=u[p]=f.map(()=>g5(l,y));for(let b=0;b<a;++b)v[h[b]][n[b]]=y[b]});return{numRows:f.length,columns:u}}function f8(e){let t=1/0,n=-1/0;return e.forEach(r=>{const i=r.length;for(let o=0;o<i;++o){const s=r[o];s<t&&(t=s),s>n&&(n=s)}}),Number.isFinite(t)&&Number.isFinite(n)?[t,n]:[0,1]}function g9t(e){const t=new Hg;return e.forEach(n=>{const r=n.length;for(let i=0;i<r;++i)t.add(n[i])}),Array.from(t).sort(Wn)}function no(e,t){return Na(e)?(e.addEventListener("value",t),e.value):e}function m5(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);m9t(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),o=1+n[1]+n[2]+n[3]+n[4],s=(r[0]+r[1]+r[2]+r[3])/o,a=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:s,sum_anticausal:a}}function m9t(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),s=Math.exp(-1.723/n),a=.6318/n,l=1.997/n,c=Float64Array.of(-o*Math.cos(a),o*Math.sin(a),-o*Math.cos(-a),o*Math.sin(-a),-s*Math.cos(l),s*Math.sin(l),-s*Math.cos(-l),s*Math.sin(-l)),u=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let p,g;for(g=2;g<8;g+=2){for(f[g]=c[g]*f[g-2]-c[g+1]*f[g-1],f[g+1]=c[g]*f[g-1]+c[g+1]*f[g-2],p=g-2;p>0;p-=2)f[p]+=c[g]*f[p-2]-c[g+1]*f[p-1],f[p+1]+=c[g]*f[p-1]+c[g+1]*f[p-2];for(p=0;p<=g;p+=2)f[p]+=i[g]*h[p]-i[g+1]*h[p+1],f[p+1]+=i[g]*h[p+1]+i[g+1]*h[p];for(h[g+2]=c[g]*h[g]-c[g+1]*h[g+1],h[g+3]=c[g]*h[g+1]+c[g+1]*h[g],p=g;p>0;p-=2)h[p]+=c[g]*h[p-2]-c[g+1]*h[p-1],h[p+1]+=c[g]*h[p-1]+c[g+1]*h[p-2]}for(g=0;g<4;++g)p=g<<1,t[g]=f[p]/u,e[g+1]=h[p+2]}function y9t(e,t,n,[r,i]){const o=new Float64Array(Math.max(r,i)),s=new Float64Array(Math.max(r,i)),a=new Float64Array(5),l=new Float64Array(n.length);for(let c=0,u=0;c<i;++c,u+=r){const f=l.subarray(u);y5(e,n.subarray(u),r,1,o,s,a,f)}for(let c=0;c<r;++c){const u=l.subarray(c);y5(t,u,i,r,o,s,a,u)}return l}function y5(e,t,n,r=1,i=new Float64Array(n),o=new Float64Array(n),s=new Float64Array(5),a=i,l=v9t){const c=r*2,u=r*3,f=r*4,h=r*n;let p,g;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,s,e.sigma),g=4,p=f;g<n;++g,p+=r)i[g]=e.b_causal[0]*t[p]+e.b_causal[1]*t[p-r]+e.b_causal[2]*t[p-c]+e.b_causal[3]*t[p-u]-e.a[1]*i[g-1]-e.a[2]*i[g-2]-e.a[3]*i[g-3]-e.a[4]*i[g-4];for(l(o,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,s,e.sigma),g=4,p=h-r*5;g<n;++g,p-=r)o[g]=e.b_anticausal[1]*t[p+r]+e.b_anticausal[2]*t[p+c]+e.b_anticausal[3]*t[p+u]+e.b_anticausal[4]*t[p+f]-e.a[1]*o[g-1]-e.a[2]*o[g-2]-e.a[3]*o[g-3]-e.a[4]*o[g-4];if(e.negative)for(g=0,p=0;g<n;++g,p+=r)a[p]=i[g]+o[n-g-1];else for(g=0,p=0;g<n;++g,p+=r)a[p]=Math.max(0,i[g]+o[n-g-1]);return a}function v9t(e,t,n,r,i,o,s,a,l,c,u,f=.5){const h=Math.abs(r)*n,p=r<0?h+r:0;let g,y,v;for(y=0;y<=a;++y)for(c[y]=y<=o?i[y]:0,v=1;v<=a&&v<=y;++v)c[y]-=s[v]*c[y-v];for(v=0;v<a;++v)for(e[v]=0,y=1;y<=v;++y)g=p+r*y,g>=0&&g<h&&(e[v]+=c[v-y]*t[g]);const b=t[p],_=Math.ceil(u*10);for(y=0;y<_;++y){for(v=0;v<a;++v)e[v]+=c[v]*b;if(l-=Math.abs(c[0]),l<=f)break;for(c[a]=y+a<=o?i[y+a]:0,v=1;v<=a;++v)c[a]-=s[v]*c[a-v];for(v=0;v<a;++v)c[v]=c[v+1]}}const Wl="density";class uA extends Eh{constructor(t,n,r){const{bandwidth:i=0,interpolate:o="none",pixelSize:s=1,pad:a=1,width:l,height:c,...u}=r,f=b9t(u);super(t,n,u,QZ),this.densityMap=f,this.bandwidth=no(i,h=>(this.bandwidth=h,this.grids?this.convolve().update():null)),this.interpolate=no(o,h=>(this.interpolate=h,this.requestUpdate())),this.pixelSize=no(s,h=>(this.pixelSize=h,this.requestUpdate())),this.pad=no(a,h=>(this.pad=h,this.requestUpdate())),this.width=no(l,h=>(this.width=h,this.requestUpdate())),this.height=no(c,h=>(this.height=h,this.requestUpdate()))}setPlot(t,n){const r=()=>{this.hasFieldInfo()&&this.requestUpdate()};t.addAttributeListener("xDomain",r),t.addAttributeListener("yDomain",r),super.setPlot(t,n)}get filterStable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[xl]&&!n[xl]}query(t=[]){const{interpolate:n,pad:r,channels:i,densityMap:o}=this,[s,a]=this.extentX=ob(this,t),[l,c]=this.extentY=sb(this,t),[u,f]=this.bins=this.binDimensions(),[h,p]=sh(this,"x",u,[s,a],r),[g,y]=sh(this,"y",f,[l,c],r),v=r?[Do(p,[+s,+a]),Do(y,[+l,+c])]:[sc(+s,p),fi(p,+a),sc(+l,y),fi(y,+c)],b=zt.from(this.sourceTable()).where(t.concat(v)),_=this.groupby=[],w={};for(const k of i)if(Object.hasOwn(k,"field")){const{as:E,channel:T,field:M}=k;uh(M)?(w[T]=M,o[T]=!0):T==="weight"?w[Wl]=kr(M):T!=="x"&&T!=="y"&&(b.select({[E]:M}),_.push(E))}const S=this.aggr=Object.keys(w);if(w.density&&S.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(S.length||(S.push(Wl),w[Wl]=sr()),n==="linear"){if(S.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w[Wl])throw new Error("Linear binning not applicable to custom aggregates.");const k=A6(w[Wl])[0];return mvt(b,h,g,k,u,_)}else return tvt(b,h,g,w,u,_)}binDimensions(){const{plot:t,pixelSize:n,width:r,height:i}=this;return[r??Math.round(t.innerWidth()/n),i??Math.round(t.innerHeight()/n)]}queryResult(t){const[n,r]=this.bins,i=_9t(this.interpolate),{columns:o}=Ld(t);return this.grids0=p9t(n,r,o.index,o,this.aggr,this.groupby,i),this.convolve()}convolve(){const{aggr:t,bandwidth:n,bins:r,grids0:i,plot:o}=this;if(this.grids=i,n>0){const s=t.length===1?t[0]:t.includes(Wl)?Wl:null;if(!s)return console.warn("No compatible grid found for smoothing."),this;const a=i.columns[s],l=o.innerWidth(),c=o.innerHeight(),[u,f]=r,h=a.some(y=>y.some(v=>v<0)),p=m5(n*(u-1)/l,h),g=m5(n*(f-1)/c,h);this.grids={numRows:i.numRows,columns:{...i.columns,[s]:a.map(y=>y9t(p,g,y,r))}}}return this}}function b9t(e){const t={};for(const n in e)e[n]==="density"&&(delete e[n],t[n]=!0);return t}function _9t(e="none"){if(typeof e=="function")return e;switch(e.toLowerCase()){case"none":case"linear":return;case"nearest":return ZC;case"barycentric":return JC();case"random-walk":return QC()}throw new Error(`invalid interpolate: ${e}`)}class w9t extends uA{constructor(t,n){const{thresholds:r=10,...i}=n;super("geo",t,{bandwidth:20,interpolate:"linear",pixelSize:2,...i}),this.thresholds=no(r,o=>(this.thresholds=o,this.grids?this.contours().update():null))}convolve(){return super.convolve().contours()}contours(){const{bins:t,densityMap:n,grids:r,thresholds:i,plot:o}=this,{numRows:s,columns:a}=r;let l=i,c;if(Array.isArray(l))c=l;else{const[,C]=f8(a.density);c=Array.from({length:l-1},(L,F)=>C*(F+1)/l)}(n.fill||n.stroke)&&this.plot.getAttribute("colorScale")!=="log"&&this.plot.setAttribute("colorZero",!0);const[u,f]=t,[h,p]=o.getAttribute("xDomain"),[g,y]=o.getAttribute("yDomain"),v=(p-h)/u,b=(y-g)/f,_=+h,w=+g,S=C=>_+C*v,k=C=>w+C*b,E=r2().size(t),T=this.contourData=Array(s*c.length),{density:M,...I}=a,$=Object.entries(I);for(let C=0,L=0;C<s;++C){const F=M[C],N=$.reduce((O,[D,B])=>(O[D]=B[C],O),{});for(let O=0;O<c.length;++O,++L)T[L]=Object.assign(x9t(E.contour(F,c[O]),S,k),N)}return this}plotSpecs(){const{type:t,channels:n,densityMap:r,contourData:i}=this,o={};for(const s of n){const{channel:a}=s;a!=="x"&&a!=="y"&&(o[a]=ga(s))}for(const s in r)r[s]&&(o[s]=ga({channel:s,as:"value"}));return[{type:t,data:i,options:o}]}}function x9t(e,t,n){function r(s){s.forEach(i)}function i(s){s.forEach(o)}function o(s){s[0]=t(s[0]),s[1]=n(s[1])}return e.coordinates.forEach(r),e}function h8(e){return Array.from({length:e},(t,n)=>n)}function nQ(e,t){const n=t.reduce((i,o,s)=>(i[o]=s,i),{}),r=h8(e.length);return r.sort((i,o)=>n[e[i]]-n[e[o]]),r}function rQ(e,t){if(typeof document<"u"){const n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n}throw new Error("Can not create a canvas instance.")}function S9t(e=1){const t=255*e|0;return(n,r,i)=>{for(let o=0,s=0;o<i;++o)for(let a=0;a<r;++a,s+=4)n[s+3]=t}}function A9t(e){const{apply:t}=e;return(n,r,i,o)=>{for(let s=0,a=0;s<i;++s)for(let l=0,c=(i-s-1)*r;l<r;++l,a+=4)n[a+3]=255*t(o[l+c])|0}}function E9t(e={}){const{r:t=0,g:n=0,b:r=0,opacity:i=1}=typeof e=="string"?ms(e):e,o=new Uint8ClampedArray([t,n,r,255*i|0]);return(s,a,l)=>{for(let c=0,u=0;c<l;++c)for(let f=0;f<a;++f,u+=4)s[u+0]=o[0],s[u+1]=o[1],s[u+2]=o[2],s[u+3]=o[3]}}function k9t(e){const{domain:t,range:n}=e,r=Object.create(null),i=new Uint8ClampedArray(4*t.length),o=t.length-1,s=n.length;for(let a=0;a<=o;++a){const l=n[a%s],{r:c,g:u,b:f,opacity:h=1}=typeof l=="string"?ms(l):l,p=a<<2;i[p+0]=c,i[p+1]=u,i[p+2]=f,i[p+3]=255*h|0,r[t[a]]=p}return(a,l,c,u)=>{if(u.map)for(let f=0,h=0;f<c;++f)for(let p=0,g=(c-f-1)*l;p<l;++p,h+=4){const y=r[u[p+g]];a[h+0]=i[y+0],a[h+1]=i[y+1],a[h+2]=i[y+2],a[h+3]=i[y+3]}else{const f=r[u];for(let h=0,p=0;h<c;++h)for(let g=0;g<l;++g,p+=4)a[p+0]=i[f+0],a[p+1]=i[f+1],a[p+2]=i[f+2],a[p+3]=i[f+3]}}}function T9t(e,t,n){const{interpolate:r}=t,i=new Uint8ClampedArray(4*e),o=e-1;for(let s=0;s<=o;++s){const a=r(s/o),{r:l,g:c,b:u,opacity:f=1}=typeof a=="string"?ms(a):a,h=s<<2;i[h+0]=l,i[h+1]=c,i[h+2]=u,i[h+3]=255*f|0}return(s,a,l,c)=>{for(let u=0,f=0;u<l;++u)for(let h=0,p=(l-u-1)*a;h<a;++h,f+=4){const g=o*n(c[h+p])<<2;s[f+0]=i[g+0],s[f+1]=i[g+1],s[f+2]=i[g+2],s[f+3]=i[g+3]}}}class d8 extends uA{constructor(t,n){super("image",t,n),this.image=null}setPlot(t,n){const r=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}convolve(){return super.convolve().rasterize()}rasterize(){const{bins:t,grids:n}=this,[r,i]=t,{numRows:o,columns:s}=n,{canvas:a,ctx:l,img:c}=N9t(this,r,i),{alpha:u,alphaProp:f,color:h,colorProp:p}=iQ(this),g=s[f]??[],y=s[p]??[],v=o>1&&p&&this.groupby?.includes(p)?nQ(y,this.plot.getAttribute("colorDomain")):h8(o);return this.data={numRows:o,columns:{src:Array.from({length:o},(b,_)=>(h?.(c.data,r,i,y[v[_]]),u?.(c.data,r,i,g[v[_]]),l.putImageData(c,0,0),a.toDataURL()))}},this}plotSpecs(){const{type:t,plot:n,data:{numRows:r,columns:i}}=this,o={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:r},options:o}]}}class M9t extends d8{constructor(t,n){super(t,{bandwidth:20,interpolate:"linear",pixelSize:2,...n})}}function iQ(e){const{aggr:t,densityMap:n,groupby:r,plot:i}=e,o=t.includes(Wl),s=t.includes("fillOpacity"),a=e.channel("fill"),l=e.channel("fillOpacity");if(t.length>2||o&&s)throw new Error("Invalid raster encodings. Try dropping an aggregate?");if(r.includes(l?.as))throw new Error("Raster fillOpacity must be an aggregate or constant.");const c=n.fill||t.includes("fill")?"grid":r.includes(a?.as)?"group":GZ(a?.value)?a.value:o&&i.getAttribute("colorScheme")?"grid":void 0,u=n.fillOpacity||t.includes("fillOpacity")?"grid":typeof l?.value=="number"?l.value:o&&c!=="grid"?"grid":void 0;if(c!=="grid"&&u!=="grid")throw new Error("Raster mark missing density values.");const f=a?.as??(c==="grid"?Wl:null),h=l?.as??(u==="grid"?Wl:null),p=c!=="grid"&&c!=="group"?E9t(c):R9t(e,f),g=u!=="grid"?S9t(u):I9t(e,h);return{alphaProp:h,colorProp:f,alpha:g,color:p}}function I9t(e,t){const{plot:n,grids:r}=e,i=n.getAttribute("opacityDomain"),o=i===B1,s=i?.[xl],a=!o&&!s&&i||f8(r.columns[t]);(o||s||!i)&&(o||(a[xl]=!0),n.setAttribute("opacityDomain",a));const l=Zv({opacity:{type:n.getAttribute("opacityScale"),domain:a,range:n.getAttribute("opacityRange"),clamp:n.getAttribute("opacityClamp"),nice:n.getAttribute("opacityNice"),reverse:n.getAttribute("opacityReverse"),zero:n.getAttribute("opacityZero"),base:n.getAttribute("opacityBase"),exponent:n.getAttribute("opacityExponent"),constant:n.getAttribute("opacityConstant")}});return A9t(l)}function R9t(e,t){const{plot:n,grids:r}=e,i=r.columns[t],o=!i[0]?.map,s=o||Array.isArray(i[0]),a=n.getAttribute("colorDomain"),l=a===B1,c=a?.[xl],u=!l&&!c&&a||(o?i.slice().sort(Wn):s?g9t(i):f8(i));(l||c||!a)&&(l||(u[xl]=!0),n.setAttribute("colorDomain",u));const f=Zv({color:{type:n.getAttribute("colorScale"),domain:u,range:n.getAttribute("colorRange"),clamp:n.getAttribute("colorClamp"),n:n.getAttribute("colorN"),nice:n.getAttribute("colorNice"),reverse:n.getAttribute("colorReverse"),scheme:n.getAttribute("colorScheme"),interpolate:n.getAttribute("colorInterpolate"),pivot:n.getAttribute("colorPivot"),symmetric:n.getAttribute("colorSymmetric"),zero:n.getAttribute("colorZero"),base:n.getAttribute("colorBase"),exponent:n.getAttribute("colorExponent"),constant:n.getAttribute("colorConstant")}});if(s)return k9t(f);{const h=Zv({x:{type:C9t(f.type),domain:f.domain,reverse:f.reverse,range:[0,1],clamp:f.clamp,base:f.base,exponent:f.exponent,constant:f.constant}});return T9t(1024,f,h.apply)}}function C9t(e){return e.endsWith("symlog")?"symlog":e.endsWith("log")?"log":e.endsWith("pow")?"pow":e.endsWith("sqrt")?"sqrt":e==="diverging"?"linear":e}function N9t(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=rQ(t,n),i=r.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:o,w:t,h:n}}return e.image}class $9t extends d8{constructor(t,n){const{normalize:r=!0,...i}=n;super(t,i),this.normalize=no(r,o=>(this.normalize=o,this.requestUpdate()))}query(t=[]){const{channels:n,normalize:r,pad:i}=this,[o,s]=this.bins=this.binDimensions(),[a]=sh(this,"x",o,ob(this,t),i),[l]=sh(this,"y",s,sb(this,t),i),c=zt.from(this.sourceTable()).where(O9t(this,t));this.aggr=["density"];const u=this.groupby=[],f=[];for(const h of n)if(Object.hasOwn(h,"field")){const{channel:p,field:g}=h;p==="z"?(c.select({[p]:g}),f.push("z")):p!=="x"&&p!=="y"&&(c.select({[p]:g}),u.push(p))}return yvt(c,a,l,f,o,s,u,r)}}function O9t(e,t){if(Array.isArray(t)&&!t.length)return t;const n=e.channelField("x").column,r=e.channelField("y").column,i=s=>{const a=`${s.expr}`;return s.type!=="BETWEEN"||a!==n&&a!==r},o=s=>s.op==="AND"?Li(s.clauses.filter(a=>i(a))):s;return Array.isArray(t)?t.filter(s=>i(s)).map(s=>o(s)):o(t)}const D9t={fill:1,stroke:1,z:1};class oQ extends Eh{constructor(t,n,r){const{bins:i=1024,bandwidth:o=20,normalize:s=!1,stack:a=!1,...l}=r,c=t.endsWith("X")?"y":"x";super(t,n,l,c==="x"?JZ:ZZ),this.dim=c,this.bins=no(i,u=>(this.bins=u,this.requestUpdate())),this.bandwidth=no(o,u=>(this.bandwidth=u,this.grids?this.convolve().update():null)),this.normalize=no(s,u=>(this.normalize=u,this.convolve().update())),this.stack=no(a,u=>(this.stack=u,this.update()))}get filterStable(){const t=this.dim==="x"?"xDomain":"yDomain",n=this.plot.getAttribute(t);return n&&!n[xl]}query(t=[]){if(this.hasOwnData())throw new Error("Density1DMark requires a data source");const{bins:n,channels:r,dim:i}=this,o=this.extent=(i==="x"?ob:sb)(this,t),[s,a]=sh(this,i,n,o),l=u8(r,this.sourceTable(),[i]).where(t.concat(Do(a,o))),c=this.channelField("weight")?"weight":null,u=this.groupby=r.flatMap(f=>D9t[f.channel]&&f.field?f.as:[]);return gvt(l,s,c,u)}queryResult(t){const n=Ld(t).columns;return this.grids=d9t(this.bins,n.index,n.density,n,this.groupby),this.convolve()}convolve(){const{bins:t,bandwidth:n,normalize:r,dim:i,grids:o,groupby:s,plot:a,extent:[l,c]}=this,u=o.columns,f=o.numRows,h=this.channelField(i).as,p=i==="x"?"y":"x",g=i==="x"?a.innerWidth():a.innerHeight(),y=u._grid.some(T=>T.some(M=>M<0)),v=m5(n*(t-1)/g,y),b=+l,_=(c-b)/(t-1),w=t*f,S=new Float64Array(w),k=new Float64Array(w),E=s.reduce((T,M)=>(T[M]=Array(w),T),{});for(let T=0,M=0;M<f;++M){s.forEach(L=>E[L].fill(u[L][M],T,T+t));const I=u._grid[M],$=y5(v,I,t),C=1/L9t(I,$,_,r);for(let L=0;L<t;++L,++T)S[T]=b+L*_,k[T]=$[L]*C}return this.data={numRows:w,columns:{[h]:S,[p]:k,...E}},this}plotSpecs(){const{type:t,data:{numRows:n,columns:r},channels:i,dim:o,stack:s}=this,a=t.startsWith("area")&&!s?"2":"",l=o==="x"?{[`y${a}`]:r.y}:{[`x${a}`]:r.x};for(const c of i)l[c.channel]=ga(c,r);return[{type:t,data:{length:n},options:l}]}}function L9t(e,t,n,r){return(r===!0||r==="sum"?yl(e):r==="max"?Wr(t):n)||1}class F9t extends uA{constructor(t,n){const{type:r="dot",...i}=n;super(r,t,{bandwidth:20,interpolate:"linear",pad:0,pixelSize:2,...i})}convolve(){super.convolve();const{bins:t,pad:n,extentX:r,extentY:i}=this,[o,s]=t,a=H2(this,"x"),l=H2(this,"y"),[c,u]=r.map(v=>a.apply(v)),[f,h]=i.map(v=>l.apply(v)),p=(u-c)/(o-n),g=(h-f)/(s-n),y=n?0:.5;return this.data=B9t(this.grids,t,c,f,p,g,a.invert,l.invert,y),this}plotSpecs(){const{type:t,channels:n,densityMap:r,data:{numRows:i,columns:o}}=this,s={};for(const a of n){const{channel:l}=a;s[l]=l==="x"||l==="y"?o[l]:ga(a,o)}for(const a in r)r[a]&&(s[a]=o.density);return[{type:t,data:{length:i},options:s}]}}function B9t(e,t,n,r,i,o,s,a,l){const c=1/(i*o),[u,f]=t,h=u*f,p=h*e.numRows,g=new Float64Array(p),y=new Float64Array(p),v=new Float64Array(p),b={x:g,y,density:v},{density:_,...w}=e.columns;for(const k in w)b[k]=new w[k].constructor(p);let S=0;for(let k=0;k<e.numRows;++k){for(const T in w)b[T].fill(w[T][k],S,S+h);const E=_[k];for(let T=0,M=0;M<f;++M)for(let I=0;I<u;++I,++S,++T)g[S]=s(n+(I+l)*i),y[S]=a(r+(M+l)*o),v[S]=E[T]*c}return{numRows:p,columns:b}}function P9t(e,t,n){var r=1e-8,i=t-1,o=n-1,s=0,a,l,c,u,f,h,p,g;if(e<=0)return 0;if(e>=1)return 1;for(a=Math.log(t/(t+n)),l=Math.log(n/(t+n)),c=Math.exp(t*a)/t,u=Math.exp(n*l)/n,p=c+u,e<c/p?h=Math.pow(t*p*e,1/t):h=1-Math.pow(n*p*(1-e),1/n),g=-J0(t)-J0(n)+J0(t+n);s<10;s++){if(h===0||h===1)return h;if(f=z9t(h,t,n)-e,c=Math.exp(i*Math.log(h)+o*Math.log(1-h)+g),u=f/c,h-=c=u/(1-.5*Math.min(1,u*(i/h-o/(1-h)))),h<=0&&(h=.5*(h+c)),h>=1&&(h=.5*(h+c+1)),Math.abs(c)<r*h&&s>0)break}return h}function z9t(e,t,n){var r=e===0||e===1?0:Math.exp(J0(t+n)-J0(t)-J0(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?0:e<(t+1)/(t+n+2)?r*CB(e,t,n)/t:1-r*CB(1-e,n,t)/n}function CB(e,t,n){var r=1e-30,i=1,o=t+n,s=t+1,a=t-1,l=1,c=1-o*e/s,u,f,h,p;for(Math.abs(c)<r&&(c=r),c=1/c,p=c;i<=100&&(u=2*i,f=i*(n-i)*e/((a+u)*(t+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,p*=c*l,f=-(t+i)*(o+i)*e/((t+u)*(s+u)),c=1+f*c,Math.abs(c)<r&&(c=r),l=1+f/l,Math.abs(l)<r&&(l=r),c=1/c,h=c*l,p*=h,!(Math.abs(h-1)<3e-7));i++);return p}function J0(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)r+=n[t]/++o;return Math.log(2.506628274631*r/i)-s}function U9t(e,t){var n=P9t(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}function q9t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}class sQ extends Eh{constructor(t,n,r){const i=t.endsWith("X")?"y":"x",{ci:o=.95,...s}=r;super(t,n,s),this.dim=i,this.field=this.channelField(i).field,this.channels=this.channels.filter(a=>a.channel!==i),this.ci=no(o,a=>(this.ci=a,this.update()))}query(t=[]){const{channels:n,field:r}=this,i=n.concat([{field:CS(r),as:"__avg__"},{field:hr(Rz(r),cv(sr(r))),as:"__se__"}]);return u8(i,this.sourceTable()).where(t)}queryResult(t){return this.data=Ld(t),this}plotSpecs(){const{type:t,dim:n,detail:r,data:i,ci:o,channels:s}=this,a=Math.SQRT2*q9t(o),{columns:{__avg__:l,__se__:c}}=i,u={[`${n}1`]:l.map((f,h)=>f-a*c[h]),[`${n}2`]:l.map((f,h)=>f+a*c[h])};return KZ(t,r,s,i,u)}}const j9t="geom";class V9t extends Eh{constructor(t,n={},r){!p5(t)&&!n?.geometry&&(n.geometry=$z(j9t)),super("geo",t,n,r)}queryResult(t){super.queryResult(t);const n=this.channelField("geometry")?.as;if(n){const{columns:r}=this.data;typeof r[n][0]=="string"&&(r[n]=r[n].map(i=>JSON.parse(i)))}return this}}class W9t extends Eh{constructor(t,n){const{type:r="hexagon",binWidth:i=20,...o}=n;super(r,t,{r:i/2,clip:!0,...o},QZ),this.binWidth=no(i,s=>(this.binWidth=s,this.requestUpdate()))}get filterStable(){const t=this.plot.getAttribute("xDomain"),n=this.plot.getAttribute("yDomain");return t&&n&&!t[xl]&&!n[xl]}query(t=[]){if(this.hasOwnData())return null;const{plot:n,binWidth:r,channels:i}=this;let o,s;const a=new Set,l={};for(const $ of i)if($.channel!=="orderby"){if($.channel==="x")o=$;else if($.channel==="y")s=$;else if(Object.hasOwn($,"field")){const{as:C,field:L}=$;l[C]=L,uh(L)||a.add(C)}}const[c,u]=ob(this,t),[f,h]=sb(this,t),p=.5-n.getAttribute("marginLeft"),g=0-n.getAttribute("marginTop"),y=Mo(r),v=Mo(r*(1.5/Math.sqrt(3))),b=Mo(n.innerWidth()/(u-c)),_=Mo(n.innerHeight()/(h-f)),w="_x",S="_y",k="_px",E="_py",T="_pi",M="_pj",I="_tt";return zt.select({[o.as]:tr(Mo(c),hr(tr(Pe(tr(w,Pe(.5,qE(S,1))),y),p),b)),[s.as]:Be(Mo(h),hr(tr(Pe(S,v),g),_)),...l}).groupby(w,S,...a).from(zt.select({[E]:hr(Be(Pe(_,Be(h,s.field)),g),v),[M]:Si(uv(E)),[k]:Be(hr(Be(Pe(b,Be(o.field,c)),p),y),Pe(.5,qE(M,1))),[T]:Si(uv(k)),[I]:Li(ba(Pe(Ao(Be(E,M)),3),1),ba(tr(so(Be(k,T),2),so(Be(E,M),2)),tr(so(Be(Be(k,T),Pe(.5,rs(fi(k,T),-1,1))),2),so(Be(Be(E,M),rs(fi(E,M),-1,1)),2)))),[w]:rs(I,Si(tr(tr(T,rs(fi(k,T),-.5,.5)),rs(f1(qE(M,1),0),.5,-.5))),T),[S]:rs(I,Si(tr(M,rs(fi(E,M),-1,1))),M)},"*").from(this.sourceTable()).where(pc(o.field),pc(s.field),t))}}class Y9t extends uA{constructor(t,n){const{origin:r=[0,0],dim:i="xy",...o}=n;super("image",t,o),this.image=null,this.origin=r,this.tileX=i.toLowerCase().includes("x"),this.tileY=i.toLowerCase().includes("y")}setPlot(t,n){const r=()=>{this.hasFieldInfo()&&this.rasterize()};t.addAttributeListener("schemeColor",r),super.setPlot(t,n)}requestQuery(){return this.requestTiles()}query(t=[]){return this._filter=t,null}tileQuery(t){const{interpolate:n,pad:r,channels:i,densityMap:o}=this,[[s,a],[l,c]]=t,[u,f]=this.bins,[h,p]=sh(this,"x",u,[s,a],r),[g,y]=sh(this,"y",f,[l,c],r),v=r?[Do(p,[+s,+a]),Do(y,[+l,+c])]:[sc(+s,p),fi(p,+a),sc(+l,y),fi(y,+c)],b=zt.from(this.sourceTable()).where(v),_=this.groupby=[],w={};for(const k of i)if(Object.hasOwn(k,"field")){const{as:E,channel:T,field:M}=k;M.aggregate?(w[T]=M,o[T]=!0):T==="weight"?w.density=kr(M):T!=="x"&&T!=="y"&&(b.select({[E]:M}),_.push(E))}const S=this.aggr=Object.keys(w);if(w.density&&S.length>1)throw new Error("Weight option can not be used with custom aggregates.");if(S.length||(S.push("density"),w.density=sr()),n==="linear"){if(S.length>1)throw new Error("Linear binning not applicable to multiple aggregates.");if(!w.density)throw new Error("Linear binning not applicable to custom aggregates.");return J9t(b,h,g,w.density,u,_)}else return K9t(b,h,g,w,u,_)}async requestTiles(){const t=Ya();this.prefetch&&t.cancel(this.prefetch);const{pad:n,tileX:r,tileY:i,origin:[o,s]}=this,[a,l]=this.bins=this.binDimensions(),[c,u]=ob(this,this._filter),[f,h]=sb(this,this._filter),p=u-c,g=h-f,y=Math.floor((c-o)*(a-n)/p),v=Math.floor((f-s)*(l-n)/g),b=(C,L)=>[[o+C*p,o+(C+1)*p],[s+L*g,s+(L+1)*g]],_=Math.floor((c-o)/p),w=r?NB((u-o)/p):_,S=Math.floor((f-s)/g),k=i?NB((h-s)/g):S,E=[];for(let C=_;C<=w;++C)for(let L=S;L<=k;++L)E.push([C,L]);const T=E.map(([C,L])=>t.query(this.tileQuery(b(C,L)))),M=[];if(r)for(let C=S;C<=k;++C)M.push([w+1,C]),M.push([_-1,C]);if(i){const C=r?_-1:_,L=r?w+1:w;for(let F=C;F<=L;++F)M.push([F,k+1]),M.push([F,S-1])}this.prefetch=M.map(([C,L])=>t.prefetch(this.tileQuery(b(C,L))));const I=await Promise.all(T),$=H9t(a,l,y,v,E,I);this.grids0={numRows:$.length,columns:{density:[$]}},this.convolve().update()}convolve(){return super.convolve().rasterize()}rasterize(){const{bins:t,grids:n}=this,[r,i]=t,{numRows:o,columns:s}=n,{canvas:a,ctx:l,img:c}=X9t(this,r,i),{alpha:u,alphaProp:f,color:h,colorProp:p}=iQ(this),g=s[f]??[],y=s[p]??[],v=o>1&&p&&this.groupby?.includes(p)?nQ(y,this.plot.getAttribute("colorDomain")):h8(o);return this.data={numRows:o,columns:{src:Array.from({length:o},(b,_)=>(h?.(c.data,r,i,y[v[_]]),u?.(c.data,r,i,g[v[_]]),l.putImageData(c,0,0),a.toDataURL()))}},this}plotSpecs(){const{type:t,plot:n,data:{numRows:r,columns:i}}=this,o={src:i.src,width:n.innerWidth(),height:n.innerHeight(),preserveAspectRatio:"none",imageRendering:this.channel("imageRendering")?.value,frameAnchor:"middle"};return[{type:t,data:{length:r},options:o}]}}function H9t(e,t,n,r,i,o){const s=new Float64Array(e*t);return o.forEach((a,l)=>{const[c,u]=i[l],f=c*e-n,h=u*t-r;G9t(e,t,s,a,f,h)}),s}function G9t(e,t,n,r,i,o){const s=r.numRows;if(s===0)return;const a=r.getChild("index").toArray(),l=r.getChild("density").toArray();for(let c=0;c<s;++c){const u=a[c],f=i+u%e,h=o+Math.floor(u/e);0<=f&&f<e&&0<=h&&h<t&&(n[f+h*e]=l[c])}}function X9t(e,t,n){if(!e.image||e.image.w!==t||e.image.h!==n){const r=rQ(t,n),i=r.getContext("2d",{willReadFrequently:!0}),o=i.getImageData(0,0,t,n);e.image={canvas:r,ctx:i,img:o,w:t,h:n}}return e.image}function K9t(e,t,n,r,i,o){return e.select({index:ee`FLOOR(${t})::INTEGER + FLOOR(${n})::INTEGER * ${i}`,...r}).groupby("index",o)}function J9t(e,t,n,r,i,o){const s=r.column?`* ${r.column}`:"",a=(h,p)=>e.clone().select({xp:t,yp:n,i:h,w:p}),l=a(ee`FLOOR(xp)::INTEGER + FLOOR(yp)::INTEGER * ${i}`,ee`(FLOOR(xp)::INTEGER + 1 - xp) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),c=a(ee`FLOOR(xp)::INTEGER + (FLOOR(yp)::INTEGER + 1) * ${i}`,ee`(FLOOR(xp)::INTEGER + 1 - xp) * (yp - FLOOR(yp)::INTEGER)${s}`),u=a(ee`FLOOR(xp)::INTEGER + 1 + FLOOR(yp)::INTEGER * ${i}`,ee`(xp - FLOOR(xp)::INTEGER) * (FLOOR(yp)::INTEGER + 1 - yp)${s}`),f=a(ee`FLOOR(xp)::INTEGER + 1 + (FLOOR(yp)::INTEGER + 1) * ${i}`,ee`(xp - FLOOR(xp)::INTEGER) * (yp - FLOOR(yp)::INTEGER)${s}`);return zt.from(zt.unionAll(l,c,u,f)).select({index:"i",density:kr("w")},o).groupby("index",o).having(f1("density",0))}function NB(e){const t=Math.floor(e);return t===e?t-1:t}class Z9t extends Eh{constructor(t,n){const{ci:r=.95,precision:i=4,...o}=n;super("line",t,o);const s=()=>this.modelFit?this.confidenceBand().update():null;this.ci=no(r,a=>(this.ci=a,s())),this.precision=no(i,a=>(this.precision=a,s()))}query(t=[]){const n=this.channelField("x").as,r=this.channelField("y").as,i=Array.from(new Set(["stroke","z","fx","fy"].flatMap(o=>this.channelField(o)?.as||[])));return zt.from(super.query(t)).select({intercept:Umt(r,n),slope:Vmt(r,n),n:Iz(r,n),ssy:jmt(r,n),ssx:qmt(r,n),xm:Mz(r,n),x0:Mo(ml(n).where(pc(r))),x1:Mo(Ba(n).where(pc(r)))}).select(i).groupby(i)}queryResult(t){return this.modelFit=Ld(t),this.lineData=Q9t(this.modelFit),this.confidenceBand()}confidenceBand(){const{ci:t,modelFit:n,precision:r,plot:i}=this,o=i.innerWidth();return this.areaData=t?tPt(n,t,r,o):null,this}plotSpecs(){const{lineData:t,areaData:n,channels:r,ci:i}=this,o=t.columns,s=i?n.columns:{},a={x:o.x,y:o.y},l={x:s.x,y1:s.y1,y2:s.y2,fillOpacity:.1};for(const c of r)switch(c.channel){case"x":case"y":case"fill":break;case"tip":l.tip=ga(c,s);break;case"stroke":a.stroke=ga(c,o),l.fill=ga(c,s);break;case"strokeOpacity":a.strokeOpacity=ga(c,o);break;case"fillOpacity":l.fillOpacity=ga(c,s);break;default:a[c.channel]=ga(c,o),l[c.channel]=ga(c,s);break}return[...i?[{type:"areaY",data:{length:n.numRows},options:l}]:[],{type:"line",data:{length:t.numRows},options:a}]}}function $T(e,t){if(e.concat)return e.concat(t);const n=new e.constructor(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function Q9t(e){const{x0:t=[],x1:n=[],xm:r,intercept:i,slope:o,n:s,ssx:a,ssy:l,...c}=e.columns,u=(p,g)=>i[g]+p*o[g],f=$T(t,n),h=$T(t.map(u),n.map(u));for(const p in c)c[p]=$T(c[p],c[p]);return{numRows:f.length,columns:{x:f,y:h,...c}}}function tPt(e,t,n,r){const i=e.numRows,{x0:o,x1:s,xm:a,intercept:l,slope:c,n:u,ssx:f,ssy:h,...p}=e.columns,g=Object.keys(p),y={x:[],y1:[],y2:[]};g.forEach(v=>y[v]=[]);for(let v=0;v<i;++v){const b=n*(s[v]-o[v])/r,_=U9t((1-t)/2,u[v]-2)*Math.sqrt(h[v]/(u[v]-2));Ls(o[v],s[v]-b/2,b).concat(s[v]).forEach(w=>{const S=l[v]+w*c[v],k=_*Math.sqrt(1/u[v]+(w-a[v])**2/f[v]);y.x.push(w),y.y1.push(S-k),y.y2.push(S+k),g.forEach(E=>y[E].push(p[E][v]))})}return{numRows:y.x.length,columns:y}}function p8(e){e.tagName==="a"&&(e=e.children[0]);const t=e.__data__;return Array.isArray(t)?t[0]:t}function ePt(e){const t=e.toLowerCase(),n=e.length;let r="";for(let i=0;i<n;++i)r+=(e[i]!==t[i]?"-":"")+t[i];return r}function fA(e){const t={};for(const n in e)t[ePt(n)]=e[n];return t}function nPt(e){const{channels:t}=e,n=new Set;let r=!1,i=!1;for(const o of t){const{channel:s,field:a,as:l}=o;if(s==="orderby")r=!0;else if(a)if(uh(a))i=!0;else{if(n.has(l))continue;n.add(l)}}return!r&&i&&n.size&&e.channels.push({channel:"orderby",value:Array.from(n)}),e}class rPt{constructor(t,{selection:n,channels:r={}}){this.mark=nPt(t),this.selection=n;const i=Object.entries(fA(r));this.channels=i.length?i:[["opacity",.2]],this.selection.addEventListener("value",dP(()=>this.update()))}init(t){this.svg=t;const n=this.values=[],i=`g[data-index="${this.mark.index}"]`,o=`${i} > *:not(g), ${i} > g > *`,s=this.nodes=t.querySelectorAll(o),{channels:a}=this;for(let l=0;l<s.length;++l){const c=s[l];n.push(a.map(u=>c.getAttribute(u[0])))}return this.update()}async update(){const{svg:t,nodes:n,channels:r,values:i,mark:o,selection:s}=this;if(!t)return;const a=await iPt(o,s);for(let l=0;l<n.length;++l){const c=n[l],u=i[l],f=a(p8(c));for(let h=0;h<r.length;++h){const[p,g]=r[h];c.setAttribute(p,f?u[h]:g)}}}}async function iPt(e,t){const n=t?.predicate(e);if(!n||n.length===0)return()=>!0;const r=e.filterBy?.predicate(e,!0),i={__:Li(n)},o=e.query(r);(o.queries||[o]).forEach(l=>{l._groupby.length?l.select(i):l.setSelect(i)});const s=await e.coordinator.query(o),a=s.getChild?.("__");return s.numRows||s.length?a?l=>a.at(l):l=>s[l].__:()=>!1}function aQ(){const e=this,t=e.getScreenCTM;let n;e.getScreenCTM=()=>e.isConnected?n=t.call(e):n}function g8(e){const t=e.on;let n=!0;function r(i){n=!1,i(),n=!0}return e.reset=(...i)=>{r(()=>e.clear(...i))},e.moveSilent=(...i)=>{r(()=>e.move(...i))},e.on=(...i)=>{if(i.length>1&&i[1]){const o=i[1];i[1]=(...s)=>n&&o(...s)}return t(...i)},e}function lQ(){return g8(jRt())}function oPt(){return g8(URt())}function sPt(){return g8(qRt())}function cQ(e,t,n,r,i){let o=Er(t??e).append("g").attr("class",i);const s=e.scale("fx"),a=e.scale("fy");if(s||a){const l=s?.domain.map(u=>s.apply(u)-n),c=a?.domain.map(u=>a.apply(u)-r);if(l&&c)for(let u=0;u<l.length;++u)for(let f=0;f<c.length;++f)o.append("g").attr("transform",`translate(${l[u]}, ${c[f]})`);else if(l)for(let u=0;u<l.length;++u)o.append("g").attr("transform",`translate(${l[u]}, 0})`);else if(c)for(let u=0;u<c.length;++u)o.append("g").attr("transform",`translate(0, ${c[u]})`);o=o.selectAll("g")}return o.each(aQ)}const $B=1e-12;function v5(e,t){return e===t||e&&t&&Math.abs(e[0]-t[0])<$B&&Math.abs(e[1]-t[1])<$B||!1}function uQ(e){if(dc(e)){if(e.type==="COLUMN_REF")return e.column;if(e.type==="AGGREGATE")return e.args[0]??e}return e}function Og(e,t){return uQ(e.channelField(t)?.field)}function aPt(e,t){const n=[],r=[];return t.forEach(i=>{const o=i==="color"?["color","fill","stroke"]:i==="x"?["x","x1","x2"]:i==="y"?["y","y1","y2"]:[i];for(let s=0;s<o.length;++s){const a=e.channelField(o[s],{exact:!0});if(a){n.push(uQ(a.field)),r.push(a.as);return}}throw new Error(`Missing channel: ${i}`)}),{fields:n,as:r}}function b5(e,t,n=1){return t.invert(n*Math.floor(e/n))}class m8{constructor(t,{channel:n,selection:r,field:i=void 0,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.channel=n,this.pixelSize=o||1,this.selection=r,this.peers=s,this.field=i||Og(t,n),this.style=a&&fA(a),this.brush=n==="y"?sPt():oPt(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[0,1]))}publish(t){let n;t&&(n=t.map(r=>b5(r,this.scale,this.pixelSize)).sort((r,i)=>r-i)),v5(n,this.value)||(this.value=n,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(n)))}clause(t){const{mark:n,pixelSize:r,field:i,scale:o}=this;return nI(i,t,{source:this,clients:this.peers?n.plot.markSet:new Set().add(n),scale:o,pixelSize:r})}init(t,n){const{brush:r,channel:i,style:o}=this;this.scale=t.scale(i);const s=this.value?.map(this.scale.apply).sort(Wn),a=t.scale("x").range,l=t.scale("y").range;if(r.extent([[Lr(a),Lr(l)],[Wr(a),Wr(l)]]),this.g=cQ(t,n,Lr(a),Lr(l),`interval-${i}`).call(r).call(r.moveSilent,s),o){const c=this.g.selectAll("rect.selection");for(const u in o)c.attr(u,o[u])}t.addEventListener("pointerenter",c=>{c.buttons||this.activate()})}}class lPt{constructor(t,{selection:n,xfield:r,yfield:i,pixelSize:o=1,peers:s=!0,brush:a}){this.mark=t,this.pixelSize=o||1,this.selection=n,this.peers=s,this.xfield=r||Og(t,"x"),this.yfield=i||Og(t,"y"),this.style=a&&fA(a),this.brush=lQ(),this.brush.on("brush end",({selection:l})=>this.publish(l))}reset(){this.value=void 0,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause(this.value||[[0,1],[0,1]]))}publish(t){const{value:n,pixelSize:r,xscale:i,yscale:o}=this;let s,a;if(t){const[l,c]=t;s=[l[0],c[0]].map(u=>b5(u,i,r)).sort(Wn),a=[l[1],c[1]].map(u=>b5(u,o,r)).sort(Wn)}(!v5(s,n?.[0])||!v5(a,n?.[1]))&&(this.value=t?[s,a]:void 0,this.g.call(this.brush.moveSilent,t),this.selection.update(this.clause(this.value)))}clause(t){const{mark:n,pixelSize:r,xfield:i,yfield:o,xscale:s,yscale:a}=this;return bwt([i,o],t,{source:this,clients:this.peers?n.plot.markSet:new Set().add(n),scales:[s,a],pixelSize:r})}init(t){const{brush:n,style:r,value:i}=this,o=this.xscale=t.scale("x"),s=this.yscale=t.scale("y"),a=o.range,l=s.range;if(n.extent([[Lr(a),Lr(l)],[Wr(a),Wr(l)]]),this.g=cQ(t,null,Lr(a),Lr(l),"interval-xy").call(n),r){const c=this.g.selectAll("rect.selection");for(const u in r)c.attr(u,r[u])}if(i){const[c,u]=i[0].map(o.apply).sort(Wn),[f,h]=i[1].map(s.apply).sort(Wn);this.g.call(n.moveSilent,[[c,f],[u,h]])}t.addEventListener("pointerenter",c=>{c.buttons||this.activate()})}}class y8{constructor(t,{selection:n,pointer:r,channels:i,fields:o,maxRadius:s=40}){this.mark=t,this.selection=n,this.clients=new Set().add(t),this.pointer=r,this.channels=i||(r==="x"?["x"]:r==="y"?["y"]:["x","y"]),this.fields=o||this.channels.map(a=>Og(t,[a])),this.maxRadius=s,this.valueIndex=-1}clause(t){const{clients:n,fields:r}=this,i={source:this,clients:n};return r.length>1?US(r,t&&[t],i):Ex(r[0],t?.[0],i)}init(t){const n=this,{mark:r,channels:i,selection:o,maxRadius:s}=this,{data:{columns:a}}=r,l=i.map(y=>r.channelField(y).as),c=!Lo(o),[u,f]=cPt(t,r),h=this.pointer==="y"?.01:1,p=this.pointer==="x"?.01:1,g=Er(t);g.on("pointerenter pointerdown pointermove",function(y){const[v,b]=el(y,this),_=uPt(u,f,v,b,h,p,s);if(_!==this.valueIndex){this.valueIndex=_;const w=_<0?void 0:l.map(S=>a[S][_]);o.update(c?!w||w.length>1?w:w[0]:n.clause(w))}}),!c&&(g.on("pointerleave",()=>{o.update(n.clause(void 0))}),t.addEventListener("pointerenter",y=>{y.buttons||this.activate()}))}activate(){const t=this.channels.map(()=>0);this.selection.activate(this.clause(t))}}function cPt(e,t){const{data:{columns:n}}=t,r=f=>n[t.channelField(f)?.as],i=f=>e.scale(f),o=e.scale("x"),s=e.scale("y"),a=i("fx")?.apply,l=i("fy")?.apply,c=Array.from(r("x"),o.apply),u=Array.from(r("y"),s.apply);if(a){const f=Lr(o.range),h=r("fx");for(let p=0;p<h.length;++p)c[p]+=a(h[p])-f}if(l){const f=Lr(s.range),h=r("fy");for(let p=0;p<h.length;++p)u[p]+=l(h[p])-f}return[c,u]}function uPt(e,t,n,r,i,o,s){let a=s*s,l=-1;for(let c=0;c<e.length;++c){const u=i*(e[c]-n),f=o*(t[c]-r),h=u*u+f*f;h<=a&&(a=h,l=c)}return l}const OB=(e,t)=>e-t;class fPt{constructor(t,{x:n=new sg,y:r=new sg,xfield:i,yfield:o,zoom:s=!0,panx:a=!0,pany:l=!0}){this.mark=t,this.xsel=n,this.ysel=r,this.xfield=i||Og(t,"x"),this.yfield=o||Og(t,"y"),this.zoom=OT(s,[0,1/0],[1,1]),this.panx=this.xsel&&a,this.pany=this.ysel&&l;const{plot:c}=t;a&&this.xsel.addEventListener("value",u=>{c.setAttribute("xDomain",u)&&c.update()}),l&&this.ysel.addEventListener("value",u=>{c.setAttribute("yDomain",u)&&c.update()})}publish(t){if(this.panx){const n=hPt(t,this.xscale);this.xsel.update(this.clause(n,this.xfield,this.xscale))}if(this.pany){const n=dPt(t,this.yscale);this.ysel.update(this.clause(n,this.yfield,this.yscale))}}clause(t,n,r){return nI(n,t,{source:this,clients:this.mark.plot.markSet,scale:r})}init(t){if(this.svg=t,this.initialized)return;this.initialized=!0;const{panx:n,pany:r,mark:{plot:{element:i}}}=this;this.xscale=t.scale("x"),this.yscale=t.scale("y");const o=this.xscale.range.slice().sort(OB),s=this.yscale.range.slice().sort(OB),a=OT(n,[-1/0,1/0],o),l=OT(r,[-1/0,1/0],s),c=jNt().extent([[o[0],s[0]],[o[1],s[1]]]).scaleExtent(this.zoom).translateExtent([[a[0],l[0]],[a[1],l[1]]]).on("start",()=>{this.xscale=this.svg.scale("x"),this.yscale=this.svg.scale("y")}).on("end",()=>i.__zoom=new rc(1,0,0)).on("zoom",({transform:u})=>this.publish(u));if(Er(i).call(c),n||r){let u=!1;i.addEventListener("pointerenter",f=>{u||(u=!0,f.buttons||this.activate())}),i.addEventListener("pointerleave",()=>u=!1)}}activate(){if(this.panx){const{xscale:t,xfield:n}=this;this.xsel.activate(this.clause(t.domain,n,t))}if(this.pany){const{yscale:t,yfield:n}=this;this.ysel.activate(this.clause(t.domain,n,t))}}}function OT(e,t,n){return e?Array.isArray(e)?e:t:n}function hPt(e,t){return t.range.map(e.invertX,e).map(t.invert,t)}function dPt(e,t){return t.range.map(e.invertY,e).map(t.invert,t)}const pPt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},gPt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,mPt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,yPt=/^((\s+,?\s*)|(,\s*))/,vPt=/^[01]/,fQ=e=>`Invalid SVG path, incorrect parameter ${e}`;function bPt(e){const t=[];return(e.match(gPt)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=pPt[o],a=_Pt(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw new Error(fQ("count"));if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let c=s;c<l;c+=s)t.push([i,...a.slice(c,c+s)])}}),t}function _Pt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?vPt:mPt,a=n.slice(i).match(s);if(a===null)throw new Error(fQ("type"));i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(yPt);l!==null&&(i+=l[0].length)}return r}function wPt(e,t,n){const{x:r,y:i}=e.getBoundingClientRect(),o=e.createSVGMatrix(),s=[];for(const a of t.children)if(a.tagName==="g"){const l=hQ(a)??o;for(const c of a.children)DB(n,r,i,c,l)&&s.push(c)}else DB(n,r,i,a,o)&&s.push(a);return s}function DB(e,t,n,r,i){let[[o,s],[a,l]]=e;const{e:c,f:u}=i,f=r.getBoundingClientRect(),h=f.left-t,p=f.right-t,g=f.top-n,y=f.bottom-n;if(h>=o&&p<=a&&g>=s&&y<=l)return!0;if(h<=a&&p>=o&&g<=l&&y>=s){let v=r.tagName;if(v==="a"&&(r=r.children[0],v=r.tagName),v==="rect"||v==="text"||v==="image")return!0;switch(o-=c,s-=u,a-=c,l-=u,v){case"circle":return dQ(o,s,a,l,qh(r.cx),qh(r.cy),qh(r.r));case"line":return pQ(o,s,a,l,qh(r.x1),qh(r.y1),qh(r.x2),qh(r.y2));case"path":return xPt(o,s,a,l,r)}}return!1}function qh(e){return e.baseVal.value}function hQ(e){const t=e.transform.baseVal,n=t.length;let r=t[0]?.matrix;for(let i=1;i<n;++i)r=r.multiply(t[i].matrix);return r}function dQ(e,t,n,r,i,o,s){const a=e<=i&&i<=n,l=t<=o&&o<=r;if(a&&l)return!0;const c=Math.min(Math.abs(e-i),Math.abs(n-i));if(l&&c<=s)return!0;const u=Math.min(Math.abs(t-o),Math.abs(r-o));return a&&u<=s||c*c+u*u<=s*s}function pQ(e,t,n,r,i,o,s,a){const l=Math.max(Math.min(i,s),e),c=Math.min(Math.max(i,s),n);if(l>c)return!1;let u=o,f=a;const h=s-i;if(Math.abs(h)>1e-8){const y=(a-o)/h,v=o-y*i;u=y*l+v,f=y*c+v}const p=Math.max(Math.min(u,f),t),g=Math.min(Math.max(u,f),r);return p<=g}function xPt(e,t,n,r,i){const o=i.__path__||(i.__path__=bPt(i.getAttribute("d")));let s=0,a=0,l=0,c=0,u=!1,f=[0,0],h=2;const p=hQ(i),g=(_,w)=>{f.length=h=2,f[0]=l=s=_,f[1]=c=a=w},y=p?(_,w)=>g(LB(p,_,w),FB(p,_,w)):(_,w)=>g(_,w),v=(_,w)=>(f[h]=_,f[h+1]=w,h+=2,pQ(e,t,n,r,f[h-4],f[h-3],_,w)),b=p?(_,w)=>{u=v(LB(p,l=_,c=w),FB(p,_,w))}:(_,w)=>{u=v(l=_,c=w)};for(let _=0;_<o.length;++_){const w=o[_];switch(w[0]){case"M":y(w[1],w[2]);break;case"m":y(l+w[1],c+w[2]);break;case"L":case"T":b(w[1],w[2]);break;case"H":b(w[1],c);break;case"V":b(l,w[1]);break;case"l":case"t":b(l+w[1],c+w[2]);break;case"h":b(l+w[1],c);break;case"v":b(l,c+w[1]);break;case"C":b(w[5],w[6]);break;case"c":b(l+w[5],c+w[6]);break;case"S":case"Q":b(w[3],w[4]);break;case"s":case"q":b(l+w[3],c+w[4]);break;case"A":b(w[6],w[7]);break;case"a":if(SPt(o,_))return dQ(e,t,n,r,l,c-w[2],w[2]);b(l+w[6],l+w[7]);break;case"z":case"Z":if(b(s,a),APt(e,t,f)>0)return!0;y(s,a);break;default:return console.warn("SVG path command not supported: ",w[0]),!1}if(u)return!0}return!1}function LB(e,t,n){return e.a*t+e.c*n+e.e}function FB(e,t,n){return e.b*t+e.d*n+e.f}function SPt(e,t){const n=e[t],r=e[t+1];return r&&r[0]==="a"&&e[t+2]?.[0]==="z"&&n[1]===n[2]&&r[1]===r[2]&&n[1]===r[1]&&n[7]===-r[7]}function APt(e,t,n){let r=0;const i=n.length-2;for(let o=0;o<i;o+=2)n[o+1]<=t?n[o+3]>t&&BB(e,t,n,o)>0&&++r:n[o+3]<=t&&BB(e,t,n[o])<0&&--r;return r}function BB(e,t,n,r){return(n[r+2]-n[r])*(t-n[r+1])-(e-n[r])*(n[r+3]-n[r+1])}function gQ(e,t){return e==null||t==null?e!=null||t!=null:e.length!==t.length||e.some((n,r)=>_5(n,t[r]))}function _5(e,t){const n=e.length;if(t.length!==n)return!0;for(let r=0;r<n;++r)if(e[r]!==t[r])return!0;return!1}class EPt{constructor(t,{channels:n,selection:r,peers:i=!0,brush:o={fill:"none",stroke:"currentColor",strokeDasharray:"1,1"}}){this.mark=t,this.selection=r,this.peers=i,this.style=o&&fA(o),this.brush=lQ(),this.brush.on("brush end",l=>this.publish(l.selection)),this.extent=null,this.groups=null;const{fields:s,as:a}=aPt(t,n);this.fields=s,this.as=a}reset(){this.value=void 0,this.extent=null,this.g&&this.brush.reset(this.g)}activate(){this.selection.activate(this.clause([this.fields.map(()=>0)]))}clause(t){const{fields:n,mark:r}=this;return US(n,t,{source:this,clients:this.peers?r.plot.markSet:new Set().add(r)})}publish(t){const{as:n,group:r,mark:i,svg:o}=this;let s;if(t){const{data:{columns:a={}}={}}=i,l=new Map;wPt(o,r,t).forEach(c=>{const u=p8(c),f=n.map(h=>a[h][u]);l.set(f.join("|"),f)}),s=Array.from(l.values())}this.extent=t,gQ(s,this.value)&&(this.value=s,this.selection.update(this.clause(s)))}init(t){const{brush:n,extent:r,mark:i,style:o}=this;this.svg=t;const s=t.width.baseVal.value,a=t.height.baseVal.value;if(n.extent([[0,0],[s,a]]),this.group=t.querySelector(`[data-index="${i.index}"]`),this.g=Er(t).append("g").attr("class","region-xy").each(aQ).call(n).call(n.moveSilent,r),o){const l=this.g.selectAll("rect.selection");for(const c in o)l.attr(c,o[c])}t.addEventListener("pointerenter",l=>{l.buttons||this.activate()})}}class mQ{constructor(t,{selection:n,channels:r,peers:i=!0}){this.mark=t,this.value=null,this.selection=n,this.peers=i;const o=this.fields=[],s=this.as=[];r.forEach(a=>{const l=a==="color"?["color","fill","stroke"]:a==="x"?["x","x1","x2"]:a==="y"?["y","y1","y2"]:[a];for(let c=0;c<l.length;++c){const u=t.channelField(l[c],{exact:!0});if(u){o.push(u.field?.basis||u.field),s.push(u.as);return}}throw new Error(`Missing channel: ${a}`)})}clause(t){const{fields:n,mark:r}=this;return US(n,t,{source:this,clients:this.peers?r.plot.markSet:new Set().add(r)})}init(t,n,r){const{mark:i,as:o,selection:s}=this,{data:{columns:a={}}={}}=i;r??=c=>o.map(u=>a[u][p8(c)]),n??=`[data-index="${i.index}"]`;const l=Array.from(t.querySelectorAll(n));t.addEventListener("pointerdown",c=>{const u=s.single?s.value:this.value,f=c.target;let h=null;if(kPt(l,f)){const p=r(f);(c.shiftKey||c.metaKey)&&u?.length?(h=u.filter(g=>_5(g,p)),h.length===u.length&&h.push(p)):u?.length===1&&!_5(u[0],p)?h=null:h=[p]}this.value=h,gQ(u,h)&&s.update(this.clause(h))}),t.addEventListener("pointerenter",c=>{c.buttons||this.activate()})}activate(){this.selection.activate(this.clause([this.fields.map(()=>0)]))}}function kPt(e,t){return e.some(n=>n.contains(t))}const yQ=":scope > div, :scope > span",Tw="swatch",PB="ramp";class zB{constructor(t,n){const{as:r,field:i,...o}=n;this.channel=t,this.options=o,this.type=null,this.handler=null,this.selection=r,this.field=i,this.legend=null,this.element=document.createElement("div"),this.element.setAttribute("class","legend"),Object.defineProperty(this.element,"value",{value:this})}setPlot(t){this.plot=t}init(t){const n=TPt(this,t);return this.element.replaceChildren(n),this.element}update(){if(!this.legend)return;const{selection:t,handler:n}=this,{single:r,value:i}=t,o=r?i:t.valueFor(n),s=o&&o.length?new Set(o.map(l=>l[0])):null,a=this.legend.querySelectorAll(yQ);for(const l of a){const c=s?s.has(l.__data__):!0;l.style.opacity=c?1:.2}}}function TPt(e,t){const{channel:n,plot:r,selection:i}=e,o=t.scale(n),s=o.type==="ordinal"?Tw:PB,a={label:r.getAttribute(`${n}Label`)??null,...e.options},l=s===Tw?a:a.label?{tickSize:2,...a}:{tickSize:2,marginTop:1,height:29,...a},c=t.legend(n,l);e.legend=c;let u=!!i;if(u&&s===PB){const f=l.width??240,h=CPt(o,f);h?c.scale=function(p){return p==="x"?{range:[0,f]}:p==="y"?{range:[-10,0]}:p===n?h:void 0}:u=!1}if(u){const f=MPt(e,s);s===Tw?(f.init(c,yQ,h=>[h.__data__]),e.update()):f.init(c,c.querySelector("g:last-of-type"))}return c}function MPt(e,t){const{channel:n,handler:r,selection:i}=e;if(r)return r;const o=IPt(e);return t===Tw?(e.handler=new mQ(o,{selection:i,channels:[n],peers:!1}),i.addEventListener("value",()=>e.update())):e.handler=new m8(o,{selection:i,channel:n,brush:{fill:"none",stroke:"currentColor"},peers:!1}),e.handler}function IPt(e){const{channel:t,plot:n}=e,r=e.field??RPt(n.marks,t)??"value";if(r){const i={field:r};return{plot:n,channelField:o=>t===o?i:void 0}}}function RPt(e,t){const n=t==="color"?["fill","stroke"]:t==="opacity"?["opacity","fillOpacity","strokeOpacity"]:null;if(n==null)return null;for(let r=e.length-1;r>-1;--r)for(const i of n){const o=e[r].channelField(i,{exact:!0});if(o)return o.field}return null}function CPt(e,t){const{apply:n,invert:r,interpolate:i,...o}=e;let s=e.type;s.startsWith("diverging-")&&(s=s.slice(11));let a;switch(s){case"log":case"pow":case"sqrt":case"symlog":a=s;break;case"threshold":case"quantize":case"quantile":return console.warn(`Legends do not yet support ${s} scales.`),null;default:a="linear"}return Zv({x:{...o,type:a,range:[0,t]}})}const NPt=new Set(["rectY-x","rectX-y","rect-x","rect-y","ruleY-x","ruleX-y"]);function $Pt(e,t){return NPt.has(`${e.type}-${t}`)}function OPt(e,t={}){const n=(r,i)=>$Pt(r,i)?{[`${i}1`]:DT(r,i,e,t),[`${i}2`]:DT(r,i,e,{...t,offset:1})}:{[i]:DT(r,i,e,t)};return n[TH]=!0,n}function DT(e,t,n,r){return new LPt(n,e,t,r)}function DPt(e,t){const n=e.plot.getAttribute(`${t}Scale`);return n==="utc"||n==="time"}let LPt=class extends Qr{constructor(t,n,r,i){super("COLUMN_REF"),this.column=t,this.mark=n,this.channel=r,this.options=i}get stats(){return{column:this.column,stats:["min","max"]}}toString(){const{mark:t,channel:n,column:r,options:i}=this,{type:o,min:s,max:a}=t.channelField(n);return`${i.interval||o==="date"||DPt(t,n)?avt(r,[s,a],i):pvt(r,[s,a],i,H2(t,n))}`}},hA=class extends ch{constructor(t,n,r="input"){super(t),this.element=n||document.createElement("div"),r&&this.element.setAttribute("class",r),Object.defineProperty(this.element,"value",{value:this})}activate(){}};const FPt=e=>e&&typeof e=="object"&&!Array.isArray(e);class BPt extends hA{constructor({element:t,filterBy:n,as:r,from:i,column:o,label:s=o,format:a=f=>f,options:l,value:c,field:u=o}={}){super(n,t),this.from=i,this.column=o,this.format=a,this.field=u;const f=this.selection=r,h=document.createElement("label");if(h.innerText=s||o,this.element.appendChild(h),this.select=document.createElement("select"),this.element.appendChild(this.select),l&&(this.data=l.map(p=>FPt(p)?p:{value:p}),this.selectedValue(c===void 0?"":c),this.update()),f){const p=!Lo(f);c!=null&&(!p||f.value===void 0)&&this.publish(c),this.select.addEventListener("input",()=>{this.publish(this.selectedValue()??null)}),p?this.selection.addEventListener("value",g=>{g!==this.select.value&&this.selectedValue(g)}):(this.select.addEventListener("pointerenter",g=>{g.buttons||this.activate()}),this.select.addEventListener("focus",()=>this.activate()))}}selectedValue(t){if(arguments.length===0){const n=this.select.selectedIndex;return this.data[n].value}else{const n=this.data?.findIndex(r=>r.value===t);n>=0?this.select.selectedIndex=n:this.select.value=String(t)}}reset(){this.select.selectedIndex=this.from?0:-1}activate(){Lo(this.selection)&&this.selection.activate(Ex(this.field,0,{source:this}))}publish(t){const{selection:n,field:r}=this;if(Lo(n)){t===""&&(t=void 0);const i=Ex(r,t,{source:this});n.update(i)}else Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?zt.from(n).select({value:r}).distinct().where(t).orderby(r):null}queryResult(t){return this.data=[{value:"",label:"All"},...t],this}update(){const{data:t,format:n,select:r,selection:i}=this;r.replaceChildren();for(const{value:o,label:s}of t){const a=document.createElement("option");a.setAttribute("value",o),a.innerText=s??n(o),this.select.appendChild(a)}if(i){const o=Lo(i)?i.valueFor(this):i.value;this.selectedValue(o===void 0?"":o)}return this}}let PPt=0;class zPt extends hA{constructor({element:t,filterBy:n,from:r,column:i,label:o,type:s="contains",field:a=i,as:l}={}){if(super(n,t),this.id="search_"+ ++PPt,this.type=s,this.from=r,this.column=i,this.selection=l,this.field=a,o){const c=document.createElement("label");c.setAttribute("for",this.id),c.innerText=o,this.element.appendChild(c)}this.searchbox=document.createElement("input"),this.searchbox.setAttribute("id",this.id),this.searchbox.setAttribute("type","text"),this.searchbox.setAttribute("placeholder","Query"),this.element.appendChild(this.searchbox),this.selection&&(this.searchbox.addEventListener("input",()=>{this.publish(this.searchbox.value||null)}),Lo(this.selection)?(this.searchbox.addEventListener("pointerenter",c=>{c.buttons||this.activate()}),this.searchbox.addEventListener("focus",()=>this.activate())):this.selection.addEventListener("value",c=>{c!==this.searchbox.value&&(this.searchbox.value=c)}))}reset(){this.searchbox.value=""}clause(t){const{field:n,type:r}=this;return wwt(n,t,{source:this,method:r})}activate(){Lo(this.selection)&&this.selection.activate(this.clause(""))}publish(t){const{selection:n}=this;Lo(n)?n.update(this.clause(t)):Na(n)&&n.update(t)}query(t=[]){const{from:n,column:r}=this;return n?zt.from(n).select({list:r}).distinct().where(t):null}queryResult(t){return this.data=t,this}update(){const t=document.createElement("datalist"),n=`${this.id}_list`;t.setAttribute("id",n);for(const r of this.data){const i=document.createElement("option");i.setAttribute("value",r.list),t.append(i)}return this.datalist&&this.datalist.remove(),this.element.appendChild(this.datalist=t),this.searchbox.setAttribute("list",n),this}}let UPt=0,qPt=class extends hA{constructor({element:t,filterBy:n,as:r,min:i,max:o,step:s,from:a,column:l,label:c=l,value:u=r?.value,select:f="point",field:h=l,width:p}={}){if(super(n,t),this.id="slider_"+ ++UPt,this.from=a,this.column=l||"value",this.selection=r,this.selectionType=f,this.field=h,this.min=i,this.max=o,this.step=s,c){const g=document.createElement("label");g.setAttribute("for",this.id),g.innerText=c,this.element.appendChild(g)}this.slider=document.createElement("input"),this.slider.setAttribute("id",this.id),this.slider.setAttribute("type","range"),p!=null&&(this.slider.style.width=`${+p}px`),i!=null&&this.slider.setAttribute("min",`${i}`),o!=null&&this.slider.setAttribute("max",`${o}`),s!=null&&this.slider.setAttribute("step",`${s}`),this.element.appendChild(this.slider),this.curval=document.createElement("label"),this.curval.setAttribute("for",this.id),this.curval.setAttribute("class","value"),this.element.appendChild(this.curval),u!=null&&(this.slider.setAttribute("value",`${u}`),this.selection?.value===void 0&&this.publish(u)),this.curval.innerText=this.slider.value,this.slider.addEventListener("input",()=>{const{value:g}=this.slider;this.curval.innerText=g,this.selection&&this.publish(+g)}),this.selection&&(Lo(this.selection)?(this.slider.addEventListener("pointerenter",g=>{g.buttons||this.activate()}),this.slider.addEventListener("focus",()=>this.activate())):this.selection.addEventListener("value",g=>{g!==+this.slider.value&&(this.slider.value=g,this.curval.innerText=g)}))}query(t=[]){const{from:n,column:r}=this;return!n||this.min!=null&&this.max!=null?null:zt.select({min:ml(r),max:Ba(r)}).from(n).where(t)}queryResult(t){const{min:n,max:r}=Array.from(t)[0];return this.min==null&&(this.min=n,this.slider.setAttribute("min",`${n}`)),this.max==null&&(this.max=r,this.slider.setAttribute("max",`${r}`)),this.step==null&&(this.step=(r-n)/500,this.slider.setAttribute("step",`${this.step}`)),this}clause(t){const{field:n,selectionType:r}=this;if(r==="interval"){const i=[this.min??0,t];return nI(n,i,{source:this,bin:"ceil",scale:{type:"identity",domain:i},pixelSize:this.step})}else return Ex(n,t,{source:this})}activate(){Lo(this.selection)&&this.selection.activate(this.clause(0))}publish(t){const{selection:n}=this;Lo(n)?n.update(this.clause(t)):Na(this.selection)&&n.update(t)}};const vQ=_Q(e=>{const t=v8(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?bQ(n):`${n}`}),v8=_Q(e=>t=>t===0?"0":t.toLocaleString(e));vQ();v8();function bQ(e){return jPt(e,"Invalid Date")}function _Q(e){let t=null,n;return(r="en")=>r===t?n:n=e(t=r)}function jPt(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(+e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${VPt(e.getUTCFullYear())}-${su(e.getUTCMonth()+1,2)}-${su(e.getUTCDate(),2)}${n||r||i||o?`T${su(n,2)}:${su(r,2)}${i||o?`:${su(i,2)}${o?`.${su(o,3)}`:""}`:""}Z`:""}`}function VPt(e){return e<0?`-${su(-e,6)}`:e>9999?`+${su(e,6)}`:su(e,4)}function su(e,t){return`${e}`.padStart(t,"0")}let WPt=-1;class YPt extends hA{constructor({element:t,filterBy:n,from:r,columns:i=["*"],align:o={},format:s,width:a,maxWidth:l,height:c=500,rowBatch:u=100,as:f}={}){super(n,t,null),this.id=`table-${++WPt}`,this.element.setAttribute("id",this.id),this.from=r,this.columns=i,this.format=s,this.align=o,this.widths=typeof a=="object"?a:{},Na(r)&&r.addEventListener("value",()=>this.initialize()),this.offset=0,this.limit=+u,this.isPending=!1,this.selection=f,this.currentRow=-1,this.sortHeader=null,this.sortColumn=null,this.sortDesc=!1,typeof a=="number"&&(this.element.style.width=`${a}px`),l&&(this.element.style.maxWidth=`${l}px`),this.element.style.maxHeight=`${c}px`,this.element.style.overflow="auto";let h=-1;this.element.addEventListener("scroll",p=>{const{isPending:g,loaded:y}=this,{scrollHeight:v,scrollTop:b,clientHeight:_}=p.target,w=b<h;h=b,!(w||g||y)&&v-b<2*_&&(this.isPending=!0,this.requestData(this.offset+this.limit))}),this.tbl=document.createElement("table"),this.element.appendChild(this.tbl),this.head=document.createElement("thead"),this.tbl.appendChild(this.head),this.body=document.createElement("tbody"),this.tbl.appendChild(this.body),this.selection&&(this.body.addEventListener("pointerover",p=>{const g=HPt(p.target);g>-1&&g!==this.currentRow&&(this.currentRow=g,this.selection.update(this.clause([g])))}),this.body.addEventListener("pointerleave",()=>{this.currentRow=-1,this.selection.update(this.clause())})),this.style=document.createElement("style"),this.element.appendChild(this.style)}sourceTable(){return Na(this.from)?this.from.value:this.from}clause(t=[]){const{data:n,limit:r,schema:i}=this,o=i.map(a=>a.column),s=t.map(a=>{const{columns:l}=n[~~(a/r)];return o.map(c=>l[c][a%r])});return US(o,s,{source:this})}requestData(t=0){this.offset=t;const n=this.query(this.filterBy?.predicate(this));this.requestQuery(n),Ya().prefetch(n.clone().offset(t+this.limit))}async prepare(){const t=this.sourceTable(),n=this.columns.map(s=>({column:s,table:t})),r=await rI(this.coordinator,n);this.schema=r;const i=this.head;i.innerHTML="";const o=document.createElement("tr");for(const{column:s}of r){const a=document.createElement("th");a.addEventListener("click",l=>this.sort(l,s)),a.appendChild(document.createElement("span")),a.appendChild(document.createTextNode(s)),o.appendChild(a)}i.appendChild(o),this.formats=GPt(this.format,r),this.style.innerText=JPt(this.id,XPt(this.align,r),KPt(this.widths,r))}query(t=[]){const{limit:n,offset:r,schema:i,sortColumn:o,sortDesc:s}=this;return zt.from(this.sourceTable()).select(i.map(a=>a.column)).where(t).orderby(o?s?jg(o):o:[]).limit(n).offset(r)}queryResult(t){return this.isPending||(this.loaded=!1,this.data=[],this.body.replaceChildren(),this.offset=0),this.data.push(Ld(t)),this}update(){const{body:t,formats:n,data:r,schema:i,limit:o}=this,s=i.length,a=r.length-1,l=o*a,{numRows:c,columns:u}=r[a],f=i.map(h=>u[h.column]);for(let h=0;h<c;++h){const p=document.createElement("tr");Object.assign(p,{__row__:l+h});for(let g=0;g<s;++g){const y=f[g][h],v=document.createElement("td");v.innerText=y==null?"":n[g](y),p.appendChild(v)}t.appendChild(p)}return c<o&&(this.loaded=!0),this.isPending=!1,this}activate(){Lo(this.selection)&&this.selection.activate(this.clause([]))}sort(t,n){n===this.sortColumn?this.sortDesc=!this.sortDesc:(this.sortColumn=n,this.sortDesc=!1);const r=t.currentTarget,i=this.sortHeader;i===r&&t.metaKey?(i.firstChild.textContent="",this.sortHeader=null,this.sortColumn=null):(i&&(i.firstChild.textContent=""),this.sortHeader=r,r.firstChild.textContent=this.sortDesc?"▾":"▴"),this.requestData()}}function HPt(e){const t=e.parentElement;return Object.hasOwn(t,"__row__")?+t.__row__:-1}function GPt(e={},t,n){return t.map(({column:r,type:i})=>{if(r in e)return e[r];switch(i){case"number":return v8(n);case"date":return bQ;default:return vQ(n)}})}function XPt(e={},t){return t.map(({column:n,type:r})=>n in e?e[n]:r==="number"?"right":"left")}function KPt(e={},t){return t.map(({column:n})=>e[n])}function JPt(e,t,n){const r=[];return t.forEach((i,o)=>{const s=+n[o];if(i!=="left"||s){const a=i!=="left"?`text-align:${i};`:"",l=s?`width:${s}px;max-width:${s}px;`:"";r.push(`#${e} tr>:nth-child(${o+1}) {${a}${l}}`)}}),r.join(" ")}function wQ(e,...t){const n=e?.context?.coordinator??Ya();for(const r of t)n.connect(r)}function dA(e,t,n){const r=new t(n);return wQ(e,r),r.element}function ZPt(e){return dA(this,BPt,e)}function QPt(e){return dA(this,zPt,e)}function tzt(e){return dA(this,qPt,e)}function ezt(e){return dA(this,YPt,e)}function xQ({direction:e="vertical",wrap:t=!1},n){const r=document.createElement("div");return r.style.display="flex",r.style.flexDirection=e==="vertical"?"column":"row",r.style.flexWrap=t?t===!0?"wrap":t:"nowrap",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",n.forEach(i=>r.appendChild(i)),Object.assign(r,{value:{element:r}}),r}function nzt(...e){return xQ({direction:"vertical"},e.flat())}function rzt(...e){return xQ({direction:"horizontal"},e.flat())}function SQ({dim:e="width",size:t=10}){const n=document.createElement("span");return n.style.display="inline-block",n.style[e]=Number.isNaN(+t)?t:`${t}px`,Object.assign(n,{value:{element:n}})}function izt(e){return SQ({dim:"height",size:e})}function ozt(e){return SQ({dim:"width",size:e})}class AQ extends Map{request(t,n){if(this.has(t))n(this.get(t));else{const r=this.waiting||(this.waiting=new Map),i=r.get(t)||[];r.set(t,i.concat(n))}}set(t,n){this.has(t)&&console.warn(`Overwriting named plot "${t}".`);const{waiting:r}=this;return r?.has(t)&&(r.get(t).forEach(i=>i(n)),r.delete(t)),super.set(t,n)}clear(){return this.waiting?.clear(),super.clear()}}const EQ=new AQ;function szt(e,t,n){(e?.context?.namedPlots??EQ).request(t,n)}function azt(e,t,n){(e?.context?.namedPlots??EQ).set(t,n)}function kQ(e){return t=>azt(this,e,t)}function TQ(e,t,n){Na(n)?(n.addEventListener("value",r=>{e.setAttribute(t,r),e.update()}),n.value!==void 0&&e.setAttribute(t,n.value)):e.setAttribute(t,n)}function lzt(e,t){return n=>{TQ(n,e,t)}}function b8(e){return t=>{for(const[n,r]of Object.entries(e))TQ(t,n,r)}}function MQ(e){const{top:t,bottom:n,left:r,right:i}=e,o={};return t!==void 0&&(o.marginTop=t),n!==void 0&&(o.marginBottom=n),r!==void 0&&(o.marginLeft=r),i!==void 0&&(o.marginRight=i),b8(o)}function IQ(e){return b8({marginTop:e,marginBottom:e,marginLeft:e,marginRight:e})}function RQ(e){return b8({xDomain:e,yDomain:e})}const tt=e=>t=>lzt(e,t),CQ=tt("style"),NQ=tt("width"),$Q=tt("height"),OQ=tt("marginLeft"),DQ=tt("marginRight"),LQ=tt("marginTop"),FQ=tt("marginBottom"),BQ=tt("align"),PQ=tt("aspectRatio"),zQ=tt("axis"),UQ=tt("inset"),qQ=tt("grid"),jQ=tt("clip"),VQ=tt("padding"),WQ=tt("ariaLabel"),YQ=tt("ariaDescription"),HQ=tt("xScale"),GQ=tt("xDomain"),XQ=tt("xRange"),KQ=tt("xNice"),JQ=tt("xInset"),ZQ=tt("xInsetLeft"),QQ=tt("xInsetRight"),ttt=tt("xClamp"),ett=tt("xRound"),ntt=tt("xAlign"),rtt=tt("xPadding"),itt=tt("xPaddingInner"),ott=tt("xPaddingOuter"),stt=tt("xAxis"),att=tt("xTicks"),ltt=tt("xTickSize"),ctt=tt("xTickSpacing"),utt=tt("xTickPadding"),ftt=tt("xTickFormat"),htt=tt("xTickRotate"),dtt=tt("xGrid"),ptt=tt("xLine"),gtt=tt("xLabel"),mtt=tt("xLabelAnchor"),ytt=tt("xLabelArrow"),vtt=tt("xLabelOffset"),btt=tt("xFontVariant"),_tt=tt("xAriaLabel"),wtt=tt("xAriaDescription"),xtt=tt("xPercent"),Stt=tt("xReverse"),Att=tt("xZero"),Ett=tt("xBase"),ktt=tt("xExponent"),Ttt=tt("xConstant"),Mtt=tt("yScale"),Itt=tt("yDomain"),Rtt=tt("yRange"),Ctt=tt("yNice"),Ntt=tt("yInset"),$tt=tt("yInsetTop"),Ott=tt("yInsetBottom"),Dtt=tt("yClamp"),Ltt=tt("yRound"),Ftt=tt("yAlign"),Btt=tt("yPadding"),Ptt=tt("yPaddingInner"),ztt=tt("yPaddingOuter"),Utt=tt("yAxis"),qtt=tt("yTicks"),jtt=tt("yTickSize"),Vtt=tt("yTickSpacing"),Wtt=tt("yTickPadding"),Ytt=tt("yTickFormat"),Htt=tt("yTickRotate"),Gtt=tt("yGrid"),Xtt=tt("yLine"),Ktt=tt("yLabel"),Jtt=tt("yLabelAnchor"),Ztt=tt("yLabelArrow"),Qtt=tt("yLabelOffset"),tet=tt("yFontVariant"),eet=tt("yAriaLabel"),net=tt("yAriaDescription"),ret=tt("yPercent"),iet=tt("yReverse"),oet=tt("yZero"),set=tt("yBase"),aet=tt("yExponent"),cet=tt("yConstant"),uet=tt("facetMargin"),fet=tt("facetMarginTop"),het=tt("facetMarginBottom"),det=tt("facetMarginLeft"),pet=tt("facetMarginRight"),get=tt("facetGrid"),met=tt("facetLabel"),yet=tt("fxDomain"),vet=tt("fxRange"),bet=tt("fxInset"),_et=tt("fxInsetLeft"),wet=tt("fxInsetRight"),xet=tt("fxRound"),Aet=tt("fxAlign"),Eet=tt("fxPadding"),ket=tt("fxPaddingInner"),Tet=tt("fxPaddingOuter"),Met=tt("fxAxis"),Iet=tt("fxTicks"),Ret=tt("fxTickSize"),Cet=tt("fxTickSpacing"),Net=tt("fxTickPadding"),$et=tt("fxTickFormat"),Oet=tt("fxTickRotate"),Det=tt("fxGrid"),Let=tt("fxLine"),Fet=tt("fxLabel"),Bet=tt("fxLabelAnchor"),Pet=tt("fxLabelOffset"),zet=tt("fxFontVariant"),Uet=tt("fxAriaLabel"),qet=tt("fxAriaDescription"),jet=tt("fxReverse"),Vet=tt("fyDomain"),Wet=tt("fyRange"),Yet=tt("fyInset"),Het=tt("fyInsetTop"),Get=tt("fyInsetBottom"),Xet=tt("fyRound"),Ket=tt("fyAlign"),Jet=tt("fyPadding"),Zet=tt("fyPaddingInner"),Qet=tt("fyPaddingOuter"),tnt=tt("fyAxis"),ent=tt("fyTicks"),nnt=tt("fyTickSize"),rnt=tt("fyTickSpacing"),int=tt("fyTickPadding"),ont=tt("fyTickFormat"),snt=tt("fyTickRotate"),ant=tt("fyGrid"),lnt=tt("fyLine"),cnt=tt("fyLabel"),unt=tt("fyLabelAnchor"),fnt=tt("fyLabelOffset"),hnt=tt("fyFontVariant"),dnt=tt("fyAriaLabel"),pnt=tt("fyAriaDescription"),gnt=tt("fyReverse"),mnt=tt("colorScale"),ynt=tt("colorDomain"),vnt=tt("colorRange"),bnt=tt("colorClamp"),_nt=tt("colorN"),wnt=tt("colorNice"),xnt=tt("colorScheme"),Snt=tt("colorInterpolate"),Ant=tt("colorPivot"),Ent=tt("colorSymmetric"),knt=tt("colorLabel"),Tnt=tt("colorPercent"),Mnt=tt("colorReverse"),Int=tt("colorZero"),Rnt=tt("colorTickFormat"),Cnt=tt("colorBase"),Nnt=tt("colorExponent"),$nt=tt("colorConstant"),Ont=tt("opacityScale"),Dnt=tt("opacityDomain"),Lnt=tt("opacityRange"),Fnt=tt("opacityClamp"),Bnt=tt("opacityNice"),Pnt=tt("opacityLabel"),znt=tt("opacityPercent"),Unt=tt("opacityReverse"),qnt=tt("opacityZero"),jnt=tt("opacityTickFormat"),Vnt=tt("opacityBase"),Wnt=tt("opacityExponent"),Ynt=tt("opacityConstant"),Hnt=tt("symbolScale"),Gnt=tt("symbolDomain"),Xnt=tt("symbolRange"),Knt=tt("rScale"),Jnt=tt("rDomain"),Znt=tt("rRange"),Qnt=tt("rClamp"),trt=tt("rNice"),ert=tt("rLabel"),nrt=tt("rPercent"),rrt=tt("rZero"),irt=tt("rBase"),ort=tt("rExponent"),srt=tt("rConstant"),art=tt("lengthScale"),lrt=tt("lengthDomain"),crt=tt("lengthRange"),urt=tt("lengthClamp"),frt=tt("lengthNice"),hrt=tt("lengthPercent"),drt=tt("lengthZero"),prt=tt("lengthBase"),grt=tt("lengthExponent"),mrt=tt("lengthConstant"),yrt=tt("projectionType"),vrt=tt("projectionParallels"),brt=tt("projectionPrecision"),_rt=tt("projectionRotate"),wrt=tt("projectionDomain"),xrt=tt("projectionInset"),Srt=tt("projectionInsetLeft"),Art=tt("projectionInsetRight"),Ert=tt("projectionInsetTop"),krt=tt("projectionInsetBottom"),Trt=tt("projectionClip"),czt=Object.freeze(Object.defineProperty({__proto__:null,align:BQ,ariaDescription:YQ,ariaLabel:WQ,aspectRatio:PQ,axis:zQ,clip:jQ,colorBase:Cnt,colorClamp:bnt,colorConstant:$nt,colorDomain:ynt,colorExponent:Nnt,colorInterpolate:Snt,colorLabel:knt,colorN:_nt,colorNice:wnt,colorPercent:Tnt,colorPivot:Ant,colorRange:vnt,colorReverse:Mnt,colorScale:mnt,colorScheme:xnt,colorSymmetric:Ent,colorTickFormat:Rnt,colorZero:Int,facetGrid:get,facetLabel:met,facetMargin:uet,facetMarginBottom:het,facetMarginLeft:det,facetMarginRight:pet,facetMarginTop:fet,fxAlign:Aet,fxAriaDescription:qet,fxAriaLabel:Uet,fxAxis:Met,fxDomain:yet,fxFontVariant:zet,fxGrid:Det,fxInset:bet,fxInsetLeft:_et,fxInsetRight:wet,fxLabel:Fet,fxLabelAnchor:Bet,fxLabelOffset:Pet,fxLine:Let,fxPadding:Eet,fxPaddingInner:ket,fxPaddingOuter:Tet,fxRange:vet,fxReverse:jet,fxRound:xet,fxTickFormat:$et,fxTickPadding:Net,fxTickRotate:Oet,fxTickSize:Ret,fxTickSpacing:Cet,fxTicks:Iet,fyAlign:Ket,fyAriaDescription:pnt,fyAriaLabel:dnt,fyAxis:tnt,fyDomain:Vet,fyFontVariant:hnt,fyGrid:ant,fyInset:Yet,fyInsetBottom:Get,fyInsetTop:Het,fyLabel:cnt,fyLabelAnchor:unt,fyLabelOffset:fnt,fyLine:lnt,fyPadding:Jet,fyPaddingInner:Zet,fyPaddingOuter:Qet,fyRange:Wet,fyReverse:gnt,fyRound:Xet,fyTickFormat:ont,fyTickPadding:int,fyTickRotate:snt,fyTickSize:nnt,fyTickSpacing:rnt,fyTicks:ent,grid:qQ,height:$Q,inset:UQ,lengthBase:prt,lengthClamp:urt,lengthConstant:mrt,lengthDomain:lrt,lengthExponent:grt,lengthNice:frt,lengthPercent:hrt,lengthRange:crt,lengthScale:art,lengthZero:drt,margin:IQ,marginBottom:FQ,marginLeft:OQ,marginRight:DQ,marginTop:LQ,margins:MQ,name:kQ,opacityBase:Vnt,opacityClamp:Fnt,opacityConstant:Ynt,opacityDomain:Dnt,opacityExponent:Wnt,opacityLabel:Pnt,opacityNice:Bnt,opacityPercent:znt,opacityRange:Lnt,opacityReverse:Unt,opacityScale:Ont,opacityTickFormat:jnt,opacityZero:qnt,padding:VQ,projectionClip:Trt,projectionDomain:wrt,projectionInset:xrt,projectionInsetBottom:krt,projectionInsetLeft:Srt,projectionInsetRight:Art,projectionInsetTop:Ert,projectionParallels:vrt,projectionPrecision:brt,projectionRotate:_rt,projectionType:yrt,rBase:irt,rClamp:Qnt,rConstant:srt,rDomain:Jnt,rExponent:ort,rLabel:ert,rNice:trt,rPercent:nrt,rRange:Znt,rScale:Knt,rZero:rrt,style:CQ,symbolDomain:Gnt,symbolRange:Xnt,symbolScale:Hnt,width:NQ,xAlign:ntt,xAriaDescription:wtt,xAriaLabel:_tt,xAxis:stt,xBase:Ett,xClamp:ttt,xConstant:Ttt,xDomain:GQ,xExponent:ktt,xFontVariant:btt,xGrid:dtt,xInset:JQ,xInsetLeft:ZQ,xInsetRight:QQ,xLabel:gtt,xLabelAnchor:mtt,xLabelArrow:ytt,xLabelOffset:vtt,xLine:ptt,xNice:KQ,xPadding:rtt,xPaddingInner:itt,xPaddingOuter:ott,xPercent:xtt,xRange:XQ,xReverse:Stt,xRound:ett,xScale:HQ,xTickFormat:ftt,xTickPadding:utt,xTickRotate:htt,xTickSize:ltt,xTickSpacing:ctt,xTicks:att,xZero:Att,xyDomain:RQ,yAlign:Ftt,yAriaDescription:net,yAriaLabel:eet,yAxis:Utt,yBase:set,yClamp:Dtt,yConstant:cet,yDomain:Itt,yExponent:aet,yFontVariant:tet,yGrid:Gtt,yInset:Ntt,yInsetBottom:Ott,yInsetTop:$tt,yLabel:Ktt,yLabelAnchor:Jtt,yLabelArrow:Ztt,yLabelOffset:Qtt,yLine:Xtt,yNice:Ctt,yPadding:Btt,yPaddingInner:Ptt,yPaddingOuter:ztt,yPercent:ret,yRange:Rtt,yReverse:iet,yRound:Ltt,yScale:Mtt,yTickFormat:Ytt,yTickPadding:Wtt,yTickRotate:Htt,yTickSize:jtt,yTickSpacing:Vtt,yTicks:qtt,yZero:oet},Symbol.toStringTag,{value:"Module"}));function uzt(e,t){return{table:e,options:t}}const fzt=new Set(["frame","axisX","axisY","axisFx","axisFy","gridX","gridY","gridFx","gridFy","hexgrid","graticule","sphere"]);function pe(e,t,n={}){arguments.length===2&&!Array.isArray(t)&&(n=t,t=fzt.has(e)?null:[{}]);const r=e.startsWith("area")||e.startsWith("line")?h9t:Eh;return pA(r,e,t,n)}function pA(e,t,n,r){return i=>{i.addMark(new e(t,n,r))}}function Oc(e,t,n){return r=>{r.addMark(new e(t,n))}}const Mrt=(...e)=>pe("area",...e),Irt=(...e)=>pe("areaX",...e),Rrt=(...e)=>pe("areaY",...e),Crt=(...e)=>pe("line",...e),Nrt=(...e)=>pe("lineX",...e),$rt=(...e)=>pe("lineY",...e),Ort=(...e)=>pe("barX",...e),Drt=(...e)=>pe("barY",...e),Lrt=(...e)=>pe("cell",...e),Frt=(...e)=>pe("cellX",...e),Brt=(...e)=>pe("cellY",...e),Prt=(...e)=>pe("rect",...e),zrt=(...e)=>pe("rectX",...e),Urt=(...e)=>pe("rectY",...e),qrt=(...e)=>pe("dot",...e),jrt=(...e)=>pe("dotX",...e),Vrt=(...e)=>pe("dotY",...e),Wrt=(...e)=>pe("circle",...e),Yrt=(...e)=>pe("hexagon",...e),Hrt=(...e)=>pe("text",...e),Grt=(...e)=>pe("textX",...e),Xrt=(...e)=>pe("textY",...e),Krt=(...e)=>pe("ruleX",...e),Jrt=(...e)=>pe("ruleY",...e),Zrt=(...e)=>pe("tickX",...e),Qrt=(...e)=>pe("tickY",...e),tit=(...e)=>pe("vector",...e),eit=(...e)=>pe("vectoX",...e),nit=(...e)=>pe("vectorY",...e),rit=(...e)=>pe("spike",...e),iit=(...e)=>pe("image",...e),oit=(...e)=>pA(oQ,"areaX",...e),sit=(...e)=>pA(oQ,"areaY",...e),ait=(...e)=>Oc(F9t,...e),lit=(...e)=>Oc($9t,...e),cit=(...e)=>Oc(w9t,...e),uit=(...e)=>Oc(M9t,...e),fit=(...e)=>Oc(d8,...e),hit=(...e)=>Oc(Y9t,...e),dit=(...e)=>Oc(W9t,...e),pit=(...e)=>pe("hexgrid",...e),git=(...e)=>Oc(Z9t,...e),mit=(...e)=>pA(sQ,"ruleY",...e),yit=(...e)=>Oc(sQ,"ruleX",...e),vit=(...e)=>pe("voronoi",...e),bit=(...e)=>pe("voronoiMesh",...e),_it=(...e)=>pe("delaunayLink",...e),wit=(...e)=>pe("delaunayMesh",...e),xit=(...e)=>pe("hull",...e),Sit=(...e)=>pe("arrow",...e),Ait=(...e)=>pe("link",...e),Eit=(...e)=>pe("frame",...e),kit=(...e)=>pe("axisX",...e),Tit=(...e)=>pe("axisY",...e),Mit=(...e)=>pe("axisFx",...e),Iit=(...e)=>pe("axisFy",...e),Rit=(...e)=>pe("gridX",...e),Cit=(...e)=>pe("gridY",...e),Nit=(...e)=>pe("gridFx",...e),$it=(...e)=>pe("gridFy",...e),Oit=(...e)=>Oc(V9t,...e),Dit=(...e)=>pe("sphere",...e),Lit=(...e)=>pe("graticule",...e),Fit=(...e)=>pe("waffleX",...e),Bit=(...e)=>pe("waffleY",...e),hzt=Object.freeze(Object.defineProperty({__proto__:null,area:Mrt,areaX:Irt,areaY:Rrt,arrow:Sit,axisFx:Mit,axisFy:Iit,axisX:kit,axisY:Tit,barX:Ort,barY:Drt,cell:Lrt,cellX:Frt,cellY:Brt,circle:Wrt,contour:cit,delaunayLink:_it,delaunayMesh:wit,denseLine:lit,density:ait,densityX:oit,densityY:sit,dot:qrt,dotX:jrt,dotY:Vrt,errorbarX:mit,errorbarY:yit,frame:Eit,geo:Oit,graticule:Lit,gridFx:Nit,gridFy:$it,gridX:Rit,gridY:Cit,heatmap:uit,hexagon:Yrt,hexbin:dit,hexgrid:pit,hull:xit,image:iit,line:Crt,lineX:Nrt,lineY:$rt,link:Ait,raster:fit,rasterTile:hit,rect:Prt,rectX:zrt,rectY:Urt,regressionY:git,ruleX:Krt,ruleY:Jrt,sphere:Dit,spike:rit,text:Hrt,textX:Grt,textY:Xrt,tickX:Zrt,tickY:Qrt,vector:tit,vectorX:eit,vectorY:nit,voronoi:vit,voronoiMesh:bit,waffleX:Fit,waffleY:Bit},Symbol.toStringTag,{value:"Module"}));function Dc(e,t){return n=>{const r=n.marks[n.marks.length-1];n.addInteractor(new e(r,t))}}function Pit({by:e,...t}){return Dc(rPt,{selection:e,channels:t})}function zit({as:e,...t}){return Dc(m8,{...t,selection:e,channel:"x"})}function Uit({as:e,...t}){return Dc(m8,{...t,selection:e,channel:"y"})}function qit({as:e,...t}){return Dc(lPt,{...t,selection:e})}function jit({as:e,...t}){return Dc(y8,{...t,selection:e,pointer:"xy"})}function Vit({as:e,...t}){return Dc(y8,{...t,selection:e,pointer:"x"})}function Wit({as:e,...t}){return Dc(y8,{...t,selection:e,pointer:"y"})}function Yit({as:e,...t}){return Dc(EPt,{...t,selection:e})}function hm({as:e,...t}){return Dc(mQ,{...t,selection:e})}function Hit(e){return hm({...e,channels:["x"]})}function Git(e){return hm({...e,channels:["y"]})}function Xit(e){return hm({...e,channels:["z"]})}function Kit(e){return hm({...e,channels:["color"]})}function dm(e){return Dc(fPt,e)}function Jit(e={}){return dm({...e,zoom:!1})}function Zit(e={}){return dm({...e,zoom:!1,pany:!1})}function Qit(e={}){return dm({...e,zoom:!1,panx:!1})}function tot(e={}){return dm(e)}function eot(e={}){return dm({...e,pany:!1})}function not(e={}){return dm({...e,panx:!1})}const dzt=Object.freeze(Object.defineProperty({__proto__:null,highlight:Pit,intervalX:zit,intervalXY:qit,intervalY:Uit,nearest:jit,nearestX:Vit,nearestY:Wit,pan:Jit,panX:Zit,panY:Qit,panZoom:tot,panZoomX:eot,panZoomY:not,region:Yit,toggle:hm,toggleColor:Kit,toggleX:Hit,toggleY:Git,toggleZ:Xit},Symbol.toStringTag,{value:"Module"}));function _8(e,t={}){if(t.for){const{for:n,...r}=t,i=new zB(e,r),o=typeof n,s=a=>a.addLegend(i,!1);return o==="string"?szt(this,n,s):n.value&&s(n.value),i.element}else return n=>n.addLegend(new zB(e,t))}function rot(e){return _8.call(this,"color",e)}function iot(e){return _8.call(this,"opacity",e)}function oot(e){return _8.call(this,"symbol",e)}const pzt=Object.freeze(Object.defineProperty({__proto__:null,colorLegend:rot,opacityLegend:iot,symbolLegend:oot},Symbol.toStringTag,{value:"Module"}));function gzt(...e){const t=new r9t;return e.flat().forEach(n=>n(t)),wQ(this,...t.marks),t.update(),t.element}const mzt=Object.freeze(Object.defineProperty({__proto__:null,Fixed:B1,Param:_a,Query:zt,Selection:sg,align:BQ,and:Li,area:Mrt,areaX:Irt,areaY:Rrt,argmax:Ww,argmin:Yw,ariaDescription:YQ,ariaLabel:WQ,arrayAgg:Mmt,arrow:Sit,aspectRatio:PQ,avg:CS,axis:zQ,axisFx:Mit,axisFy:Iit,axisX:kit,axisY:Tit,barX:Ort,barY:Drt,bin:OPt,cast:Kr,cell:Lrt,cellX:Frt,cellY:Brt,centroid:S6,centroidX:wyt,centroidY:xyt,circle:Wrt,clip:jQ,colorBase:Cnt,colorClamp:bnt,colorConstant:$nt,colorDomain:ynt,colorExponent:Nnt,colorInterpolate:Snt,colorLabel:knt,colorLegend:rot,colorN:_nt,colorNice:wnt,colorPercent:Tnt,colorPivot:Ant,colorRange:vnt,colorReverse:Mnt,colorScale:mnt,colorScheme:xnt,colorSymmetric:Ent,colorTickFormat:Rnt,colorZero:Int,column:Mt,contour:cit,coordinator:Ya,corr:Imt,count:sr,covarPop:Cmt,covariance:Rmt,createSchema:Wyt,createTable:h1,cume_dist:Cyt,dateDay:uyt,dateMonth:lyt,dateMonthDay:cyt,days:tyt,delaunayLink:_it,delaunayMesh:wit,denseLine:lit,dense_rank:Iyt,density:ait,densityX:oit,densityY:sit,dot:qrt,dotX:jrt,dotY:Vrt,entropy:Nmt,eq:Ns,errorbarX:mit,errorbarY:yit,facetGrid:get,facetLabel:met,facetMargin:uet,facetMarginBottom:het,facetMarginLeft:det,facetMarginRight:pet,facetMarginTop:fet,first:$mt,first_value:Oyt,float32:Kmt,float64:Mo,frame:Eit,frameGroups:Pyt,frameRange:Byt,frameRows:Fyt,from:uzt,fxAlign:Aet,fxAriaDescription:qet,fxAriaLabel:Uet,fxAxis:Met,fxDomain:yet,fxFontVariant:zet,fxGrid:Det,fxInset:bet,fxInsetLeft:_et,fxInsetRight:wet,fxLabel:Fet,fxLabelAnchor:Bet,fxLabelOffset:Pet,fxLine:Let,fxPadding:Eet,fxPaddingInner:ket,fxPaddingOuter:Tet,fxRange:vet,fxReverse:jet,fxRound:xet,fxTickFormat:$et,fxTickPadding:Net,fxTickRotate:Oet,fxTickSize:Ret,fxTickSpacing:Cet,fxTicks:Iet,fyAlign:Ket,fyAriaDescription:pnt,fyAriaLabel:dnt,fyAxis:tnt,fyDomain:Vet,fyFontVariant:hnt,fyGrid:ant,fyInset:Yet,fyInsetBottom:Get,fyInsetTop:Het,fyLabel:cnt,fyLabelAnchor:unt,fyLabelOffset:fnt,fyLine:lnt,fyPadding:Jet,fyPaddingInner:Zet,fyPaddingOuter:Qet,fyRange:Wet,fyReverse:gnt,fyRound:Xet,fyTickFormat:ont,fyTickPadding:int,fyTickRotate:snt,fyTickSize:nnt,fyTickSpacing:rnt,fyTicks:ent,geo:Oit,geojson:$z,geomean:Omt,graticule:Lit,grid:qQ,gridFx:Nit,gridFy:$it,gridX:Rit,gridY:Cit,gt:ba,gte:gyt,hconcat:rzt,heatmap:uit,height:$Q,hexagon:Yrt,hexbin:dit,hexgrid:pit,highlight:Pit,hours:eyt,hspace:ozt,hull:xit,image:iit,inset:UQ,int32:Si,interval:Tl,intervalX:zit,intervalXY:qit,intervalY:Uit,isBetween:Do,isDistinct:myt,isNotBetween:yyt,isNotDistinct:x6,isNotNull:pc,isNull:cl,kurtosis:Dmt,lag:$yt,last:Bmt,last_value:Dyt,lead:l4,lengthBase:prt,lengthClamp:urt,lengthConstant:mrt,lengthDomain:lrt,lengthExponent:grt,lengthNice:frt,lengthPercent:hrt,lengthRange:crt,lengthScale:art,lengthZero:drt,line:Crt,lineX:Nrt,lineY:$rt,link:Ait,literal:Zt,loadCSV:Hyt,loadExtension:Fz,loadJSON:Gyt,loadObjects:Jyt,loadParquet:Xyt,loadSpatial:Kyt,lt:fi,lte:sc,mad:Lmt,margin:IQ,marginBottom:FQ,marginLeft:OQ,marginRight:DQ,marginTop:LQ,margins:MQ,max:Ba,median:NS,menu:ZPt,microseconds:oyt,milliseconds:iyt,min:ml,minutes:nyt,mode:Fmt,months:Qmt,name:kQ,nearest:jit,nearestX:Vit,nearestY:Wit,neq:f1,not:og,nth_value:Lyt,ntile:Nyt,opacityBase:Vnt,opacityClamp:Fnt,opacityConstant:Ynt,opacityDomain:Dnt,opacityExponent:Wnt,opacityLabel:Pnt,opacityLegend:iot,opacityNice:Bnt,opacityPercent:znt,opacityRange:Lnt,opacityReverse:Unt,opacityScale:Ont,opacityTickFormat:jnt,opacityZero:qnt,or:Oo,padding:VQ,pan:Jit,panX:Zit,panY:Qit,panZoom:tot,panZoomX:eot,panZoomY:not,percent_rank:Ryt,plot:gzt,product:Pmt,projectionClip:Trt,projectionDomain:wrt,projectionInset:xrt,projectionInsetBottom:krt,projectionInsetLeft:Srt,projectionInsetRight:Art,projectionInsetTop:Ert,projectionParallels:vrt,projectionPrecision:brt,projectionRotate:_rt,projectionType:yrt,quantile:a4,rBase:irt,rClamp:Qnt,rConstant:srt,rDomain:Jnt,rExponent:ort,rLabel:ert,rNice:trt,rPercent:nrt,rRange:Znt,rScale:Knt,rZero:rrt,rank:Myt,raster:fit,rasterTile:hit,rect:Prt,rectX:zrt,rectY:Urt,region:Yit,regressionY:git,row_number:Dz,ruleX:Krt,ruleY:Jrt,search:QPt,seconds:ryt,skewness:Wmt,slider:tzt,sphere:Dit,spike:rit,sql:ee,stddev:Rz,stddevPop:Ymt,stringAgg:Hmt,style:CQ,sum:kr,symbolDomain:Gnt,symbolLegend:oot,symbolRange:Xnt,symbolScale:Hnt,table:ezt,text:Hrt,textX:Grt,textY:Xrt,tickX:Zrt,tickY:Qrt,toggle:hm,toggleColor:Kit,toggleX:Hit,toggleY:Git,toggleZ:Xit,varPop:Xmt,variance:Gmt,vconcat:nzt,vector:tit,vectorX:eit,vectorY:nit,voronoi:vit,voronoiMesh:bit,vspace:izt,waffleX:Fit,waffleY:Bit,width:NQ,xAlign:ntt,xAriaDescription:wtt,xAriaLabel:_tt,xAxis:stt,xBase:Ett,xClamp:ttt,xConstant:Ttt,xDomain:GQ,xExponent:ktt,xFontVariant:btt,xGrid:dtt,xInset:JQ,xInsetLeft:ZQ,xInsetRight:QQ,xLabel:gtt,xLabelAnchor:mtt,xLabelArrow:ytt,xLabelOffset:vtt,xLine:ptt,xNice:KQ,xPadding:rtt,xPaddingInner:itt,xPaddingOuter:ott,xPercent:xtt,xRange:XQ,xReverse:Stt,xRound:ett,xScale:HQ,xTickFormat:ftt,xTickPadding:utt,xTickRotate:htt,xTickSize:ltt,xTickSpacing:ctt,xTicks:att,xZero:Att,xyDomain:RQ,yAlign:Ftt,yAriaDescription:net,yAriaLabel:eet,yAxis:Utt,yBase:set,yClamp:Dtt,yConstant:cet,yDomain:Itt,yExponent:aet,yFontVariant:tet,yGrid:Gtt,yInset:Ntt,yInsetBottom:Ott,yInsetTop:$tt,yLabel:Ktt,yLabelAnchor:Jtt,yLabelArrow:Ztt,yLabelOffset:Qtt,yLine:Xtt,yNice:Ctt,yPadding:Btt,yPaddingInner:Ptt,yPaddingOuter:ztt,yPercent:ret,yRange:Rtt,yReverse:iet,yRound:Ltt,yScale:Mtt,yTickFormat:Ytt,yTickPadding:Wtt,yTickRotate:Htt,yTickSize:jtt,yTickSpacing:Vtt,yTicks:qtt,yZero:oet,years:Zmt},Symbol.toStringTag,{value:"Module"}));function sot({coordinator:e=Ya(),namedPlots:t=new AQ,extensions:n=null,...r}={}){return{...mzt,...n,context:{coordinator:e,namedPlots:t,...r}}}var yzt=Et("<div></div>");function vzt(e,t){Re(t,!0);let n=jo(t,["$$slots","$$events","$$legacy"]),r;zg(()=>{let o=new xkt(r,n);Gi(()=>{o.update(n)}),r6(()=>{o.destroy()})});var i=yzt();Me(i,"",{},{display:"flex"}),ds(i,o=>r=o,()=>r),rt(e,i),Ce()}var bzt=(e,t,n)=>{t(x(n),e)},_zt=Et('<tr><td class="first:rounded-tl-md first:rounded-bl-md"><div class="block w-4 h-4 mx-2 rounded-full"></div></td><td><div class="whitespace-nowrap nowrap max-w-72 text-ellipsis overflow-hidden"> </div></td><td class="text-slate-400 px-2 text-xs text-right last:rounded-tr-md last:rounded-br-md" title="Count"> </td></tr>'),wzt=Et('<div class="absolute right-0 top-0 p-2 m-2 rounded-md bg-opacity-90 bg-slate-100 dark:bg-slate-800"><table><tbody></tbody></table></div>');function xzt(e,t){Re(t,!0);let n=ie(t,"selection",3,null),r=wt(new Set);const i={reset:()=>{H(r,new Set)}};function o(c,u){if(u.shiftKey||u.metaKey){let f=new Set(x(r));f.has(c)?f.delete(c):f.add(c),H(r,f)}else x(r).has(c)&&x(r).size==1?H(r,new Set):H(r,new Set([c]))}fe(()=>{let c=n();if(c!=null)return fe(()=>{let u=x(r),f=u.size!=0?Array.from(u).map(p=>p.predicate.toString()).join(" OR "):null,h={source:i,clients:new Set().add(i),value:u.size==0?null:u,predicate:f};c.activate(h),c.update(h)}),()=>{c.update({source:i,clients:new Set().add(i),value:null,predicate:null})}}),fe(()=>{let c=t.stateStore;if(!c)return;let u=c.subscribe(f=>{f!=null&&H(r,new Set(t.items.filter(h=>f.selectedItems.indexOf(h.label)>=0)))});return fe(()=>{c.set({selectedItems:Array.from(x(r)).map(f=>f.label)})}),u});var s=wzt(),a=ot(s),l=ot(a);En(l,21,()=>t.items,Un,(c,u)=>{var f=_zt();const h=dt(()=>x(r).has(x(u))||x(r).size==0);let p;f.__click=[bzt,o,u];var g=ot(f),y=ot(g);let v;et(g);var b=mt(g),_=ot(b),w=ot(_,!0);et(_),et(b);var S=mt(b),k=ot(S,!0);et(S),et(f),Pt((E,T,M)=>{p=ar(f,1,"hover:bg-slate-200 dark:hover:bg-slate-700 select-none leading-7",null,p,E),v=Me(y,"",v,T),ut(_,"title",x(u).label),ce(w,x(u).label),ce(k,M)},[()=>({"opacity-20":!x(h)}),()=>({"background-color":x(u).color}),()=>x(u).count.toLocaleString()]),rt(c,f)}),et(l),et(a),et(s),rt(e,s),Ce()}Br(["click"]);const UB=Symbol("coordinator"),qB=Symbol("darkMode");class Fr{static get coordinator(){return f7(UB)??Ya()}static set coordinator(t){h7(UB,t)}static get darkMode(){return f7(qB)}static set darkMode(t){h7(qB,t)}}function q_(e,t,n){return e+(t-e)*n}function Szt(e,t,n){let r=Math.log(e.scale),i=Math.log(t.scale);if(Math.abs(i-r)<1e-5)return{x:q_(e.x,t.x,n),y:q_(e.y,t.y,n),scale:q_(e.scale,t.scale,n)};let o=Math.exp(q_(r,i,n));return{x:(t.x*t.scale-e.x*e.scale+(e.x-t.x)*(e.scale*t.scale/o))/(t.scale-e.scale),y:(t.y*t.scale-e.y*e.scale+(e.y-t.y)*(e.scale*t.scale/o))/(t.scale-e.scale),scale:o}}var Azt=Et('<div class="absolute left-0 right-0 top-0 bottom-0"><!> <!></div>');function Ezt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(c,"$darkMode",n),o=800;let s=ie(t,"pointSize",3,null),a=ie(t,"onClickPoint",3,null);const l=Fr.coordinator,c=Fr.darkMode;let u=wt(null),f=wt(null),h=wt(null),p=wt([]),g=wt(750),y=wt(750),v=dt(()=>t.stateStore?.child("legend")),b;function _(C){H(h,null);let L=x(u);if(L==null){H(u,C);return}let F=o,N=new Date().getTime(),O=()=>{let D=(new Date().getTime()-N)/F;D>1?D=1:b=requestAnimationFrame(O),H(u,Szt(L,C,tR(D)))};b&&cancelAnimationFrame(b),b=requestAnimationFrame(O)}function w(C){H(p,[C]),H(h,C)}function S(){b&&cancelAnimationFrame(b)}function k(C){a()?.(C)}Gi(()=>{x(p)?.[0]!=null&&k(x(p)?.[0])}),fe(()=>{let C=t.stateStore;if(!C)return;let L=C.subscribe(F=>{F!=null&&(H(u,F.viewportState),H(f,F.rangeSelection))});return Gi(()=>{C.set({viewportState:x(u),rangeSelection:x(f)})}),L});var E=Azt(),T=ot(E);{let C=dt(()=>i()?"dark":"light"),L=dt(()=>t.categoryLegend?.indexColumn),F=dt(()=>t.categoryLegend?.legend.map(O=>O.color)),N=dt(()=>1/16*Math.exp(-(t.minimumDensityExpFactor??0)));vzt(T,{get coordinator(){return l},get table(){return t.table},get identifier(){return t.id},get x(){return t.x},get y(){return t.y},get colorScheme(){return x(C)},get text(){return t.text},get category(){return x(L)},get categoryColors(){return x(F)},get minimumDensity(){return x(N)},get additionalFields(){return t.additionalFields},get viewportState(){return x(u)},onViewportState:O=>{H(u,O),S()},get tooltip(){return x(h)},onTooltip:O=>H(h,O),get selection(){return x(p)},onSelection:O=>{H(p,O)},get filter(){return t.filter},get rangeSelection(){return t.filter},get rangeSelectionValue(){return x(f)},onRangeSelection:O=>{H(f,O)},get automaticLabels(){return t.automaticLabels},get width(){return x(g)},get height(){return x(y)},get mode(){return t.mode},get pointSize(){return s()},get customTooltip(){return t.customTooltip},get customOverlay(){return t.customOverlay}})}var M=mt(T,2);{var I=C=>{var L=Mn(),F=Ht(L);gS(F,()=>t.categoryLegend,N=>{xzt(N,{get items(){return t.categoryLegend.legend},get selection(){return t.filter},get stateStore(){return x(v)}})}),rt(C,L)};Ft(M,C=>{t.categoryLegend!=null&&C(I)})}et(E),Cd(E,"clientWidth",C=>H(g,C)),Cd(E,"clientHeight",C=>H(y,C)),rt(e,E);var $=Ce({startViewportAnimation:_,showTooltip:w});return r(),$}function kzt(e,{from:t,to:n},r={}){var{delay:i=0,duration:o=E=>Math.sqrt(E)*120,easing:s=tR}=r,a=getComputedStyle(e),l=a.transform==="none"?"":a.transform,[c,u]=a.transformOrigin.split(" ").map(parseFloat);c/=e.clientWidth,u/=e.clientHeight;var f=Tzt(e),h=e.clientWidth/n.width/f,p=e.clientHeight/n.height/f,g=t.left+t.width*c,y=t.top+t.height*u,v=n.left+n.width*c,b=n.top+n.height*u,_=(g-v)*h,w=(y-b)*p,S=t.width/n.width,k=t.height/n.height;return{delay:i,duration:typeof o=="function"?o(Math.sqrt(_*_+w*w)):o,easing:s,css:(E,T)=>{var M=T*_,I=T*w,$=E+T*S,C=E+T*k;return`transform: ${l} translate(${M}px, ${I}px) scale(${$}, ${C});`}}}function Tzt(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,n=1;t!==null;)n*=+getComputedStyle(t).zoom,t=t.parentElement;return n}const Mzt="spec",aot="literal",Izt="options",Rzt="selection",Czt="paramref",Nzt="columnparamref",$zt="param",Ozt="include",lot="select",w5="value",Dzt="crossfilter",cot="intersect",Lzt="union",Fzt="single",Bzt="data",Pzt="expression",Xy="sql",w8="input",G2="hconcat",X2="vconcat",K2="hspace",J2="vspace",uot="mark",jB="from",Z2="plot",x8="legend",zzt="attribute",fot="transform",Uzt="windowframe",qzt="interactor",Mw="Fixed";function Q2(e){const t=typeof e;return t==="object"?e?.param:t==="string"?jzt(e):null}function jzt(e){return e?.[0]==="$"?e.slice(1):null}function VB(e){return`$${e}`}function hot(e){return[e].flat()}function kd(e){return Array.isArray(e)}function S8(e){return e!==null&&typeof e=="object"&&!kd(e)}function Iw(e){return typeof e=="string"}function dot(e,t){throw Object.assign(Error(e),{data:t})}const Vzt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Wzt(e,t){return Vzt.test(e+="")?new Date(e):t}class Rr{constructor(t,n=null){this.type=t,this.children=n}instantiate(t){throw Error("instantiate not implemented")}codegen(t){return Error("codegen not implemented")}toJSON(){return Error("toJSON not implemented")}}function Nl(e,t){const n={};for(const r in e)n[r]=t.maybeSelection(e[r]);return new ab(n)}class ab extends Rr{constructor(t){super(Izt),this.options=t}filter(t){const n=Object.fromEntries(Object.entries(this.options).filter(([r,i])=>t(r,i)));return new ab(n)}instantiate(t){const{options:n}=this,r={};for(const i in n)r[i]=n[i].instantiate(t);return r}codegen(t){const{options:n}=this,r=[];for(const i in n)r.push(`${i}: ${n[i].codegen(t)}`);return r.length?`{${t.maybeLineWrap(r)}}`:""}toJSON(){const{options:t}=this,n={};for(const r in t)n[r]=t[r].toJSON();return n}}const pot="table",got="parquet",mot="csv",A8="json",E8="spatial",WB=new Map([[pot,Kzt],[got,Jzt],[mot,Zzt],[A8,Qzt],[E8,tUt]]);function Yzt(e,t,n){const r=Hzt(t);if(WB.has(r.type))return WB.get(r.type)(e,r,n);n.error("Unrecognized data format type.",t)}function Hzt(e){return kd(e)&&(e={type:"json",data:e}),Iw(e)&&(e={type:"table",query:e}),{...e,type:Gzt(e)}}function Gzt(e){return e.type||Xzt(e.file)||"table"}function Xzt(e){const t=e?.lastIndexOf(".");return t>0?e.slice(t+1):null}function Kzt(e,t,n){const{query:r,type:i,...o}=t;return new rUt(e,r,Nl(o,n))}function Jzt(e,t,n){const{file:r,type:i,...o}=t;return new oUt(e,r,Nl(o,n))}function Zzt(e,t,n){const{file:r,type:i,...o}=t;return new sUt(e,r,Nl(o,n))}function Qzt(e,t,n){const{data:r,file:i,type:o,...s}=t,a=Nl(s,n);return r?new lUt(e,r,a):new aUt(e,i,a)}function tUt(e,t,n){const{file:r,type:i,...o}=t;return new iUt(e,r,Nl(o,n))}function YB(e,t){return t?new URL(e,t).toString():e}function eUt(e,t){const n=e?.codegen(t);return n?`, ${n}`:""}class nUt extends Rr{constructor(t,n){super(Bzt),this.name=t,this.format=n}}class k8 extends nUt{constructor(t,n){super(t,n)}instantiateQuery(t){t.error("instantiateQuery not implemented")}codegenQuery(t){t.error("codegenQuery not implemented")}instantiate(t){const n=this.instantiateQuery(t);if(n)return n}codegen(t){const n=this.codegenQuery(t);if(n)return n}}class rUt extends k8{constructor(t,n,r){super(t,pot),this.query=n?.trim(),this.options=r}instantiateQuery(t){const{name:n,query:r,options:i}=this;if(r)return t.api.createTable(n,r,i.instantiate(t))}codegenQuery(t){const{name:n,query:r,options:i}=this;if(r)return`\`${h1(n,r,i.instantiate(t))}\``}toJSON(){const{format:t,query:n,options:r}=this;return{type:t,query:n,...r.toJSON()}}}class gA extends k8{constructor(t,n,r,i,o){super(t,n),this.file=i,this.method=r,this.options=o}instantiateQuery(t){const{name:n,method:r,file:i,options:o}=this,s=YB(i,t.baseURL),a=o?.instantiate(t);return t.api[r](n,s,a)}codegenQuery(t){const{name:n,method:r,file:i,options:o}=this,s=YB(i,t.baseURL),a=eUt(o,t);return`${t.ns()}${r}("${n}", "${s}"${a})`}toJSON(){const{format:t,file:n,options:r}=this;return{type:t,file:n,...r.toJSON()}}}class iUt extends gA{constructor(t,n,r){super(t,E8,"loadSpatial",n,r)}}class oUt extends gA{constructor(t,n,r){super(t,got,"loadParquet",n,r)}}class sUt extends gA{constructor(t,n,r){super(t,mot,"loadCSV",n,r)}}class aUt extends gA{constructor(t,n,r){super(t,A8,"loadJSON",n,r)}}class lUt extends k8{constructor(t,n,r){super(t,A8),this.data=n,this.options=r}instantiateQuery(t){const{name:n,data:r,options:i}=this;return t.api.loadObjects(n,r,i.instantiate(t))}codegenQuery(t){const{name:n,data:r,options:i}=this,o=i?","+i.codegen(t):"",s=`[
    `+r.map(a=>JSON.stringify(a)).join(`,
    `)+`
  ]`;return`${t.ns()}loadObjects("${n}", ${s}${o})`}toJSON(){const{format:t,data:n,options:r}=this;return{type:t,data:n,...r.toJSON()}}}function cUt(e){const t=e.config?.extensions,n=new Set(t?hot(t):[]);for(const r of Object.values(e.data))r.format===E8&&n.add("spatial");return n}async function uUt(e,t){const{data:n,params:r,plotDefaults:i}=e,o=new fUt({plotDefaults:i,...t}),s=[],a=cUt(e);s.push(...Array.from(a).map(l=>Fz(l)));for(const l of Object.values(n)){const c=l.instantiate(o);c&&s.push(c)}s.length>0&&await o.coordinator.exec(s);for(const[l,c]of Object.entries(r))if(!o.activeParams.has(l)){const u=c.instantiate(o);o.activeParams.set(l,u)}return{element:e.root.instantiate(o),params:o.activeParams}}class fUt{constructor({api:t=sot(),plotDefaults:n=[],params:r=new Map,baseURL:i=null}={}){this.api=t,this.plotDefaults=n,this.activeParams=r,this.baseURL=i,this.coordinator=t.context.coordinator}error(t,n){dot(t,n)}}class x5 extends Rr{constructor(t){super(aot),this.value=t}instantiate(){return this.value}codegen(t){return t.stringify(this.value)}toJSON(){return this.value}}function hUt(e,t){const{select:n,include:r,...i}=e,o=Nl(i,t);return r&&(o.options.include=new dUt(hot(r).map(s=>t.selectionRef(Q2(s))))),new S5(n,o)}class S5 extends Rr{constructor(t=cot,n=new ab({})){super(Rzt),this.select=t,this.options=n}instantiate(t){const{select:n,options:r}=this;return t.api.Selection[n](r.instantiate(t))}codegen(t){const{select:n,options:r}=this;return`${t.ns()}Selection.${n}(${r.codegen(t)})`}toJSON(){const{select:t,options:n}=this;return{select:t,...n.toJSON()}}}class dUt extends Rr{constructor(t){super(Ozt),this.refs=t}instantiate(t){return this.refs.map(n=>n.instantiate(t))}codegen(t){return`[${this.refs.map(n=>n.codegen(t)).join(", ")}]`}toJSON(){return this.refs.map(t=>t.toJSON())}}const pUt=new Set([w5,Fzt,Dzt,cot,Lzt]);function gUt(e,t){const n=S8(e)?e:{value:e},{select:r=w5,value:i,date:o}=n;return pUt.has(r)||t.error(`Unrecognized param type: ${r}`,n),r!==w5?hUt(e,t):kd(i)?new A5(i.map(s=>t.maybeParam(s))):new A5(i,o)}class A5 extends Rr{constructor(t,n){super($zt),this.value=t,this.date=n}instantiate(t){const{date:n,value:r}=this,{Param:i}=t.api;return kd(r)?i.array(r.map(o=>o.instantiate(t))):i.value(Wzt(n,r))}codegen(t){const{value:n,date:r}=this,i=`${t.ns()}Param.`;return kd(n)?`${i}array([${n.map(o=>o.codegen(t)).join(", ")}])`:r?`${i}value(new Date(${JSON.stringify(r)}))`:`${i}value(${JSON.stringify(n)})`}toJSON(){const{date:t,value:n}=this;return kd(n)?n.map(r=>r.toJSON()):t?{date:t}:n}}class mUt extends Rr{constructor(t){super(Czt),this.name=t}instantiate(t){return t.activeParams?.get(this.name)}codegen(t){return VB(this.name)}toJSON(){return VB(this.name)}}function yot(e,t,n){return n.plot?.attributes?.has(e)||n.error(`Unrecognized attribute: ${e}`),new yUt(e,t===Mw?new vUt:n.maybeParam(t))}class yUt extends Rr{constructor(t,n){super(zzt),this.name=t,this.value=n}instantiate(t){const{name:n,value:r}=this;return t.api[n](r.instantiate(t))}codegen(t){const{name:n,value:r}=this;return`${t.tab()}${t.ns()}${n}(${r.codegen(t)})`}toJSON(){const{name:t,value:n}=this;return{[t]:n.toJSON()}}}class vUt extends Rr{constructor(){super(aot),this.value=Mw}instantiate(t){return t.api[Mw]}codegen(t){return`${t.ns()}${Mw}`}toJSON(){return this.value}}class bUt extends Rr{constructor(t,n,r,i,o,s){super(Mzt,[t]),this.root=t,this.meta=n,this.config=r,this.data=i,this.params=o,this.plotDefaults=s}toJSON(){const{root:t,meta:n,config:r,plotDefaults:i}=this,o=new Map(Object.entries(this.data)),s=new Map(Object.entries(this.params)),a={};if(n&&(a.meta={...n}),r&&(a.config={...r}),o?.size){const l=a.data={};for(const[c,u]of o)l[c]=u.toJSON()}if(s?.size){const l=a.params={};for(const[c,u]of s)l[c]=u.toJSON()}if(i?.length){const l=a.plotDefaults={};for(const c of i)Object.assign(l,c.toJSON())}return Object.assign(a,t.toJSON())}}function _Ut(e,t){const n=e[G2].map(r=>t.parseComponent(r));return new wUt(n)}class wUt extends Rr{constructor(t){super(G2,t)}instantiate(t){return t.api[G2](this.children.map(n=>n.instantiate(t)))}codegen(t){t.indent();const n=this.children.map(r=>r.codegen(t));return t.undent(),`${t.tab()}${t.ns()}${this.type}(
${n.join(`,
`)}
${t.tab()})`}toJSON(){return{[this.type]:this.children.map(t=>t.toJSON())}}}function xUt(e){return new SUt(e[K2])}class SUt extends Rr{constructor(t){super(K2),this.value=t}instantiate(t){return t.api[K2](this.value)}codegen(t){return`${t.tab()}${t.ns()}${this.type}(${t.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}}function AUt(e,t){const{[w8]:n,...r}=e;return t.inputs?.has(n)||t.error(`Unrecognized input type: ${n}`,e),new EUt(n,Nl(r,t))}class EUt extends Rr{constructor(t,n){super(w8),this.name=t,this.options=n}instantiate(t){return t.api[this.name](this.options.instantiate(t))}codegen(t){const n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.name}(${n})`}toJSON(){const{type:t,name:n,options:r}=this;return{[t]:n,...r.toJSON()}}}function vot(e,t){const{[x8]:n,...r}=e,i=`${n}Legend`;return t.plot?.legends?.has(i)||t.error(`Unrecognized legend type: ${n}`,e),new kUt(i,n,Nl(r,t))}class kUt extends Rr{constructor(t,n,r){super(x8),this.key=t,this.name=n,this.options=r}instantiate(t){return t.api[this.key](this.options.instantiate(t))}codegen(t){const n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.key}(${n})`}toJSON(){const{type:t,name:n,options:r}=this;return{[t]:n,...r.toJSON()}}}function TUt(e,t){const{[lot]:n,...r}=e;return t.plot?.interactors?.has(n)||t.error(`Unrecognized interactor type: ${n}`,e),new MUt(n,Nl(r,t))}class MUt extends Rr{constructor(t,n){super(qzt),this.name=t,this.options=n}instantiate(t){return t.api[this.name](this.options.instantiate(t))}codegen(t){const n=this.options.codegen(t);return`${t.tab()}${t.ns()}${this.name}(${n})`}toJSON(){const{name:t,options:n}=this;return{[lot]:t,...n.toJSON()}}}class IUt extends Rr{constructor(t){super(Nzt),this.param=t}instantiate(t){return t.api.column(this.param.instantiate(t))}codegen(t){return`${t.ns()}column(${this.param.codegen(t)})`}toJSON(){return`$${this.param.toJSON}`}}const RUt=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\${1,2}\w+)/g;function CUt(e,t){const n=e[Xy],r=n.split(RUt),i=[""],o=[];for(let s=0,a=0;s<r.length;++s){const l=r[s];l.startsWith("$")?(o[a]=l.startsWith("$$")?new IUt(t.paramRef(l.slice(2))):t.maybeParam(l),i[++a]=""):i[a]+=l}return new NUt(n,i,o)}class NUt extends Rr{constructor(t,n,r){super(Pzt),this.value=t,this.spans=n,this.params=r}instantiate(t){const{spans:n,params:r}=this,i=t.api[Xy],o=r.map(s=>s.instantiate(t));return i(n,...o)}codegen(t){const{spans:n,params:r}=this;let i="";const o=r.length;for(let s=0;s<o;++s)i+=n[s]+"${"+r[s].codegen(t)+"}";return i+=n[o],`${t.ns()}${Xy}\`${i}\``}toJSON(){return{[Xy]:this.value}}}function $Ut(e,t){if(!e)return null;if(kd(e))return new x5(e);const{from:n,...r}=e;return new OUt(t.maybeParam(n),Nl(r,t))}class OUt extends Rr{constructor(t,n){super(jB),this.table=t,this.options=n}instantiate(t){const{table:n,options:r}=this;return t.api[jB](n.instantiate(t),r.instantiate(t))}codegen(t){const n=this.table.codegen(t),r=this.options.codegen(t);return`${t.ns()}${this.type}(${n}${r?", "+r:""})`}toJSON(){const{type:t,table:n,options:r}=this;return{[t]:n.toJSON(),...r.toJSON()}}}function DUt(e,t){const n=e.rows?"ROWS":e.range?"RANGE":e.groups?"GROUPS":null;if(!n)return null;const r=e[n.toLowerCase()],i=Q2(r),o=i?t.paramRef(i):r.map(s=>S8(s)?bot(s,t):new y6(s));return new LUt(n,o,e.exclude)}class LUt extends Rr{constructor(t,n,r){super(Uzt),this.type=t,this.extent=n,this.exclude=r?.toUpperCase()}instantiate(t){const{type:n,extent:r,exclude:i}=this,o=Array.isArray(r)?r.map(s=>s.instantiate(t)):r.instantiate(t);return new RS(n,o,i?.toUpperCase())}codegen(t){const{type:n,extent:r,exclude:i}=this,o=`frame${n[0].toUpperCase()}${n.slice(1).toLowerCase()}`,s=Array.isArray(r)?`[${r.map(l=>l.codegen(t)).join(", ")}]`:r.codegen(t),a=i?`, '${i.toUpperCase()}'`:"";return`${t.ns()}${o}(${s}${a})`}toJSON(){const{type:t,extent:n,exclude:r}=this,i=t.toLowerCase(),o=Array.isArray(n)?n.map(s=>s.toJSON()):n.toJSON();return{[i]:o,exclude:r}}}function j_(e,t){return e==null?[]:[e].flat().map(n=>t.maybeParam(n))}function bot(e,t){let n;for(const r in e)t.transforms.has(r)&&(n=r);if(n)if(n==="bin"){const{bin:r,...i}=e,[o]=j_(r,t);return new BUt(n,o,Nl(i,t))}else{const r=n==="count"&&!e[n]?[]:j_(e[n],t),i={distinct:e.distinct,orderby:j_(e.orderby,t),partitionby:j_(e.partitionby,t),frame:DUt(e,t)};return new FUt(n,r,i)}}class FUt extends Rr{constructor(t,n,r){super(fot),this.name=t,this.args=n,this.options=r}instantiate(t){const{name:n,args:r,options:i}=this,{distinct:o,orderby:s,partitionby:a,frame:l}=i;let c=t.api[n](...r.map(u=>u.instantiate(t)));return o&&(c=c.distinct()),s.length&&(c=c.orderby(s.map(u=>u.instantiate(t)))),a.length&&(c=c.partitionby(a.map(u=>u.instantiate(t)))),l&&(c=c.frame(l.instantiate(t))),c}codegen(t){const{name:n,args:r,options:i}=this,{distinct:o,orderby:s,partitionby:a,frame:l}=i;let c=`${t.ns()}${n}(`+r.map(u=>u.codegen(t)).join(", ")+")";if(o&&(c+=".distinct()"),s.length){const u=s.map(f=>f.codegen(t));c+=`.orderby(${u.join(", ")})`}if(a.length){const u=a.map(f=>f.codegen(t));c+=`.partitionby(${u.join(", ")})`}return l&&(c+=`.frame(${l.codegen(t)})`),c}toJSON(){const{name:t,args:n,options:r}=this,{distinct:i,orderby:o,partitionby:s,frame:a}=r,l={[t]:LT(n.map(c=>c.toJSON()))};return i&&(l.distinct=!0),o.length&&(l.orderby=LT(o.map(c=>c.toJSON()))),s.length&&(l.partitionby=LT(s.map(c=>c.toJSON()))),a&&Object.assign(l,a.toJSON()),l}}class BUt extends Rr{constructor(t,n,r){super(fot),this.name=t,this.arg=n,this.options=r}instantiate(t){const{name:n,arg:r,options:i}=this;return t.api[n](r.instantiate(t),i.instantiate(t))}codegen(t){const{name:n,arg:r,options:i}=this,o=i.codegen(t);return`${t.ns()}${n}(`+r.codegen(t)+(o?`, ${o}`:"")+")"}toJSON(){const{name:t,arg:n,options:r}=this;return{[t]:n.toJSON(),...r.toJSON()}}}function LT(e){return e.length===0?"":e.length===1?e[0]:e}function PUt(e,t){if(S8(e))return e[Xy]?CUt(e,t):bot(e,t)}function zUt(e,t){const{mark:n,data:r,...i}=e;t.plot?.marks?.has(n)||t.error(`Unrecognized mark type: ${n}`,e);const o=$Ut(r,t),s={};for(const a in i){const l=i[a];s[a]=PUt(l,t)||t.maybeParam(l)}return new UUt(n,o,new ab(s))}class UUt extends Rr{constructor(t,n,r){super(uot),this.name=t,this.data=n,this.options=r}instantiate(t){const{name:n,data:r,options:i}=this,o=i.instantiate(t);return r?t.api[n](r.instantiate(t),o):t.api[n](o)}codegen(t){const{name:n,data:r,options:i}=this,o=r?r.codegen(t):"",s=i.codegen(t);let a;if(o&&s){t.indent();const l=i.codegen(t);a=`
${t.tab()}${o},
${t.tab()}${l}
`,t.undent(),a+=t.tab()}else a=`${o}${s}`;return`${t.tab()}${t.ns()}${n}(${a})`}toJSON(){const{type:t,name:n,data:r,options:i}=this;return{[t]:n,...r?{data:r.toJSON()}:{},...i.toJSON()}}}function qUt(e,t){return _ot({plot:[e]},t)}function _ot(e,t){const{[Z2]:n,...r}=e,i=Object.entries(r).map(([s,a])=>yot(s,a,t)),o=n.map(s=>Iw(s.mark)?zUt(s,t):Iw(s.legend)?vot(s,t):Iw(s.select)?TUt(s,t):t.error("Invalid plot entry.",s));return new jUt(o,i)}class jUt extends Rr{constructor(t,n){super(Z2,t),this.attributes=n}instantiate(t){const n=[...t.plotDefaults||[],...this.attributes||[]];return t.api[Z2](this.children.map(r=>r.instantiate(t)),n.map(r=>r.instantiate(t)))}codegen(t){const{type:n,children:r,attributes:i}=this;t.indent();const o=[...r.map(s=>s.codegen(t)),...t.plotDefaults?.length?[`${t.tab()}...defaultAttributes`]:[],...i.map(s=>s.codegen(t))].join(`,
`);return t.undent(),`${t.tab()}${t.ns()}${n}(
${o}
${t.tab()})`}toJSON(){const{type:t,children:n,attributes:r}=this,i={[t]:n.map(o=>o.toJSON())};for(const o of r)Object.assign(i,o.toJSON());return i}}function VUt(e,t){const n=e[X2].map(r=>t.parseComponent(r));return new WUt(n)}class WUt extends Rr{constructor(t){super(X2,t)}instantiate(t){return t.api[X2](this.children.map(n=>n.instantiate(t)))}codegen(t){t.indent();const n=this.children.map(r=>r.codegen(t));return t.undent(),`${t.tab()}${t.ns()}${this.type}(
${n.join(`,
`)}
${t.tab()})`}toJSON(){return{[this.type]:this.children.map(t=>t.toJSON())}}}function YUt(e){return new HUt(e[J2])}class HUt extends Rr{constructor(t){super(J2),this.value=t}instantiate(t){return t.api[J2](this.value)}codegen(t){return`${t.tab()}${t.ns()}${this.type}(${t.stringify(this.value)})`}toJSON(){return{[this.type]:this.value}}}function GUt(e=[]){return new Map([[Z2,_ot],[uot,qUt],[x8,vot],[w8,AUt],[G2,_Ut],[X2,VUt],[K2,xUt],[J2,YUt],...e])}function XUt(e=[]){return new Set(["menu","search","slider","table",...e])}function KUt({attributes:e=JUt(),interactors:t=ZUt(),legends:n=QUt(),marks:r=tqt()}={}){return{attributes:e,interactors:t,legends:n,marks:r}}function JUt(e=[]){return new Set([...Object.keys(czt),...e])}function ZUt(e=[]){return new Set([...Object.keys(dzt),...e])}function QUt(e=[]){return new Set([...Object.keys(pzt),...e])}function tqt(e=[]){return new Set([...Object.keys(hzt),...e])}function eqt(e=[]){return new Set(["argmin","argmax","avg","bin","centroid","centroidX","centroidY","column","count","covariance","covarPop","dateMonth","dateMonthDay","dateDay","first","geomean","geojson","last","max","median","min","mode","product","quantile","stddev","stddevPop","sum","variance","varPop","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","years","months","days","hours","minutes","seconds","milliseconds","microseconds",...e])}function T8(e,t){return new nqt(t).parse(e)}class nqt{constructor({components:t=GUt(),transforms:n=eqt(),inputs:r=XUt(),plot:i=KUt(),params:o=[],datasets:s=[]}={}){this.components=t,this.transforms=n,this.inputs=r,this.plot=i,this.params=new Map(o),this.datasets=new Map(s)}parse(t){const{meta:n,config:r,data:i={},params:o,plotDefaults:s={},...a}=t;for(const l in i)this.datasets.set(l,Yzt(l,i[l],this));this.plotDefaults=Object.entries(s).map(([l,c])=>yot(l,c,this));for(const l in o)this.params.set(l,gUt(o[l],this));return new bUt(this.parseComponent(a),n?{...n}:void 0,r?{...r}:void 0,Object.fromEntries(this.datasets),Object.fromEntries(this.params),this.plotDefaults)}parseComponent(t){for(const[n,r]of this.components)if(t[n]!=null)return r(t,this);this.error("Invalid specification.",t)}maybeParam(t){const n=Q2(t);return n?this.paramRef(n):new x5(t)}maybeSelection(t){const n=Q2(t);return n?this.selectionRef(n):new x5(t)}paramRef(t,n=()=>new A5){const{params:r}=this;if(!t)return null;let i=r.get(t);return i||(i=n(),r.set(t,i)),new mUt(t)}selectionRef(t,n=!1){const r=this.params.get(t);return n&&r&&!(r instanceof S5)?null:this.paramRef(t,()=>new S5)}error(t,n){dot(t,n)}}var V_={},HB=Symbol(),rqt=Symbol(),wot=e=>typeof e=="string"?i1[e]:e,i1={plain:V_,plaintext:V_,text:V_,txt:V_},xot=(e,t)=>(t[rqt]||iqt)(e,t),iqt=(e,t)=>{for(var n=[e],r,i=[],o=0;r=wot(t[HB]);)delete t[HB],Object.assign(t,r);for(kot(e,t,n,0);i[o++]=n[0],n=n[1];);return i},Sot=(e,t,n)=>e.replace(/&/g,"&amp;").replace(t,n),GB="</span>",W_="",ny="",Aot=e=>{for(var t="",n=e.length,r=0;r<n;)t+=Eot(e[r++]);return t},Eot=e=>{if(e instanceof Cy){var{type:t,alias:n,content:r}=e,i=W_,o=ny,s=`<span class="token ${t+(n?" "+n:"")+(t=="keyword"&&typeof r=="string"?" keyword-"+r:"")}">`;ny+=GB,W_+=s;var a=Eot(r);return W_=i,ny=o,s+a+GB}return typeof e!="string"?Aot(e):(e=Sot(e,/</g,"&lt;"),ny&&e.includes(`
`)?e.replace(/\n/g,ny+`
`+W_):e)},kot=(e,t,n,r,i)=>{for(var o in t)if(t[o])for(var s=0,a=t[o],l=Array.isArray(a)?a:[a];s<l.length;++s){if(i&&i[0]==o&&i[1]==s)return;for(var c=l[s],u=c.pattern||c,f=wot(c.inside),h=c.lookbehind,p=c.greedy&&u.global,g=c.alias,y=n,v=r;y&&(!i||v<i[2]);v+=y[0].length,y=y[1]){var b=y[0],_=0,w,S;if(!(b instanceof Cy)){if(u.lastIndex=p?v:0,w=u.exec(p?e:b),!w&&p)break;if(w&&w[0]){if(h&&w[1]&&(S=w[1].length,w.index+=S,w[0]=w[0].slice(S)),p){for(var M=w.index,k=M+w[0].length,E;M>=v+(E=y[0].length);y=y[1],v+=E);if(y[0]instanceof Cy)continue;for(var T=y,a=v;(a+=T[0].length)<k;T=T[1],_++);b=e.slice(v,a),w.index-=v}for(var M=w.index,I=w[0],$=b.slice(M+I.length),C=v+b.length,L=new Cy(o,f?xot(I,f):I,I,g),F=y,N=0,O;F=F[1],N++<_;);$&&(!F||F[0]instanceof Cy?F=[$,F]:F[0]=$+F[0]),v+=M,y[0]=M?b.slice(0,M):L,M?y=y[1]=[L,F]:y[1]=F,_&&(kot(e,t,y,v,O=[o,s,C]),C=O[2]),i&&C>i[2]&&(i[2]=C)}}}}};function Cy(e,t,n,r){this.type=e,this.content=t,this.alias=r,this.length=n.length}const oqt=(e,t,...n)=>{let r,i=[],o,s="",a,l=!1,c=!0,u=[],f,h=0;const p=lqt(),g=p.firstChild,y=g.children,v=y[0],b=v.firstChild,_={language:"text",value:s},w=new Set(n),S={},k=O=>{Object.assign(_,O);let D=s!=(s=O.value??s),B=r!=(r=_.language);f=!!_.readOnly,p.style.tabSize=_.tabSize||2,b.inputMode=f?"none":"",b.setAttribute("aria-readonly",f),M(),T(),D&&(l||b.remove(),b.value=s,b.selectionEnd=0,l||v.prepend(b)),(D||B)&&E()},E=()=>{u=xot(s=b.value,i1[r]||{}),L("tokenize",u,r,s);let O=Aot(u).split(`
`),D=0,B=h,j=h=O.length;for(;O[D]==i[D]&&D<j;)++D;for(;j&&O[--j]==i[--B];);if(D==j&&D==B)y[D+1].innerHTML=O[D]+`
`;else{let z=B<D?B:D-1,U=z,V="";for(;U<j;)V+=`<div class=pce-line aria-hidden=true>${O[++U]}
</div>`;for(U=j<D?j:D-1;U<B;U++)y[D+1].remove();for(V&&y[z+1].insertAdjacentHTML("afterend",V),U=z+1;U<h;)y[++U].setAttribute("data-line",U);p.style.setProperty("--number-width",(0|Math.log10(h))+1+".001ch")}L("update",s),F(!0),c&&setTimeout(setTimeout,0,()=>c=!0),i=O,c=!1},T=O=>{(O||w).forEach(D=>{typeof D=="object"?(D.update(N,_),O&&w.add(D)):(D(N,_),O||w.delete(D))})},M=([O,D]=I())=>{p.className=`prism-code-editor language-${r}${_.lineNumbers==!1?"":" show-line-numbers"} pce-${_.wordWrap?"":"no"}wrap${_.rtl?" pce-rtl":""} pce-${O<D?"has":"no"}-selection${l?" pce-focus":""}${f?" pce-readonly":""}${_.class?" "+_.class:""}`},I=()=>[b.selectionStart,b.selectionEnd,b.selectionDirection],$={Escape(){b.blur()}},C={},L=(O,...D)=>{S[O]?.forEach(B=>B.apply(N,D)),_["on"+O[0].toUpperCase()+O.slice(1)]?.apply(N,D)},F=O=>{if(O||c){const D=I(),B=y[a=Tot(s,0,D[D[2]<"f"?0:1])];B!=o&&(o?.classList.remove("active-line"),B.classList.add("active-line"),o=B),M(D),L("selectionChange",D,s)}},N={container:p,wrapper:g,lines:y,textarea:b,get activeLine(){return a},get value(){return s},options:_,get focused(){return l},get tokens(){return u},inputCommandMap:C,keyCommandMap:$,extensions:{},setOptions:k,update:E,getSelection:I,addExtensions(...O){T(O)},on:(O,D)=>((S[O]||=new Set).add(D),()=>S[O].delete(D)),remove(){p.remove()}};return au(b,"keydown",O=>{$[O.key]?.(O,I(),s)&&fa(O)}),au(b,"beforeinput",O=>{(f||O.inputType=="insertText"&&C[O.data]?.(O,I(),s))&&fa(O)}),au(b,"input",E),au(b,"blur",()=>{tS=null,l=!1,M()}),au(b,"focus",()=>{tS=F,l=!0,M()}),au(b,"selectionchange",O=>{F(),fa(O)}),aqt(e)?.append(p),t&&k(t),N},Du="u">typeof window?document:null,FT=Du?.createElement("div"),sqt=(e,t)=>(FT&&(FT.innerHTML=e,t=FT.firstChild),()=>t.cloneNode(!0)),au=(e,t,n,r)=>e.addEventListener(t,n,r),aqt=e=>typeof e=="string"?Du.querySelector(e):e,Tot=(e,t=0,n=1/0)=>{let r=1;for(;(t=e.indexOf(`
`,t)+1)&&t<=n;r++);return r},BT={},lqt=sqt("<div><div class=pce-wrapper><div class=pce-overlays><textarea class=pce-textarea spellcheck=false autocapitalize=off autocomplete=off>"),fa=e=>{e.preventDefault(),e.stopImmediatePropagation()};let tS;Du&&au(Du,"selectionchange",()=>tS?.());const eS=(e,t)=>t?e.lastIndexOf(`
`,t-1)+1:0,M8=(e,t)=>(t=e.indexOf(`
`,t))+1?t:e.length,XB=(e,t,n,r)=>au(e.textarea,t,n,r),cqt=(e,t)=>parseFloat(getComputedStyle(e)[t]);new Set("xml,rss,atom,jsx,tsx,xquery,xeora,xeoracube,actionscript".split(","));let Y_;const ry=e=>e.replace(/[$+?|.^*()[\]{}\\]/g,"\\$&"),KB=(e,t)=>e.slice(eS(e,t),t),pf=(e,t,n=t)=>[e.slice(t=eS(e,t),n=M8(e,n)).split(`
`),t,n],uqt=(e,t,n=0,r=n,i=e.getSelection()[0])=>{const o=e.value,s=e.lines[Tot(o,0,i)],a=Du.createTreeWalker(s,5);let l=a.lastChild(),c=M8(o,i)+1-i-l.length;for(;-c<=r&&(l=a.previousNode());)if(!l.lastChild&&(c-=l.length||0,c<=n)){for(;l!=s;l=l.parentNode)if(l.matches?.(t))return l}},PT=(e,t)=>uqt(e,"[class*=language-]",0,0,t)?.className.match(/language-(\S*)/)[1]||e.options.language,Jo=(e,t,n,r,i,o)=>{if(e.options.readOnly)return;Y_=e.getSelection(),r??=n;let s=e.textarea,a=e.value,l=k5&&!a[r??Y_[1]]&&/\n$/.test(t)&&/^$|\n$/.test(a),c;e.focused||s.focus(),n!=null&&s.setSelectionRange(n,r),i!=null&&(c=e.on("update",()=>{s.setSelectionRange(i,o??i,Y_[2]),c()})),zT||s.dispatchEvent(new InputEvent("beforeinput",{data:t})),k5||zT?(l&&(s.selectionEnd--,t=t.slice(0,-1)),zT&&(t+=`
`),Du.execCommand(t?"insertHTML":"delete",!1,Sot(t,/</g,"&lt;")),l&&s.selectionStart++):Du.execCommand(t?"insertText":"delete",!1,t),Y_=0},fqt=(e,t,n=t,r)=>{let i=e.focused,o=e.textarea,s;i||(au(o,"focus",a=>{s=a.relatedTarget},{once:!0}),o.focus()),o.setSelectionRange(t,n,r),tS(!(!i&&(s?s.focus():o.blur())))},Mot=Du?navigator.userAgent:"",E5=Du?/Mac|iPhone|iPod|iPad/i.test(navigator.platform):!1,k5=/Chrome\//.test(Mot),zT=!k5&&/AppleWebKit\//.test(Mot),H_=e=>e.altKey+e.ctrlKey*2+e.metaKey*4+e.shiftKey*8;let T5=!1;const G_=E5?4:2,hqt=e=>T5=e,jh=e=>e.search(/\S|$/),dqt=(e=['""',"''","``","()","[]","{}"],t=/([^$\w'"`]["'`]|.[[({])[.,:;\])}>\s]|.[[({]`/s)=>(n,r)=>{let i;const{keyCommandMap:o,inputCommandMap:s,getSelection:a,container:l}=n,c=navigator.clipboard,u=({insertSpaces:v=!0,tabSize:b}=r)=>[v?" ":"	",v?b||2:1],f=()=>!r.readOnly&&!n.extensions.cursor?.scrollIntoView(),h=([v,b],[_,w],S,k)=>(v<b||!k&&t.test((S[b-1]||" ")+_+(S[b]||" ")))&&!Jo(n,_+S.slice(v,b)+w,null,null,v+1,b+1),p=([v,b],_,w)=>v==b&&w[b]==_&&!fqt(n,v+1),g=(v,b,_,w,S,k)=>{let E=b.join(`
`);if(E!=v.join(`
`)){const T=v.length-1,M=b[T],I=v[T],$=I.length-M.length,C=b[0].length-v[0].length,L=_+jh((C<0?b:v)[0]),F=w-I.length+jh($>0?M:I),N=_-w+E.length+$,O=L>S?S:Math.max(L,S+C),D=k+_-w+E.length;Jo(n,E,_,w,O,k<F?D+$:Math.max(F+N,D))}},y=(v,b,_,w,S,k,E,T)=>{g(b,b.map(v?M=>M.slice(jh(M)?T-jh(M)%T:0):M=>M&&E.repeat(T-jh(M)%T)+M),_,w,S,k)};s["<"]=(v,b,_)=>h(b,"<>",_,!0),e.forEach(([v,b])=>{const _=v==b;s[v]=(w,S,k)=>(_&&p(S,b,k)||h(S,v+b,k))&&f(),_||(s[b]=(w,S,k)=>p(S,b,k)&&f())}),s[">"]=(v,b,_)=>{const w=BT[PT(n)]?.autoCloseTags?.(b,_,n);w&&(Jo(n,">"+w,null,null,b[0]+1),fa(v))},o.Tab=(v,[b,_],w)=>{if(T5||r.readOnly||H_(v)&6)return;const[S,k]=u(r),E=v.shiftKey,[T,M,I]=pf(w,b,_);return b<_||E?y(E,T,M,I,b,_,S,k):Jo(n,S.repeat(k-(b-M)%k)),f()},o.Enter=(v,b,_)=>{const w=H_(v)&7;if(!w||w==G_){w&&(b[0]=b[1]=pf(_,b[1])[2]);const[S,k]=u(),[E,T]=b,M=BT[PT(n)]?.autoIndent,I=Math.floor(jh(KB(_,E))/k)*k,$=M?.[0]?.(b,_,n)?k:0,C=M?.[1]?.(b,_,n),L=`
`+S.repeat(I+$)+(C?`
`+S.repeat(I):"");if(L[1]||_[T])return Jo(n,L,E,T,E+I+$+1),f()}},o.Backspace=(v,[b,_],w)=>{if(b==_){const S=KB(w,b),k=r.tabSize||2,E=e.includes(w.slice(b-1,b+1)),T=/[^ ]/.test(S)?0:(S.length-1)%k+1;if(E||T>1)return Jo(n,"",b-(E?1:T),b+E),f()}};for(let v=0;v<2;v++)o[v?"ArrowDown":"ArrowUp"]=(b,[_,w],S)=>{const k=H_(b);if(k==1){const E=v?_:eS(S,_)-1,T=v?S.indexOf(`
`,w)+1:w;if(E>-1&&T>0){const[M,I,$]=pf(S,E,T),C=M[v?"pop":"shift"](),L=(C.length+1)*(v?1:-1);M[v?"unshift":"push"](C),Jo(n,M.join(`
`),I,$,_+L,w+L)}return f()}else if(k==9){const[E,T,M]=pf(S,_,w),I=E.join(`
`),$=v?I.length+1:0;return Jo(n,I+`
`+I,T,M,_+$,w+$),f()}else if(k==2&&!E5)return l.scrollBy(0,cqt(l,"lineHeight")*(v?1:-1)),!0};XB(n,"keydown",v=>{const b=H_(v),_=v.keyCode,[w,S,k]=a();if(b==G_&&(_==221||_==219))y(_==219,...pf(n.value,w,S),w,S,...u()),f(),fa(v);else if(b==(E5?10:2)&&_==77)hqt(!T5),fa(v);else if(_==191&&b==G_||_==65&&b==9){const E=n.value,T=b==9,M=T?w:eS(E,w),I=BT[PT(n,M)]||{},{line:$,block:C}=I.getComments?.(n,M,E)||I.comments||{},[L,F,N]=pf(E,w,S),O=L.length-1;if(T){if(C){const[D,B]=C,j=E.slice(w,S),z=E.slice(0,w).search(ry(D)+" ?$"),U=RegExp("^ ?"+ry(B)).test(E.slice(S));z+1&&U?Jo(n,j,z,S+ +(E[S]==" ")+B.length,z,z+S-w):Jo(n,`${D} ${j} ${B}`,w,S,w+D.length+1,S+D.length+1),f(),fa(v)}}else if($){const D=ry($),B=RegExp(`^\\s*(${D} ?|$)`),j=RegExp(D+" ?"),z=!/\S/.test(E.slice(F,N)),U=L.map(L.every(V=>B.test(V))&&!z?V=>V.replace(j,""):V=>z||/\S/.test(V)?V.replace(/^\s*/,`$&${$} `):V);g(L,U,F,N,w,S),f(),fa(v)}else if(C){const[D,B]=C,j=jh(L[0]),z=L[0].startsWith(D,j)&&L[O].endsWith(B),U=L.slice();U[0]=L[0].replace(z?RegExp(ry(D)+" ?"):/(?=\S)|$/,z?"":D+" ");let V=U[0].length-L[0].length;U[O]=z?U[O].replace(RegExp(`( ?${ry(B)})?$`),""):U[O]+" "+B;let Y=U.join(`
`),Z=j+F,ct=Z>w?w:Math.max(w+V,Z),gt=Z>S-(w!=S)?S:Math.min(Math.max(Z,S+V),F+Y.length);Jo(n,Y,F,N,ct,Math.max(ct,gt)),f(),fa(v)}}else if(b==8+G_&&_==75){const E=n.value,[T,M,I]=pf(E,w,S),$=k>"f"?S-I+T.pop().length:w-M,C=M8(E,I+1)-I-1;Jo(n,"",M-!!M,I+!M,M+Math.min($,C)),f(),fa(v)}}),["copy","cut","paste"].forEach(v=>XB(n,v,b=>{const[_,w]=a();if(_==w&&c){const[[S],k,E]=pf(n.value,_,w);v=="paste"?b.clipboardData.getData("text/plain")==i&&(Jo(n,i+`
`,k,k,_+i.length+1),f(),fa(b)):(c.writeText(i=S),v=="cut"&&(Jo(n,"",k,E+1),f()),fa(b))}}))};var pqt=()=>({pattern:/\/\/.*|\/\*[^]*?(?:\*\/|$)/g,greedy:!0}),gqt=/\b(?:false|true)\b/;i1.webmanifest=i1.json={property:{pattern:/"(?:\\.|[^\\\n"])*"(?=\s*:)/g,greedy:!0},string:{pattern:/"(?:\\.|[^\\\n"])*"/g,greedy:!0},comment:pqt(),number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,operator:/:/,punctuation:/[[\]{},]/,boolean:gqt,null:{pattern:/\bnull\b/,alias:"keyword"}};i1.sql={comment:/\/\*[^]*?\*\/|(?:--|\/\/|#).*/,variable:[{pattern:/@(["'`])(?:\\[^]|(?!\1)[^\\])+\1/g,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])(["'])(?:\\[^]|(?!\2)[^\\]|\2\2)*\2/g,lookbehind:!0,greedy:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[^]|[^\\`]|``)*`/g,lookbehind:!0,greedy:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:avg|count|first|format|last|[lu]case|len|max|mi[dn]|mod|now|round|sum)(?=\s*\()/i,keyword:/\b(?:action|add|after|algorithm|alter|analyze|any|apply|asc?|authorization|auto_increment|backup|bdb|begin|berkeleydb|bigint|binary|bit|blob|bool|boolean|break|browse|[br]tree|bulk|by|c?all|cascaded?|case|chain|character|charset|check(?:point)?|close|clustered|coalesce|collate|columns?|comment|commit(?:ted)?|compute|connect|consistent|constraint|contains(?:table)?|continue|convert|create|cross|current(?:_date|_time|_timestamp|_user)?|cursor|cycle|data(?:bases?)?|date(?:time)?|day|dbcc|deallocate|dec|decimal|declare|default|definer|delayed|delete|delimiters?|deny|desc|describe|deterministic|disable|discard|disk|distinct|distinctrow|distributed|do|double|drop|dummy|dump(?:file)?|duplicate|else(?:if)?|enable|enclosed|end|engine|enum|errlvl|errors|escaped?|except|exec(?:ute)?|exists|exit|explain|extended|fetch|fields|file|fillfactor|first|fixed|float|following|for each row|for|force|foreign|freetexttable|freetext|from|full|function|geometry(?:collection)?|global|goto|grant|group|handler|hash|having|holdlock|hour|identity(?:col|_insert)?|if|ignore|import|index|infile|inner|innodb|inout|insert|integer|intersect|interval|into?|invoker|isolation|iterate|join|keys?|kill|language|last|leave|left|level|limit|lineno|lines|linestring|load|local|lock|long(?:blob|text)|loop|matched|match|(?:medium|tiny)(?:blob|int|text)|merge|middleint|minute|mode|modifies|modify|month|multi(?:linestring|point|polygon)|national|natural|n?char|next|no|nonclustered|nullif|numeric|off?|offsets?|on|open(?:datasource|query|rowset)?|optimize|option(?:ally)?|order|out(?:er|file)?|over|partial|partition|percent|pivot|plan|point|polygon|preceding|precision|prepare|prev|primary|print|privileges|proc(?:edure)?|public|purge|quick|raiserror|reads?|real|reconfigure|references|release|rename|repeat(?:able)?|replace|replication|require|resignal|restore|restrict|returning|returns?|revoke|right|rollback|routine|row(?:count|guidcol|s)?|rule|savepoint|save|schema|second|select|serializable|serial|session_user|session|setuser|set|share|show|shutdown|simple|smallint|snapshot|some|soname|sql|start(?:ing)?|statistics|status|striped|system_user|tables?|tablespace|temp(?:orary|table)?|terminated|textsize|text|[tw]hen|timestamp|time|top?|transactions?|tran|trigger|truncate|tsequal|types?|unbounded|uncommitted|undefined|union|unique|unlock|unpivot|unsigned|updatetext|update|usage|user?|using|values?|var(?:binary|char|character|ying)|view|waitfor|warnings|where|while|with(?: rollup|in)?|work|writetext|write|year)\b/i,boolean:/\b(?:false|true|null)\b/i,number:/\b0x[a-f\d]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[=%~^/*+-]|&&?|\|\|?|!=?|<<|<=?>?|>[>=]?|\b(?:and|between|div|[ir]?like|in|is|not|x?or|regexp|sounds like)\b/i,punctuation:/[()[\].,;`]/};var mqt=Et('<div><div class="w-full h-full grid"></div></div>');function I8(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(o,"$darkMode",n);let o=Fr.darkMode,s;Gi(()=>{if(s==null)return;let c=oqt(s,{language:t.language??"json",value:bs(()=>t.value??""),lineNumbers:!1,onUpdate(u){t.onChange?.(u)}},dqt());return Gi(()=>{t.value!==c.value&&c.setOptions({value:t.value??""})}),()=>{c.remove()}});var a=mqt(),l=ot(a);ds(l,c=>s=c,()=>s),et(a),Pt(()=>ar(a,1,`h-64 rounded-md border border-slate-200 dark:border-slate-600 overflow-hidden ${i()?"code-editor-dark":"code-editor-light"} ${t.className??""??""}`)),rt(e,a),Ce(),r()}var Qa={slate:{300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)"},gray:{500:"oklch(55.1% 0.027 264.364)"}};const yqt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<line x1="15" y1="54" x2="15" y2="12" stroke="black" stroke-width="2"/>
<line x1="32" y1="53" x2="32" y2="10" stroke="black" stroke-width="2"/>
<line x1="49" y1="45" x2="49" y2="19" stroke="black" stroke-width="2"/>
<rect x="8" y="27" width="14" height="18" rx="3" fill="#007AFF"/>
<rect x="25" y="22" width="14" height="14" rx="3" fill="#007AFF"/>
<rect x="42" y="27" width="14" height="12" rx="3" fill="#007AFF"/>
</svg>
`,vqt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="8" width="48" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="25" width="36" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="42" width="24" height="14" rx="3" fill="#007AFF"/>
</svg>
`,bqt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="48" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.78"/>
<rect x="48" y="28" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.5"/>
<rect x="48" y="8" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="38" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.63"/>
<rect x="38" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.36"/>
<rect x="38" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.64"/>
<rect x="28" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="28" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.45"/>
<rect x="28" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.28"/>
<rect x="28" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.8"/>
<rect x="28" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.7"/>
<rect x="18" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.27"/>
<rect x="18" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.46"/>
<rect x="18" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.74"/>
<rect x="18" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="18" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.82"/>
<rect x="8" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.33"/>
<rect x="8" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.12"/>
<rect x="8" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.4"/>
</svg>
`,_qt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M28.1666 45.7042C28.9268 45.8901 29.611 45.5001 29.8329 44.7506L36.9814 20.6115C37.1728 19.9366 36.8385 19.2589 36.0783 19.0547C35.3333 18.8689 34.6979 19.1477 34.4425 20.0235L27.3365 44.0276C27.1175 44.7804 27.3579 45.5001 28.1666 45.7042Z" fill="black"/>
<path d="M12 32.3568C12 32.7499 12.1764 33.1396 12.5046 33.4216L22.0655 41.9466C22.6825 42.4776 23.4794 42.4744 23.9719 41.9287C24.4765 41.3647 24.3975 40.5639 23.829 40.0662L15.214 32.3568L23.829 24.6476C24.3975 24.1496 24.4765 23.3488 23.9719 22.7851C23.4794 22.2391 22.6825 22.2362 22.0655 22.7669L12.5046 31.2922C12.1764 31.5742 12 31.9639 12 32.3568ZM52.1638 32.3568C52.1638 31.9639 52.0027 31.5742 51.6742 31.2922L42.1015 22.7669C41.481 22.2362 40.6997 22.2391 40.1948 22.7851C39.6871 23.3488 39.7663 24.1496 40.3378 24.6476L48.968 32.3568L40.3378 40.0662C39.7663 40.5639 39.6871 41.3647 40.1948 41.9287C40.6997 42.4744 41.481 42.4776 42.1015 41.9466L51.6742 33.4216C52.0027 33.1396 52.1638 32.7499 52.1638 32.3568Z" fill="black"/>
</svg>
`,wqt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 33H22V53C22 54.6569 20.6569 56 19 56H11C9.34315 56 8 54.6569 8 53V33Z" fill="#34C759"/>
<path d="M8 19C8 17.3431 9.34315 16 11 16H19C20.6569 16 22 17.3431 22 19V34H8V19Z" fill="#007AFF"/>
<path d="M25 39H39V53C39 54.6569 37.6569 56 36 56H28C26.3431 56 25 54.6569 25 53V39Z" fill="#34C759"/>
<path d="M42 32H56V53C56 54.6569 54.6569 56 53 56H45C43.3431 56 42 54.6569 42 53V32Z" fill="#34C759"/>
<path d="M25 29C25 27.3431 26.3431 26 28 26H36C37.6569 26 39 27.3431 39 29V40H25V29Z" fill="#3C82F6"/>
<path d="M42 16C42 14.3431 43.3431 13 45 13H53C54.6569 13 56 14.3431 56 16V33H42V16Z" fill="#007AFF"/>
</svg>
`,xqt=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="32" width="14" height="24" rx="3" fill="#007AFF"/>
<rect x="25" y="12" width="14" height="44" rx="3" fill="#007AFF"/>
<rect x="42" y="24" width="14" height="32" rx="3" fill="#007AFF"/>
</svg>
`;var Sqt=Et('<div class="w-12 h-12"><!></div>');function Aqt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(o,"$darkMode",n),o=Fr.darkMode,s={"chart-boxplot":yqt,"chart-h-bar":vqt,"chart-heatmap":bqt,"chart-stacked":wqt,"chart-v-histogram":xqt,"chart-spec":_qt};function a(u,f){u=u.replace("xmlns",'style="width:100%;height:100%" xmlns');let h=f?{black:Qa.slate[400]}:{black:Qa.slate[500]};for(let p in h)u=u.replaceAll(p,h[p]);return u}var l=Sqt(),c=ot(l);Ipt(c,()=>a(s[t.type]??"",i())),et(l),rt(e,l),Ce(),r()}var Eqt=Et("<div><!></div>");function mA(e,t){let n=wt(300),r=wt(200);var i=Eqt();Me(i,"",{},{"user-select":"none",position:"relative",width:"100%",height:"100%"});var o=ot(i);iv(o,()=>t.children??vn,()=>x(n),()=>x(r)),et(i),Cd(i,"clientWidth",s=>H(n,s)),Cd(i,"clientHeight",s=>H(r,s)),rt(e,i)}const Iot="system-ui",M5=11,kqt=80;let iy;function Tqt(){return iy==null&&(iy=document.createElement("canvas"),iy.width=1,iy.height=1),iy.getContext("2d")}function I5(e){let t=Tqt();t.font=`${M5}px ${Iot}`;let n=t.measureText(e);return{width:Math.min(kqt,n.width),height:M5}}function Rot(e,t,n=0){let r=0,i=0;for(let o of e){let{width:s,height:a}=o.size;r=Math.max(r,s),i=Math.max(i,a)}switch(t){case"x":return{left:r/2,right:r/2,top:0,bottom:i+n};case"y":return{left:r+n,right:0,top:i/2,bottom:i/2}}}function JB(e,t,n){switch(e.type){case"band":return Mqt(e,t,n);default:return Iqt(e,t,n)}}function Mqt(e,t,n){let r=[...e.domain,...e.specialValues??[]];r=Array.from(new Set(r)),n=="y"&&(r=r.reverse());let i=b1().domain(r).padding(.1),o=[],s=[],a={left:0,right:0,top:0,bottom:0};if(t){let l=t.values??i.domain(),c=t.labelPadding??6;o=l.map(u=>{let{width:f,height:h}=I5(u);return n=="y"?{text:u,value:u,padding:c,level:0,size:{width:f,height:h},orientation:"horizontal"}:{text:u,value:u,padding:c,level:0,size:{width:h,height:f},orientation:"vertical"}}),s=l.map(u=>({value:u,level:0})),a=R8([a,Rot(o,n,c)])}return{extents:a,labels:o,gridLines:[],ticks:s,concrete:l=>Cqt(i,e.domain,e.specialValues??[],l)}}function Iqt(e,t,n){let r;switch(e.type){case"linear":{r=qu().domain(e.domain);break}case"log":{r=pg().domain(e.domain);break}case"symlog":{let a=e.constant??1;r=bI().constant(a).domain(e.domain),r.nice=()=>r,r.ticks=l=>Nqt(r.domain(),a,l),r.tickFormat=()=>Ha("~s");break}default:throw new Error("invalid scale type")}let i=[],o=[],s={left:0,right:0,top:0,bottom:0};if(t){let a=[];if(t.extendScaleToTicks??!0)if(t.values){a=t.values;let f=r.domain().concat(a);r=r.domain([f.reduce((h,p)=>Math.min(h,p),f[0]),f.reduce((h,p)=>Math.max(h,p),f[0])])}else{let f=t.desiredTickCount??5;r.nice&&(r=r.nice(f)),a=r.ticks(f)}else{if(t.values)a=t.values;else{let p=t.desiredTickCount??5;a=r.ticks(p)}let[f,h]=r.domain();a=a.filter(p=>p>=f&&p<=h)}let l=t.labelPadding??6,c=r.tickFormat(t.values?t.values.length:t.desiredTickCount??5),u=f=>e.type=="log"||e.type=="symlog"?Math.round(Math.log10(Math.abs(f)))==Math.log10(Math.abs(f))?0:1:0;i=a.map(f=>{let h=c(f);return{text:h,value:f,padding:l,level:u(f),size:I5(h),orientation:"horizontal"}});for(let f of e.specialValues??[])i.push({text:f,value:f,padding:l,level:0,size:I5(f),orientation:"horizontal"});o=a.map(f=>({value:f,level:u(f)})),s=R8([s,Rot(i,n,l)])}return{extents:s,labels:i,gridLines:o,ticks:o,concrete:a=>Rqt(r,e.specialValues??[],a)}}function R8(e){let t={left:0,right:0,top:0,bottom:0};for(let n of e)t.left=Math.max(t.left,n.left),t.right=Math.max(t.right,n.right),t.top=Math.max(t.top,n.top),t.bottom=Math.max(t.bottom,n.bottom);return t}function ZB(e,t,n={}){let r=n.gap??0,i=e.map((a,l)=>({...t(a),index:l})).sort((a,l)=>a.priority-l.priority),o=e.map(a=>!1),s=(a,l)=>Math.abs(a.center-l.center)<r+a.length/2+l.length/2;for(let a=0;a<i.length;a++){let l=!1;for(let c=0;c<a;c++)if(o[i[c].index]&&s(i[a],i[c])){l=!0;break}o[i[a].index]=!l}return e.filter((a,l)=>o[l])}function Rqt(e,t,n){t=Array.from(new Set(t));let r=n[0],i=n[1],o=new Map,s;if(t.length>0){let l=22,c=8,u=20,f=t.length*u,h=2,p=r;r<i?(r=r+f+l,s=[p,p+f+l-c]):(r=r-f-l,p=r+l,s=[p-l+c,p+f]);for(let g=0;g<t.length;g++)o.set(t[g],[p+g*u+h,p+g*u+u-h])}let a=e.copy().range([r,i]);return{domain:e.domain(),specialValues:t??[],range:[r,i],rangeBands:[[r,i],...s?[s]:[]],apply:l=>{let c=o.get(l);return c!=null?(c[0]+c[1])/2:a(l)},applyBand:l=>{let c=o.get(l);if(c!=null)return c;if(typeof l!="number")return[a(l[0]),a(l[1])];{let u=a(l);return[u,u]}},invert:(l,c)=>{if(c!="number"){for(let[u,f]of o.entries())if(l>=Math.min(...f)&&l<=Math.max(...f))return u}return a.invert(l)}}}function Cqt(e,t,n,r){let i=r[0],o=r[1],s=e.copy().range(r),a=s.bandwidth(),l=s.step();return{domain:t,specialValues:n,range:[i,o],rangeBands:[[i,o]],apply:c=>(s(c)??0)+a/2,applyBand:c=>{let u=s(c)??0;return[u,u+a]},invert:c=>{let u=(c-i)/(o-i),f=Math.floor(u*Math.abs(o-i)/l);return e.domain()[f]}}}function Nqt(e,t,n){n=n??5;let r=e[0],i=e[1];if(r>0&&i>0&&r/i>.5||r<0&&i<0&&i/r>.5)return qu().domain([r,i]).ticks(n);let o=t*2,s=t*5;return r<-s&&i>s&&(n=Math.ceil(n/2)),[...r<-s?pg().domain([o,-r]).ticks(n).map(a=>-a):[],0,...i>s?pg().domain([o,i]).ticks(n):[]].filter(a=>a>=r&&a<=i)}function $qt(e,t){let{min:n,max:r,median:i,count:o,minPositive:s}=e,a={type:"linear",domain:[n,r]};return t==null?o>=100&&n>=0&&i<r*.05&&(a.type=n>0?"log":"symlog"):a.type=t,a.type=="log"&&(a.domain[0]=s),a}function Oqt(e,t={}){let n=t.fade??[],r=t.ordinal??!1,i=[],o=l=>JSON.stringify(l);for(let l of e){let c=o(l);typeof l=="string"&&n.indexOf(l)>=0||i.push(c)}let s=r?kY(i.length):Jg(i.length),a=new Map(i.map((l,c)=>[l,s[c]]));return{domain:e,apply:l=>{let c=o(l);return a.get(c)??"#888888"}}}var Dqt=Ze("<g><foreignObject><div> </div></foreignObject></g>");function QB(e,t){Re(t,!0);let n=dt(()=>t.dimension=="x"?{px:t.proxy.xScale?.apply(t.label.value)??0,py:t.proxy.plotHeight+t.label.padding,anchorX:.5,anchorY:0}:{px:-t.label.padding,py:t.proxy.yScale?.apply(t.label.value)??0,anchorX:1,anchorY:.5}),r=dt(()=>x(n).px),i=dt(()=>x(n).py),o=dt(()=>x(n).anchorX),s=dt(()=>x(n).anchorY),a=dt(()=>t.label.orientation=="vertical"?{rotation:90,shiftX:x(o)*t.label.size.width,shiftY:-x(s)*t.label.size.height,width:t.label.size.height,height:t.label.size.width}:{rotation:0,shiftX:-x(o)*t.label.size.width,shiftY:-x(s)*t.label.size.height,width:t.label.size.width,height:t.label.size.height}),l=dt(()=>x(a).rotation),c=dt(()=>x(a).shiftX),u=dt(()=>x(a).shiftY),f=dt(()=>x(a).width),h=dt(()=>x(a).height),p=4,g=4;var y=Dqt(),v=ot(y);ut(v,"x",-p),ut(v,"y",-g);var b=ot(v);let _;var w=ot(b,!0);et(b),et(v),et(y),Pt(S=>{ut(y,"transform",`translate(${x(r)+x(c)}, ${x(i)+x(u)}) rotate(${x(l)??""})`),ut(v,"width",x(f)+p*2),ut(v,"height",x(h)+g*2),ut(b,"title",t.label.text),_=Me(b,"",_,S),ce(w,t.label.text)},[()=>({width:`${x(f)+2}px`,height:`${x(h)+g*2}px`,"line-height":`${x(h)+g*2}px`,"font-family":Iot,"font-size":`${M5}px`,"margin-left":"4px",color:t.color,overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"})]),rt(e,y),Ce()}function X_(e,t=0){let n=Nx(e);return n.l+=t,n.a=0,n.b=0,n.rgb().formatHex8()}const mo={light:{scheme:"light",continuousColorScheme:"YlGnBu",continuousColorSchemeAtZero:AI(0),markColor:"#3b82f6",markColorFade:"#dbeafe",markColorGray:X_("#3b82f6",20),markColorGrayFade:X_("#dbeafe"),gridColor:Qa.slate[300],labelColor:Qa.slate[400],titleColor:Qa.slate[400],brushBorder:Qa.slate[500],brushBorderBack:"#fff",brushFill:"rgba(0,0,0,0.1)"},dark:{scheme:"dark",continuousColorScheme:"Inferno",continuousColorSchemeAtZero:n3(0),markColor:"#3b82f6",markColorFade:"#3b4d7f",markColorGray:X_("#3b82f6",-20),markColorGrayFade:X_("#1f398a"),gridColor:Qa.slate[600],labelColor:Qa.slate[500],titleColor:Qa.slate[500],brushBorder:Qa.slate[400],brushBorderBack:"#000",brushFill:"rgba(255,255,255,0.1)"}};var Lqt=Ze('<line stroke-linecap="butt"></line>'),Fqt=Ze('<line stroke-dasharray="1,3" stroke-linecap="square"></line>'),Bqt=Ze("<g><!><!><!></g>"),Pqt=Ze('<line stroke-linecap="butt"></line>'),zqt=Ze('<line stroke-linecap="square"></line>'),Uqt=Ze("<g><!><!><!></g>"),qqt=Et("<div><svg><g><!><!><!><!></g></svg></div>");function o1(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(s,"$darkMode",n),o=4,s=Fr.darkMode;let a=ie(t,"xAxis",19,()=>({})),l=ie(t,"yAxis",19,()=>({})),c=dt(()=>t.xScale?JB(t.xScale,a(),"x"):null),u=dt(()=>t.yScale?JB(t.yScale,l(),"y"):null),f=dt(()=>R8([x(c)?.extents,x(u)?.extents,t.extents].filter(F=>F!=null))),h=dt(()=>({x:x(f).left,y:x(f).top,width:t.width-x(f).left-x(f).right,height:t.height-x(f).top-x(f).bottom})),p=dt(()=>x(c)?.concrete([0,x(h).width])),g=dt(()=>x(u)?.concrete([x(h).height,0])),y=dt(()=>x(c)&&x(p)?ZB(x(c).labels,F=>({center:x(p).apply(F.value),length:F.size.width,priority:F.level}),{gap:4}):[]),v=dt(()=>x(u)&&x(g)?ZB(x(u).labels,F=>({center:x(g).apply(F.value),length:F.size.height,priority:F.level}),{gap:2}):[]),b=dt(()=>i()?mo.dark:mo.light),_=dt(()=>({xScale:x(p),yScale:x(g),plotWidth:x(h).width,plotHeight:x(h).height}));var w=qqt();let S;var k=ot(w);Me(k,"",{},{position:"absolute",left:"-4px",top:"-4px"});var E=ot(k),T=ot(E);iv(T,()=>t.childrenBelow??vn,()=>x(_));var M=mt(T);{var I=F=>{var N=Bqt(),O=ot(N);En(O,17,()=>x(c).ticks,Un,(j,z)=>{var U=Lqt();const V=dt(()=>x(p).apply(x(z).value));Pt(()=>{ut(U,"x1",x(V)),ut(U,"y1",x(h).height),ut(U,"x2",x(V)),ut(U,"y2",x(h).height+(x(z).level==0?3:0)),ut(U,"stroke",x(b).gridColor),ut(U,"stroke-opacity",x(z).level==0?1:.4)}),rt(j,U)});var D=mt(O);En(D,17,()=>x(c).gridLines,Un,(j,z)=>{var U=Mn();const V=dt(()=>x(p).apply(x(z).value));var Y=Ht(U);En(Y,17,()=>x(g)?.rangeBands??[],Un,(Z,ct)=>{var gt=dt(()=>qT(x(ct),2));let pt=()=>x(gt)[0],lt=()=>x(gt)[1];var yt=Fqt();Pt((at,vt)=>{ut(yt,"x1",x(V)),ut(yt,"y1",at),ut(yt,"x2",x(V)),ut(yt,"y2",vt),ut(yt,"stroke",x(b).gridColor),ut(yt,"stroke-opacity",x(z).level==0?1:.4)},[()=>Math.min(pt(),lt()),()=>Math.max(pt(),lt())]),rt(Z,yt)}),rt(j,U)});var B=mt(D);En(B,17,()=>x(y),Un,(j,z)=>{QB(j,{get label(){return x(z)},dimension:"x",get proxy(){return x(_)},get color(){return x(b).labelColor}})}),et(N),rt(F,N)};Ft(M,F=>{x(c)&&x(p)&&a()&&F(I)})}var $=mt(M);{var C=F=>{var N=Uqt(),O=ot(N);En(O,17,()=>x(u).ticks,Un,(j,z)=>{var U=Pqt();const V=dt(()=>x(g).apply(x(z).value));ut(U,"x2",0),Pt(()=>{ut(U,"x1",-(x(z).level==0?3:0)),ut(U,"y1",x(V)),ut(U,"y2",x(V)),ut(U,"stroke",x(b).gridColor),ut(U,"stroke-opacity",x(z).level==0?1:.4)}),rt(j,U)});var D=mt(O);En(D,17,()=>x(u).gridLines,Un,(j,z)=>{var U=Mn();const V=dt(()=>x(g).apply(x(z).value));var Y=Ht(U);En(Y,17,()=>x(p)?.rangeBands??[],Un,(Z,ct)=>{var gt=dt(()=>qT(x(ct),2));let pt=()=>x(gt)[0],lt=()=>x(gt)[1];var yt=zqt();Pt(()=>{ut(yt,"x1",pt()),ut(yt,"y1",x(V)),ut(yt,"x2",lt()),ut(yt,"y2",x(V)),ut(yt,"stroke",x(b).gridColor),ut(yt,"stroke-opacity",x(z).level==0?1:.4)}),rt(Z,yt)}),rt(j,U)});var B=mt(D);En(B,17,()=>x(v),Un,(j,z)=>{QB(j,{get label(){return x(z)},dimension:"y",get proxy(){return x(_)},get color(){return x(b).labelColor}})}),et(N),rt(F,N)};Ft($,F=>{x(u)&&x(g)&&l()&&F(C)})}var L=mt($);iv(L,()=>t.children??vn,()=>x(_)),et(E),et(k),et(w),Pt(F=>{S=Me(w,"",S,F),ut(k,"width",t.width+o*2),ut(k,"height",t.height+o*2),ut(E,"transform",`translate(${o+x(h).x},${o+x(h).y})`)},[()=>({width:`${t.width??""}py`,height:`${t.height??""}px`,position:"relative","user-select":"none","-webkit-user-select":"none",cursor:"default"})]),rt(e,w),Ce(),r()}var jqt=Ze('<rect role="none"></rect><rect role="none"></rect>',1),Vqt=Ze('<rect role="none"></rect><rect role="none"></rect>',1),Wqt=Ze('<rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect>',1),Yqt=Ze('<rect></rect><rect role="none"></rect><!><!><!>',1),Hqt=Ze('<g><rect stroke="none" fill="none" pointer-events="fill" role="none"></rect><!></g>');function yA(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(s,"$darkMode",n),o=8,s=Fr.darkMode;let a=dt(()=>i()?mo.dark:mo.light),l,c=dt(()=>t.proxy.xScale!=null&&t.value?.x!=null?t.proxy.xScale.applyBand(t.value.x):[0,t.proxy.plotWidth]),u=dt(()=>t.proxy.yScale!=null&&t.value?.y!=null?t.proxy.yScale.applyBand(t.value.y):[0,t.proxy.plotHeight]);function f(k){return k instanceof Array&&k.length==2&&typeof k[0]=="number"&&typeof k[1]=="number"}function h(k,E,T){let M=k.invert(E,T);if(k.domain.length==2&&typeof k.domain[0]=="number"&&typeof M=="number"){let[I,$]=k.domain;return Math.max(Math.min(I,$),Math.min(Math.max(I,$),M))}return M}function p(k,E){return(E=="x"||E=="xy")&&k.x==null?!1:!((E=="y"||E=="xy")&&k.y==null)}function g(){return k=>{k.preventDefault();let E=l.getBoundingClientRect().left,T=l.getBoundingClientRect().top,M=k.clientX-E,I=k.clientY-T,$=t.proxy.xScale?h(t.proxy.xScale,M):null,C=t.proxy.yScale?h(t.proxy.yScale,I):null;if($==null&&(t.mode=="x"||t.mode=="xy")||C==null&&(t.mode=="y"||t.mode=="xy"))return;let L=(D,B)=>typeof D=="number"&&typeof B=="number"?D!=B?[Math.min(D,B),Math.max(D,B)]:null:B,F=D=>{let B=D.clientX-E,j=D.clientY-T,z=t.proxy.xScale?h(t.proxy.xScale,B,typeof $=="number"?"number":void 0):null,U=t.proxy.yScale?h(t.proxy.yScale,j,typeof C=="number"?"number":void 0):null,V={};return(t.mode=="x"||t.mode=="xy")&&(V.x=L($,z)),(t.mode=="y"||t.mode=="xy")&&(V.y=L(C,U)),p(V,t.mode)?V:null},N=D=>{D.preventDefault(),t.onChange(F(D))},O=D=>{t.onChange(F(D)),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",O)};window.addEventListener("mousemove",N),window.addEventListener("mouseup",O)}}function y(k){return E=>{if(t.value==null)return;let T={...t.value};E.preventDefault();let{xScale:M,yScale:I}=t.proxy,$=f(T.x),C=f(T.y),L=[...M&&T.x?M.applyBand(T.x):[0,0],...I&&T.y?I.applyBand(T.y):[0,0]];if(!$){let D=Math.max(k[0],k[1]);k=[D,D,k[2],k[3]]}if(!C){let D=Math.max(k[2],k[3]);k=[k[0],k[1],D,D]}let F=D=>{let B=D.pageX-E.pageX,j=D.pageY-E.pageY,z=[B,B,j,j].map((V,Y)=>L[Y]+V*k[Y]),U={...T};if(M&&(t.mode=="x"||t.mode=="xy"))if($){let V=h(M,z[0],"number"),Y=h(M,z[1],"number");U.x=V==Y?null:V<Y?[V,Y]:[Y,V]}else U.x=h(M,(z[0]+z[1])/2),typeof U.x!="string"&&(U.x=null);if(I!=null&&(t.mode=="y"||t.mode=="xy"))if(C){let V=h(I,z[2],"number"),Y=h(I,z[3],"number");U.y=V==Y?null:V<Y?[V,Y]:[Y,V]}else U.y=h(I,(z[2]+z[3])/2),typeof U.y!="string"&&(U.y=null);return p(U,t.mode)||(U=null),U},N=D=>{D.preventDefault(),t.onChange(F(D))},O=D=>{let B=F(D);B&&!$&&!C&&B.x==T.x&&B.y==T.y&&(B=null),t.onChange(B),window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",O)};window.addEventListener("mousemove",N),window.addEventListener("mouseup",O)}}var v=Hqt(),b=ot(v);ut(b,"x",0),ut(b,"y",0);var _=dt(g);b.__mousedown=function(...k){x(_)?.apply(this,k)},Me(b,"",{},{cursor:"crosshair"}),ds(b,k=>l=k,()=>l);var w=mt(b);{var S=k=>{var E=Yqt(),T=Ht(E);let M;var I=mt(T),$=dt(()=>y([1,1,1,1]));I.__mousedown=function(...j){x($)?.apply(this,j)};let C;var L=mt(I);{var F=j=>{var z=jqt(),U=Ht(z);ut(U,"width",o);var V=dt(()=>y([1,0,0,0]));U.__mousedown=function(...ct){x(V)?.apply(this,ct)},Me(U,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"});var Y=mt(U);ut(Y,"width",o);var Z=dt(()=>y([0,1,0,0]));Y.__mousedown=function(...ct){x(Z)?.apply(this,ct)},Me(Y,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),Pt((ct,gt,pt,lt)=>{ut(U,"x",x(c)[0]-o/2),ut(U,"y",ct),ut(U,"height",gt),ut(Y,"x",x(c)[1]-o/2),ut(Y,"y",pt),ut(Y,"height",lt)},[()=>Math.min(x(u)[0],x(u)[1]),()=>Math.abs(x(u)[0]-x(u)[1]),()=>Math.min(x(u)[0],x(u)[1]),()=>Math.abs(x(u)[0]-x(u)[1])]),rt(j,z)};Ft(L,j=>{(t.mode=="x"||t.mode=="xy")&&f(t.value.x)&&j(F)})}var N=mt(L);{var O=j=>{var z=Vqt(),U=Ht(z);ut(U,"height",o);var V=dt(()=>y([0,0,1,0]));U.__mousedown=function(...ct){x(V)?.apply(this,ct)},Me(U,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"});var Y=mt(U);ut(Y,"height",o);var Z=dt(()=>y([0,0,0,1]));Y.__mousedown=function(...ct){x(Z)?.apply(this,ct)},Me(Y,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),Pt((ct,gt,pt,lt)=>{ut(U,"x",ct),ut(U,"width",gt),ut(U,"y",x(u)[0]-o/2),ut(Y,"x",pt),ut(Y,"width",lt),ut(Y,"y",x(u)[1]-o/2)},[()=>Math.min(x(c)[0],x(c)[1]),()=>Math.abs(x(c)[0]-x(c)[1]),()=>Math.min(x(c)[0],x(c)[1]),()=>Math.abs(x(c)[0]-x(c)[1])]),rt(j,z)};Ft(N,j=>{(t.mode=="y"||t.mode=="xy")&&f(t.value.y)&&j(O)})}var D=mt(N);{var B=j=>{var z=Wqt(),U=Ht(z);ut(U,"width",o),ut(U,"height",o);var V=dt(()=>y([1,0,1,0]));U.__mousedown=function(...yt){x(V)?.apply(this,yt)},Me(U,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"});var Y=mt(U);ut(Y,"width",o),ut(Y,"height",o);var Z=dt(()=>y([1,0,0,1]));Y.__mousedown=function(...yt){x(Z)?.apply(this,yt)},Me(Y,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"});var ct=mt(Y);ut(ct,"width",o),ut(ct,"height",o);var gt=dt(()=>y([0,1,1,0]));ct.__mousedown=function(...yt){x(gt)?.apply(this,yt)},Me(ct,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"});var pt=mt(ct);ut(pt,"width",o),ut(pt,"height",o);var lt=dt(()=>y([0,1,0,1]));pt.__mousedown=function(...yt){x(lt)?.apply(this,yt)},Me(pt,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),Pt(()=>{ut(U,"x",x(c)[0]-o/2),ut(U,"y",x(u)[0]-o/2),ut(Y,"x",x(c)[0]-o/2),ut(Y,"y",x(u)[1]-o/2),ut(ct,"x",x(c)[1]-o/2),ut(ct,"y",x(u)[0]-o/2),ut(pt,"x",x(c)[1]-o/2),ut(pt,"y",x(u)[1]-o/2)}),rt(j,z)};Ft(D,j=>{t.mode=="xy"&&f(t.value.x)&&f(t.value.y)&&j(B)})}Pt((j,z,U,V,Y,Z,ct,gt,pt,lt)=>{ut(T,"x",j),ut(T,"width",z),ut(T,"y",U),ut(T,"height",V),M=Me(T,"",M,Y),ut(I,"x",Z),ut(I,"width",ct),ut(I,"y",gt),ut(I,"height",pt),C=Me(I,"",C,lt)},[()=>Math.min(x(c)[0],x(c)[1]),()=>Math.abs(x(c)[0]-x(c)[1]),()=>Math.min(x(u)[0],x(u)[1]),()=>Math.abs(x(u)[0]-x(u)[1]),()=>({stroke:x(a).brushBorderBack,fill:"none","stroke-width":2}),()=>Math.min(x(c)[0],x(c)[1]),()=>Math.abs(x(c)[0]-x(c)[1]),()=>Math.min(x(u)[0],x(u)[1]),()=>Math.abs(x(u)[0]-x(u)[1]),()=>({stroke:x(a).brushBorder,fill:x(a).brushFill,cursor:"move"})]),rt(k,E)};Ft(w,k=>{x(c)&&x(u)&&t.value&&k(S)})}et(v),Pt(()=>{ut(b,"width",t.proxy.plotWidth),ut(b,"height",t.proxy.plotHeight)}),rt(e,v),Ce(),r()}Br(["mousedown"]);var Gqt=Et("<option> </option>"),Xqt=Et('<select class="form-select text-center pl-[4px] pr-[16px] py-0 my-0 border-0 rounded text-sm! text-slate-500 bg-white/90 dark:text-slate-400 dark:bg-black/25"></select>');function vA(e,t){Re(t,!0);let n;const r=iI(),i=r+"_null",o=r+"_undefined",s=h=>h===null?i:h===void 0?o:h.toString(),a=h=>h===i?null:h===o?void 0:h,l=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 20">
    <path d="M 2,8 L 5,12 L 8,8" style="stroke:${Qa.gray[500]};stroke-opacity:0.7;stroke-width:1.5;fill:none;stroke-linecap:round;stroke-linejoin:round" />
  </svg>`;var c=Xqt();c.__change=()=>{t.onChange(a(n.value))};let u;En(c,21,()=>t.options,Un,(h,p)=>{var g=Gqt(),y=ot(g,!0);et(g);var v={};Pt(b=>{ce(y,x(p).label),v!==(v=b)&&(g.value=(g.__value=b)??"")},[()=>s(x(p).value)]),rt(h,g)}),et(c),ds(c,h=>n=h,()=>n);var f;Bw(c),Pt((h,p)=>{u=Me(c,"",u,h),f!==(f=p)&&(c.value=(c.__value=p)??"",ng(c,p))},[()=>({"background-image":`url(data:image/svg+xml;base64,${btoa(l)??""})`,"background-position":"right center"}),()=>s(t.value)]),rt(e,c),Ce()}Br(["change"]);var Kqt=Et('<span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm"> </span> <!></span>');function Dg(e,t){Re(t,!0);let n=ie(t,"value",15);const r=["linear","log","symlog"];var i=Mn(),o=Ht(i);{var s=a=>{var l=Kqt(),c=ot(l),u=ot(c);et(c);var f=mt(c,2);{let h=dt(()=>r.map(p=>({value:p,label:p})));vA(f,{get options(){return x(h)},get value(){return n()},onChange:p=>n(p)})}et(l),Pt(()=>ce(u,`${t.label??""}:`)),rt(a,l)};Ft(o,a=>{n()!=null&&n()!="band"&&a(s)})}rt(e,i),Ce()}async function ah(e,t,n){let i=(await e.query(zt.describe(zt.from(t).select({field:Mt(n,t)})))).get(0)?.column_type;if(i==null)return null;let o=Wx(i);if(o=="number"){let s=Kr(Mt(n,t),"DOUBLE"),a=await e.query(zt.from(t).select({count:sr(),min:ml(s),minPositive:ml(rs(ba(s,0),s,Zt(null))),max:Ba(s),mean:CS(s),median:NS(s)}).where(Df(s))),l=await e.query(zt.from(t).select({countNonFinite:sr()}).where(Oo(og(Df(s)),cl(s))));return{table:t,field:n,quantitative:{...a.get(0),...l.get(0)}}}else if(o=="string"){let s=Kr(Mt(n,t),"TEXT"),a=Array.from(await e.query(zt.from(t).select({value:s,count:sr()}).where(pc(s)).groupby(s).orderby(jg(sr())).limit(1e3))),l=(await e.query(zt.from(t).select({count:sr()}).where(cl(s)))).get(0).count,{otherCount:c,numOtherLevels:u}=(await e.query(zt.from(t).select({otherCount:sr(),numOtherLevels:ee`COUNT(DISTINCT(${s}))`}).where(pc(s),og(Nd(s,a.map(f=>Zt(f.value))))))).get(0);return{table:t,field:n,nominal:{levels:a,numOtherLevels:u,otherCount:c,nullCount:l}}}return null}function lb(...e){let t={},n={},r={},i={},o={};for(let l of e){if(l.stats.quantitative){let c=uV(l.stats.quantitative,{scale:l.scaleType,desiredCount:l.binCount??20}),u=Kr(Mt(l.stats.field),"DOUBLE"),f=c.scale.expr(u,c.scale.constant??0);t[l.key]=c.scale.type=="log"?rs(Li(Df(u),ba(u,Zt(0))),Us(Pe(Be(f,c.binStart),1/c.binSize)),Zt(null)):rs(Df(u),Us(Pe(Be(f,c.binStart),1/c.binSize)),Zt(null));let h=w=>Math.floor((c.scale.forward(w,c.scale.constant??0)-c.binStart)/c.binSize),p=w=>c.scale.reverse(w*c.binSize+c.binStart,c.scale.constant??0);r[l.key]=w=>w==null?"n/a":[p(w),p(w+1)];let g=h(c.scale.type=="log"?l.stats.quantitative.minPositive:l.stats.quantitative.min),y=h(l.stats.quantitative.max),v=[p(g),p(y+1)],b=l.stats.quantitative.countNonFinite>0;c.scale.type=="log"&&l.stats.quantitative.min<0&&(b=!0),n[l.key]={type:c.scale.type,constant:c.scale.constant,domain:v,specialValues:b?["n/a"]:[]};let _=w=>{if(typeof w=="string"){if(w=="n/a")return Oo(og(Df(u)),cl(u))}else if(w instanceof Array)if(w.length==2&&typeof w[0]=="number"){let[S,k]=w;if(typeof S=="number"&&typeof k=="number")return Do(u,[Math.min(S,k),Math.max(S,k)])}else return Oo(...w.map(_));return Zt(!1)};i[l.key]=_,o[l.key]=(w,S)=>{let k=typeof w=="string"?[1,0]:[0,w[0]],E=typeof S=="string"?[1,0]:[0,S[0]];return k[0]!=E[0]?k[0]-E[0]:k[1]-E[1]}}if(l.stats.nominal){let c=l.binCount??15,{levels:u,nullCount:f,otherCount:h,numOtherLevels:p}=l.stats.nominal;u.length>c&&(p+=u.length-c,h=u.slice(c).reduce((S,k)=>S+k.count,0),u=u.slice(0,c));let g=`(${p.toLocaleString()} others)`,y="(null)",v=Kr(Mt(l.stats.field),"TEXT");t[l.key]=rs(Nd(v,u.map(S=>Zt(S.value))),v,rs(cl(v),Zt(y),Zt(g)));let b=[...h>0?[g]:[],...f>0?[y]:[]];n[l.key]={type:"band",domain:u.map(S=>S.value),specialValues:b},r[l.key]=S=>S;let _=S=>S==y?cl(v):S==g?Li(og(Nd(v,u.map(k=>Zt(k.value)))),pc(v)):x6(v,Zt(S));i[l.key]=S=>S instanceof Array?Oo(...S.map(k=>_(k))):typeof S=="string"?_(S):null;let w=u.map(S=>S.value);o[l.key]=(S,k)=>{if(typeof S=="string"&&typeof k=="string"){let E=w.indexOf(S);E<0&&(E=w.length+b.indexOf(S));let T=w.indexOf(k);return T<0&&(T=w.length+b.indexOf(k)),E-T}return 0}}}function s(l){let c={...l};for(let u of e)c[u.key]=r[u.key](c[u.key]);return c}function a(l){let c=[];for(let u of e){let f=l[u.key],h=f!=null?i[u.key](f):null;h&&c.push(h)}return{value:{...l},predicate:c.length>0?Li(...c):null}}return{select:t,collect:s,scales:n,clause:a,order:o}}function _p(e){let t=e.coordinator,n=new Jqt({...e,coordinator:t});return t.connect(n),n.destroy=()=>{t.disconnect(n)},n}class Jqt extends ch{_spec;constructor(t){super(t.selection??void 0),this._spec={...t}}query(t){return this._spec.query(t)}queryResult(t){return this._spec.queryResult?.(t),this}queryPending(){return this._spec.queryPending?.(),this}queryError(t){return this._spec.queryError?.(t),this}}function wp(e,t,n){let r=e;if(r==null)return;let i=r.subscribe(o=>{o!=null&&n(o)});return fe(()=>{r.set(t())}),i}var Zqt=Ze('<line></line><line></line><line></line><rect></rect><line stroke-linecap="butt"></line>',1),Qqt=Ze("<!><!>",1),tjt=Et('<div class="text-slate-400 mb-1 select-none"> </div> <div><!></div> <div class="text-slate-400 mb-1 select-none text-right"> </div> <div class="flex flex-col items-end gap-1"><div class="flex flex gap-2 mt-2"><!> <!></div></div>',1);function ejt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(a,"$darkMode",n);let o=ie(t,"xBinCount",3,20);const s=Fr.coordinator,a=Fr.darkMode;let l=dt(()=>i()?mo.dark:mo.light),c=wt(null),u=wt(null),f=wt(null),h=wt(null);function p(I,$,C,L,F){let N=wt(null);Promise.all([ah(I,$,C),ah(I,$,L)]).then(([j,z])=>{H(N,j!=null&&z!=null?{x:j,y:z}:null)});let O=dt(()=>x(N)?lb({key:"x",stats:x(N).x,scaleType:x(c),binCount:o()}):null),D=dt(()=>x(N)?.y.quantitative?$qt(x(N).y.quantitative,x(u)):null);fe(()=>{x(c)==null&&H(c,x(O)?.scales.x?.type??null),x(u)==null&&H(u,x(D)?.type??null)});function B(j,z,U){return _p({coordinator:I,selection:z,query:V=>{let Y=Mt(L,$);return zt.from($).select({...j.select,min:ml(Y),max:Ba(Y),p50:NS(Y),p25:a4(Y,.25),p75:a4(Y,.75)}).where(V,Df(Y)).groupby(j.select.x)},queryResult:V=>{U(Array.from(V).map(j.collect))}})}fe(()=>{if(x(O)==null||x(D)==null)return;let j=x(O),z=wt(Aa([])),U=B(j,F,V=>{H(z,V,!0)});return U.reset=()=>{H(f,null)},fe(()=>{H(h,{xScale:j.scales.x,yScale:x(D),items:x(z)})}),fe(()=>{let V={source:U,clients:new Set([U]),...x(f)!=null?j.clause(x(f)):{value:null,predicate:null}};F.update(V),F.activate(V)}),()=>{U.destroy(),F.update({source:U,clients:new Set([U]),value:null,predicate:null})}})}fe(()=>{p(s,t.table,t.xField,t.yField,t.filter)}),fe(()=>wp(t.stateStore,()=>({brush:x(f),xScaleType:x(c),yScaleType:x(u)}),I=>{H(f,I.brush),H(c,I.xScaleType),H(u,I.yScaleType)}));var g=tjt(),y=Ht(g),v=ot(y);et(y);var b=mt(y,2);Me(b,"",{},{height:"250px"});var _=ot(b);mA(_,{children:($,C=vn,L=vn)=>{var F=Mn(),N=Ht(F);{var O=D=>{o1(D,{get width(){return C()},get height(){return L()},get xScale(){return x(h).xScale},get yScale(){return x(h).yScale},children:(j,z=vn)=>{var U=Qqt();const V=dt(()=>z().xScale),Y=dt(()=>z().yScale),Z=dt(()=>i()?"#bbbbbb":"black");var ct=Ht(U);En(ct,17,()=>x(h)?.items??[],Un,(pt,lt)=>{var yt=Zqt();const at=dt(()=>{const[Wt,re]=x(V).applyBand(x(lt).x);return{x0:Wt,x1:re}}),vt=dt(()=>x(Y).apply(x(lt).p50)),st=dt(()=>{const[Wt,re]=x(Y).applyBand([x(lt).min,x(lt).max]);return{ey0:Wt,ey1:re}}),Q=dt(()=>{const[Wt,re]=x(Y).applyBand([x(lt).p25,x(lt).p75]);return{by0:Wt,by1:re}}),It=dt(()=>Math.min(Math.abs(x(at).x1-x(at).x0)*.1,1)),_t=dt(()=>Math.abs(x(at).x1-x(at).x0)/3);var Dt=Ht(yt),Ut=mt(Dt),xt=mt(Ut),qt=mt(xt),ue=mt(qt);Pt((Wt,re,Ke,le,_n,pn)=>{ut(Dt,"y1",x(st).ey0),ut(Dt,"y2",x(st).ey1),ut(Dt,"x1",(x(at).x0+x(at).x1)/2),ut(Dt,"x2",(x(at).x0+x(at).x1)/2),ut(Dt,"stroke",x(Z)),ut(Ut,"y1",x(st).ey0),ut(Ut,"y2",x(st).ey0),ut(Ut,"x1",(x(at).x0+x(at).x1)/2-x(_t)/2),ut(Ut,"x2",(x(at).x0+x(at).x1)/2+x(_t)/2),ut(Ut,"stroke",x(Z)),ut(xt,"y1",x(st).ey1),ut(xt,"y2",x(st).ey1),ut(xt,"x1",(x(at).x0+x(at).x1)/2-x(_t)/2),ut(xt,"x2",(x(at).x0+x(at).x1)/2+x(_t)/2),ut(xt,"stroke",x(Z)),ut(qt,"x",Wt),ut(qt,"height",re),ut(qt,"y",Ke),ut(qt,"width",le),ut(qt,"fill",x(l).markColor),ut(ue,"y1",x(vt)),ut(ue,"y2",x(vt)),ut(ue,"x1",_n),ut(ue,"x2",pn),ut(ue,"stroke",x(Z))},[()=>Math.min(x(at).x0,x(at).x1)+x(It)/2,()=>Math.abs(x(Q).by0-x(Q).by1),()=>Math.min(x(Q).by0,x(Q).by1),()=>Math.abs(x(at).x0-x(at).x1)-x(It),()=>Math.min(x(at).x0,x(at).x1)+x(It)/2,()=>Math.max(x(at).x0,x(at).x1)-x(It)/2]),rt(pt,yt)});var gt=mt(ct);yA(gt,{get proxy(){return z()},mode:"x",get value(){return x(f)},onChange:pt=>H(f,pt!=null&&pt.x!=null?{x:pt.x}:null)}),rt(j,U)},$$slots:{default:!0}})};Ft(N,D=>{x(h)!=null&&D(O)})}rt($,F)}}),et(b);var w=mt(b,2),S=ot(w);et(w);var k=mt(w,2),E=ot(k),T=ot(E);Dg(T,{label:"X",get value(){return x(c)},set value(I){H(c,I)}});var M=mt(T,2);Dg(M,{label:"Y",get value(){return x(u)},set value(I){H(u,I)}}),et(E),et(k),Pt(()=>{ce(v,`↑ ${t.yField??""}`),ce(S,`${t.xField??""} →`)}),rt(e,g),Ce(),r()}var njt=Et('<hr class="mt-1 mb-1 border-slate-300 dark:border-slate-500 border-dashed"/>'),rjt=(e,t,n)=>t(x(n).x,e.shiftKey),ijt=Et('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>'),ojt=Et('<!> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),sjt=Et('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>'),ajt=Et('<!> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),ljt=Et('<!> <button class="text-left items-center flex py-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><span> </span></div> <div class="flex-1 h-4 relative"><!></div> <div class="flex-none"><span><!></span></div></button>',1),cjt=(e,t,n)=>{H(t,!x(t)),x(t)==!1&&H(n,null)},ujt=Et('<button class="py-0.5 text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden"><!></button>'),fjt=Et('<!> <div class="flex"><div class="flex-1 pl-40 mr-2 overflow-hidden"><!></div> <div class="flex"><!></div></div>',1),hjt=Et('<div class="flex flex-col text-sm w-full select-none"><!></div>');function djt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(l,"$darkMode",n),o=10,s=100,a=Fr.coordinator,l=Fr.darkMode;let c=wt(null),u=wt(!1),f=wt(!1),h=wt(null),p=wt(400),g=dt(()=>x(h)?.items.reduce((C,L)=>Math.max(C,x(f)?L.selected:L.total),0)??0),y=dt(()=>qu([0,Math.max(1,x(g))],[0,x(p)-250])),v=dt(()=>C=>C!=0?Math.max(1,x(y)(C)):0),b=dt(()=>i()?mo.dark:mo.light);function _(C,L,F,N){let O=wt(null);ah(C,L,F).then(j=>{H(O,j)});let D=dt(()=>x(O)?lb({key:"x",stats:x(O),binCount:x(u)?s:o}):null);function B(j,z,U){return _p({coordinator:C,selection:z,query:V=>zt.from(L).select({...j.select,count:sr()}).where(V).groupby(j.select.x),queryResult:V=>{U(Array.from(V).map(j.collect))}})}fe(()=>{if(x(D)==null)return;let j=x(D),z=wt([]),U=wt([]),V=B(j,null,Z=>{H(z,Z)}),Y=B(j,N,Z=>{H(U,Z)});return Y.reset=()=>{H(c,null)},fe(()=>{if(x(z).length>0){let Z=pt=>JSON.stringify(pt),ct=new Map(x(z).map(({x:pt,count:lt})=>[Z(pt),lt])),gt=new Map(x(U).map(({x:pt,count:lt})=>[Z(pt),lt]));if(x(z).every(pt=>typeof pt.x=="string")){let pt=j.scales.x.specialValues??[],lt=pt.filter(st=>st!="(null)").length>0,yt=[...j.scales.x.domain,...pt].map(st=>({x:st,total:ct.get(Z(st))??0,selected:gt.get(Z(st))??0})),at=yt.reduce((st,Q)=>st+Q.total,0),vt=yt.reduce((st,Q)=>st+Q.selected,0);H(h,{items:yt,sumTotal:at,sumSelected:vt,firstSpecialIndex:j.scales.x.domain.length,hasOther:lt})}else{let pt=Array.from(ct.keys()).map(vt=>JSON.parse(vt));pt=pt.sort((vt,st)=>{let Q=typeof vt=="string"?1/0:vt[0],It=typeof st=="string"?1/0:st[0];return Q-It});let lt=pt.map(vt=>({x:vt,total:ct.get(Z(vt))??0,selected:gt.get(Z(vt))??0})),yt=lt.reduce((vt,st)=>vt+st.total,0),at=lt.reduce((vt,st)=>vt+st.selected,0);H(h,{items:lt,sumTotal:yt,sumSelected:at,firstSpecialIndex:pt.findIndex(vt=>typeof vt=="string"),hasOther:!1})}}}),fe(()=>{let Z={source:Y,clients:new Set([Y]),...x(c)!=null?j.clause({x:x(c)}):{value:null,predicate:null}};N.update(Z),N.activate(Z)}),()=>{V.destroy(),Y.destroy(),N.update({source:Y,clients:new Set([Y]),value:null,predicate:null})}})}fe(()=>{_(a,t.table,t.field,t.filter)});const w=(C,L)=>JSON.stringify(C)==JSON.stringify(L);function S(C,L){if(x(c)==null||x(c).length==0)H(c,[C]);else{let F=x(c).findIndex(N=>w(N,C))>=0;L?F?H(c,x(c).filter(N=>!w(N,C))):H(c,[...x(c),C]):F?H(c,null):H(c,[C])}}fe(()=>wp(t.stateStore,()=>({selection:x(c),expanded:x(u),percentage:x(f)}),C=>{H(c,C.selection),H(u,C.expanded),H(f,C.percentage)}));const k=Ha(".6");function E(C){return typeof C=="string"?C:"["+k(C[0])+", "+k(C[1])+")"}function T(C,L){return L==0?"-%":(C/L*100).toFixed(1)+"%"}var M=hjt(),I=ot(M);{var $=C=>{var L=fjt(),F=Ht(L);En(F,17,()=>x(h).items,Un,(U,V,Y)=>{var Z=ljt();const ct=dt(()=>x(c)==null||x(c).length==0||x(c).findIndex(le=>w(le,x(V).x))>=0),gt=dt(()=>!x(h).items.every(le=>le.total==le.selected));var pt=Ht(Z);{var lt=le=>{var _n=njt();rt(le,_n)};Ft(pt,le=>{Y==x(h).firstSpecialIndex&&le(lt)})}var yt=mt(pt,2);yt.__click=[rjt,S,V];var at=ot(yt),vt=ot(at);let st;var Q=ot(vt,!0);et(vt),et(at);var It=mt(at,2),_t=ot(It);{var Dt=le=>{var _n=ojt(),pn=Ht(_n);{var cr=nn=>{var Pn=ijt();let Ti;Pt(Yo=>Ti=Me(Pn,"",Ti,Yo),[()=>({background:x(b).markColorFade,width:`${x(v)(x(V).total)??""}px`})]),rt(nn,Pn)};Ft(pn,nn=>{x(f)||nn(cr)})}var xr=mt(pn,2);let qe;Pt(nn=>qe=Me(xr,"",qe,nn),[()=>({background:x(b).markColor,width:`${x(v)(x(V).selected)??""}px`})]),rt(le,_n)},Ut=le=>{var _n=ajt(),pn=Ht(_n);{var cr=nn=>{var Pn=sjt();let Ti;Pt(Yo=>Ti=Me(Pn,"",Ti,Yo),[()=>({background:x(b).markColorGrayFade,width:`${x(v)(x(V).total)??""}px`})]),rt(nn,Pn)};Ft(pn,nn=>{x(f)||nn(cr)})}var xr=mt(pn,2);let qe;Pt(nn=>qe=Me(xr,"",qe,nn),[()=>({background:x(b).markColorGray,width:`${x(v)(x(V).selected)??""}px`})]),rt(le,_n)};Ft(_t,le=>{x(ct)?le(Dt):le(Ut,!1)})}et(It);var xt=mt(It,2),qt=ot(xt);let ue;var Wt=ot(qt);{var re=le=>{var _n=Mn(),pn=Ht(_n);{var cr=qe=>{var nn=To();Pt(Pn=>ce(nn,Pn),[()=>T(x(V).selected,x(h).sumSelected)]),rt(qe,nn)},xr=qe=>{var nn=To();Pt(Pn=>ce(nn,Pn),[()=>x(V).selected.toLocaleString()+" / "+x(V).total.toLocaleString()]),rt(qe,nn)};Ft(pn,qe=>{x(f)?qe(cr):qe(xr,!1)})}rt(le,_n)},Ke=le=>{var _n=Mn(),pn=Ht(_n);{var cr=qe=>{var nn=To();Pt(Pn=>ce(nn,Pn),[()=>T(x(V).total,x(h).sumTotal)]),rt(qe,nn)},xr=qe=>{var nn=To();Pt(Pn=>ce(nn,Pn),[()=>x(V).total.toLocaleString()]),rt(qe,nn)};Ft(pn,qe=>{x(f)?qe(cr):qe(xr,!1)},!0)}rt(le,_n)};Ft(Wt,le=>{x(gt)?le(re):le(Ke,!1)})}et(qt),et(xt),et(yt),Pt((le,_n,pn,cr)=>{ut(yt,"title",x(V).x),st=ar(vt,1,"",null,st,le),ce(Q,_n),ue=ar(qt,1,"text-slate-400 dark:text-slate-500",null,ue,pn),ut(qt,"title",cr)},[()=>({"text-gray-400":!x(ct),"dark:text-gray-400":!x(ct)}),()=>E(x(V).x),()=>({"!text-gray-200":!x(ct),"dark:!text-gray-600":!x(ct)}),()=>x(gt)?`${x(V).selected.toLocaleString()} / ${x(V).total.toLocaleString()} (${T(x(V).selected,x(V).total)})
${T(x(V).selected,x(h).sumSelected)} of selection`:`${x(V).total.toLocaleString()}
${T(x(V).total,x(h).sumTotal)} of all rows`]),rt(U,Z)});var N=mt(F,2),O=ot(N),D=ot(O);{var B=U=>{var V=ujt();V.__click=[cjt,u,c];var Y=ot(V);{var Z=gt=>{var pt=To();pt.nodeValue="↑ Show up to 10 values",rt(gt,pt)},ct=gt=>{var pt=To();pt.nodeValue="↓ Show up to 100 values",rt(gt,pt)};Ft(Y,gt=>{x(u)?gt(Z):gt(ct,!1)})}et(V),rt(U,V)};Ft(D,U=>{(x(u)||x(h).hasOther)&&U(B)})}et(O);var j=mt(O,2),z=ot(j);vA(z,{options:[{value:"true",label:"%"},{value:"false",label:"#/#"}],get value(){return x(f)},onChange:U=>H(f,U=="true")}),et(j),et(N),rt(C,L)};Ft(I,C=>{x(h)&&C($)})}et(M),Cd(M,"clientWidth",C=>H(p,C)),rt(e,M),Ce(),r()}Br(["click"]);var pjt=Ze("<rect></rect>"),gjt=Ze("<rect></rect>"),mjt=Ze("<!><!><!>",1),yjt=Et('<div class="mt-2 flex gap items-center text-sm"><span class="flex-1 text-slate-400 dark:text-slate-500"><!></span> <!></div>'),vjt=Et("<div><!></div> <!>",1);function bjt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(a,"$darkMode",n);let o=ie(t,"binCount",3,20);const s=Fr.coordinator,a=Fr.darkMode;let l=dt(()=>i()?mo.dark:mo.light),c=wt(null),u=wt(null),f=wt(null);function h(_,w,S,k){let E=wt(null);ah(_,w,S).then(I=>{H(E,I)});let T=dt(()=>x(E)?lb({key:"x",stats:x(E),scaleType:x(c),binCount:o()}):null);fe(()=>{x(c)==null&&H(c,x(T)?.scales.x?.type??null)});function M(I,$,C){return _p({coordinator:_,selection:$,query:L=>zt.from(w).select({...I.select,count:sr()}).where(L).groupby(I.select.x),queryResult:L=>{C(Array.from(L).map(I.collect))}})}fe(()=>{if(x(T)==null)return;let I=x(T),$=wt(Aa([])),C=wt(Aa([])),L=M(I,null,N=>{H($,N,!0)}),F=M(I,k,N=>{H(C,N,!0)});return F.reset=()=>{H(u,null)},fe(()=>{x($).length>0&&H(f,{xScale:I.scales.x,allItems:x($),filteredItems:x(C)})}),fe(()=>{let N={source:F,clients:new Set([F]),...x(u)!=null?I.clause(x(u)):{value:null,predicate:null}};k.update(N),k.activate(N)}),()=>{L.destroy(),F.destroy(),k.update({source:F,clients:new Set([F]),value:null,predicate:null})}})}fe(()=>{h(s,t.table,t.field,t.filter)}),fe(()=>wp(t.stateStore,()=>({brush:x(u),xScaleType:x(c)}),_=>{H(u,_.brush),H(c,_.xScaleType)}));var p=vjt(),g=Ht(p);Me(g,"",{},{height:"200px"});var y=ot(g);mA(y,{children:(w,S=vn,k=vn)=>{var E=Mn(),T=Ht(E);{var M=I=>{const $=dt(()=>x(f).allItems.reduce((C,L)=>Math.max(C,L.count),1));{const C=(F,N=vn)=>{var O=mjt();const D=dt(()=>N().xScale),B=dt(()=>N().yScale);var j=Ht(O);En(j,17,()=>x(f)?.allItems??[],Un,(V,Y)=>{var Z=pjt();const ct=dt(()=>{const[lt,yt]=x(D).applyBand(x(Y).x);return{x0:lt,x1:yt}}),gt=dt(()=>{const[lt,yt]=x(B).applyBand([0,x(Y).count]);return{y0:lt,y1:yt}}),pt=dt(()=>Math.min(Math.abs(x(ct).x1-x(ct).x0)*.1,1));Pt((lt,yt,at,vt)=>{ut(Z,"x",lt),ut(Z,"y",yt),ut(Z,"width",at),ut(Z,"height",vt),ut(Z,"fill",x(l).markColorFade)},[()=>Math.min(x(ct).x0,x(ct).x1)+x(pt)/2,()=>Math.min(x(gt).y0,x(gt).y1),()=>Math.abs(x(ct).x0-x(ct).x1)-x(pt),()=>Math.abs(x(gt).y0-x(gt).y1)]),rt(V,Z)});var z=mt(j);En(z,17,()=>x(f)?.filteredItems??[],Un,(V,Y)=>{var Z=gjt();const ct=dt(()=>{const[lt,yt]=x(D).applyBand(x(Y).x);return{x0:lt,x1:yt}}),gt=dt(()=>{const[lt,yt]=x(B).applyBand([0,x(Y).count]);return{y0:lt,y1:yt}}),pt=dt(()=>Math.min(Math.abs(x(ct).x1-x(ct).x0)*.1,1));Pt((lt,yt,at,vt)=>{ut(Z,"x",lt),ut(Z,"height",yt),ut(Z,"y",at),ut(Z,"width",vt),ut(Z,"fill",x(l).markColor)},[()=>Math.min(x(ct).x0,x(ct).x1)+x(pt)/2,()=>Math.abs(x(gt).y0-x(gt).y1),()=>Math.min(x(gt).y0,x(gt).y1),()=>Math.abs(x(ct).x0-x(ct).x1)-x(pt)]),rt(V,Z)});var U=mt(z);yA(U,{get proxy(){return N()},mode:"x",get value(){return x(u)},onChange:V=>H(u,V!=null&&V.x!=null?{x:V.x}:null)}),rt(F,O)};let L=dt(()=>({type:"linear",domain:[0,x($)]}));o1(I,{get width(){return S()},get height(){return k()},get xScale(){return x(f).xScale},get yScale(){return x(L)},children:C,$$slots:{default:!0}})}};Ft(T,I=>{x(f)!=null&&I(M)})}rt(w,E)}}),et(g);var v=mt(g,2);{var b=_=>{var w=yjt(),S=ot(w),k=ot(S);{var E=M=>{var I=Mn(),$=Ht(I);{var C=F=>{var N=To();Pt(()=>ce(N,`[${x(u).x??""}]`)),rt(F,N)},L=F=>{var N=To();const O=dt(()=>Ha(".4"));Pt((D,B)=>ce(N,`[${D??""}, ${B??""}]`),[()=>x(O)(x(u).x[0]),()=>x(O)(x(u).x[1])]),rt(F,N)};Ft($,F=>{typeof x(u).x=="string"?F(C):F(L,!1)})}rt(M,I)};Ft(k,M=>{x(u)&&M(E)})}et(S);var T=mt(S,2);Dg(T,{label:"X",get value(){return x(c)},set value(M){H(c,M)}}),et(w),rt(_,w)};Ft(v,_=>{x(f)?.xScale.type!="band"&&_(b)})}rt(e,p),Ce(),r()}var _jt=Ze('<image preserveAspectRatio="none"></image>');function wjt(e,t){Re(t,!0);let n=dt(()=>t.proxy.xScale&&t.xDomain?t.proxy.xScale.apply(t.xDomain[0]):0),r=dt(()=>t.proxy.xScale&&t.xDomain?t.proxy.xScale.apply(t.xDomain[1]):t.proxy.plotWidth),i=dt(()=>t.proxy.yScale&&t.yDomain?t.proxy.yScale.apply(t.yDomain[0]):0),o=dt(()=>t.proxy.yScale&&t.yDomain?t.proxy.yScale.apply(t.yDomain[1]):t.proxy.plotHeight),s=wt(null),a=document.createElement("canvas");fe(()=>{a.width=t.rasterWidth,a.height=t.rasterHeight;let c=a.getContext("2d",{colorSpace:"srgb",willReadFrequently:!0});c.clearRect(0,0,a.width,a.height);let u=c.getImageData(0,0,a.width,a.height),f=0;for(let h=0;h<a.height;h++)for(let p=0;p<a.width;p++){let g=(p+.5)/a.width*(x(r)-x(n))+x(n),y=(h+.5)/a.height*(x(o)-x(i))+x(i),v=t.proxy.xScale?.invert(g)??0,b=t.proxy.yScale?.invert(y)??0,{r:_,g:w,b:S,opacity:k}=ms(t.color(v,b));u.data[f++]=_,u.data[f++]=w,u.data[f++]=S,u.data[f++]=k*255}c.putImageData(u,0,0),H(s,a.toDataURL("image/png"),!0)});var l=_jt();Pt((c,u,f,h)=>{ut(l,"x",c),ut(l,"y",u),ut(l,"width",f),ut(l,"height",h),ut(l,"href",x(s))},[()=>Math.min(x(n),x(r)),()=>Math.min(x(i),x(o)),()=>Math.abs(x(n)-x(r)),()=>Math.abs(x(i)-x(o))]),rt(e,l),Ce()}var xjt=Ze("<rect></rect>"),Sjt=Ze("<rect></rect><!>",1),Ajt=Et('<div class="text-slate-400 mb-1 select-none"> </div> <div><!></div> <div class="text-slate-400 mb-1 select-none text-right"> </div> <div class="flex gap items-center text-sm"><span class="flex-1 text-slate-400 dark:text-slate-500"><!></span> <span class="flex flex-col items-end gap-1"><span class="flex gap-2"><!> <!></span> <span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm">Normalize:</span> <!></span></span></div>',1);function Ejt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(l,"$darkMode",n);let o=ie(t,"xBinCount",3,20),s=ie(t,"yBinCount",3,20);const a=Fr.coordinator,l=Fr.darkMode;let c=wt(null),u=wt(null),f=wt(null),h=wt(null),p=wt(null),g=dt(()=>x(p)?.items.reduce((z,U)=>Math.max(z,U.value),1)??1);const y=.07,v=z=>z>0?y+(1-y)*z:0;let b=dt(()=>i()?z=>n3(v(z/x(g))):z=>SI(v(z/x(g))));function _(z,U,V,Y,Z){let ct=wt(null);Promise.all([ah(z,U,V),ah(z,U,Y)]).then(([lt,yt])=>{H(ct,lt!=null&&yt!=null?{x:lt,y:yt}:null)});let gt=dt(()=>x(ct)?lb({key:"x",stats:x(ct).x,scaleType:x(c),binCount:o()},{key:"y",stats:x(ct).y,scaleType:x(u),binCount:s()}):null);fe(()=>{x(c)==null&&H(c,x(gt)?.scales.x?.type??null),x(u)==null&&H(u,x(gt)?.scales.y?.type??null)});function pt(lt,yt,at){return _p({coordinator:z,selection:yt,query:vt=>zt.from(zt.from(U).select({...lt.select,count:sr()}).where(vt).groupby(lt.select.x,lt.select.y)).select({x:"x",y:"y",count:"count",normalizeByX:ee`count / (SUM(count) OVER (PARTITION BY x))`,normalizeByY:ee`count / (SUM(count) OVER (PARTITION BY y))`}),queryResult:vt=>{at(Array.from(vt).map(lt.collect))}})}fe(()=>{if(x(gt)==null)return;let lt=x(gt),yt=wt(null),at=pt(lt,Z,vt=>{H(yt,vt)});return at.reset=()=>{H(h,null)},fe(()=>{x(yt)!=null&&H(p,{xScale:lt.scales.x,yScale:lt.scales.y,items:x(yt).map(vt=>({x:vt.x,y:vt.y,value:x(f)=="x"?vt.normalizeByX:x(f)=="y"?vt.normalizeByY:vt.count}))})}),fe(()=>{let vt={source:at,clients:new Set([at]),...x(h)!=null?lt.clause(x(h)):{value:null,predicate:null}};Z.update(vt),Z.activate(vt)}),()=>{at.destroy(),Z.update({source:at,clients:new Set([at]),value:null,predicate:null})}})}fe(()=>{_(a,t.table,t.xField,t.yField,t.filter)}),fe(()=>wp(t.stateStore,()=>({brush:x(h),xScaleType:x(c),yScaleType:x(u),normalization:x(f)}),z=>{H(h,z.brush),H(c,z.xScaleType),H(u,z.yScaleType),H(f,z.normalization)}));var w=Ajt(),S=Ht(w),k=ot(S);et(S);var E=mt(S,2);Me(E,"",{},{height:"320px"});var T=ot(E);mA(T,{children:(U,V=vn,Y=vn)=>{var Z=Mn(),ct=Ht(Z);{var gt=pt=>{o1(pt,{get width(){return V()},get height(){return Y()},get xScale(){return x(p).xScale},get yScale(){return x(p).yScale},childrenBelow:(at,vt=vn)=>{var st=Sjt();const Q=dt(()=>vt().xScale),It=dt(()=>vt().yScale);var _t=Ht(st);ut(_t,"x",0),ut(_t,"y",0);var Dt=mt(_t);En(Dt,17,()=>x(p)?.items??[],Un,(Ut,xt)=>{var qt=xjt();const ue=dt(()=>{const[Ke,le]=x(Q).applyBand(x(xt).x);return{x0:Ke,x1:le}}),Wt=dt(()=>{const[Ke,le]=x(It).applyBand(x(xt).y);return{y0:Ke,y1:le}}),re=dt(()=>0);Pt((Ke,le,_n,pn,cr)=>{ut(qt,"x",Ke),ut(qt,"y",le),ut(qt,"width",_n),ut(qt,"height",pn),ut(qt,"fill",cr)},[()=>Math.min(x(ue).x0,x(ue).x1)+x(re)/2,()=>Math.min(x(Wt).y0,x(Wt).y1)+x(re)/2,()=>Math.abs(x(ue).x0-x(ue).x1)-x(re),()=>Math.abs(x(Wt).y0-x(Wt).y1)-x(re),()=>x(b)(x(xt).value)]),rt(Ut,qt)}),Pt(Ut=>{ut(_t,"width",vt().plotWidth),ut(_t,"height",vt().plotHeight),ut(_t,"fill",Ut)},[()=>x(b)(0)]),rt(at,st)},children:(at,vt=vn)=>{yA(at,{get proxy(){return vt()},mode:"xy",get value(){return x(h)},onChange:st=>H(h,st!=null&&st.x!=null&&st.y!=null?{x:st.x,y:st.y}:null)})},$$slots:{childrenBelow:!0,default:!0}})};Ft(ct,pt=>{x(p)!=null&&pt(gt)})}rt(U,Z)}}),et(E);var M=mt(E,2),I=ot(M);et(M);var $=mt(M,2),C=ot($),L=ot(C);{const z=(V,Y=vn)=>{{let Z=dt(()=>Y().xScale?.domain);wjt(V,{get color(){return x(b)},rasterWidth:100,rasterHeight:1,get proxy(){return Y()},get xDomain(){return x(Z)}})}};let U=dt(()=>({type:"linear",domain:[0,x(g)]}));o1(L,{get xScale(){return x(U)},xAxis:{extendScaleToTicks:!1},width:230,height:24,extents:{left:30,right:30,top:0,bottom:0},children:z,$$slots:{default:!0}})}et(C);var F=mt(C,2),N=ot(F),O=ot(N);Dg(O,{label:"X",get value(){return x(c)},set value(z){H(c,z)}});var D=mt(O,2);Dg(D,{label:"Y",get value(){return x(u)},set value(z){H(u,z)}}),et(N);var B=mt(N,2),j=mt(ot(B),2);vA(j,{options:[{value:null,label:"off"},{value:"x",label:"X"},{value:"y",label:"Y"}],get value(){return x(f)},onChange:z=>H(f,z)}),et(B),et(F),et($),Pt(()=>{ce(k,`↑ ${t.yField??""}`),ce(I,`${t.xField??""} →`)}),rt(e,w),Ce(),r()}var kjt=Ze("<rect></rect>"),Tjt=Ze("<rect></rect>"),Mjt=Ze("<!><!><!>",1),Ijt=Et('<div class="flex gap-1 items-center"><div class="w-3 h-3 block rounded-sm"></div> <div class="whitespace-nowrap max-w-32 overflow-hidden text-ellipsis"> </div></div>'),Rjt=Et('<div class="flex gap-2 flex-wrap items-center select-none"></div>'),Cjt=Et('<div><!></div> <div class="mt-2 flex gap-2 items-start text-sm"><div class="flex-1 text-slate-400 dark:text-slate-500"><!></div> <span class="flex flex-col items-end gap-1"><!> <span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm">Normalize:</span> <!></span></span></div>',1);function Njt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(l,"$darkMode",n);let o=ie(t,"xBinCount",3,20),s=ie(t,"groupBinCount",3,20);const a=Fr.coordinator,l=Fr.darkMode;let c=dt(()=>i()?mo.dark:mo.light),u=wt(null),f=wt(null),h=wt(null),p=wt(null);function g(L,F,N,O,D){let B=wt(null);Promise.all([ah(L,F,N),ah(L,F,O)]).then(([U,V])=>{H(B,U!=null&&V!=null?{x:U,group:V}:null)});let j=dt(()=>x(B)?lb({key:"x",stats:x(B).x,scaleType:x(u),binCount:o()},{key:"group",stats:x(B).group,binCount:s()}):null);fe(()=>{x(u)==null&&H(u,x(j)?.scales.x?.type??null)});function z(U,V,Y){return _p({coordinator:L,selection:V,query:Z=>zt.from(zt.from(F).select({...U.select,count:sr()}).where(Z).groupby(U.select.x,U.select.group)).select({x:"x",group:"group",count:"count",normalizeByX:ee`count / (SUM(count) OVER (PARTITION BY x))`}),queryResult:Z=>{Y(Array.from(Z).map(U.collect))}})}fe(()=>{if(x(j)==null)return;let U=x(j),V=wt(null),Y=wt(null),Z=z(U,null,gt=>{H(V,gt)}),ct=z(U,D,gt=>{H(Y,gt)});return ct.reset=()=>{H(h,null)},fe(()=>{if(x(V)!=null&&x(Y)!=null){let gt=Q=>JSON.stringify(Q),pt=x(f)=="x"?"normalizeByX":"count",lt=Array.from(y(x(V),Q=>gt(Q.group),Q=>Q[0].group).entries()).sort((Q,It)=>U.order.group(Q[1],It[1])),yt=y(x(V),Q=>gt(Q.x),Q=>({x:Q[0].x,total:Q.reduce((It,_t)=>It+_t[pt],0)})),at=y(x(Y),Q=>gt(Q.x),Q=>{Q=Q.sort((Dt,Ut)=>U.order.group(Dt.group,Ut.group));let It=[],_t=0;for(let Dt of Q)It.push({group:Dt.group,y1:_t,y2:_t+Dt[pt]}),_t+=Dt[pt];return{x:Q[0].x,groups:It}}),vt=yt.values().reduce((Q,It)=>Math.max(Q,It.total),1);x(f)&&(vt=1);let st=Oqt(Array.from(lt.map(Q=>Q[1])),{fade:["n/a","(null)"],ordinal:U.scales.group.type!="band"});H(p,{xScale:U.scales.x,yScale:{type:"linear",domain:[0,vt]},colorScale:st,totals:Array.from(yt.values()),items:Array.from(at.values())})}}),fe(()=>{let gt={source:ct,clients:new Set([ct]),...x(h)!=null?U.clause(x(h)):{value:null,predicate:null}};D.update(gt),D.activate(gt)}),()=>{Z.destroy(),ct.destroy(),D.update({source:ct,clients:new Set([ct]),value:null,predicate:null})}})}fe(()=>{g(a,t.table,t.xField,t.groupField,t.filter)}),fe(()=>wp(t.stateStore,()=>({brush:x(h),xScaleType:x(u),normalization:x(f)}),L=>{H(h,L.brush),H(u,L.xScaleType),H(f,L.normalization)}));function y(L,F,N){let O=new Map;for(let D of L){let B=F(D),j=O.get(B);j||(j=[],O.set(B,j)),j.push(D)}return new Map(O.entries().map(([D,B])=>[D,N(B)]))}function v(L){if(typeof L=="string")return L;{let F=Ha(".6");if(L.length==2)return`[${F(L[0])}, ${F(L[1])})`}return"(invalid)"}var b=Cjt(),_=Ht(b);Me(_,"",{},{height:"200px"});var w=ot(_);mA(w,{children:(F,N=vn,O=vn)=>{var D=Mn(),B=Ht(D);{var j=z=>{o1(z,{get width(){return N()},get height(){return O()},get xScale(){return x(p).xScale},get yScale(){return x(p).yScale},children:(V,Y=vn)=>{var Z=Mjt();const ct=dt(()=>Y().xScale),gt=dt(()=>Y().yScale);var pt=Ht(Z);En(pt,17,()=>x(p)?.totals??[],Un,(at,vt)=>{var st=kjt();const Q=dt(()=>{const[Dt,Ut]=x(ct).applyBand(x(vt).x);return{x0:Dt,x1:Ut}}),It=dt(()=>{const[Dt,Ut]=x(gt).applyBand([0,x(vt).total]);return{y0:Dt,y1:Ut}}),_t=dt(()=>Math.min(Math.abs(x(Q).x1-x(Q).x0)*.2,Math.abs(x(It).y1-x(It).y0)*.2,1));Pt((Dt,Ut,xt,qt)=>{ut(st,"x",Dt),ut(st,"y",Ut),ut(st,"width",xt),ut(st,"height",qt),ut(st,"fill",x(c).markColorFade)},[()=>Math.min(x(Q).x0,x(Q).x1)+x(_t)/2,()=>Math.min(x(It).y0,x(It).y1),()=>Math.abs(x(Q).x0-x(Q).x1)-x(_t),()=>Math.abs(x(It).y0-x(It).y1)]),rt(at,st)});var lt=mt(pt);En(lt,17,()=>x(p)?.items??[],Un,(at,vt)=>{let st=()=>x(vt).x,Q=()=>x(vt).groups;var It=Mn();const _t=dt(()=>{const[Ut,xt]=x(ct).applyBand(st());return{x0:Ut,x1:xt}});var Dt=Ht(It);En(Dt,17,Q,Un,(Ut,xt)=>{var qt=Tjt();const ue=dt(()=>{const[re,Ke]=x(gt).applyBand([x(xt).y1,x(xt).y2]);return{y0:re,y1:Ke}}),Wt=dt(()=>Math.min(Math.abs(x(_t).x1-x(_t).x0)*.2,Math.abs(x(ue).y1-x(ue).y0)*.2,1));Pt((re,Ke,le,_n,pn)=>{ut(qt,"x",re),ut(qt,"y",Ke),ut(qt,"width",le),ut(qt,"height",_n),ut(qt,"fill",pn)},[()=>Math.min(x(_t).x0,x(_t).x1)+x(Wt)/2,()=>Math.min(x(ue).y0,x(ue).y1),()=>Math.abs(x(_t).x0-x(_t).x1)-x(Wt),()=>Math.abs(x(ue).y0-x(ue).y1),()=>x(p)?.colorScale.apply(x(xt).group)]),rt(Ut,qt)}),rt(at,It)});var yt=mt(lt);yA(yt,{get proxy(){return Y()},mode:"x",get value(){return x(h)},onChange:at=>H(h,at!=null&&at.x!=null?{x:at.x}:null)}),rt(V,Z)},$$slots:{default:!0}})};Ft(B,z=>{x(p)!=null&&z(j)})}rt(F,D)}}),et(_);var S=mt(_,2),k=ot(S),E=ot(k);{var T=L=>{var F=Rjt();En(F,21,()=>x(p).colorScale.domain,Un,(N,O)=>{var D=Ijt(),B=ot(D);let j;var z=mt(B,2),U=ot(z,!0);et(z),et(D),Pt((V,Y,Z)=>{ut(D,"title",V),j=Me(B,"",j,Y),ce(U,Z)},[()=>JSON.stringify(x(O)),()=>({background:x(p).colorScale.apply(x(O))}),()=>v(x(O))]),rt(N,D)}),et(F),rt(L,F)};Ft(E,L=>{x(p)&&L(T)})}et(k);var M=mt(k,2),I=ot(M);Dg(I,{label:"X",get value(){return x(u)},set value(L){H(u,L)}});var $=mt(I,2),C=mt(ot($),2);vA(C,{options:[{value:null,label:"off"},{value:"x",label:"X"}],get value(){return x(f)},onChange:L=>H(f,L)}),et($),et(M),et(S),rt(e,b),Ce(),r()}async function $jt(e,t,n,r){let i=Mt(n,t),o=await e.query(zt.from(zt.from(t).select({value:ee`UNNEST(${i})`})).select({value:"value",count:sr()}).groupby("value").orderby(jg("count")).limit(r+1)),s=Array.from(o);return{values:s.slice(0,r),hasOther:s.length>r}}function Ojt(e,t){return Oo(...t.map(n=>ee`${Zt(n)} IN ${Mt(e)}`))}var Djt=Et('<hr class="mt-1 mb-1 border-slate-300 dark:border-slate-500 border-dashed"/>'),Ljt=(e,t,n)=>t(x(n).x,e.shiftKey),Fjt=Et('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),Bjt=Et('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div> <div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>',1),Pjt=Et('<!> <button class="text-left items-center flex py-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><span> </span></div> <div class="flex-1 h-4 relative"><!></div> <div class="flex-none"><span><!></span></div></button>',1),zjt=(e,t,n)=>{H(t,!x(t)),x(t)==!1&&H(n,null)},Ujt=Et('<button class="py-0.5 text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden"><!></button>'),qjt=Et('<!> <div class="flex"><div class="flex-1 pl-40 mr-2 overflow-hidden"><!></div></div>',1),jjt=Et('<div class="flex flex-col text-sm w-full select-none"><!></div>');function Vjt(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(l,"$darkMode",n),o=10,s=100,a=Fr.coordinator,l=Fr.darkMode;let c=wt(null),u=wt(!1),f=wt(null),h=wt(400),p=dt(()=>x(f)?.items.reduce(($,C)=>Math.max($,C.total),0)??0),g=dt(()=>qu([0,Math.max(1,x(p))],[0,x(h)-250])),y=dt(()=>$=>$!=0?Math.max(1,x(g)($)):0),v=dt(()=>i()?mo.dark:mo.light);function b($,C,L,F,N){let O=wt(null);$jt($,C,L,N).then(B=>{H(O,B)});function D(B,j,z){return _p({coordinator:$,selection:B,query:U=>{let V=Mt(L,C);return zt.from(zt.from(C).select({value:ee`UNNEST(${V})`}).where(U)).select({x:"value",count:sr()}).where(Nd("value",j.map(Y=>Zt(Y)))).groupby("value").orderby(jg("count"))},queryResult:U=>{z(Array.from(U))}})}fe(()=>{if(x(O)==null)return;let B=x(O).values.map(Z=>Z.value),j=x(O).hasOther,z=wt([]),U=wt([]),V=D(null,B,Z=>{H(z,Z)}),Y=D(F,B,Z=>{H(U,Z)});return Y.reset=()=>{H(c,null)},fe(()=>{if(x(z).length>0){let Z=lt=>JSON.stringify(lt),ct=new Map(x(z).map(({x:lt,count:yt})=>[Z(lt),yt])),gt=new Map(x(U).map(({x:lt,count:yt})=>[Z(lt),yt])),pt=B.map(lt=>({x:lt,total:ct.get(Z(lt))??0,selected:gt.get(Z(lt))??0}));H(f,{items:pt,firstSpecialIndex:B.length,hasOther:j})}}),fe(()=>{let Z={source:Y,clients:new Set([Y]),...x(c)!=null?{value:x(c),predicate:Ojt(L,x(c))}:{value:null,predicate:null}};F.update(Z),F.activate(Z)}),()=>{V.destroy(),Y.destroy(),F.update({source:Y,clients:new Set([Y]),value:null,predicate:null})}})}fe(()=>{b(a,t.table,t.field,t.filter,x(u)?s:o)});const _=($,C)=>JSON.stringify($)==JSON.stringify(C);function w($,C){if(x(c)==null||x(c).length==0)H(c,[$]);else{let L=x(c).findIndex(F=>_(F,$))>=0;C?L?H(c,x(c).filter(F=>!_(F,$))):H(c,[...x(c),$]):L?H(c,null):H(c,[$])}}fe(()=>wp(t.stateStore,()=>({selection:x(c),expanded:x(u)}),$=>{H(c,$.selection),H(u,$.expanded)}));const S=Ha(".6");function k($){return typeof $=="string"?$:"["+S($[0])+", "+S($[1])+")"}function E($,C){return C==0?"-%":($/C*100).toFixed(1)+"%"}var T=jjt(),M=ot(T);{var I=$=>{var C=qjt(),L=Ht(C);En(L,17,()=>x(f).items,Un,(B,j,z)=>{var U=Pjt();const V=dt(()=>x(c)==null||x(c).length==0||x(c).findIndex(Wt=>_(Wt,x(j).x))>=0),Y=dt(()=>!x(f).items.every(Wt=>Wt.total==Wt.selected));var Z=Ht(U);{var ct=Wt=>{var re=Djt();rt(Wt,re)};Ft(Z,Wt=>{z==x(f).firstSpecialIndex&&Wt(ct)})}var gt=mt(Z,2);gt.__click=[Ljt,w,j];var pt=ot(gt),lt=ot(pt);let yt;var at=ot(lt,!0);et(lt),et(pt);var vt=mt(pt,2),st=ot(vt);{var Q=Wt=>{var re=Fjt(),Ke=Ht(re);let le;var _n=mt(Ke,2);let pn;Pt((cr,xr)=>{le=Me(Ke,"",le,cr),pn=Me(_n,"",pn,xr)},[()=>({background:x(v).markColorFade,width:`${x(y)(x(j).total)??""}px`}),()=>({background:x(v).markColor,width:`${x(y)(x(j).selected)??""}px`})]),rt(Wt,re)},It=Wt=>{var re=Bjt(),Ke=Ht(re);let le;var _n=mt(Ke,2);let pn;Pt((cr,xr)=>{le=Me(Ke,"",le,cr),pn=Me(_n,"",pn,xr)},[()=>({background:x(v).markColorGrayFade,width:`${x(y)(x(j).total)??""}px`}),()=>({background:x(v).markColorGray,width:`${x(y)(x(j).selected)??""}px`})]),rt(Wt,re)};Ft(st,Wt=>{x(V)?Wt(Q):Wt(It,!1)})}et(vt);var _t=mt(vt,2),Dt=ot(_t);let Ut;var xt=ot(Dt);{var qt=Wt=>{var re=To();Pt(Ke=>ce(re,Ke),[()=>x(j).selected.toLocaleString()+" / "+x(j).total.toLocaleString()]),rt(Wt,re)},ue=Wt=>{var re=To();Pt(Ke=>ce(re,Ke),[()=>x(j).total.toLocaleString()]),rt(Wt,re)};Ft(xt,Wt=>{x(Y)?Wt(qt):Wt(ue,!1)})}et(Dt),et(_t),et(gt),Pt((Wt,re,Ke,le)=>{ut(gt,"title",x(j).x),yt=ar(lt,1,"",null,yt,Wt),ce(at,re),Ut=ar(Dt,1,"text-slate-400 dark:text-slate-500",null,Ut,Ke),ut(Dt,"title",le)},[()=>({"text-gray-400":!x(V),"dark:text-gray-400":!x(V)}),()=>k(x(j).x),()=>({"!text-gray-200":!x(V),"dark:!text-gray-600":!x(V)}),()=>x(Y)?`${x(j).total.toLocaleString()} rows contain "${x(j).x}"; ${x(j).selected.toLocaleString()} (${E(x(j).selected,x(j).total)}) in selection`:`${x(j).total.toLocaleString()} rows contain "${x(j).x}"`]),rt(B,U)});var F=mt(L,2),N=ot(F),O=ot(N);{var D=B=>{var j=Ujt();j.__click=[zjt,u,c];var z=ot(j);{var U=Y=>{var Z=To();Z.nodeValue="↑ Show up to 10 values",rt(Y,Z)},V=Y=>{var Z=To();Z.nodeValue="↓ Show up to 100 values",rt(Y,Z)};Ft(z,Y=>{x(u)?Y(U):Y(V,!1)})}et(j),rt(B,j)};Ft(O,B=>{(x(u)||x(f).hasOther)&&B(D)})}et(N),et(F),rt($,C)};Ft(M,$=>{x(f)&&$(I)})}et(T),Cd(T,"clientWidth",$=>H(h,$)),rt(e,T),Ce(),r()}Br(["click"]);function Wjt(e){e.key=="Escape"&&e.stopPropagation()}var Yjt=Et("<input/>");function Cot(e,t){Re(t,!0);let n=ie(t,"value",15),r=ie(t,"type",3,"text"),i=ie(t,"placeholder",3,""),o=ie(t,"className",3,"");var s=Yjt();aP(s),s.__keydown=[Wjt],Pt(()=>{ut(s,"type",r()),ut(s,"placeholder",i()),ar(s,1,`form-input rounded-md py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 ${o()??""??""}`)}),qpt(s,n),rt(e,s),Ce()}Br(["keydown"]);var Hjt=Ze('<svg><path fill="currentColor" d="M3.2 5.74a.75.75 0 0 1 1.06-.04L8 9.227L11.74 5.7a.75.75 0 1 1 1.02 1.1l-4.25 4a.75.75 0 0 1-1.02 0l-4.25-4a.75.75 0 0 1-.04-1.06"></path></svg>');function Not(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Hjt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var Gjt=Ze('<svg><path fill="currentColor" d="M3.2 10.26a.75.75 0 0 0 1.06.04L8 6.773l3.74 3.527a.75.75 0 1 0 1.02-1.1l-4.25-4a.75.75 0 0 0-1.02 0l-4.25 4a.75.75 0 0 0-.04 1.06"></path></svg>');function $ot(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Gjt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var Xjt=Ze('<svg><path fill="currentColor" d="M2.75 2a.75.75 0 0 1 .75.75v12.5c0 .69.56 1.25 1.25 1.25h12.5a.75.75 0 0 1 0 1.5H4.75A2.75 2.75 0 0 1 2 15.25V2.75A.75.75 0 0 1 2.75 2M10 7.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m4.5.5a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5m.5 4.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0"></path></svg>');function Kjt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Xjt();Gs(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var Jjt=Ze('<svg><path fill="currentColor" d="m2.397 2.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L8 6.939l4.47-4.47a.75.75 0 1 1 1.06 1.061L9.061 8l4.47 4.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L8 9.061l-4.47 4.47a.75.75 0 0 1-1.06-1.061L6.939 8l-4.47-4.47a.75.75 0 0 1-.072-.976l.073-.084z"></path></svg>');function bA(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Jjt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var Zjt=Ze('<svg><path fill="currentColor" d="M9 1H6a2 2 0 0 0-2 2v2.205a5.5 5.5 0 0 1 4.666 9.791H12a2 2 0 0 0 2-2V6.001h-3.5A1.5 1.5 0 0 1 9 4.5zm4.997 4h-3.498a.5.5 0 0 1-.5-.5V1h.01zM10 10.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4.854 2.353l.003.003a.5.5 0 0 0 .348.144h.006a.5.5 0 0 0 .35-.146l2-2a.5.5 0 0 0-.707-.708L6 11.293V8.5a.5.5 0 0 0-1 0v2.793l-1.146-1.147a.5.5 0 0 0-.708.708z"></path></svg>');function t9(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Zjt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var Qjt=Ze('<svg><path fill="currentColor" d="M10.529 1.764a2.621 2.621 0 1 1 3.707 3.707l-.779.779L9.75 2.543zM9.043 3.25L2.657 9.636a2.96 2.96 0 0 0-.772 1.354l-.87 3.386a.5.5 0 0 0 .61.608l3.385-.869a2.95 2.95 0 0 0 1.354-.772l6.386-6.386z"></path></svg>');function Oot(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=Qjt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var tVt=Ze('<svg><path fill="currentColor" d="M2 6a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3zm3-2a2 2 0 0 0-2 2v5h14V6a2 2 0 0 0-2-2z"></path></svg>');function eVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=tVt();Gs(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var nVt=Ze('<svg><path fill="currentColor" d="M15 3a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3zM5 4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h6.5V4z"></path></svg>');function rVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=nVt();Gs(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var iVt=Ze('<svg><path fill="currentColor" d="M9.823 10.883a5.5 5.5 0 1 1 1.06-1.06l2.897 2.897a.75.75 0 1 1-1.06 1.06zM10.5 6.5a4 4 0 1 0-8 0a4 4 0 0 0 8 0"></path></svg>');function oVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=iVt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var sVt=Ze('<svg><path fill="currentColor" d="M2.267 6.153A6 6 0 0 1 3.53 3.98a.36.36 0 0 1 .382-.095l1.36.484a.71.71 0 0 0 .935-.538l.26-1.416a.35.35 0 0 1 .274-.282a6.1 6.1 0 0 1 2.52 0c.14.03.248.141.274.282l.26 1.416a.708.708 0 0 0 .935.538l1.36-.484a.36.36 0 0 1 .382.095a6 6 0 0 1 1.262 2.173a.35.35 0 0 1-.108.378l-1.102.931a.703.703 0 0 0 0 1.076l1.102.931c.11.093.152.242.108.378a6 6 0 0 1-1.262 2.173a.36.36 0 0 1-.382.095l-1.36-.484a.71.71 0 0 0-.935.538l-.26 1.416a.35.35 0 0 1-.275.282a6.1 6.1 0 0 1-2.519 0a.35.35 0 0 1-.275-.282l-.259-1.416a.708.708 0 0 0-.935-.538l-1.36.484a.36.36 0 0 1-.382-.095a6 6 0 0 1-1.262-2.173a.35.35 0 0 1 .108-.378l1.102-.931a.704.704 0 0 0 0-1.076l-1.102-.931a.35.35 0 0 1-.108-.378M6.25 8a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0"></path></svg>');function aVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=sVt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var lVt=Ze('<svg><path fill="currentColor" d="M7.456 2a6 6 0 1 1-5.406 8.605a.5.5 0 0 1 .36-.71c1.276-.231 3.278-.937 4.078-3.07c.563-1.5.512-3.015.283-4.23a.5.5 0 0 1 .475-.591Q7.35 2 7.456 2"></path></svg>');function cVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=lVt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var uVt=Ze('<svg><path fill="currentColor" d="M8 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 1m0 10a3 3 0 1 0 0-6a3 3 0 0 0 0 6m6.5-2.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zM8 13a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 13M2.5 8.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zm.646-5.354a.5.5 0 0 1 .708 0l1 1a.5.5 0 1 1-.708.708l-1-1a.5.5 0 0 1 0-.708m.708 9.708a.5.5 0 1 1-.708-.707l1-1a.5.5 0 0 1 .708.707zm9-9.708a.5.5 0 0 0-.708 0l-1 1a.5.5 0 0 0 .708.708l1-1a.5.5 0 0 0 0-.708m-.708 9.708a.5.5 0 0 0 .708-.707l-1-1a.5.5 0 0 0-.708.707z"></path></svg>');function fVt(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=uVt();Gs(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var hVt=(e,t,n,r)=>{e.shiftKey?H(t,x(n)?x(t).filter(i=>i!=x(r).predicate):[...x(t),x(r).predicate]):x(n)?H(t,[]):H(t,[x(r).predicate])},dVt=Et('<div><button class="flex-1 overflow-hidden text-left"><div class="text-ellipsis overflow-hidden w-full"> </div> <div class="text-ellipsis overflow-hidden w-full"><code class="text-xs whitespace-nowrap"> </code></div></button> <div class="flex-none flex gap-1"><!> <!></div></div>'),pVt=(e,t,n)=>{H(t,!0),H(n,null)},gVt=(e,t,n)=>H(t,n()?.trim()??"",!0),mVt=Et('<div class="mt-4"><!> <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">SQL Predicate</div> <!> <div class="flex gap-2"><!> <!> <div class="flex-1"></div> <button class="text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200">Current Predicate</button></div></div>'),yVt=Et('<div><div class="flex flex-col gap-1"><!> <button class="text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden">+ Add Selection</button></div> <!></div>');function vVt(e,t){Re(t,!0);const n=Fr.coordinator;let r=wt([]),i=wt([]),o=wt(!1),s=wt(null),a=wt(""),l=wt("");function c(){H(o,!1),H(s,null),H(l,""),H(a,"")}function u(w){H(r,w),H(i,x(i).filter(S=>x(r).find(k=>k.predicate==S)!=null))}async function f(){let w=x(l).trim();w==""&&(w="Selection");let S=x(a).trim();if(S=="")return null;try{await n.query(zt.from(t.table).select({count:sr()}).where(S))}catch(k){return alert(k.toString()),null}return{name:w,predicate:S}}function h(){let w=t.filter.predicate(null);return w==null||w.length==0?null:typeof w=="string"?w:w.map(S=>S.toString()).join(`
AND `)}fe(()=>{let w=n1t({coordinator:n,selection:t.filter,query:()=>ee`SELECT 1`});return Gi(()=>{if(x(i).length==0)t.filter.update({source:w,clients:new Set([w]),predicate:null,value:null});else{let S=x(i).map(k=>"("+k+")").join(" OR ");t.filter.update({source:w,clients:new Set([w]),predicate:Oy(S),value:S})}}),w.reset=()=>H(i,[]),()=>{w.destroy()}}),fe(()=>wp(t.stateStore,()=>({items:x(r),selectedPredicates:x(i)}),w=>{H(r,w.items??[]),H(i,w.selectedPredicates??[])}));var p=yVt(),g=ot(p),y=ot(g);En(y,17,()=>x(r),Un,(w,S)=>{var k=dVt();const E=dt(()=>x(i).indexOf(x(S).predicate)>=0);let T;var M=ot(k);M.__click=[hVt,i,E,S];var I=ot(M),$=ot(I,!0);et(I);var C=mt(I,2),L=ot(C),F=ot(L,!0);et(L),et(C),et(M);var N=mt(M,2),O=ot(N);wa(O,{get icon(){return Oot},style:"plotCell",onClick:()=>{H(s,x(S)),H(a,x(S).predicate,!0),H(l,x(S).name,!0),H(o,!0)}});var D=mt(O,2);wa(D,{get icon(){return bA},style:"plotCell",onClick:()=>{u(x(r).filter(B=>B!==x(S)))}}),et(N),et(k),Pt(B=>{T=ar(k,1,"flex gap-4 w-full bg-white dark:bg-slate-800 p-2 rounded-md border border-slate-200 dark:border-slate-600 select-none",null,T,B),ce($,x(S).name),ut(L,"title",x(S).predicate),ce(F,x(S).predicate)},[()=>({"!bg-blue-100":x(E),"!border-blue-400":x(E),"dark:!bg-blue-800":x(E),"dark:!border-blue-600":x(E)})]),rt(w,k)});var v=mt(y,2);v.__click=[pVt,o,s],et(g);var b=mt(g,2);{var _=w=>{var S=mVt(),k=ot(S);Cot(k,{placeholder:"name",className:"w-full mb-2",get value(){return x(l)},set value(F){H(l,F,!0)}});var E=mt(k,4);I8(E,{language:"sql",className:"!h-24 mb-2",get value(){return x(a)},onChange:F=>H(a,F,!0)});var T=mt(E,2),M=ot(T);{var I=F=>{wa(F,{label:"Update",onClick:async()=>{let N=await f();N&&(u(x(r).map(O=>O===x(s)?N:O)),c())}})},$=F=>{wa(F,{label:"Add",onClick:async()=>{let N=await f();N&&(u([...x(r),N]),c())}})};Ft(M,F=>{x(s)!=null?F(I):F($,!1)})}var C=mt(M,2);wa(C,{label:"Cancel",onClick:()=>{H(s,null),H(o,!1)}});var L=mt(C,4);L.__click=[gVt,a,h],et(T),et(S),rt(w,S)};Ft(b,w=>{x(o)&&w(_)})}et(p),rt(e,p),Ce()}Br(["click"]);function bVt(e,t){let n=t.mark?.plot?.element;return n==null?!1:e?.contains(n)??!1}async function _Vt(e,t,n,r){if(n==null||t==null)return null;let i=new Map;for(let c in r)i.set(c,r[c]);let o=T8(n),s=sot({coordinator:e}),l=(await uUt(o,{params:i,api:s})).element;return t.appendChild(l),()=>{for(let c in r){let u=r[c];if(Lo(u))for(let f of u.clauses)bVt(t,f.source)&&(f.source?.reset(),u.update({...f,value:null,predicate:null}))}l.remove()}}var wVt=Et('<div class="w-full"></div>');function xVt(e,t){Re(t,!0);const n=Fr.coordinator;let r,i=wt(100);const o={continuousColorScheme:_a.value("YlGnBu"),continuousColorSchemeZero:_a.value("black"),markColor:_a.value("black"),markColorFade:_a.value("black"),containerWidth:_a.value(100)};Gi(()=>Fr.darkMode.subscribe(a=>{let l=a?mo.dark:mo.light;o.continuousColorScheme.update(l.continuousColorScheme),o.continuousColorSchemeZero.update(l.continuousColorSchemeAtZero),o.markColor.update(l.markColor),o.markColorFade.update(l.markColorFade)})),Gi(()=>{o.containerWidth.update(x(i))}),zg(()=>{fe(()=>{let a=null;async function l(...c){a=await _Vt(...c)}return l(n,r,t.spec,{...o,...t.params}),()=>{a?.()}})});var s=wVt();ds(s,a=>r=a,()=>r),Cd(s,"clientWidth",a=>H(i,a)),rt(e,s),Ce()}var SVt=Et('<div>An error occurred in this chart. Please check and <button class="underline">try again</button>. <div class="text-xs"> </div></div>');function Dot(e,t){Re(t,!0);const n={BoxPlot:ejt,CountPlot:djt,Histogram:bjt,Histogram2D:Ejt,HistogramStack:Njt,ListCountPlot:Vjt,SelectionList:vVt};var r=Mn(),i=Ht(r);Xdt(i,{failed:(s,a=vn,l=vn)=>{var c=SVt(),u=mt(ot(c));u.__click=function(...p){l()?.apply(this,p)};var f=mt(u,2),h=ot(f,!0);et(f),et(c),Pt(p=>ce(h,p),[()=>a()?.toString()??"unknown"]),rt(s,c)}},s=>{var a=Mn(),l=Ht(a);{var c=f=>{var h=Mn();const p=dt(()=>n[t.spec.component]);var g=Ht(h);ov(g,()=>x(p),(y,v)=>{v(y,e4(()=>t.spec.props,{get table(){return t.table},get filter(){return t.filter},get stateStore(){return t.stateStore}}))}),rt(f,h)},u=f=>{{let h=dt(()=>({brush:t.filter}));xVt(f,{get spec(){return t.spec},get params(){return x(h)}})}};Ft(l,f=>{"component"in t.spec?f(c):f(u,!1)})}rt(s,a)}),rt(e,r),Ce()}Br(["click"]);function AVt(e,t,n,r){let i=x(t).create(n());i&&r.onCreate?.({id:Hh(),title:i.title,spec:i.spec})}var EVt=(e,t,n)=>{H(t,x(n))},kVt=Et("<button><!></button>"),TVt=Et('<span class="text-slate-500 dark:text-slate-400"> </span> <!>',1),MVt=Et("<!> <!>",1),IVt=Et('<span class="text-slate-500 dark:text-slate-400">Preview</span> <!>',1),RVt=Et("<div> </div>"),CVt=Et('<div class="flex flex-col gap-2"><div class="flex gap-2"></div> <div> </div> <!> <button>Confirm</button> <!> <!></div>');function NVt(e,t){Re(t,!0);let n=ie(t,"columns",19,()=>[]),r=[{icon:"chart-h-bar",description:"Create a count plot of a categorical field",ui:[{field:{key:"x",label:"Field",types:["number","string","string[]"]}}],preview:!0,create:({x:E})=>{if(E!=null)return{title:E.name,spec:pw(E)}}},{icon:"chart-v-histogram",description:"Create a histogram of a field",ui:[{field:{key:"x",label:"Field",types:["number","string"]}}],preview:!0,create:({x:E})=>{if(E!=null)return{title:E.name,spec:TY(E)}}},{icon:"chart-heatmap",description:"Create a 2D heatmap of two fields",ui:[{field:{key:"x",label:"X Field",types:["number","string"]}},{field:{key:"y",label:"Y Field",types:["number","string"]}}],preview:!0,create:({x:E,y:T})=>{if(!(E==null||T==null))return{title:`${E.name} vs. ${T.name}`,spec:Ckt(E,T)}}},{icon:"chart-stacked",description:"Create a stacked histogram",ui:[{field:{key:"x",label:"X Field",types:["number","string"]}},{field:{key:"y",label:"Group Field",types:["number","string"]}}],preview:!0,create:({x:E,y:T})=>{if(!(E==null||T==null))return{title:`${E.name} by ${T.name}`,spec:Rkt(E,T)}}},{icon:"chart-boxplot",description:"Create a box plot",ui:[{field:{key:"x",label:"X Field"}},{field:{key:"y",label:"Y Field",types:["number"]}}],preview:!0,create:({x:E,y:T})=>{if(!(E==null||T==null))return{title:`${E.name} vs. ${T.name}`,spec:Nkt(E,T)}}},{icon:"chart-spec",description:"Create a chart with Mosaic specification",ui:[{text:{key:"spec",placeholder:"{ /* Mosaic spec in JSON */ }"}}],preview:!1,create:({spec:E})=>{if(typeof E!="string"||E.trim()=="")return;let T=JSON.parse(E);return T8(T),{title:"Mosaic Chart",spec:T}}}],i=wt(r[0]),o=wt(Aa({})),s=wt(!1),a=wt(null);fe(()=>{x(i),H(o,{},!0)}),fe(()=>{try{let E=x(i).create(l());H(s,E!=null),H(a,x(i).preview?E?.spec??null:null,!0)}catch(E){H(s,E.toString(),!0)}});function l(){let E={...x(o)};for(let T of x(i).ui)T.field&&(E[T.field.key]=c(E[T.field.key]));return E}function c(E){let T=n().find(M=>M.name==E);if(T==null||T.jsType==null)return null;switch(T.jsType){case"number":return{name:T.name,type:"continuous"};case"string":return{name:T.name,type:"discrete"};case"string[]":return{name:T.name,type:"discrete[]"};default:return null}}function u(E){return E==null?n().filter(T=>T.jsType!=null):n().filter(T=>T.jsType!=null&&E.indexOf(T.jsType)>=0)}var f=CVt(),h=ot(f);En(h,21,()=>r,Un,(E,T)=>{var M=kVt();const I=dt(()=>x(i)==x(T));M.__click=[EVt,i,T];let $;var C=ot(M);Aqt(C,{get type(){return x(T).icon}}),et(M),Pt(L=>{ut(M,"title",x(T).description),$=ar(M,1,"rounded-md border border-slate-300 dark:border-slate-600",null,$,L)},[()=>({"!border-slate-500":x(I),"dark:!border-slate-400":x(I),"!bg-slate-300":x(I),"dark:!bg-slate-600":x(I)})]),rt(E,M)}),et(h);var p=mt(h,2),g=ot(p,!0);et(p);var y=mt(p,2);En(y,17,()=>x(i).ui,Un,(E,T)=>{var M=MVt(),I=Ht(M);{var $=F=>{var N=TVt();const O=dt(()=>x(T).field.key);var D=Ht(N),B=ot(D,!0);et(D);var j=mt(D,2);{let z=dt(()=>x(o)[x(O)]??null),U=dt(()=>u(x(T).field.types).map(V=>({value:V.name,label:`${V.name} (${V.type})`})));xa(j,{get value(){return x(z)},onChange:V=>x(o)[x(O)]=V,placeholder:"(select field)",class:"w-full",get options(){return x(U)}})}Pt(()=>ce(B,x(T).field.label)),rt(F,N)};Ft(I,F=>{x(T).field&&F($)})}var C=mt(I,2);{var L=F=>{const N=dt(()=>x(T).text.key);I8(F,{language:"json",get value(){return x(o)[x(N)]},onChange:O=>x(o)[x(N)]=O})};Ft(C,F=>{x(T).text&&F(L)})}rt(E,M)});var v=mt(y,2);let b;v.__click=[AVt,i,l,t];var _=mt(v,2);{var w=E=>{var T=IVt(),M=mt(Ht(T),2);gS(M,()=>x(a),I=>{Dot(I,{get table(){return t.table},get filter(){return t.filter},get spec(){return x(a)}})}),rt(E,T)};Ft(_,E=>{x(a)!=null&&E(w)})}var S=mt(_,2);{var k=E=>{var T=RVt(),M=ot(T,!0);et(T),Pt(()=>ce(M,x(s))),rt(E,T)};Ft(S,E=>{typeof x(s)=="string"&&x(s).trim()!=""&&E(k)})}et(f),Pt(E=>{ce(g,x(i).description),b=ar(v,1,"px-2 mt-2 h-8 w-24 rounded-md text-white text-sm",null,b,E),v.disabled=x(s)!==!0},[()=>({"bg-blue-500":x(s)===!0,"bg-gray-400":x(s)!==!0,"dark:bg-gray-600":x(s)!==!0})]),rt(e,f),Ce()}Br(["click"]);function $Vt(e,t,n,r,i){let o=t(x(n));if(o!=null){H(r,o,!0);return}i.onConfirm(JSON.parse(x(n)))}function OVt(e,t){t.onCancel()}var DVt=Et('<div class="pt-2"><!> <div class="flex gap-1 items-center"><div class="flex-1"><a class="underline pr-2" href="https://uwdata.github.io/mosaic/api/spec/format.html" target="_blank">Mosaic Spec Reference</a></div> <button class="px-2 h-8 rounded-md bg-blue-500 text-white text-sm">Confirm</button> <button class="px-2 h-8 rounded-md bg-slate-500 text-white text-sm">Cancel</button></div> <div> </div></div>');function LVt(e,t){Re(t,!0);let n=wt(Aa(JSON.stringify(t.spec,null,2))),r=wt("");fe(()=>{H(r,i(x(n))??"",!0)});function i(h){try{let p=JSON.parse(h);"component"in p||T8(p)}catch(p){return p.toString()}return null}var o=DVt(),s=ot(o);I8(s,{language:"json",get value(){return x(n)},onChange:h=>H(n,h,!0),className:"mb-2"});var a=mt(s,2),l=mt(ot(a),2);l.__click=[$Vt,i,n,r,t];var c=mt(l,2);c.__click=[OVt,t],et(a);var u=mt(a,2),f=ot(u,!0);et(u),et(o),Pt(()=>ce(f,x(r))),rt(e,o),Ce()}Br(["click"]);var FVt=(e,t)=>H(t,!x(t)),BVt=Et('<div class="text-sm pr-0.5"><!></div>'),PVt=Et('<div class="text-sm pr-0.5"><!></div>'),zVt=Et("<div><!></div>"),UVt=Et("<!> <!>",1),qVt=Et('<div class="group"><div class="px-2 pt-2 flex items-center"><button class="font-mono font-medium py-1 text-left flex flex-1 mr-2 overflow-hidden items-center"><!> <div class="flex-1 whitespace-nowrap overflow-hidden text-ellipsis"> </div></button> <div class="flex-none flex gap-0.5 opacity-0 group-hover:opacity-100"><!> <!></div></div> <div><div class="overflow-hidden px-2 pb-2"><div class="pt-2"></div> <!></div></div></div>');function jVt(e,t){Re(t,!0);let n=wt(!1),r=wt(!0);var i=qVt(),o=ot(i),s=ot(o);s.__click=[FVt,r];var a=ot(s);{var l=E=>{var T=BVt(),M=ot(T);$ot(M,{}),et(T),rt(E,T)},c=E=>{var T=PVt(),M=ot(T);Not(M,{}),et(T),rt(E,T)};Ft(a,E=>{x(r)?E(l):E(c,!1)})}var u=mt(a,2),f=ot(u,!0);et(u),et(s);var h=mt(s,2),p=ot(h);{var g=E=>{wa(E,{get icon(){return Oot},order:1,style:"plotCell",title:"Edit spec",onClick:()=>H(n,!0)})};Ft(p,E=>{t.plot.spec!=null&&!x(n)&&E(g)})}var y=mt(p,2);iv(y,()=>t.buttons??vn),et(h),et(o);var v=mt(o,2);let b;var _=ot(v),w=mt(ot(_),2);{var S=E=>{var T=UVt(),M=Ht(T);Dot(M,{get table(){return t.table},get filter(){return t.filter},get spec(){return t.plot.spec},get stateStore(){return t.stateStore}});var I=mt(M,2);{var $=C=>{var L=zVt(),F=ot(L);LVt(F,{get spec(){return t.plot.spec},onConfirm:N=>{H(n,!1),t.onChange?.({...t.plot,spec:N})},onCancel:()=>{H(n,!1)}}),et(L),Pw(3,L,()=>Yx),rt(C,L)};Ft(I,C=>{x(n)&&C($)})}rt(E,T)},k=E=>{NVt(E,{get table(){return t.table},get filter(){return t.filter},get columns(){return t.columns},onCreate:T=>{t.onChange?.(T)}})};Ft(w,E=>{t.plot.spec!=null?E(S):E(k,!1)})}et(_),et(v),et(i),Pt(E=>{ce(f,t.plot.title),b=Me(v,"",b,E)},[()=>({display:"grid","grid-template-rows":x(r)?"1fr":"0fr",transition:"grid-template-rows 300ms ease-in-out"})]),rt(e,i),Ce()}Br(["click"]);var VVt=(e,t)=>t(),WVt=Et("<!> <!> <!>",1),YVt=Et('<div class="flex-none bg-slate-100 dark:bg-slate-700 rounded-md"><!></div>'),HVt=Et('<div><button class="flex-none bg-slate-100 dark:bg-slate-700 rounded-md p-2 text-slate-500 hover:bg-white hover:text-slate-900 dark:hover:bg-slate-600 dark:hover:text-slate-100 select-none focus-visible:outline-2 outline-blue-600 -outline-offset-2">+ Add Chart</button> <!></div>');function GVt(e,t){Re(t,!0);let n=ie(t,"plots",15),r=ie(t,"layout",3,"sidebar");function i(){n([{id:Hh(),title:"New Chart",spec:null},...n()])}function o(p){n(n().filter(g=>g!==p))}function s(p,g){n(n().map(y=>y===p?g:y))}function a(p,g){let y=n().indexOf(p);if(y<0)return;let v=n().slice();if(g=="up"&&y>0){let b=v[y-1];v[y-1]=p,v[y]=b}if(g=="down"&&y<n().length-1){let b=v[y+1];v[y+1]=p,v[y]=b}n(v)}var l=HVt();let c;var u=ot(l);u.__click=[VVt,i];let f;var h=mt(u,2);En(h,26,n,p=>p,(p,g,y)=>{var v=YVt();let b;var _=ot(v);{const w=k=>{var E=WVt(),T=Ht(E);{var M=L=>{wa(L,{get icon(){return $ot},title:"Move up",style:"plotCell",order:3,onClick:()=>a(g,"up")})};Ft(T,L=>{x(y)>0&&L(M)})}var I=mt(T,2);{var $=L=>{wa(L,{get icon(){return Not},title:"Move down",style:"plotCell",order:4,onClick:()=>a(g,"down")})};Ft(I,L=>{x(y)<n().length-1&&L($)})}var C=mt(I,2);wa(C,{get icon(){return bA},style:"plotCellClose",title:"Close",order:5,onClick:()=>o(g)}),rt(k,E)};let S=dt(()=>t.stateStores?.store(g.id));jVt(_,{get table(){return t.table},get plot(){return g},get filter(){return t.filter},get columns(){return t.columns},onChange:k=>s(g,k),get stateStore(){return x(S)},buttons:w,$$slots:{buttons:!0}})}et(v),Pt(w=>b=Me(v,"",b,w),[()=>({width:r()=="full"?"400px":null})]),Upt(v,()=>kzt,()=>({duration:300})),Pw(2,v,()=>Yx),rt(p,v)}),et(l),Pt((p,g)=>{c=ar(l,1,"flex gap-2",null,c,p),f=Me(u,"",f,g)},[()=>({"flex-col":r()=="sidebar","flex-row":r()=="full","flex-wrap":r()=="full"}),()=>({width:r()=="full"?"400px":null})]),rt(e,l),Ce()}Br(["click"]);var XVt=Et('<div> <span class="text-slate-500"> </span></div>');function KVt(e,t){Re(t,!0);const n=Fr.coordinator;let r=wt(null),i=wt(null);Gi(()=>{let c={coordinator:n,table:t.table,filter:t.filter};H(r,null),H(i,null),c.coordinator.query(zt.from(c.table).select({count:ee`COUNT(*)::INT`})).then(f=>{H(r,f.getChild("count").get(0),!0)});let u=_p({coordinator:c.coordinator,selection:c.filter,query:f=>zt.from(c.table).select({count:ee`COUNT(*)::INT`}).where(f),queryResult:f=>{H(i,f.getChild("count").get(0),!0)}});return()=>{u.destroy()}});var o=XVt(),s=ot(o),a=mt(s),l=ot(a);et(a),et(o),Pt((c,u)=>{ce(s,`${c??""} `),ce(l,`/ ${u??""} points`)},[()=>x(i)?.toLocaleString()??"",()=>x(r)?.toLocaleString()??""]),rt(e,o),Ce()}var Rw={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var JVt=Rw.exports,e9;function ZVt(){return e9||(e9=1,function(e,t){(function(n,r){e.exports=r()})(JVt,function(){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},r=function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")},i=function(){function c(u,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,f,h){return f&&c(u.prototype,f),h&&c(u,h),u}}(),o=Object.assign||function(c){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])}return c},s=function(){function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;r(this,c),this.ctx=u,this.iframes=f,this.exclude=h,this.iframesTimeout=p}return i(c,[{key:"getContexts",value:function(){var f=void 0,h=[];return typeof this.ctx>"u"||!this.ctx?f=[]:NodeList.prototype.isPrototypeOf(this.ctx)?f=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?f=this.ctx:typeof this.ctx=="string"?f=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):f=[this.ctx],f.forEach(function(p){var g=h.filter(function(y){return y.contains(p)}).length>0;h.indexOf(p)===-1&&!g&&h.push(p)}),h}},{key:"getIframeContents",value:function(f,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},g=void 0;try{var y=f.contentWindow;if(g=y.document,!y||!g)throw new Error("iframe inaccessible")}catch{p()}g&&h(g)}},{key:"isIframeBlank",value:function(f){var h="about:blank",p=f.getAttribute("src").trim(),g=f.contentWindow.location.href;return g===h&&p!==h&&p}},{key:"observeIframeLoad",value:function(f,h,p){var g=this,y=!1,v=null,b=function _(){if(!y){y=!0,clearTimeout(v);try{g.isIframeBlank(f)||(f.removeEventListener("load",_),g.getIframeContents(f,h,p))}catch{p()}}};f.addEventListener("load",b),v=setTimeout(b,this.iframesTimeout)}},{key:"onIframeReady",value:function(f,h,p){try{f.contentWindow.document.readyState==="complete"?this.isIframeBlank(f)?this.observeIframeLoad(f,h,p):this.getIframeContents(f,h,p):this.observeIframeLoad(f,h,p)}catch{p()}}},{key:"waitForIframes",value:function(f,h){var p=this,g=0;this.forEachIframe(f,function(){return!0},function(y){g++,p.waitForIframes(y.querySelector("html"),function(){--g||h()})},function(y){y||h()})}},{key:"forEachIframe",value:function(f,h,p){var g=this,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},v=f.querySelectorAll("iframe"),b=v.length,_=0;v=Array.prototype.slice.call(v);var w=function(){--b<=0&&y(_)};b||w(),v.forEach(function(S){c.matches(S,g.exclude)?w():g.onIframeReady(S,function(k){h(S)&&(_++,p(k)),w()},w)})}},{key:"createIterator",value:function(f,h,p){return document.createNodeIterator(f,h,p,!1)}},{key:"createInstanceOnIframe",value:function(f){return new c(f.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(f,h,p){var g=f.compareDocumentPosition(p),y=Node.DOCUMENT_POSITION_PRECEDING;if(g&y)if(h!==null){var v=h.compareDocumentPosition(p),b=Node.DOCUMENT_POSITION_FOLLOWING;if(v&b)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(f){var h=f.previousNode(),p=void 0;return h===null?p=f.nextNode():p=f.nextNode()&&f.nextNode(),{prevNode:h,node:p}}},{key:"checkIframeFilter",value:function(f,h,p,g){var y=!1,v=!1;return g.forEach(function(b,_){b.val===p&&(y=_,v=b.handled)}),this.compareNodeIframe(f,h,p)?(y===!1&&!v?g.push({val:p,handled:!0}):y!==!1&&!v&&(g[y].handled=!0),!0):(y===!1&&g.push({val:p,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(f,h,p,g){var y=this;f.forEach(function(v){v.handled||y.getIframeContents(v.val,function(b){y.createInstanceOnIframe(b).forEachNode(h,p,g)})})}},{key:"iterateThroughNodes",value:function(f,h,p,g,y){for(var v=this,b=this.createIterator(h,f,g),_=[],w=[],S=void 0,k=void 0,E=function(){var M=v.getIteratorNode(b);return k=M.prevNode,S=M.node,S};E();)this.iframes&&this.forEachIframe(h,function(T){return v.checkIframeFilter(S,k,T,_)},function(T){v.createInstanceOnIframe(T).forEachNode(f,function(M){return w.push(M)},g)}),w.push(S);w.forEach(function(T){p(T)}),this.iframes&&this.handleOpenIframes(_,f,p,g),y()}},{key:"forEachNode",value:function(f,h,p){var g=this,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},v=this.getContexts(),b=v.length;b||y(),v.forEach(function(_){var w=function(){g.iterateThroughNodes(f,_,h,p,function(){--b<=0&&y()})};g.iframes?g.waitForIframes(_,w):w()})}}],[{key:"matches",value:function(f,h){var p=typeof h=="string"?[h]:h,g=f.matches||f.matchesSelector||f.msMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.webkitMatchesSelector;if(g){var y=!1;return p.every(function(v){return g.call(f,v)?(y=!0,!1):!0}),y}else return!1}}]),c}(),a=function(){function c(u){r(this,c),this.ctx=u,this.ie=!1;var f=window.navigator.userAgent;(f.indexOf("MSIE")>-1||f.indexOf("Trident")>-1)&&(this.ie=!0)}return i(c,[{key:"log",value:function(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",p=this.opt.log;this.opt.debug&&(typeof p>"u"?"undefined":n(p))==="object"&&typeof p[h]=="function"&&p[h]("mark.js: "+f)}},{key:"escapeStr",value:function(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(f){return this.opt.wildcards!=="disabled"&&(f=this.setupWildcardsRegExp(f)),f=this.escapeStr(f),Object.keys(this.opt.synonyms).length&&(f=this.createSynonymsRegExp(f)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.setupIgnoreJoinersRegExp(f)),this.opt.diacritics&&(f=this.createDiacriticsRegExp(f)),f=this.createMergedBlanksRegExp(f),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.createJoinersRegExp(f)),this.opt.wildcards!=="disabled"&&(f=this.createWildcardsRegExp(f)),f=this.createAccuracyRegExp(f),f}},{key:"createSynonymsRegExp",value:function(f){var h=this.opt.synonyms,p=this.opt.caseSensitive?"":"i",g=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var y in h)if(h.hasOwnProperty(y)){var v=h[y],b=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(y):this.escapeStr(y),_=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(v):this.escapeStr(v);b!==""&&_!==""&&(f=f.replace(new RegExp("("+this.escapeStr(b)+"|"+this.escapeStr(_)+")","gm"+p),g+("("+this.processSynomyms(b)+"|")+(this.processSynomyms(_)+")")+g))}return f}},{key:"processSynomyms",value:function(f){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(f=this.setupIgnoreJoinersRegExp(f)),f}},{key:"setupWildcardsRegExp",value:function(f){return f=f.replace(/(?:\\)*\?/g,function(h){return h.charAt(0)==="\\"?"?":""}),f.replace(/(?:\\)*\*/g,function(h){return h.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(f){var h=this.opt.wildcards==="withSpaces";return f.replace(/\u0001/g,h?"[\\S\\s]?":"\\S?").replace(/\u0002/g,h?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(f){return f.replace(/[^(|)\\]/g,function(h,p,g){var y=g.charAt(p+1);return/[(|)\\]/.test(y)||y===""?h:h+"\0"})}},{key:"createJoinersRegExp",value:function(f){var h=[],p=this.opt.ignorePunctuation;return Array.isArray(p)&&p.length&&h.push(this.escapeStr(p.join(""))),this.opt.ignoreJoiners&&h.push("\\u00ad\\u200b\\u200c\\u200d"),h.length?f.split(/\u0000+/).join("["+h.join("")+"]*"):f}},{key:"createDiacriticsRegExp",value:function(f){var h=this.opt.caseSensitive?"":"i",p=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],g=[];return f.split("").forEach(function(y){p.every(function(v){if(v.indexOf(y)!==-1){if(g.indexOf(v)>-1)return!1;f=f.replace(new RegExp("["+v+"]","gm"+h),"["+v+"]"),g.push(v)}return!0})}),f}},{key:"createMergedBlanksRegExp",value:function(f){return f.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(f){var h=this,p="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",g=this.opt.accuracy,y=typeof g=="string"?g:g.value,v=typeof g=="string"?[]:g.limiters,b="";switch(v.forEach(function(_){b+="|"+h.escapeStr(_)}),y){case"partially":default:return"()("+f+")";case"complementary":return b="\\s"+(b||this.escapeStr(p)),"()([^"+b+"]*"+f+"[^"+b+"]*)";case"exactly":return"(^|\\s"+b+")("+f+")(?=$|\\s"+b+")"}}},{key:"getSeparatedKeywords",value:function(f){var h=this,p=[];return f.forEach(function(g){h.opt.separateWordSearch?g.split(" ").forEach(function(y){y.trim()&&p.indexOf(y)===-1&&p.push(y)}):g.trim()&&p.indexOf(g)===-1&&p.push(g)}),{keywords:p.sort(function(g,y){return y.length-g.length}),length:p.length}}},{key:"isNumeric",value:function(f){return Number(parseFloat(f))==f}},{key:"checkRanges",value:function(f){var h=this;if(!Array.isArray(f)||Object.prototype.toString.call(f[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(f),[];var p=[],g=0;return f.sort(function(y,v){return y.start-v.start}).forEach(function(y){var v=h.callNoMatchOnInvalidRanges(y,g),b=v.start,_=v.end,w=v.valid;w&&(y.start=b,y.length=_-b,p.push(y),g=_)}),p}},{key:"callNoMatchOnInvalidRanges",value:function(f,h){var p=void 0,g=void 0,y=!1;return f&&typeof f.start<"u"?(p=parseInt(f.start,10),g=p+parseInt(f.length,10),this.isNumeric(f.start)&&this.isNumeric(f.length)&&g-h>0&&g-p>0?y=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(f))),this.opt.noMatch(f))):(this.log("Ignoring invalid range: "+JSON.stringify(f)),this.opt.noMatch(f)),{start:p,end:g,valid:y}}},{key:"checkWhitespaceRanges",value:function(f,h,p){var g=void 0,y=!0,v=p.length,b=h-v,_=parseInt(f.start,10)-b;return _=_>v?v:_,g=_+parseInt(f.length,10),g>v&&(g=v,this.log("End range automatically set to the max value of "+v)),_<0||g-_<0||_>v||g>v?(y=!1,this.log("Invalid range: "+JSON.stringify(f)),this.opt.noMatch(f)):p.substring(_,g).replace(/\s+/g,"")===""&&(y=!1,this.log("Skipping whitespace only range: "+JSON.stringify(f)),this.opt.noMatch(f)),{start:_,end:g,valid:y}}},{key:"getTextNodes",value:function(f){var h=this,p="",g=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(y){g.push({start:p.length,end:(p+=y.textContent).length,node:y})},function(y){return h.matchesExclude(y.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){f({value:p,nodes:g})})}},{key:"matchesExclude",value:function(f){return s.matches(f,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(f,h,p){var g=this.opt.element?this.opt.element:"mark",y=f.splitText(h),v=y.splitText(p-h),b=document.createElement(g);return b.setAttribute("data-markjs","true"),this.opt.className&&b.setAttribute("class",this.opt.className),b.textContent=y.textContent,y.parentNode.replaceChild(b,y),v}},{key:"wrapRangeInMappedTextNode",value:function(f,h,p,g,y){var v=this;f.nodes.every(function(b,_){var w=f.nodes[_+1];if(typeof w>"u"||w.start>h){if(!g(b.node))return!1;var S=h-b.start,k=(p>b.end?b.end:p)-b.start,E=f.value.substr(0,b.start),T=f.value.substr(k+b.start);if(b.node=v.wrapRangeInTextNode(b.node,S,k),f.value=E+T,f.nodes.forEach(function(M,I){I>=_&&(f.nodes[I].start>0&&I!==_&&(f.nodes[I].start-=k),f.nodes[I].end-=k)}),p-=k,y(b.node.previousSibling,b.start),p>b.end)h=b.end;else return!1}return!0})}},{key:"wrapMatches",value:function(f,h,p,g,y){var v=this,b=h===0?0:h+1;this.getTextNodes(function(_){_.nodes.forEach(function(w){w=w.node;for(var S=void 0;(S=f.exec(w.textContent))!==null&&S[b]!=="";)if(p(S[b],w)){var k=S.index;if(b!==0)for(var E=1;E<b;E++)k+=S[E].length;w=v.wrapRangeInTextNode(w,k,k+S[b].length),g(w.previousSibling),f.lastIndex=0}}),y()})}},{key:"wrapMatchesAcrossElements",value:function(f,h,p,g,y){var v=this,b=h===0?0:h+1;this.getTextNodes(function(_){for(var w=void 0;(w=f.exec(_.value))!==null&&w[b]!=="";){var S=w.index;if(b!==0)for(var k=1;k<b;k++)S+=w[k].length;var E=S+w[b].length;v.wrapRangeInMappedTextNode(_,S,E,function(T){return p(w[b],T)},function(T,M){f.lastIndex=M,g(T)})}y()})}},{key:"wrapRangeFromIndex",value:function(f,h,p,g){var y=this;this.getTextNodes(function(v){var b=v.value.length;f.forEach(function(_,w){var S=y.checkWhitespaceRanges(_,b,v.value),k=S.start,E=S.end,T=S.valid;T&&y.wrapRangeInMappedTextNode(v,k,E,function(M){return h(M,_,v.value.substring(k,E),w)},function(M){p(M,_)})}),g()})}},{key:"unwrapMatches",value:function(f){for(var h=f.parentNode,p=document.createDocumentFragment();f.firstChild;)p.appendChild(f.removeChild(f.firstChild));h.replaceChild(p,f),this.ie?this.normalizeTextNode(h):h.normalize()}},{key:"normalizeTextNode",value:function(f){if(f){if(f.nodeType===3)for(;f.nextSibling&&f.nextSibling.nodeType===3;)f.nodeValue+=f.nextSibling.nodeValue,f.parentNode.removeChild(f.nextSibling);else this.normalizeTextNode(f.firstChild);this.normalizeTextNode(f.nextSibling)}}},{key:"markRegExp",value:function(f,h){var p=this;this.opt=h,this.log('Searching with expression "'+f+'"');var g=0,y="wrapMatches",v=function(_){g++,p.opt.each(_)};this.opt.acrossElements&&(y="wrapMatchesAcrossElements"),this[y](f,this.opt.ignoreGroups,function(b,_){return p.opt.filter(_,b,g)},v,function(){g===0&&p.opt.noMatch(f),p.opt.done(g)})}},{key:"mark",value:function(f,h){var p=this;this.opt=h;var g=0,y="wrapMatches",v=this.getSeparatedKeywords(typeof f=="string"?[f]:f),b=v.keywords,_=v.length,w=this.opt.caseSensitive?"":"i",S=function k(E){var T=new RegExp(p.createRegExp(E),"gm"+w),M=0;p.log('Searching with expression "'+T+'"'),p[y](T,1,function(I,$){return p.opt.filter($,E,g,M)},function(I){M++,g++,p.opt.each(I)},function(){M===0&&p.opt.noMatch(E),b[_-1]===E?p.opt.done(g):k(b[b.indexOf(E)+1])})};this.opt.acrossElements&&(y="wrapMatchesAcrossElements"),_===0?this.opt.done(g):S(b[0])}},{key:"markRanges",value:function(f,h){var p=this;this.opt=h;var g=0,y=this.checkRanges(f);y&&y.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(y)),this.wrapRangeFromIndex(y,function(v,b,_,w){return p.opt.filter(v,b,_,w)},function(v,b){g++,p.opt.each(v,b)},function(){p.opt.done(g)})):this.opt.done(g)}},{key:"unmark",value:function(f){var h=this;this.opt=f;var p=this.opt.element?this.opt.element:"*";p+="[data-markjs]",this.opt.className&&(p+="."+this.opt.className),this.log('Removal selector "'+p+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(g){h.unwrapMatches(g)},function(g){var y=s.matches(g,p),v=h.matchesExclude(g);return!y||v?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(f){this._opt=o({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},f)},get:function(){return this._opt}},{key:"iterator",get:function(){return new s(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),c}();function l(c){var u=this,f=new a(c);return this.mark=function(h,p){return f.mark(h,p),u},this.markRegExp=function(h,p){return f.markRegExp(h,p),u},this.markRanges=function(h,p){return f.markRanges(h,p),u},this.unmark=function(h){return f.unmark(h),u},this}return l})}(Rw)),Rw.exports}var QVt=ZVt();const tWt=BZ(QVt);var eWt=(e,t)=>{t.onClose?.()},nWt=(e,t,n)=>{t.onClick?.(n)},rWt=Et('<div class="flex pt-1 text-sm"><span class="px-2 flex gap-2 bg-slate-200 text-slate-500 dark:bg-slate-600 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium">Distance</div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"> </div></span></div>'),iWt=Et('<button class="m-1 p-2 text-left rounded-md hover:bg-slate-300 dark:hover:bg-slate-500"><div class="overflow-hidden text-ellipsis line-clamp-4 leading-5"> </div> <!></button> <hr class="border-slate-300 dark:border-slate-600"/>',1),oWt=Et('<div class="flex flex-col w-full h-full"><div class="ml-3 mr-2 my-1 flex items-center text-slate-400 dark:text-slate-500 items-start"><div class="flex-1"><div> </div> <div> </div></div> <div class="flex-none mt-1"><button class="block hover:text-slate-500 dark:hover:text-slate-400"><!></button></div></div> <hr class="border-slate-300 dark:border-slate-600"/> <div class="flex flex-col overflow-x-hidden overflow-y-scroll"></div></div>');function sWt(e,t){Re(t,!0);let n=ie(t,"limit",3,100);function r(v,b){new tWt(v).mark(b)}let i=dt(()=>t.items.length==0?"No result found.":t.items.length==1?`${t.items.length.toLocaleString()} result.`:t.items.length>=n()?`More than ${t.items.length.toLocaleString()} results, showing top ${n().toLocaleString()}.`:`${t.items.length.toLocaleString()} results.`);var o=oWt(),s=ot(o),a=ot(s),l=ot(a),c=ot(l,!0);et(l);var u=mt(l,2),f=ot(u,!0);et(u),et(a);var h=mt(a,2),p=ot(h);p.__click=[eWt,t];var g=ot(p);bA(g,{}),et(p),et(h),et(s);var y=mt(s,4);En(y,20,()=>t.items,v=>v,(v,b)=>{var _=iWt(),w=Ht(_);w.__click=[nWt,t,b];var S=ot(w),k=ot(S,!0);et(S),rP(S,(M,I)=>r?.(M,I),()=>t.highlight);var E=mt(S,2);{var T=M=>{var I=rWt(),$=ot(I),C=mt(ot($),2),L=ot(C,!0);et(C),et($),et(I),Pt(F=>ce(L,F),[()=>b.distance.toFixed(5)]),rt(M,I)};Ft(E,M=>{b.distance!=null&&M(T)})}et(w),Td(2),Pt(()=>{ut(S,"title",b.text),ce(k,b.text)}),rt(v,_)}),et(y),et(o),Pt(()=>{ce(c,t.label),ce(f,x(i))}),rt(e,o),Ce()}Br(["click"]);var aWt=Ze('<svg><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path fill="currentColor" d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"><animateTransform attributeName="transform" dur="0.75s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></svg>');function Lot(e,t){const n=jo(t,["$$slots","$$events","$$legacy"]);var r=aWt();Gs(r,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),rt(e,r)}var lWt=Et('<span class="pl-2 text-slate-500 dark:text-slate-500"> </span>'),cWt=Et('<div role="status" class="flex flex-row items-center"><!> <!></div>');function C8(e,t){let n=ie(t,"status",3,"Loading...");var r=cWt(),i=ot(r);Lot(i,{class:"text-blue-500"});var o=mt(i,2);{var s=a=>{var l=lWt(),c=ot(l,!0);et(l),Pt(()=>ce(c,n())),rt(a,l)};Ft(o,a=>{n()!=null&&a(s)})}et(r),rt(e,r)}function uWt(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function fWt(e){const t=atob(e);return new Uint8Array([...t].map(n=>n.charCodeAt(0)))}function n0(e,t){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!=t[n])return!1;return!0}function n9(e){return n0(e,[137,80,78,71,13,10,26,10])?"image/png":n0(e,[255,216,255])?"image/jpeg":n0(e,[73,73,42,0])?"image/tiff":n0(e,[66,77])?"image/bmp":n0(e,[71,73,70,56,55,97])||n0(e,[71,73,70,56,55,97])?"image/gif":"application/octet-stream"}function hWt(e){if(e==null)return null;if(typeof e=="string")return e.startsWith("data:")?e:`data:${n9(fWt(e))};base64,`+e;{let t=null;if(e.bytes&&e.bytes instanceof Uint8Array&&(t=e.bytes),e instanceof Uint8Array&&(t=e),t!=null)return`data:${n9(t)};base64,`+uWt(t)}return null}class dWt{element;constructor(t,n){this.element=t,this.update(n)}update(t){if(t.value==null){this.element.innerText="(null)";return}let n=hWt(t.value);if(n!=null){let r=document.createElement("img");r.src=n,r.style.maxHeight="100px",this.element.replaceChildren(r)}else this.element.innerText="(unknown)"}}function pWt(e,t){try{return JSON.stringify(e,(n,r)=>r instanceof Object&&ArrayBuffer.isView(r)?Array.from(r):r,t)}catch{return"(invalid)"}}class gWt{element;constructor(t,n){this.element=t,this.update(n)}update(t){let n=document.createElement("pre");n.innerText=pWt(t.value),this.element.replaceChildren(n)}}function N8(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var xp=N8();function Fot(e){xp=e}var Ky={exec:()=>null};function Yn(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Fo.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,t)};return r}var Fo={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},mWt=/^(?:[ \t]*(?:\n|$))+/,yWt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,vWt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,cb=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,bWt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$8=/(?:[*+-]|\d{1,9}[.)])/,Bot=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Pot=Yn(Bot).replace(/bull/g,$8).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_Wt=Yn(Bot).replace(/bull/g,$8).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),O8=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,wWt=/^[^\n]+/,D8=/(?!\s*\])(?:\\.|[^\[\]\\])+/,xWt=Yn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",D8).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),SWt=Yn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$8).getRegex(),_A="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",L8=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,AWt=Yn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",L8).replace("tag",_A).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zot=Yn(O8).replace("hr",cb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_A).getRegex(),EWt=Yn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",zot).getRegex(),F8={blockquote:EWt,code:yWt,def:xWt,fences:vWt,heading:bWt,hr:cb,html:AWt,lheading:Pot,list:SWt,newline:mWt,paragraph:zot,table:Ky,text:wWt},r9=Yn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",cb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_A).getRegex(),kWt={...F8,lheading:_Wt,table:r9,paragraph:Yn(O8).replace("hr",cb).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",r9).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_A).getRegex()},TWt={...F8,html:Yn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",L8).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ky,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Yn(O8).replace("hr",cb).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Pot).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},MWt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,IWt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Uot=/^( {2,}|\\)\n(?!\s*$)/,RWt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,wA=/[\p{P}\p{S}]/u,B8=/[\s\p{P}\p{S}]/u,qot=/[^\s\p{P}\p{S}]/u,CWt=Yn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,B8).getRegex(),jot=/(?!~)[\p{P}\p{S}]/u,NWt=/(?!~)[\s\p{P}\p{S}]/u,$Wt=/(?:[^\s\p{P}\p{S}]|~)/u,OWt=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Vot=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,DWt=Yn(Vot,"u").replace(/punct/g,wA).getRegex(),LWt=Yn(Vot,"u").replace(/punct/g,jot).getRegex(),Wot="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",FWt=Yn(Wot,"gu").replace(/notPunctSpace/g,qot).replace(/punctSpace/g,B8).replace(/punct/g,wA).getRegex(),BWt=Yn(Wot,"gu").replace(/notPunctSpace/g,$Wt).replace(/punctSpace/g,NWt).replace(/punct/g,jot).getRegex(),PWt=Yn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,qot).replace(/punctSpace/g,B8).replace(/punct/g,wA).getRegex(),zWt=Yn(/\\(punct)/,"gu").replace(/punct/g,wA).getRegex(),UWt=Yn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qWt=Yn(L8).replace("(?:-->|$)","-->").getRegex(),jWt=Yn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qWt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nS=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,VWt=Yn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",nS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Yot=Yn(/^!?\[(label)\]\[(ref)\]/).replace("label",nS).replace("ref",D8).getRegex(),Hot=Yn(/^!?\[(ref)\](?:\[\])?/).replace("ref",D8).getRegex(),WWt=Yn("reflink|nolink(?!\\()","g").replace("reflink",Yot).replace("nolink",Hot).getRegex(),P8={_backpedal:Ky,anyPunctuation:zWt,autolink:UWt,blockSkip:OWt,br:Uot,code:IWt,del:Ky,emStrongLDelim:DWt,emStrongRDelimAst:FWt,emStrongRDelimUnd:PWt,escape:MWt,link:VWt,nolink:Hot,punctuation:CWt,reflink:Yot,reflinkSearch:WWt,tag:jWt,text:RWt,url:Ky},YWt={...P8,link:Yn(/^!?\[(label)\]\((.*?)\)/).replace("label",nS).getRegex(),reflink:Yn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nS).getRegex()},R5={...P8,emStrongRDelimAst:BWt,emStrongLDelim:LWt,url:Yn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},HWt={...R5,br:Yn(Uot).replace("{2,}","*").getRegex(),text:Yn(R5.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},K_={normal:F8,gfm:kWt,pedantic:TWt},oy={normal:P8,gfm:R5,breaks:HWt,pedantic:YWt},GWt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i9=e=>GWt[e];function Bl(e,t){if(t){if(Fo.escapeTest.test(e))return e.replace(Fo.escapeReplace,i9)}else if(Fo.escapeTestNoEncode.test(e))return e.replace(Fo.escapeReplaceNoEncode,i9);return e}function o9(e){try{e=encodeURI(e).replace(Fo.percentDecode,"%")}catch{return null}return e}function s9(e,t){let n=e.replace(Fo.findPipe,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Fo.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Fo.slashPipe,"|");return r}function sy(e,t,n){let r=e.length;if(r===0)return"";let i=0;for(;i<r&&e.charAt(r-i-1)===t;)i++;return e.slice(0,r-i)}function XWt(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function a9(e,t,n,r,i){let o=t.href,s=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function KWt(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let i=r[1];return t.split(`
`).map(o=>{let s=o.match(n.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var rS=class{options;rules;lexer;constructor(e){this.options=e||xp}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:sy(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=KWt(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=sy(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:sy(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=sy(t[0],`
`).split(`
`),r="",i="",o=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=f,n.length===0)break;let h=o.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let p=h,g=p.raw+`
`+n.join(`
`),y=this.blockquote(g);o[o.length-1]=y,r=r.substring(0,r.length-p.raw.length)+y.raw,i=i.substring(0,i.length-p.text.length)+y.text;break}else if(h?.type==="list"){let p=h,g=p.raw+`
`+n.join(`
`),y=this.list(g);o[o.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,i=i.substring(0,i.length-p.raw.length)+y.raw,n=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=this.rules.other.listItemRegex(n),s=!1;for(;e;){let l=!1,c="",u="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),h=e.split(`
`,1)[0],p=!f.trim(),g=0;if(this.options.pedantic?(g=2,u=f.trimStart()):p?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=f.slice(g),g+=t[1].length),p&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(g),_=this.rules.other.hrRegex(g),w=this.rules.other.fencesBeginRegex(g),S=this.rules.other.headingBeginRegex(g),k=this.rules.other.htmlBeginRegex(g);for(;e;){let E=e.split(`
`,1)[0],T;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),T=h):T=h.replace(this.rules.other.tabCharGlobal,"    "),w.test(h)||S.test(h)||k.test(h)||b.test(h)||_.test(h))break;if(T.search(this.rules.other.nonSpaceChar)>=g||!h.trim())u+=`
`+T.slice(g);else{if(p||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||w.test(f)||S.test(f)||_.test(f))break;u+=`
`+h}!p&&!h.trim()&&(p=!0),c+=E+`
`,e=e.substring(E.length+1),f=T.slice(g)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0));let y=null,v;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(v=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!y,checked:v,loose:!1,text:u,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=s9(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let s of r)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<n.length;s++)o.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:o.align[s]});for(let s of i)o.rows.push(s9(s,o.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[l]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let o=sy(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{let o=XWt(t[2],"()");if(o===-2)return;if(o>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),a9(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){let o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return a9(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...r[0]].length-1,o,s,a=i,l=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+i);(r=c.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(s=[...o].length,r[3]||r[4]){a+=s;continue}else if((r[5]||r[6])&&i%3&&!((i+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let u=[...r[0]][0].length,f=e.slice(0,i+r.index+u+s);if(Math.min(i,s)%2){let p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let i;do i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(i!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},vu=class C5{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||xp,this.options.tokenizer=this.options.tokenizer||new rS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Fo,block:K_.normal,inline:oy.normal};this.options.pedantic?(n.block=K_.pedantic,n.inline=oy.pedantic):this.options.gfm&&(n.block=K_.gfm,this.options.breaks?n.inline=oy.breaks:n.inline=oy.gfm),this.tokenizer.rules=n}static get rules(){return{block:K_,inline:oy}}static lex(t,n){return new C5(n).lex(t)}static lexInline(t,n){return new C5(n).inlineTokens(t)}lex(t){t=t.replace(Fo.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace(Fo.tabCharGlobal,"    ").replace(Fo.spaceLine,""));t;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length);let s=n.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):n.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),n.push(i);continue}let o=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(o=t.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){let s=n.at(-1);r&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(i),r=o.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(i);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;t;){o||(s=""),o=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length);let c=n.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):n.push(a);continue}if(a=this.tokenizer.emStrong(t,r,s)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.autolink(t)){t=t.substring(a.raw.length),n.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t))){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if(this.options.extensions?.startInline){let c=1/0,u=t.slice(1),f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),o=!0;let c=n.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):n.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}},iS=class{options;parser;constructor(e){this.options=e||xp}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(Fo.notSpaceStart)?.[0],i=e.replace(Fo.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Bl(r)+'">'+(n?i:Bl(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Bl(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let s=0;s<e.items.length;s++){let a=e.items[s];r+=this.listitem(a)}let i=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Bl(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){let o=e.rows[i];n="";for(let s=0;s<o.length;s++)n+=this.tablecell(o[s]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Bl(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=o9(e);if(i===null)return r;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+Bl(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=o9(e);if(i===null)return Bl(n);e=i;let o=`<img src="${e}" alt="${n}"`;return t&&(o+=` title="${Bl(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Bl(e.text)}},z8=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},bu=class N5{options;renderer;textRenderer;constructor(t){this.options=t||xp,this.options.renderer=this.options.renderer||new iS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new z8}static parse(t,n){return new N5(n).parse(t)}static parseInline(t,n){return new N5(n).parseInline(t)}parse(t,n=!0){let r="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let a=o,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let s=o;switch(s.type){case"space":{r+=this.renderer.space(s);continue}case"hr":{r+=this.renderer.hr(s);continue}case"heading":{r+=this.renderer.heading(s);continue}case"code":{r+=this.renderer.code(s);continue}case"table":{r+=this.renderer.table(s);continue}case"blockquote":{r+=this.renderer.blockquote(s);continue}case"list":{r+=this.renderer.list(s);continue}case"html":{r+=this.renderer.html(s);continue}case"paragraph":{r+=this.renderer.paragraph(s);continue}case"text":{let a=s,l=this.renderer.text(a);for(;i+1<t.length&&t[i+1].type==="text";)a=t[++i],l+=`
`+this.renderer.text(a);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,n=this.renderer){let r="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=a||"";continue}}let s=o;switch(s.type){case"escape":{r+=n.text(s);break}case"html":{r+=n.html(s);break}case"link":{r+=n.link(s);break}case"image":{r+=n.image(s);break}case"strong":{r+=n.strong(s);break}case"em":{r+=n.em(s);break}case"codespan":{r+=n.codespan(s);break}case"br":{r+=n.br(s);break}case"del":{r+=n.del(s);break}case"text":{r+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Cw=class{options;block;constructor(e){this.options=e||xp}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?vu.lex:vu.lexInline}provideParser(){return this.block?bu.parse:bu.parseInline}},JWt=class{defaults=N8();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=bu;Renderer=iS;TextRenderer=z8;Lexer=vu;Tokenizer=rS;Hooks=Cw;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let i=r;for(let o of i.header)n=n.concat(this.walkTokens(o.tokens,t));for(let o of i.rows)for(let s of o)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let i=r;n=n.concat(this.walkTokens(i.items,t));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let s=i[o].flat(1/0);n=n.concat(this.walkTokens(s,t))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=t.renderers[i.name];o?t.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){let i=this.defaults.renderer||new iS(this.defaults);for(let o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,a=n.renderer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}r.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new rS(this.defaults);for(let o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=n.tokenizer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new Cw;for(let o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,a=n.hooks[s],l=i[s];Cw.passThroughHooks.has(o)?i[s]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(f=>l.call(i,f));let u=a.call(i,c);return l.call(i,u)}:i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return vu.lex(e,t??this.defaults)}parser(e,t){return bu.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let s=i.hooks?i.hooks.provideLexer():e?vu.lex:vu.lexInline,a=i.hooks?i.hooks.provideParser():e?bu.parse:bu.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(l=>s(l,i)).then(l=>i.hooks?i.hooks.processAllTokens(l):l).then(l=>i.walkTokens?Promise.all(this.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>a(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let l=s(t,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let c=a(l,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(l){return o(l)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Bl(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},Jd=new JWt;function nr(e,t){return Jd.parse(e,t)}nr.options=nr.setOptions=function(e){return Jd.setOptions(e),nr.defaults=Jd.defaults,Fot(nr.defaults),nr};nr.getDefaults=N8;nr.defaults=xp;nr.use=function(...e){return Jd.use(...e),nr.defaults=Jd.defaults,Fot(nr.defaults),nr};nr.walkTokens=function(e,t){return Jd.walkTokens(e,t)};nr.parseInline=Jd.parseInline;nr.Parser=bu;nr.parser=bu.parse;nr.Renderer=iS;nr.TextRenderer=z8;nr.Lexer=vu;nr.lexer=vu.lex;nr.Tokenizer=rS;nr.Hooks=Cw;nr.parse=nr;nr.options;nr.setOptions;nr.use;nr.walkTokens;nr.parseInline;bu.parse;vu.lex;class ZWt{element;constructor(t,n){this.element=t,this.update(n)}update(t){this.element.innerHTML='<div class="markdown-content">'+nr(t.value?.toString()??"(null)",{async:!1,gfm:!0})+"</div>"}}class QWt{element;constructor(t,n){this.element=t,this.update(n)}update(t){if(t.value!=null){let n=document.createElement("a");n.href=t.value,n.innerText=t.value,n.className="underline",n.target="_blank",this.element.replaceChildren(n)}else this.element.innerText="(null)"}}let Got={markdown:ZWt,image:dWt,url:QWt,json:gWt},tYt=[{renderer:"markdown",label:"Markdown"},{renderer:"image",label:"Image"},{renderer:"url",label:"Link"},{renderer:"json",label:"JSON"}];function l9(e){if(!(e==null||e=="plain"))return typeof e=="string"?Got[e]:e}function eYt(e,t){let n={};if(t!=null)for(let r in t)n[r]=l9(t[r]);for(let r in e)e[r]!=null&&(n[r]=l9(e[r]));return n}var nYt=Et('<tr class="leading-10"><td class="w-full"><div class="max-w-80 whitespace-nowrap text-ellipsis overflow-x-hidden"> </div></td><td><!></td></tr>'),rYt=Et('<div class="max-h-48 overflow-x-hidden overflow-y-scroll border border-slate-200 dark:border-slate-600 p-2 rounded-md"><table><tbody></tbody></table></div>');function iYt(e,t){Re(t,!0);function n(s,a){let l={};for(let c of t.columns)c.name==s?a!=null&&a!=""&&(l[c.name]=a):t.styles[c.name]&&(l[c.name]=t.styles[c.name]);t.onStylesChange(l)}var r=rYt(),i=ot(r),o=ot(i);En(o,21,()=>t.columns,Un,(s,a)=>{var l=nYt(),c=ot(l),u=ot(c),f=ot(u,!0);et(u),et(c);var h=mt(c),p=ot(h);{let g=dt(()=>t.styles[x(a).name]??null),y=dt(()=>[{value:null,label:"(default)"},...tYt.map(v=>({value:v.renderer,label:v.label}))]);xa(p,{get value(){return x(g)},onChange:v=>n(x(a).name,v),get options(){return x(y)}})}et(h),et(l),Pt(()=>ce(f,x(a).name)),rt(s,l)}),et(o),et(i),et(r),rt(e,r),Ce()}function c9(e,t){Re(t,!0);let n=ie(t,"label",3,null),r=ie(t,"icon",3,null),i=ie(t,"title",3,""),o=ie(t,"order",3,null),s=ie(t,"style",3,"default"),a=wt("ready");async function l(){if(t.onClick){H(a,"running");try{await t.onClick(),H(a,"ready")}catch{H(a,"error")}}}{let c=dt(()=>x(a)=="ready"?r():x(a)=="running"?Lot:bA);wa(e,{get label(){return n()},get icon(){return x(c)},get title(){return i()},get order(){return o()},get style(){return s()},get class(){return t.class},onClick:l})}Ce()}var oYt=(e,t)=>{t(!t())},sYt=Et('<span class="flex h-5 items-center"> </span>'),aYt=Et("<button><!> <!></button>");function Nw(e,t){Re(t,!0);let n=ie(t,"title",3,""),r=ie(t,"checked",15),i=ie(t,"label",3,null),o=ie(t,"icon",3,null);var s=aYt();let a;s.__click=[oYt,r];var l=ot(s);{var c=h=>{var p=Mn();const g=dt(o);var y=Ht(p);ov(y,()=>x(g),(v,b)=>{b(v,{class:"w-5 h-5"})}),rt(h,p)};Ft(l,h=>{o()!=null&&h(c)})}var u=mt(l,2);{var f=h=>{var p=sYt(),g=ot(p,!0);et(p),Pt(()=>ce(g,i())),rt(h,p)};Ft(u,h=>{i()!=null&&h(f)})}et(s),Pt(h=>{a=ar(s,1,"rounded-md px-1.5 py-1.5 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 flex select-none items-center focus-visible:outline-2 outline-blue-600 -outline-offset-1",null,a,h),ut(s,"title",n())},[()=>({"text-slate-400":!r(),"dark:text-slate-500":!r()})]),rt(e,s),Ce()}Br(["click"]);function lYt(e,t){x(t)&&e.key=="Escape"&&(H(t,!1),e.stopPropagation())}var cYt=Et("<div><!></div>"),uYt=Et('<div class="relative"><!> <!></div>');function fYt(e,t){Re(t,!0);let n=ie(t,"title",3,""),r=ie(t,"label",3,null),i=ie(t,"icon",3,null),o=ie(t,"anchor",3,"right"),s=wt(!1),a=wt(void 0);Gi(()=>{if(x(a)!=null){let h=g=>{!x(s)||!x(a)||g.target&&!x(a).contains(g.target)&&H(s,!1)},p=x(a).getRootNode();return p.addEventListener("mousedown",h),()=>{p.removeEventListener("mousedown",h)}}});var l=uYt();l.__keydown=[lYt,s];var c=ot(l);Nw(c,{get icon(){return i()},get title(){return n()},get label(){return r()},get checked(){return x(s)},set checked(h){H(s,h,!0)}});var u=mt(c,2);{var f=h=>{var p=cYt();let g;var y=ot(p);iv(y,()=>t.children??vn),et(p),Pt(v=>g=ar(p,1,"absolute top-[30px] px-3 py-3 rounded-md z-20 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 shadow-lg",null,g,v),[()=>({"right-0":o()=="right","left-0":o()=="left"})]),rt(h,p)};Ft(u,h=>{x(s)&&h(f)})}et(l),ds(l,h=>H(a,h),()=>x(a)),rt(e,l),Ce()}Br(["keydown"]);function hYt(e,t,n){t(e.clientX-x(n).getBoundingClientRect().left);let r=o=>{t(o.clientX-x(n).getBoundingClientRect().left)},i=()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",i)}function dYt(e,t,n,r,i){e.key=="ArrowLeft"?t(Math.max(t()-(n()??1),r())):e.key=="ArrowRight"&&t(Math.min(t()+(n()??1),i()))}var pYt=Et('<div class="group relative" role="slider" tabindex="0"><div class="bg-slate-400 dark:bg-slate-500 rounded-full absolute"></div> <div class="bg-blue-500 rounded-full absolute group-hover:bg-blue-600 dark:group-hover:bg-blue-400"></div></div>');function gYt(e,t){Re(t,!0);let n=ie(t,"value",15,0),r=ie(t,"min",3,0),i=ie(t,"max",3,100),o=ie(t,"step",3,void 0),s=100,a=15,l=dt(()=>b=>(b-r())/(i()-r())*(s-a)),c=dt(()=>b=>b/(s-a)*(i()-r())+r()),u=dt(()=>x(l)(n())),f=wt(void 0);function h(b){let _=x(c)(b-a/2);_=Math.max(r(),Math.min(i(),_)),o()!=null&&(_=Math.round(_/o())*o()),n(_)}var p=pYt();p.__mousedown=[hYt,h,f],p.__keydown=[dYt,n,o,r,i],Me(p,"",{},{width:"100px",height:"28px"});var g=ot(p);Me(g,"",{},{left:"0px",top:"12px",width:"100px",height:"4px"});var y=mt(g,2);let v;et(p),ds(p,b=>H(f,b),()=>x(f)),Pt(b=>{ut(p,"aria-valuenow",n()),ut(p,"aria-valuemin",r()),ut(p,"aria-valuemax",i()),v=Me(y,"",v,b)},[()=>({left:`${x(u)??""}px`,top:"6.5px",width:"15px",height:"15px"})]),rt(e,p),Ce()}Br(["mousedown","keydown"]);const u9="0.8.0";var mYt=Ze('<line class="stroke-orange-500"></line><line class="stroke-orange-500"></line><line class="stroke-orange-500"></line><line class="stroke-orange-500"></line>',1),yYt=Ze('<!><circle class="fill-orange-500 stroke-orange-700 stroke-2"></circle>',1),vYt=Ze("<svg><g></g></svg>");function bYt(e,t){Re(t,!0);var n=vYt(),r=ot(n);En(r,21,()=>t.items,Un,(i,o)=>{var s=Mn(),a=Ht(s);{var l=c=>{var u=yYt();const f=dt(()=>t.proxy.location(x(o).x,x(o).y)),h=dt(()=>x(o).id==t.highlightItem?.id);var p=Ht(u);{var g=v=>{var b=mYt(),_=Ht(b),w=mt(_),S=mt(w),k=mt(S);Pt(()=>{ut(_,"x1",x(f).x-20),ut(_,"x2",x(f).x-10),ut(_,"y1",x(f).y),ut(_,"y2",x(f).y),ut(w,"x1",x(f).x+20),ut(w,"x2",x(f).x+10),ut(w,"y1",x(f).y),ut(w,"y2",x(f).y),ut(S,"x1",x(f).x),ut(S,"x2",x(f).x),ut(S,"y1",x(f).y-20),ut(S,"y2",x(f).y-10),ut(k,"x1",x(f).x),ut(k,"x2",x(f).x),ut(k,"y1",x(f).y+20),ut(k,"y2",x(f).y+10)}),rt(v,b)};Ft(p,v=>{x(h)&&v(g)})}var y=mt(p);ut(y,"r",4),Pt(()=>{ut(y,"cx",x(f).x),ut(y,"cy",x(f).y)}),rt(c,u)};Ft(a,c=>{x(o).x!=null&&x(o).y!=null&&c(l)})}rt(i,s)}),et(r),et(n),Pt(()=>{ut(n,"width",t.proxy.width),ut(n,"height",t.proxy.height)}),rt(e,n),Ce()}var _Yt=Et("<div></div>");function wYt(e,t){Re(t,!0);let n=ie(t,"text",3,""),r=ie(t,"renderer",3,"plain"),i=dt(()=>Got[r()]??null);function o(u,f){let h=new f.class(u,{value:f.value});return{update(p){h.update?.({value:p.value})},destroy(){h.destroy?.()}}}var s=Mn(),a=Ht(s);{var l=u=>{var f=To();Pt(()=>ce(f,n())),rt(u,f)},c=u=>{var f=Mn(),h=Ht(f);gS(h,()=>x(i),p=>{var g=_Yt();rP(g,(y,v)=>o?.(y,v),()=>({class:x(i),value:n()})),rt(p,g)}),rt(u,f)};Ft(a,u=>{x(i)==null?u(l):u(c,!1)})}rt(e,s),Ce()}var xYt=Et('<a class="underline" target="_blank"> </a>'),SYt=Et('<div class="px-2 flex gap-2 bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium"> </div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"><!></div></div>'),AYt=(e,t)=>{t.onNearestNeighborSearch?.(t.tooltip.identifier)},EYt=Et('<div><button class="text-sm flex gap-0.5 items-center text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-300"><!> Nearest Neighbors</button></div>'),kYt=Et('<div class="embedding-atlas-root"><div><div class="flex-none"><!></div> <div class="flex-none flex flex-row gap-1 flex-wrap"><!></div> <!></div></div>');function TYt(e,t){Re(t,!0);let n=ie(t,"textRenderer",3,"plain");function r(g){return typeof g=="string"&&(g.startsWith("http://")||g.startsWith("https://"))}var i=kYt(),o=ot(i);let s;Me(o,"",{},{"max-width":"400px","max-height":"300px"});var a=ot(o),l=ot(a);{let g=dt(()=>t.textField==null?t.tooltip.text:t.tooltip.fields?.[t.textField]);wYt(l,{get text(){return x(g)},get renderer(){return n()}})}et(a);var c=mt(a,2),u=ot(c);{var f=g=>{var y=Mn(),v=Ht(y);En(v,17,()=>Object.keys(t.tooltip.fields),Un,(b,_)=>{var w=SYt();const S=dt(()=>t.tooltip.fields[x(_)]?.toString()??"(null)");var k=ot(w),E=ot(k,!0);et(k);var T=mt(k,2),M=ot(T);{var I=C=>{var L=xYt(),F=ot(L,!0);et(L),Pt(()=>{ut(L,"href",x(S)),ce(F,x(S))}),rt(C,L)},$=C=>{var L=To();Pt(()=>ce(L,x(S))),rt(C,L)};Ft(M,C=>{r(x(S))?C(I):C($,!1)})}et(T),et(w),Pt(()=>{ce(E,x(_)),ut(T,"title",x(S))}),rt(b,w)}),rt(g,y)};Ft(u,g=>{t.tooltip.fields!=null&&g(f)})}et(c);var h=mt(c,2);{var p=g=>{var y=EYt(),v=ot(y);v.__click=[AYt,t];var b=ot(v);oVt(b,{}),Td(),et(v),et(y),rt(g,y)};Ft(h,g=>{t.onNearestNeighborSearch&&g(p)})}et(o),et(i),Pt(g=>s=ar(o,1,"p-2 border flex flex-col gap-2 border-slate-500 shadow-md text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 rounded-md text-ellipsis overflow-x-hidden overflow-y-scroll",null,s,g),[()=>({dark:t.darkMode})]),rt(e,i),Ce()}Br(["click"]);function Xot(e){return class{component;constructor(t,n){this.component=Xpt({component:e,target:t,props:n})}update(t){this.component.$set(t)}destroy(){this.component.$destroy()}}}const MYt=Xot(TYt),IYt=Xot(bYt);let Kot=typeof window<"u"?window.matchMedia?.("(prefers-color-scheme: dark)"):null,xA=rg(Kot?.matches??!1);Kot?.addEventListener("change",e=>{xA.set(e.matches)});function RYt(){let e=rg(null);return{darkMode:n6([xA,e],([n,r])=>r??n),userDarkMode:e}}class CYt{storeMap;currentState;notifier;notifier2;constructor(){this.storeMap=new Map,this.currentState={},this.notifier=rg(0),this.notifier2=rg(0)}set(t){for(let n in t)this.currentState[n]=t[n];this.notifier2.update(n=>n+1)}get(){return this.currentState}subscribe(t){return this.notifier.subscribe(()=>{t(this.currentState)})}store(t){let n=this.storeMap.get(t);return n!=null||(n={set:r=>{this.currentState[t]=r,this.notifier.update(i=>i+1)},subscribe:r=>this.notifier2.subscribe(()=>{let i=this.currentState[t]??null;r(i)}),child:r=>this.store(t+"/"+r)},this.storeMap.set(t,n)),n}}class NYt{worker;callbacks;constructor(){this.worker=new Worker(new URL(""+new URL("search.worker-BUvtp12X.js",import.meta.url).href,import.meta.url),{type:"module"}),this.callbacks=new Map,this.worker.onmessage=t=>{let n=this.callbacks.get(t.data.identifier);n!=null&&(this.callbacks.delete(t.data.identifier),n(t.data))}}rpc(t){return new Promise((n,r)=>{let i=new Date().getTime()+"-"+Math.random();this.callbacks.set(i,n),this.worker.postMessage({...t,identifier:i})})}async clear(){await this.rpc({type:"clear"})}async addPoints(t){await this.rpc({type:"points",points:t})}async query(t,n){return(await this.rpc({type:"query",query:t,limit:n})).result}}class $Yt{coordinator;table;columns;backend;currentIndex=null;constructor(t,n,r){this.coordinator=t,this.table=n,this.columns=r,this.currentIndex=null,this.backend=new NYt}predicateString(t){return t!=null&&t.toString()!=""?t.toString():null}async buildIndexIfNeeded(t){let n=this.predicateString(t);if(this.currentIndex!=null&&this.currentIndex.predicate==n)return;let r;n!=null?r=await this.coordinator.query(`
        SELECT
          ${Mt(this.columns.id)} AS id,
          ${Mt(this.columns.text)} AS text
        FROM ${this.table}
        WHERE ${n}
      `):r=await this.coordinator.query(`
        SELECT
          ${Mt(this.columns.id)} AS id,
          ${Mt(this.columns.text)} AS text
        FROM ${this.table}
      `),await this.backend.clear(),await this.backend.addPoints(Array.from(r)),this.currentIndex={predicate:n}}async fullTextSearch(t,n={}){let r=n.limit??100,i=n.predicate;return await this.buildIndexIfNeeded(i),(await this.backend.query(t,r)).map(s=>({id:s}))}}async function OYt(e,t,n,r,i){let o=i.map(u=>u.id),s=new Map,a=new Map;for(let u=0;u<o.length;u++)s.set(o[u],u),a.set(o[u],i[u]);let l=await e.query(`
    SELECT
      ${Mt(n.id,t)} AS id,
      ${n.x?`${Mt(n.x,t)} AS x,`:""}
      ${n.y?`${Mt(n.y,t)} AS y,`:""}
      ${n.text?`${Mt(n.text,t)} AS text,`:""}
    FROM (
      SELECT ${Mt(n.id,t)} AS __search_result_id__
      FROM ${t}
      WHERE
        ${Mt(n.id,t)} IN [${o.map(u=>Zt(u)).join(", ")}]
        ${r?`AND (${r})`:""}
    )
    LEFT JOIN ${t} ON ${Mt(n.id,t)} = __search_result_id__
  `),c=Array.from(l).map(u=>({...u,distance:a.get(u.id)?.distance}));return c=c.sort((u,f)=>(s.get(u.id)??0)-(s.get(f.id)??0)),c}function DYt(e){let{coordinator:t,table:n,idColumn:r,searcher:i,textColumn:o,neighborsColumn:s}=e,a={};if(i!=null&&i.fullTextSearch!=null)a.fullTextSearch=i.fullTextSearch.bind(i);else if(o!=null){let l=new $Yt(t,n,{id:r,text:o});a.fullTextSearch=l.fullTextSearch.bind(l)}return i!=null&&i.nearestNeighbors!=null?a.nearestNeighbors=i.nearestNeighbors.bind(i):s!=null&&(a.nearestNeighbors=async l=>{let c=zt.from(n).select({knn:Mt(s)}).where(Ns(Mt(r),Zt(l))),u=await t.query(c),f=Array.from(u);if(f.length!=1)return[];let{distances:h,ids:p}=f[0].knn;return Array.from(p).map((y,v)=>({id:y,distance:h[v]})).filter(y=>y.id!=l)}),a}const LYt={fontSize:"13px",fontFamily:"system-ui",light:{primaryBackgroundColor:"white",secondaryBackgroundColor:"var(--color-slate-100)",primaryTextColor:"var(--color-slate-500)",secondaryTextColor:"var(--color-slate-400)",tertiaryTextColor:"var(--color-slate-300)",scrollbarPillColor:"var(--color-slate-400)",scrollbarLabelBackgroundColor:"white",rowScrollToColor:"var(--color-blue-200)",rowHoverColor:"var(--color-blue-100)"},dark:{primaryBackgroundColor:"var(--color-slate-900)",secondaryBackgroundColor:"var(--color-slate-800)",primaryTextColor:"var(--color-slate-400)",secondaryTextColor:"var(--color-slate-500)",tertiaryTextColor:"var(--color-slate-600)",scrollbarPillColor:"var(--color-slate-500)",scrollbarLabelBackgroundColor:"var(--color-slate-900)",rowScrollToColor:"var(--color-blue-900)",rowHoverColor:"var(--color-blue-950)"}};function Jot(e,t=1e3){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}function Zot(e,t){e.preventDefault();let n=e.pageX,r=e.pageY,i=s=>{s.preventDefault();let a=s.pageX-n,l=s.pageY-r;t(a,l)},o=()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",o)}function $w(e,t){let n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})),n.download=t,n.click()}function Qot(){let e=window.localStorage.getItem("embedding-atlas-defaults");if(e==null)return{};try{return JSON.parse(e)}catch{return{}}}function FYt(e,t,n){return Qot()[e]??t}function BYt(e,t){let n=Qot();n[e]=t,window.localStorage.setItem("embedding-atlas-defaults",JSON.stringify(n))}var PYt=Et('<div class="p-2"><!></div>'),zYt=Et('<div class="absolute w-96 left-0 top-[32px] rounded-md right-0 z-20 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 overflow-hidden resize shadow-lg"><!></div>'),UYt=Et('<div class="relative"><!> <!> <!></div>'),qYt=Et('<div class="text-slate-500 dark:text-slate-400">Embedding Atlas</div>'),jYt=Et('<div class="select-none flex items-center gap-2"><span class="text-slate-500 dark:text-slate-400">Threshold</span> <!></div>'),VYt=Et("<!> <!> <!>",1),WYt=Et('<h4 class="text-slate-500 dark:text-slate-400 my-2 select-none">Text Style</h4> <!>',1),YYt=Et('<div class="flex flex-row gap-2"><!> <!></div>'),HYt=Et('<div class="min-w-96"><h4 class="text-slate-500 dark:text-slate-400 mb-2 select-none">Tooltip</h4> <!> <!> <h4 class="text-slate-500 dark:text-slate-400 my-2 select-none">Export</h4> <div class="flex flex-col gap-2"><!> <!></div> <h4 class="text-slate-500 dark:text-slate-400 my-2 select-none">About</h4> <div> </div></div>'),GYt=Et('<div class="flex-1 relative bg-white dark:bg-black rounded-md overflow-hidden"><!></div>'),XYt=(e,t)=>{let n=x(t);Zot(e,(r,i)=>H(t,Math.max(60,n-i),!0))},KYt=Et('<div class="h-2 cursor-row-resize"></div>'),JYt=Et("<!> <div><!></div>",1),ZYt=Et('<div class="flex-1 flex flex-col mt-0 ml-2 mb-2 mr-2 overflow-hidden"><!> <!></div>'),QYt=(e,t)=>{let n=x(t);Zot(e,(r,i)=>H(t,Math.max(300,n-r),!0))},tHt=Et('<div class="w-2 -ml-2 cursor-col-resize"></div>'),eHt=Et('<!> <div><div class="w-full rounded-md overflow-x-hidden overflow-y-scroll"><!></div></div>',1),nHt=Et('<div class="embedding-atlas-root"><div><div class="m-2 flex flex-row justify-between items-center"><div class="flex flex-row flex-1 justify-between"><div class="flex flex-row items-center"><div class="flex-1"><!></div></div> <div class="flex flex-row items-center gap-3"><!></div></div> <div class="relative h-full"><div class="absolute left-0 right-0 top-0 bottom-0 overflow-hidden transition-opacity"><div class="flex h-full gap-2 items-center justify-end whitespace-nowrap"><!> <div class="flex flex-row gap-1 items-center"><button class="flex px-2.5 mr-1 select-none items-center justify-center text-slate-500 dark:text-slate-300 rounded-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 focus-visible:outline-2 outline-blue-600 -outline-offset-1" title="Clear filters">Clear</button></div></div></div></div> <div class="w-3"></div> <div class="flex flex-row gap-0.5"><!> <!> <!> <!> <!></div></div> <div class="flex flex-row overflow-hidden h-full"><!> <!></div></div></div>');function tst(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(h,"$userDarkMode",n),o=()=>uo(F,"$plotStateStores",n),s=()=>uo(f,"$darkMode",n),a=500,l=Math.min(20,Skt()),c=300;let u=ie(t,"pointSize",3,null);const{darkMode:f,userDarkMode:h}=RYt();Fr.coordinator=t.coordinator,Fr.darkMode=f,Gi(()=>{switch(t.colorScheme){case"light":Fm(h,!1);break;case"dark":Fm(h,!0);break;case null:Fm(h,null);break}});let p=wt(!1),g=wt(t.projectionColumns!=null),y=wt(t.projectionColumns==null),v=wt(!0),b=wt(320),_=wt(400);const w=new $kt(t.coordinator,t.table);let S=wt("points"),k=wt(0),E=dt(()=>t.projectionColumns!=null?w.defaultViewportScale(t.projectionColumns.x,t.projectionColumns.y):null),T=dt(()=>t.automaticLabels?t.cache!=null?{cache:{get:At=>t.cache.get("labels-"+At),set:(At,Ct)=>t.cache.set("labels-"+At,Ct)}}:!0:!1),M=wt("parquet");const I=sg.crossfilter();function $(){let At=I.predicate(null);return At==null||At.length==0?null:typeof At=="string"?At:At.map(Lt=>Lt.toString()).join(" AND ")}let C=wt([]),L=wt([]),F=new CYt,N=wt(null),O=dt(()=>re(x(C))),D=new eR(1,{duration:c,easing:tR});fe(()=>{D.set(x(v)?1:0)});let B=wt(Aa(FYt("textRenderers",{}))),j=dt(()=>eYt(x(B),t.tableCellRenderers));Gi(()=>{BYt("textRenderers",x(B))});let z=dt(()=>DYt({coordinator:t.coordinator,table:t.table,idColumn:t.idColumn,textColumn:t.textColumn,neighborsColumn:t.neighborsColumn,searcher:t.searcher})),U=dt(()=>x(z).fullTextSearch!=null),V=dt(()=>x(z).vectorSearch!=null),Y=dt(()=>x(z).nearestNeighbors!=null),Z=wt("full-text"),ct=dt(()=>[...x(U)?[{label:"Full Text",value:"full-text"}]:[],...x(V)?[{label:"Vector",value:"vector"}]:[],...x(Y)?[{label:"Neighbors",value:"neighbors"}]:[]]),gt=wt(""),pt=wt(""),lt=wt(!1),yt=wt(null),at=wt(null);async function vt(At,Ct){if(x(z)==null||x(ct).length==0){Q();return}x(ct).map(se=>se.value).indexOf(x(Z))<0&&(Ct=x(ct)[0].value),H(lt,!0),H(pt,"Searching...");let Lt=$(),Ve=[],Ge="",cn=At.toString();Ct=="full-text"&&x(z).fullTextSearch!=null?(At=At.trim(),Ve=await x(z).fullTextSearch(At,{limit:a,predicate:Lt,onStatus:se=>{H(pt,se,!0)}}),Ge=At):Ct=="vector"&&x(z).vectorSearch!=null?(At=At.trim(),Ve=await x(z).vectorSearch(At,{limit:a,predicate:Lt,onStatus:se=>{H(pt,se,!0)}}),Ge=At):Ct=="neighbors"&&x(z).nearestNeighbors!=null&&(cn="Neighbors of #"+At.toString(),Ve=await x(z).nearestNeighbors(At,{limit:a,predicate:Lt,onStatus:se=>{H(pt,se,!0)}}));let gn=await OYt(t.coordinator,t.table,{id:t.idColumn,x:t.projectionColumns?.x,y:t.projectionColumns?.y,text:t.textColumn},Lt,Ve);H(pt,""),H(yt,{label:cn,highlight:Ge,items:gn},!0)}const st=Jot(vt,500);function Q(){H(yt,null),H(lt,!1)}fe(()=>{x(gt)==""?Q():st(x(gt),x(Z))});let It=wt(null),_t=wt(null),Dt=dt(()=>x(_t)??t.textColumn),Ut=dt(()=>x(Dt)!=null?x(B)[x(Dt)]??"plain":"plain"),xt=wt(null);async function qt(At){if(At==null){H(xt,null);return}let Ct=x(C).find(Ve=>Ve.name==At);if(Ct==null)return;let Lt;if(Ct.jsType=="string")Lt=await w.makeCategoryColumn(Ct.name,10);else if(Ct.jsType=="number")Ct.distinctCount<=10?Lt=await w.makeCategoryColumn(Ct.name,10):Lt=await w.makeBinnedNumericColumn(Ct.name);else return;H(xt,Lt),Lt.legend.length>l&&H(S,"points")}fe(()=>{qt(x(It))});async function ue(At,Ct,Lt){if(x(E)==null)return;let Ve=await x(E)*2;if(Ct==null||Lt==null){if(t.projectionColumns==null)return;let cn=(await t.coordinator.query(zt.from(t.table).select({x:Mt(t.projectionColumns.x),y:Mt(t.projectionColumns.y)}).where(Ns(Mt(t.idColumn),Zt(At))))).get(0);Ct=cn.x,Lt=cn.y}x(N)?.startViewportAnimation({x:Ct,y:Lt,scale:Ve})}function Wt(){for(let At of I.clauses)At.source?.reset?.(),I.update({...At,value:null,predicate:null})}function re(At){let Ct={};Ct.id=t.idColumn;for(let Lt of At)Lt.name==t.textColumn||Lt.name==t.projectionColumns?.x||Lt.name==t.projectionColumns?.y||Lt.name==t.idColumn||(Ct[Lt.name]=Lt.name);return Ct}let Ke=wt(null);const le=At=>{H(Ke,At,!0)};function _n(At){if(typeof At.version!="string")return;F.set(At.plotStates??{});function Ct(Lt,Ve){At.view&&Lt in At.view&&Ve(At.view[Lt])}Ct("showEmbedding",Lt=>H(g,Lt,!0)),Ct("showTable",Lt=>H(y,Lt,!0)),Ct("showSidebar",Lt=>H(v,Lt,!0)),Ct("textRenderers",Lt=>H(B,Lt,!0)),Ct("selectedCategoryColumn",Lt=>H(It,Lt,!0)),Ct("embeddingViewMode",Lt=>H(S,Lt,!0)),Ct("minimumDensityExpFactor",Lt=>H(k,Lt,!0)),Ct("userDarkMode",Lt=>Fm(h,Lt)),At.plots!=null&&H(L,At.plots)}Gi(()=>{if(!x(p))return;let At={version:u9,timestamp:new Date().getTime()/1e3,view:{showEmbedding:x(g),showTable:x(y),showSidebar:x(v),textRenderers:x(B),selectedCategoryColumn:x(It),embeddingViewMode:x(S),minimumDensityExpFactor:x(k),userDarkMode:i()},plots:x(L),plotStates:o(),predicate:$()};t.onStateChange?.(At)}),t.initialState&&_n(t.initialState),zg(async()=>{let At=[t.idColumn,t.textColumn,t.projectionColumns?.x,t.projectionColumns?.y].filter(Ct=>Ct!=null);H(C,(await w.columnDescriptions()).filter(Ct=>!Ct.name.startsWith("__"))),x(L).length==0&&H(L,await w.defaultPlots(x(C).filter(Ct=>At.indexOf(Ct.name)<0))),H(p,!0)});function pn(At){if(At.key=="Escape"){Wt(),At.preventDefault();try{document.activeElement?.blur?.()}catch{}}}var cr=nHt();I0("keydown",HT,pn),Me(cr,"",{},{width:"100%",height:"100%"});var xr=ot(cr);let qe;var nn=ot(xr),Pn=ot(nn),Ti=ot(Pn),Yo=ot(Ti),yo=ot(Yo);{var mi=At=>{var Ct=UYt(),Lt=ot(Ct);Cot(Lt,{type:"search",placeholder:"Search...",className:"w-64",get value(){return x(gt)},set value(se){H(gt,se,!0)}});var Ve=mt(Lt,2);{var Ge=se=>{{let un=dt(()=>x(ct).filter(Gn=>Gn.value!="neighbors"));xa(se,{get options(){return x(un)},get value(){return x(Z)},onChange:Gn=>H(Z,Gn,!0)})}};Ft(Ve,se=>{x(ct).filter(un=>un.value!="neighbors").length>1&&se(Ge)})}var cn=mt(Ve,2);{var gn=se=>{var un=zYt();Me(un,"",{},{height:"48em"});var Gn=ot(un);{var Bi=vr=>{sWt(vr,{get items(){return x(yt).items},get label(){return x(yt).label},get highlight(){return x(yt).highlight},limit:a,onClick:async ir=>{le(ir.id),H(at,ir,!0),ue(ir.id,ir.x,ir.y)},onClose:Q})},Cr=vr=>{var ir=Mn(),Pi=Ht(ir);{var vi=Mi=>{var $l=PYt(),vm=ot($l);C8(vm,{get status(){return x(pt)}}),et($l),rt(Mi,$l)};Ft(Pi,Mi=>{x(pt)!=null&&Mi(vi)},!0)}rt(vr,ir)};Ft(Gn,vr=>{x(yt)!=null?vr(Bi):vr(Cr,!1)})}et(un),rt(se,un)};Ft(cn,se=>{x(lt)&&se(gn)})}et(Ct),rt(At,Ct)},yi=At=>{var Ct=qYt();rt(At,Ct)};Ft(yo,At=>{x(z)?At(mi):At(yi,!1)})}et(Yo),et(Ti);var ws=mt(Ti,2),Qu=ot(ws);{var pm=At=>{var Ct=VYt(),Lt=Ht(Ct);{let gn=dt(()=>[{value:null,label:"(none)"},...x(C).filter(se=>se.distinctCount>1&&(se.jsType=="string"&&se.distinctCount<=1e4||se.jsType=="number")).map(se=>({value:se.name,label:`${se.name} (${se.type})`}))]);xa(Lt,{label:"Color",get value(){return x(It)},onChange:se=>H(It,se,!0),get options(){return x(gn)}})}var Ve=mt(Lt,2);{let gn=dt(()=>x(xt)!=null&&x(xt).legend.length>l);xa(Ve,{label:"Display",get value(){return x(S)},onChange:se=>H(S,se,!0),get disabled(){return x(gn)},options:[{value:"points",label:"Points"},{value:"density",label:"Density"}]})}var Ge=mt(Ve,2);{var cn=gn=>{var se=jYt(),un=mt(ot(se),2);gYt(un,{min:-4,max:4,step:.1,get value(){return x(k)},set value(Gn){H(k,Gn,!0)}}),et(se),rt(gn,se)};Ft(Ge,gn=>{x(S)=="density"&&gn(cn)})}rt(At,Ct)};Ft(Qu,At=>{x(g)&&At(pm)})}et(ws),et(Pn);var tf=mt(Pn,2);let vo;var Lc=ot(tf);let kh;var Th=ot(Lc),Sp=ot(Th);KVt(Sp,{get filter(){return I},get table(){return t.table}});var Mh=mt(Sp,2),gm=ot(Mh);gm.__click=Wt,et(Mh),et(Th),et(Lc),et(tf);var Ih=mt(tf,4),Ap=ot(Ih);fYt(Ap,{get icon(){return aVt},title:"Options",children:(At,Ct)=>{var Lt=HYt(),Ve=mt(ot(Lt),2);{let ir=dt(()=>[{value:null,label:t.textColumn??"(none)"},"---",...Object.keys(x(O)).map(Pi=>({value:Pi,label:Pi}))]);xa(Ve,{class:"w-full",get value(){return x(_t)},onChange:Pi=>H(_t,Pi,!0),get options(){return x(ir)}})}var Ge=mt(Ve,2);{var cn=ir=>{var Pi=WYt(),vi=mt(Ht(Pi),2);iYt(vi,{get columns(){return x(C)},get styles(){return x(B)},onStylesChange:Mi=>{H(B,Mi,!0)}}),rt(ir,Pi)};Ft(Ge,ir=>{x(C).length>0&&ir(cn)})}var gn=mt(Ge,4),se=ot(gn);{var un=ir=>{var Pi=YYt(),vi=ot(Pi);c9(vi,{get icon(){return t9},label:"Export Selection",title:"Export the selected points",class:"w-48",onClick:()=>t.onExportSelection($(),x(M))});var Mi=mt(vi,2);xa(Mi,{label:"Format",get value(){return x(M)},onChange:$l=>H(M,$l,!0),options:[{value:"parquet",label:"Parquet"},{value:"jsonl",label:"JSONL"},{value:"json",label:"JSON"},{value:"csv",label:"CSV"}]}),et(Pi),rt(ir,Pi)};Ft(se,ir=>{t.onExportSelection&&ir(un)})}var Gn=mt(se,2);{var Bi=ir=>{c9(ir,{get icon(){return t9},label:"Export Application",title:"Download a self-contained static web application",class:"w-48",get onClick(){return t.onExportApplication}})};Ft(Gn,ir=>{t.onExportApplication&&ir(Bi)})}et(gn);var Cr=mt(gn,4),vr=ot(Cr);et(Cr),et(Lt),Pt(()=>ce(vr,`Embedding Atlas, ${u9}`)),rt(At,Lt)},$$slots:{default:!0}});var Rh=mt(Ap,2);{var mm=At=>{{let Ct=dt(()=>s()?fVt:cVt);wa(At,{get icon(){return x(Ct)},title:"Toggle dark mode",onClick:()=>{Fm(h,!s())}})}};Ft(Rh,At=>{t.colorScheme==null&&At(mm)})}var ef=mt(Rh,2);{var ym=At=>{Nw(At,{get icon(){return Kjt},title:"Show / hide embedding",get checked(){return x(g)},set checked(Ct){H(g,Ct,!0)}})};Ft(ef,At=>{t.projectionColumns!=null&&At(ym)})}var Rt=mt(ef,2);Nw(Rt,{get icon(){return eVt},title:"Show / hide table",get checked(){return x(y)},set checked(At){H(y,At,!0)}});var Yt=mt(Rt,2);Nw(Yt,{get icon(){return rVt},title:"Show / hide sidebar",get checked(){return x(v)},set checked(At){H(v,At,!0)}}),et(Ih),et(nn);var Vt=mt(nn,2),Gt=ot(Vt);{var Qt=At=>{var Ct=ZYt(),Lt=ot(Ct);{var Ve=gn=>{var se=GYt(),un=ot(se);{let Gn=dt(()=>({class:MYt,props:{textRenderer:x(Ut),textField:x(_t),darkMode:s(),onNearestNeighborSearch:x(Y)?async vr=>{vt(vr,"neighbors")}:null}})),Bi=dt(()=>x(yt)?{class:IYt,props:{items:x(yt).items,highlightItem:x(at)}}:null),Cr=dt(()=>F.store("embedding-view"));ds(Ezt(un,{get table(){return t.table},get filter(){return I},get id(){return t.idColumn},get x(){return t.projectionColumns.x},get y(){return t.projectionColumns.y},get text(){return t.textColumn},get additionalFields(){return x(O)},get categoryLegend(){return x(xt)},get mode(){return x(S)},get minimumDensityExpFactor(){return x(k)},get automaticLabels(){return x(T)},get pointSize(){return u()},get customTooltip(){return x(Gn)},get customOverlay(){return x(Bi)},onClickPoint:vr=>le(vr.identifier),get stateStore(){return x(Cr)}}),vr=>H(N,vr),()=>x(N))}et(se),rt(gn,se)};Ft(Lt,gn=>{x(g)&&t.projectionColumns!=null&&gn(Ve)})}var Ge=mt(Lt,2);{var cn=gn=>{var se=JYt(),un=Ht(se);{var Gn=vi=>{var Mi=KYt();Mi.__mousedown=[XYt,b],rt(vi,Mi)};Ft(un,vi=>{x(g)&&vi(Gn)})}var Bi=mt(un,2);let Cr,vr;var ir=ot(Bi);{var Pi=vi=>{var Mi=Mn(),$l=Ht(Mi);gS($l,()=>x(C),vm=>{{let SA=dt(()=>x(C).map(Ep=>Ep.name)),AA=dt(()=>s()?"dark":"light");R5t(vm,{get coordinator(){return t.coordinator},get table(){return t.table},get rowKey(){return t.idColumn},get columns(){return x(SA)},get filter(){return I},get scrollTo(){return x(Ke)},onRowClick:async Ep=>{await ue(Ep),x(N)?.showTooltip(Ep)},numLines:3,get colorScheme(){return x(AA)},get theme(){return LYt},get customCells(){return x(j)},highlightHoveredRow:!0})}}),rt(vi,Mi)};Ft(ir,vi=>{x(C).length>0&&vi(Pi)})}et(Bi),Pt((vi,Mi)=>{Cr=ar(Bi,1,"z-10 bg-white dark:bg-slate-900 rounded-md overflow-hidden",null,Cr,vi),vr=Me(Bi,"",vr,Mi)},[()=>({"h-full":!x(g)}),()=>({height:x(g)?x(b)+"px":null,"--hover-color":"var(--color-amber-200)"})]),Pw(3,Bi,()=>Yx,()=>({duration:c})),rt(gn,se)};Ft(Ge,gn=>{x(y)&&gn(cn)})}et(Ct),rt(At,Ct)};Ft(Gt,At=>{(x(y)||x(g))&&At(Qt)})}var $e=mt(Gt,2);{var rn=At=>{var Ct=eHt();const Lt=dt(()=>!(x(y)||x(g)));var Ve=Ht(Ct);{var Ge=Cr=>{var vr=tHt();vr.__mousedown=[QYt,_],rt(Cr,vr)};Ft(Ve,Cr=>{x(Lt)||Cr(Ge)})}var cn=mt(Ve,2);let gn,se;var un=ot(cn);let Gn;var Bi=ot(un);{let Cr=dt(()=>x(Lt)?"full":"sidebar");GVt(Bi,{get table(){return t.table},get columns(){return x(C)},get filter(){return I},get layout(){return x(Cr)},get stateStores(){return F},get plots(){return x(L)},set plots(vr){H(L,vr)}})}et(un),et(cn),Pt((Cr,vr,ir)=>{gn=ar(cn,1,"flex flex-col mr-2 mb-2 dark:bg-slate-800",null,gn,Cr),se=Me(cn,"",se,vr),Gn=Me(un,"",Gn,ir)},[()=>({"ml-2":x(Lt),"flex-none":!x(Lt),"flex-1":x(Lt)}),()=>({width:x(Lt)?null:`${x(_)}px`}),()=>({width:x(Lt)?null:`${x(_)}px`})]),Pw(3,cn,()=>Yx,()=>({axis:"x",duration:c})),rt(At,Ct)};Ft($e,At=>{x(v)&&At(rn)})}et(Vt),et(xr),et(cr),Pt((At,Ct,Lt)=>{qe=ar(xr,1,"w-full h-full flex flex-col text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,qe,At),vo=Me(tf,"",vo,Ct),kh=Me(Lc,"",kh,Lt)},[()=>({dark:s()}),()=>({"--sidebar-tween":D.current,"--padded-width":`calc(${x(_)??""}px - 149.5px - ${s()?0:1}px)`,"max-width":"var(--padded-width)","flex-basis":"calc(var(--padded-width) * var(--sidebar-tween))"}),()=>({opacity:x(v)?1:0})]),rt(e,cr),Ce(),r()}Br(["click","mousedown"]);class rHt{static connect(t){return new Promise(n=>{let r=new Map,i=(o,...s)=>new Promise((a,l)=>{let c=new Date().getTime()+"-"+Math.random();r.set(c,[a,l]),t.postMessage({rpc:o,id:c,args:s})});t.postMessage({ready:!0}),t.onmessage=o=>{if(o.data.ready){n(i);return}let s=r.get(o.data.id);s!=null&&(r.delete(o.data.id),o.data.error?s[1](new Error(o.data.error)):s[0](o.data.result))}})}static runtime(){let t=new Map,n=async r=>{if(r.data.ready&&postMessage({ready:!0}),r.data.rpc){let o={id:r.data.id,result:null,error:null};try{o.result=await t.get(r.data.rpc)?.(...r.data.args)}catch(s){o.error=s.toString()}postMessage(o)}};return postMessage({ready:!0}),{handler:n,register:(r,i)=>{t.set(r,i)}}}}let UT=null;function iHt(){if(UT==null){let e=new Worker(new URL(""+new URL("embedding.worker-CdV4LVR1.js",import.meta.url).href,import.meta.url),{type:"module"});UT=rHt.connect(e)}return UT}async function*oHt(e,t,n,r,i){let s=(await e.query(zt.from(t).select({count:sr()}))).get(0).count,a=0;for(;a<s;){let l=a,c=a+i;c>s&&(c=s);let u=await e.query(zt.from(t).select({id:Mt(n),value:Mt(r)}).offset(a).limit(c-l));yield{total:s,data:u},a=c}}async function sHt(e,t,n,r,i,o,s){let a=0;await e.exec(`
    ALTER TABLE ${t} ADD COLUMN IF NOT EXISTS ${Mt(r)} DOUBLE DEFAULT 0;
    ALTER TABLE ${t} ADD COLUMN IF NOT EXISTS ${Mt(i)} DOUBLE DEFAULT 0;
  `);for(let l of o){let c=s.subarray(a,a+l.length*2);await e.exec(`
        WITH t1 AS (
            SELECT
                UNNEST([${l.map(u=>Zt(u)).join(",")}]) AS id,
                UNNEST([${l.map((u,f)=>c[f*2]).join(",")}]) AS x,
                UNNEST([${l.map((u,f)=>c[f*2+1]).join(",")}]) AS y
        )
        UPDATE ${t}
            SET ${Mt(r)} = t1.x, ${Mt(i)} = t1.y
            FROM t1 WHERE ${Mt(n,t)} = t1.id
    `),a+=l.length*2}}async function aHt(e){function t(a,l){e.callback?.(a,l)}t(`Loading ${e.model}...`);let n=await iHt(),r=await n("embedding.new",{type:e.type,model:e.model}),i=[],o=0;for await(const{total:a,data:l}of oHt(e.coordinator,e.table,e.idColumn,e.dataColumn,e.type=="text"?64:16)){t("Processing Batches...",o/a*100);let c=Array.from(l.getChild("id")),u=Array.from(l.getChild("value"));await n("embedding.batch",r,u),i.push(c),o+=c.length}t("UMAP Projection...");let s=await n("embedding.finalize",r);await sHt(e.coordinator,e.table,e.idColumn,e.xColumn,e.yColumn,i,s)}const $5={json:{query:"(FORMAT JSON, ARRAY true)",extension:"json"},jsonl:{query:"(FORMAT JSON)",extension:"jsonl"},csv:{query:"(FORMAT CSV)",extension:"csv"},parquet:{query:"(FORMAT parquet)",extension:"parquet"}};function lHt(e,t,n,r){return t==null||t.length==0?ee`COPY ${e} TO ${Zt(n)} ${$5[r].query}`:ee`COPY (SELECT * FROM ${e} WHERE ${t}) TO ${Zt(n)} ${$5[r].query}`}function est(e){return`selection-${Date.now()}.${$5[e].extension}`}async function nst(e,t,n,r){let i=await e.databaseConnector()?.getDuckDB(),o=est(r);await i.registerEmptyFileBuffer(o);let s=lHt(t,n,o,r);await e.query(s.toString());let a=await i.copyFileToBuffer(o);return i.dropFile(o),[a,o]}function f9(e,t){if(e.length>0&&e[e.length-1].text==t.text){let n=e.slice();return n[n.length-1]=t,n}else return[...e,t]}var cHt=Et('<div class="flex items-center text-slate-500 dark:text-slate-500"><div class="w-7 flex-none"><!></div> <div> </div> <div class="flex-none"><!></div></div>'),uHt=Et('<div class="flex flex-col p-4 w-[420px] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"></div>');function fHt(e,t){Re(t,!0);let n=ie(t,"messages",19,()=>[]);var r=uHt();En(r,21,n,Un,(i,o,s)=>{var a=cHt();const l=dt(()=>s==n().length-1);var c=ot(a),u=ot(c);{var f=_=>{C8(_,{status:null})};Ft(u,_=>{x(l)&&_(f)})}et(c);var h=mt(c,2);let p;var g=ot(h,!0);et(h);var y=mt(h,2),v=ot(y);{var b=_=>{var w=To();Pt(S=>ce(w,`${S??""}%`),[()=>x(o).progress.toFixed(0)]),rt(_,w)};Ft(v,_=>{x(o).progress!=null&&x(l)&&_(b)})}et(y),et(a),Pt(_=>{p=ar(h,1,"flex-1",null,p,_),ce(g,x(o).text)},[()=>({"text-red-400":x(o).error})]),rt(i,a)}),et(r),rt(e,r),Ce()}var hHt=Et('<!> <p class="text-slate-400 dark:text-slate-500 mt-4">* All data remains confined to the browser and is not transmitted elsewhere.</p>',1),dHt=Et("<div><!></div>"),pHt=Et('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function h9(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(xA,"$systemDarkMode",n),o=Ya(),s=QI(o,"wasm",null);let a=wt("upload"),l=wt([]),c=null,u=wt(null),f=wt(null),h=wt([]);function p(E,T){H(l,f9(x(l),{text:E,progress:T}))}function g(E){H(l,f9(x(l),{text:E,error:!0}))}async function y(E){H(a,"messages");try{p("Initializing database..."),await s,p("Loading data..."),await(await o.databaseConnector().getDuckDB()).registerFileBuffer(E.name,new Uint8Array(await E.arrayBuffer())),await o.exec(`CREATE TABLE dataset AS SELECT * FROM ${Zt(E.name)}`),H(h,Array.from(await o.query("DESCRIBE TABLE dataset"))),await o.exec(`
        ALTER TABLE dataset DROP COLUMN IF EXISTS __row_index__;
        ALTER TABLE dataset ADD COLUMN __row_index__ INTEGER;
        CREATE SEQUENCE __row_index_sequence__;
        UPDATE dataset SET __row_index__ = nextval('__row_index_sequence__');
        DROP SEQUENCE __row_index_sequence__;
      `)}catch(T){H(a,"messages"),g(T.message);return}H(a,"columns")}async function v(E){H(a,"messages");try{if(H(u,E.text),E.embedding!=null&&"precomputed"in E.embedding&&H(f,{x:E.embedding.precomputed.x,y:E.embedding.precomputed.y}),E.embedding!=null&&"compute"in E.embedding){let T=E.embedding.compute.column,M=E.embedding.compute.type,I=E.embedding.compute.model,$=T+"_proj_x",C=T+"_proj_y";await aHt({coordinator:o,table:"dataset",idColumn:"__row_index__",dataColumn:T,type:M,xColumn:$,yColumn:C,model:I,callback:(L,F)=>{p(`Embedding: ${L}`,F)}}),H(f,{x:$,y:C})}}catch(T){g(T.message);return}H(a,"ready")}async function b(E,T){let[M,I]=await nst(o,"dataset",E,T);$w(M,I)}var _=pHt(),w=ot(_);{var S=E=>{tst(E,{get coordinator(){return o},table:"dataset",initialState:c,idColumn:"__row_index__",get textColumn(){return x(u)},get projectionColumns(){return x(f)},automaticLabels:!0,onExportSelection:b})},k=E=>{var T=dHt();let M;var I=ot(T);{var $=L=>{var F=hHt(),N=Ht(F);Wkt(N,{extensions:[".csv",".parquet",".json",".jsonl"],onUpload:y}),Td(2),rt(L,F)},C=L=>{var F=Mn(),N=Ht(F);{var O=B=>{qkt(B,{get columns(){return x(h)},onConfirm:v})},D=B=>{var j=Mn(),z=Ht(j);{var U=V=>{fHt(V,{get messages(){return x(l)}})};Ft(z,V=>{x(a)=="messages"&&V(U)},!0)}rt(B,j)};Ft(N,B=>{x(a)=="columns"?B(O):B(D,!1)},!0)}rt(L,F)};Ft(I,L=>{x(a)=="upload"?L($):L(C,!1)})}et(T),Pt(L=>M=ar(T,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,M,L),[()=>({dark:i()})]),rt(E,T)};Ft(w,E=>{x(a)=="ready"?E(S):E(k,!1)})}et(_),rt(e,_),Ce(),r()}async function gHt(e,t="gzip"){const n=new CompressionStream(t),i=new Blob([e]).stream().pipeThrough(n);let s=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(s)}async function mHt(e,t="gzip"){const n=new DecompressionStream(t),i=new Blob([e]).stream().pipeThrough(n);let s=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(s)}function yHt(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function vHt(e){const t=atob(e);return new Uint8Array([...t].map(n=>n.charCodeAt(0)))}async function bHt(e){let n=new TextEncoder().encode(JSON.stringify(e)),r=await gHt(n);return yHt(r)}async function _Ht(e){let t=vHt(e),n=await mHt(t),r=new TextDecoder;return JSON.parse(r.decode(n))}async function wHt(){try{let e=window.location.hash,t=e.lastIndexOf("?");return t<0?null:await _Ht(e.slice(t+1))}catch{return null}}async function xHt(e){let n=window.location.hash.lastIndexOf("?"),r=await bHt(e);n<0?window.location.hash+="?"+r:window.location.hash=window.location.hash.slice(0,n)+"?"+r}var SHt=Et('<div class="text-red-600"> </div>'),AHt=Et('<div class="w-72"><!></div>'),EHt=Et("<div><!></div>"),kHt=Et('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function rst(e,t){Re(t,!0);const[n,r]=_s(),i=()=>uo(xA,"$systemDarkMode",n),o=Ya();let s=wt(!1),a=wt(!1),l=wt("Loading..."),c=wt(null),u=wt(null);zg(async()=>{try{H(c,await wHt()),H(l,"Initializing database..."),H(u,await t.dataSource.initializeCoordinator(o,"dataset",_=>{H(l,_,!0)})),H(s,!0)}catch(_){H(a,!0),H(l,_.message,!0);return}});async function f(_,w){t.dataSource.downloadSelection&&await t.dataSource.downloadSelection(_,w)}async function h(){t.dataSource.downloadArchive&&await t.dataSource.downloadArchive()}function p(_){xHt({..._,predicate:void 0})}var g=kHt(),y=ot(g);{var v=_=>{{let w=dt(()=>t.dataSource.downloadArchive?h:null),S=dt(()=>t.dataSource.downloadSelection?f:null),k=dt(()=>Jot(p,200));tst(_,{get coordinator(){return o},table:"dataset",get initialState(){return x(c)},get idColumn(){return x(u).id},get textColumn(){return x(u).text},get projectionColumns(){return x(u).embedding},get neighborsColumn(){return x(u).neighbors},get cache(){return t.dataSource.cache},automaticLabels:!0,get pointSize(){return x(u).pointSize},get onExportApplication(){return x(w)},get onExportSelection(){return x(S)},get onStateChange(){return x(k)}})}},b=_=>{var w=EHt();let S;var k=ot(w);{var E=M=>{var I=SHt();Me(I,"",{},{"max-width":"36rem"});var $=ot(I,!0);et(I),Pt(()=>ce($,x(l))),rt(M,I)},T=M=>{var I=AHt(),$=ot(I);C8($,{get status(){return x(l)}}),et(I),rt(M,I)};Ft(k,M=>{x(a)?M(E):M(T,!1)})}et(w),Pt(M=>S=ar(w,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,S,M),[()=>({dark:i()})]),rt(_,w)};Ft(y,_=>{x(s)&&x(u)!=null?_(v):_(b,!1)})}et(g),rt(e,g),Ce(),r()}function J_(e,t){return t.startsWith(".")&&(t=t.slice(1)),e.endsWith("/")&&t.startsWith("/")?e+t.slice(1):!e.endsWith("/")&&!t.startsWith("/")?e+"/"+t:e+t}class THt{serverUrl;downloadArchive=void 0;downloadSelection=void 0;constructor(t){if(t.startsWith("http"))this.serverUrl=t;else{let n=window.location.origin+window.location.pathname;n=n.replace(/\/[^/]*$/,"/"),this.serverUrl=J_(n,t)}}async initializeCoordinator(t,n,r){let i=await this.metadata();r("Initializing DuckDB...");let o=i.database?.type??"wasm";if(await QI(t,o,i.database?.uri??J_(this.serverUrl,"query")),i.database?.load){r("Loading data...");let s=J_(this.serverUrl,"dataset.parquet");await t.exec(`
        CREATE OR REPLACE TABLE ${n} AS (SELECT * FROM read_parquet(${Zt(s)}));
      `)}return i.is_static||(this.downloadArchive=async()=>{let a=await(await this.fetchEndpoint("archive.zip")).arrayBuffer();$w(a,"embedding-atlas.zip")}),o=="wasm"?this.downloadSelection=async(s,a)=>{let[l,c]=await nst(t,n,s,a);$w(l,c)}:i.is_static||(this.downloadSelection=async(s,a)=>{let l=est(a),u=await(await this.fetchEndpoint("selection",{method:"POST",body:JSON.stringify({predicate:s,format:a})})).arrayBuffer();$w(u,l)}),{...i.columns,pointSize:i.pointSize}}async fetchEndpoint(t,n){let r=await fetch(J_(this.serverUrl,t),n);if(r.status!=200)throw new Error("ERROR FETCH");return r}async metadata(){try{return await this.fetchEndpoint("metadata.json").then(t=>t.json())}catch{throw new Error("Network Error: Failed to fetch dataset metadata")}}async cacheGet(t){try{return await this.fetchEndpoint("cache/"+t).then(n=>n.json())}catch{return null}}async cacheSet(t,n){try{await this.fetchEndpoint("cache/"+t,{method:"POST",body:JSON.stringify(n)})}catch{}}cache={get:t=>this.cacheGet(t),set:(t,n)=>this.cacheSet(t,n)}}function MHt(e,t){Re(t,!1);let n="./data/",r=new THt(n);t6(),rst(e,{get dataSource(){return r}}),Ce()}function IHt(e,t){Re(t,!1);class n{count;constructor(o){this.count=o}async initializeCoordinator(o,s){return await QI(o,"wasm"),await o.exec(`
        SELECT setseed(0.42);

        CREATE OR REPLACE MACRO random_normal() AS (sqrt(-2 * LN(random())) * cos(2 * PI() * random()));
        CREATE OR REPLACE MACRO random_choice(list, f) AS list_element(list, 1 + floor(pow(random(), f) * len(list))::INT);
        CREATE OR REPLACE MACRO random_invalid(x) AS CASE WHEN random() < 0.02 THEN random_choice(['NaN','Inf','-Inf', Null], 2)::DOUBLE ELSE x END;
        CREATE OR REPLACE MACRO random_string(prefix) AS prefix || LPAD(FLOOR(POW(RANDOM(), 1.3) * 1000)::INT::VARCHAR, 3, '0');
        CREATE OR REPLACE MACRO shuffle_hash(x, v) AS x + hash(v) % 5;

        CREATE OR REPLACE TABLE ${s} AS (
          SELECT
            id,
            'sample text' AS text,
            random_choice(['Apple', 'Orange', 'Pink-flowered Native Raspberry', null], 2) AS var_category,
            concat('Category', (150 * abs(sin(20 * pow(random(), 5))))::INT::TEXT) AS var_many_category,
            list_distinct(list_transform(range(1, 4), (x) -> random_choice(['Apple', 'Orange', 'Banana', 'Raspberry', 'Pear'], 2))) AS var_multi_category,
            list_distinct(list_transform(range(1, 4), (x) -> random_string('Cat'))) AS var_multi_many_category,
            random() AS var_uniform,
            random_invalid(random_normal()) AS var_normal,
            random_invalid(exp(random_normal() + 1)) AS var_log_normal,
            random_invalid(random_normal() + 1000) AS var_normal_biased,
            random_invalid(random_normal() - 1000) AS var_normal_biased_negative,
            random_normal() AS x,
            random_normal() AS y
          FROM range(0, ${this.count}) t(id)
        );

        UPDATE ${s} SET var_normal = var_normal + 5 WHERE var_log_normal < exp(random());
        UPDATE ${s} SET var_normal_biased = var_normal_biased + random() * var_normal;
        UPDATE ${s} SET var_normal_biased_negative = var_normal_biased_negative + random() * var_normal;
        UPDATE ${s} SET
          x = sin(10 * shuffle_hash(var_uniform, var_category)) * x + cos(5 * shuffle_hash(var_uniform, var_category)) * y,
          y = sin(4 * shuffle_hash(var_uniform, var_category)) * x + cos(18 * shuffle_hash(var_uniform, var_category)) * y;
        UPDATE ${s} SET x = x + 5 * fmod(floor(var_uniform * 24 + random()), 5);
        UPDATE ${s} SET y = y + 5 * floor(floor(var_uniform * 24 + random()) / 5);
      `),{id:"id",embedding:{x:"x",y:"y"},text:"text"}}}let r=new n(1e5);return t6(),rst(e,{get dataSource(){return r}}),jpt(t,"TestDataSource",n),Ce({get TestDataSource(){return n},set TestDataSource(i){n=i}})}function RHt(e){const t={"/":window?.EMBEDDING_ATLAS_HOME=="upload"?h9:MHt,"/test":IHt,"/upload":h9};r0t(e,{get routes(){return t}})}J5(RHt,{target:document.getElementById("app")});
